Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_Inclusion_NPCDialog(TEST_CRE_ChainOfCommand_Vlaakith_Combined_ddbb8a73-d95d-124b-16ef-1d91e4eb687c, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_Inclusion_NPCDialog(TEST_CRE_ChainOfCommand_Vlaakith_Combined_ddbb8a73-d95d-124b-16ef-1d91e4eb687c, S_CRE_SecurityOfficer01_64445697-2adc-4784-883e-392bae899892);
DB_Inclusion_NPCDialog(TEST_CRE_ChainOfCommand_Vlaakith_Combined_ddbb8a73-d95d-124b-16ef-1d91e4eb687c, S_CRE_SecurityOfficer02_475367c4-aace-4884-af66-16097e2d2119);
DB_Inclusion_NPCDialog(TEST_CRE_ChainOfCommand_Vlaakith_Combined_ddbb8a73-d95d-124b-16ef-1d91e4eb687c, S_CRE_IntelligenceOfficer01_c76d7d19-3d46-44e5-a914-80efc8cac4ea);
DB_Inclusion_NPCDialog(TEST_CRE_ChainOfCommand_Vlaakith_Combined_ddbb8a73-d95d-124b-16ef-1d91e4eb687c, S_CRE_IntelligenceOfficer02_a17c356a-6e0c-4d2f-bcf6-58195d6c9edf);
DB_CRE_ChainOfCommand_GithGuardsMonastery(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77);
DB_CRE_ChainOfCommand_GithGuardsMonastery(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21);
DB_CRE_ChainOfCommand_Cultists(S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc);
DB_CRE_ChainOfCommand_Cultists(S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8);
DB_CRE_ChainOfCommand_Cultists(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6);
SetHitpoints(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, 1);
PROC_SelfHealing_Disable(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6);
DB_GLO_CharacterCorpseDialog(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, CRE_ChainOfCommand_Cultist03_Dead_43c3b807-01f9-6fa1-7c5c-c99867fb4e78);
DB_SceneManager(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, "CRE_CultistsCapture");
DB_SceneManager(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, "CRE_CultistsCapture");
DB_SceneManager(S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc, "CRE_CultistsCapture");
DB_SceneManager(S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8, "CRE_CultistsCapture");
DB_SceneManager(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, "CRE_CultistsCapture");
DB_SceneTriggerManager("CRE_CultistsCapture", S_CRE_CultistsCaptureSceneManagerBox_027f728a-c8cb-4109-8edb-d37537ae1d69);
DB_SceneAllowAllDisturbances("CRE_CultistsCapture");
DB_CRE_ChainOfCommand_CultistCaptureSkipSceneTriggers(S_CRE_HiddenEntranceArea_a14398bb-31eb-4c48-8bfc-3ab753e1a9a5);
DB_CRE_ChainOfCommand_CultistCaptureSkipSceneTriggers(S_CRE_MonasteryChapelArea_953d0b38-cbbe-44fa-a488-0df0eb303f24);
DB_CRE_ChainOfCommand_CultistCaptureStartTriggers(S_CRE_CultistsCapture_CinematicIncludeZone_Main_73ce1fa9-babf-4bf0-bcac-ba6608cd1fc1);
DB_GLO_DefeatCounter(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, "CRE_ChainOfCommand_Cultist03_Killed");
PROC_TriggerRegisterForParty(S_CRE_CultistCaptureProximityZone_e8dabda7-a8f3-499d-a784-98d075d62b1c);
DB_CRE_ChainOfCommand_GithEnteringMovementSpeed("Walk");
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_MonasteryGuardsStartWalkingDuringDialog_1f2f29ac-171e-4c13-b08d-341f9c1db1df, CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f);
DB_CRE_CultistCapture_Walkers(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77);
DB_CRE_CultistCapture_Walkers(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21);
DB_CRE_CultistCapture_Walkers(S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc);
DB_CRE_CultistCapture_Walkers(S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8);
DB_GLO_DieFlag(CRE_ChainOfCommand_Event_CultistKilled_332e2299-7888-41ee-9569-a953d10ebcb7, S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, 0, S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77);
DB_DefeatedEvent(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, CRE_Captain_State_Defeated_893be13f-b4fc-4366-a4be-a5005a94b7ce);
DB_CRE_ChainOfCommand_CaptainsBeasts(S_CRE_CaptainsBeast01_82736dcd-8648-4795-a296-21aa1bcaf096);
DB_CRE_ChainOfCommand_CaptainsBeasts(S_CRE_CaptainsBeast02_fcd64862-67ba-4358-9636-09ff9545177a);
DB_DoNotFaceDialog(S_CRE_CaptainsBeast01_82736dcd-8648-4795-a296-21aa1bcaf096, CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa);
DB_DoNotFaceDialog(S_CRE_CaptainsBeast02_fcd64862-67ba-4358-9636-09ff9545177a, CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa);
DB_DoNotFaceDialog(S_CRE_CaptainsBeast01_82736dcd-8648-4795-a296-21aa1bcaf096, CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776);
DB_DoNotFaceDialog(S_CRE_CaptainsBeast02_fcd64862-67ba-4358-9636-09ff9545177a, CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776);
DB_CRE_ChainOfCommand_GithSquad(S_CRE_CaptainOfficeSquad01_705a1532-c8f8-40a2-8e9c-92870a482ad6);
DB_CRE_ChainOfCommand_GithSquad(S_CRE_CaptainOfficeSquad02_f1aa11c8-9354-4f19-8cf8-29be654edbdb);
DB_CRE_ChainOfCommand_GithSquad(S_CRE_CaptainOfficeSquad03_9c72cc0e-d0a7-4faf-977c-0aa042de48cd);
DB_CRE_ChainOfCommand_GithSquad(S_CRE_CaptainOfficeSquad04_6b828722-2223-4927-9d7b-4ad487607965);
DB_CRE_ChainOfCommand_GithSquad(S_CRE_CaptainOfficeSquad05_4fe3950a-f1c5-4d66-a974-97aa026b95b7);
DB_CRE_CrecheTraps_PsionicBarriers(S_CRE_LathanderBarrier_CaptainsOffice_00f4e951-5514-43c7-8e45-4b1f77b2dba7, S_CRE_PsionicBarrierPlaceholder_Pipe_Captain_On_c9565fcb-1f02-40d6-9395-caf60c6f61e6, S_CRE_PsionicBarrierPlaceholder_Pipe_Captain_Off_59215bfd-1d1a-4262-adbc-065dae3f11d6, S_CRE_LathanderBarrier_Captain_VFXPos_f873391f-d751-40da-a3f3-0182baee5d71);
PROC_CRE_CrecheTraps_PsionicBarriers_Deactivate(S_CRE_LathanderBarrier_CaptainsOffice_00f4e951-5514-43c7-8e45-4b1f77b2dba7);
DB_SceneManager(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, "CRE_CaptainsQuarters");
DB_SceneTriggerManager("CRE_CaptainsQuarters", S_CRE_CaptainQuartersSpottingArea_e05acf72-25b6-4cca-93d7-da8790fc9a51);
SetFlag(CRE_ChainOfCommand_State_CaptainTalkingToTemplar_0b2b9e15-d9d4-4977-9cb9-bc81c63aa122);
PROC_TriggerRegisterForPlayers(S_CRE_CaptainDialogTriggerArea_b7218282-a0f0-4e31-8d20-590cfe062ae8);
DB_Dialogs(S_CRE_CaptainGuard_ea4643de-cc2c-42f0-949d-4968201ad2c7, CRE_CaptainGuard_c52f0671-ac21-542d-e232-0ebc78974a36);
DB_Dialogs(S_CRE_CaptainsBeast01_82736dcd-8648-4795-a296-21aa1bcaf096, CRE_CaptainBeast01_cb4a6641-4d9f-c3f7-0054-6fd40ec28221);
DB_Dialogs(S_CRE_CaptainsBeast02_fcd64862-67ba-4358-9636-09ff9545177a, CRE_CaptainBeast02_f610fa10-9bfb-07a7-150f-283c398f08ef);
DB_DoNotFaceDialog(S_CRE_CaptainsBeast01_82736dcd-8648-4795-a296-21aa1bcaf096, CRE_CaptainBeast01_cb4a6641-4d9f-c3f7-0054-6fd40ec28221);
DB_DoNotFaceDialog(S_CRE_CaptainsBeast02_fcd64862-67ba-4358-9636-09ff9545177a, CRE_CaptainBeast02_f610fa10-9bfb-07a7-150f-283c398f08ef);
DB_Dialogs(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_TemplarLeavesCaptainDialog_c5263176-8df5-4e8d-a51e-e5bc35715f51, CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_CaptainCombatStarts_8057c0ff-7254-4dd9-a5e3-8782cb45af15, CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_State_CaptainLeaves_0a9a9f3b-a833-41b2-a182-9bcb16304021, CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_State_CaptainBarrierDeactivated_fdfdbc4d-1713-495e-ad74-e969cfaf2b00, CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_CaptainDeactivatesBarrier_df6f6bd2-63eb-4a96-9f06-2ed06a621a05, CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_CaptainActivatesBarrier_1eea28d3-8058-4918-a94d-82e0ae57b46b, CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa);
DB_DialogBlockAttackButton(CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa);
DB_DialogBlockTradeButton(CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa);
DB_DialogBlockTradeButton(CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776);
DB_AddCharactersInTriggerToDialog(CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776, S_CRE_CaptainQuartersSpottingArea_e05acf72-25b6-4cca-93d7-da8790fc9a51, 1, 0, 0);
PROC_TriggerRegisterForPlayers(S_CRE_CaptainQuartersSpottingArea_e05acf72-25b6-4cca-93d7-da8790fc9a51);
PROC_TriggerRegisterForPlayers(S_CRE_PastCaptinBarrierDetect_192a2f9e-56d7-45a2-a891-f5f57bc4ab18);
DB_CRE_CaptainsOffice_PassThroughForbidden(1);
DB_CRE_CaptainsOffice_PotentialFighters(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565);
DB_CRE_CaptainsOffice_PotentialFighters(S_CRE_IntelligenceOfficer01_c76d7d19-3d46-44e5-a914-80efc8cac4ea);
DB_CRE_CaptainsOffice_PotentialFighters(S_CRE_CaptainsBeast01_82736dcd-8648-4795-a296-21aa1bcaf096);
DB_CRE_CaptainsOffice_PotentialFighters(S_CRE_CaptainsBeast02_fcd64862-67ba-4358-9636-09ff9545177a);
DB_CombatReact_AD_OnTurn(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, CRE_ChainOfCommand_AD_SecondTurn_789c3198-ae0c-4760-e257-4a898853c294, 2);
DB_CombatReact_AD_OnTurn(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, CRE_ChainOfCommand_AD_ThirdTurn_d287ae6a-8e4b-9759-2128-568e6e3886eb, 3);
DB_GLO_InfernalBox_ValidOwners(S_CRE_TempContainerOfPuzzlebox_6396399c-ce1e-48db-97e2-cbfd40b64dd7);
DB_DangerZone(S_CRE_SecurityOfficeArea_4f8819f5-4898-4db1-b3bd-92d24c51c80f, "CRE_ChainOfCommand_SecurityOffice");
DB_DangerZone(S_CRE_BridgeToSecOffice_3a8c9a1f-d9a8-4892-9717-b4634e0fc563, "CRE_ChainOfCommand_SecurityOffice");
DB_DangerZone(S_CRE_CaptainsQuarters_SUB_db13ba17-5fdf-4684-9c12-d84648d542ab, "CRE_ChainOfCommand_SecurityOffice");
DB_CRE_ChainOfCommand_SecurityOfficers(S_CRE_SecurityOfficer01_64445697-2adc-4784-883e-392bae899892);
DB_CRE_ChainOfCommand_SecurityOfficers(S_CRE_SecurityOfficer02_475367c4-aace-4884-af66-16097e2d2119);
DB_SceneManager(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, "CRE_SecurityOffice");
DB_SceneManager(S_CRE_SecurityOfficer01_64445697-2adc-4784-883e-392bae899892, "CRE_SecurityOffice");
DB_SceneManager(S_CRE_SecurityOfficer02_475367c4-aace-4884-af66-16097e2d2119, "CRE_SecurityOffice");
DB_SceneManager(S_CRE_IntelligenceOfficer03_266e49a3-83f8-40aa-baff-5ffe2a1a35db, "CRE_SecurityOffice");
DB_SceneManager(S_CRE_IntelligenceOfficer04_f51854ec-5dbc-4686-bb4a-b2f8b4c5341b, "CRE_SecurityOffice");
DB_SceneTriggerManager("CRE_SecurityOffice", S_CRE_SecurityOfficeSpottingArea_de03f3aa-3dd2-4c3b-82f7-40af185a4d23);
DB_SceneAllowAllDisturbances("CRE_SecurityOffice");
SetHasDialog(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, 1);
DB_GLO_CharacterCorpseDialog(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_ChainOfCommand_SWD_Templar_4be39322-cd68-ab00-460b-06183c6d8bea);
DB_Inclusion_NPCDialog(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, S_CRE_SecurityOfficer01_64445697-2adc-4784-883e-392bae899892);
DB_Inclusion_Object(S_CRE_SecurityOfficer01_64445697-2adc-4784-883e-392bae899892, CRE_ChainOfCommand_SecurityOfficer01_StartInclusion_95e2fc44-12d0-4744-b80b-68cd4741af43, CRE_ChainOfCommand_SecurityOfficer01_EndInclusion_c7de9c3b-44a7-42c5-9acb-1f1bf388f9cc);
DB_Inclusion_NPCDialog(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, S_CRE_SecurityOfficer02_475367c4-aace-4884-af66-16097e2d2119);
DB_Inclusion_Object(S_CRE_SecurityOfficer02_475367c4-aace-4884-af66-16097e2d2119, CRE_ChainOfCommand_SecurityOfficer02_StartInclusion_051b26b4-6fbf-4fa1-b9ac-c57ab842b710, CRE_ChainOfCommand_SecurityOfficer02_EndInclusion_f6a5cc8d-b32b-480e-af73-dac52d712ea1);
DB_Inclusion_NPCDialog(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, S_CRE_IntelligenceOfficer01_c76d7d19-3d46-44e5-a914-80efc8cac4ea);
DB_Inclusion_NPCDialog(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, S_CRE_IntelligenceOfficer02_a17c356a-6e0c-4d2f-bcf6-58195d6c9edf);
DB_Inclusion_NPCDialog(CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_Inclusion_Object(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_ChainOfCommand_Templar_StartInclusion_3225efb3-d256-4666-997b-ece440bcf153, NULL_00000000-0000-0000-0000-000000000000);
DB_Inclusion_NPCDialog(CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d, S_CRE_SecurityOfficer01_64445697-2adc-4784-883e-392bae899892);
DB_Inclusion_NPCDialog(CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d, S_CRE_SecurityOfficer02_475367c4-aace-4884-af66-16097e2d2119);
DB_Inclusion_NPCDialog(CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d, S_CRE_IntelligenceOfficer01_c76d7d19-3d46-44e5-a914-80efc8cac4ea);
DB_Inclusion_Object(S_CRE_IntelligenceOfficer01_c76d7d19-3d46-44e5-a914-80efc8cac4ea, CRE_ChainOfCommand_IntelligenceOfficer01_StartInclusion_8dc359b1-38fd-429d-afb0-ffc21b6c962f, NULL_00000000-0000-0000-0000-000000000000);
DB_Inclusion_NPCDialog(CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d, S_CRE_IntelligenceOfficer02_a17c356a-6e0c-4d2f-bcf6-58195d6c9edf);
DB_Inclusion_Object(S_CRE_IntelligenceOfficer02_a17c356a-6e0c-4d2f-bcf6-58195d6c9edf, CRE_ChainOfCommand_IntelligenceOfficer02_StartInclusion_234f0a3b-4ccd-4802-a867-2d63a612183c, NULL_00000000-0000-0000-0000-000000000000);
DB_CustomDialogRange(S_CRE_IntelligenceOfficer03_266e49a3-83f8-40aa-baff-5ffe2a1a35db, 20);
DB_CustomDialogRange(S_CRE_IntelligenceOfficer04_f51854ec-5dbc-4686-bb4a-b2f8b4c5341b, 20);
PROC_TriggerRegisterForParty(S_CRE_TemplarDialog_MainCinematicIncludeZone_0ffda93f-bbf3-47b0-9fce-ed099c04d45f);
DB_AddCharactersInTriggerToDialog(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, S_CRE_TemplarDialog_MainCinematicIncludeZone_0ffda93f-bbf3-47b0-9fce-ed099c04d45f, 1, 0, 0);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_State_SecurityOfficeHostile_04a08ea2-98de-4711-8cd1-9fa6e145a841, CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_State_SecurityOfficeHostile_04a08ea2-98de-4711-8cd1-9fa6e145a841, CRE_ChainOfCommand_TemplarStartsFight_ab5ddb04-eece-e8c0-9b5a-69c8ee8534ac);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_State_SecurityOfficeHostile_04a08ea2-98de-4711-8cd1-9fa6e145a841, CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_State_SecurityOfficeHostile_04a08ea2-98de-4711-8cd1-9fa6e145a841, CRE_AstralPrison_Entering_a84e5d45-33be-b325-08cf-41acdb848ce2);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_EnteredAstralPrisonWithTemplar_cdb2f604-80b0-48f4-bbbc-2835ae89a6f8, CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856);
DB_FlagReactionAfterDialog(CRE_ChainOfCommand_Event_ShowedArtifactToTemplar_14e19375-1dfc-4b50-9f32-732bda87a19c, CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856);
DB_GlobalFlagReactionAfterDialog(CRE_AstralPrison_State_BoxUnlocked_07e04b03-e958-461c-bda9-b4131da6884b, CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561, CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d);
DB_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_VlaakithWish_cbcac30e-421f-4cb3-a715-e5d047306fbc, CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d);
DB_DialogBlockTradeButton(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856);
DB_DropMutingStatussesDialog(CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d);
DB_DialogBlockAttackButton(CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d);
DB_DialogBlockTradeButton(CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d);
DB_DialogBlockTradeButton(CRE_ChainOfCommand_TemplarStartsFight_ab5ddb04-eece-e8c0-9b5a-69c8ee8534ac);
DB_PermaDefeatedEvent(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_Templar_State_Permadefeated_4d8321fe-ec33-4598-927a-c4fc0812ae3a);
DB_DefeatedEvent(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_Templar_State_Defeated_72fed344-b60d-44f3-a895-4bfb3fee7426);
DB_CustomDialogRange(S_GLO_Vlaakith_6b00f9fb-b932-4ac9-8ed8-1ca89dd7d247, 5000);
PROC_TriggerRegisterForPlayers(S_CRE_SecurityOfficeArea_4f8819f5-4898-4db1-b3bd-92d24c51c80f);
SetOnStage(S_CRE_AstralPrisonEntrance_c8295f70-f69a-4a49-961f-309141d98bc0, 0);
DB_CRE_ChainOfCommand_Planecaster(S_CRE_SecurtiyOfficePlanecaster_9144098a-c9c7-4425-a99d-d7375069e7b7);
DB_DropMutingStatussesDialog(CRE_ChainOfCommand_TemplarStartsFight_ab5ddb04-eece-e8c0-9b5a-69c8ee8534ac);
DB_DropMutingStatussesDialog(CRE_ChainOfCommand_Betrayal_OM_Laezel_COM_37646009-a3de-b772-d063-0d85c053ed88);
DB_GlobalFlagReactionAfterDialog(CRE_AstralPrison_State_AstralPrisonWasEntered_2203e87a-6c7b-4aba-b2e8-e22ed96b9762, CRE_AstralPrison_Entering_a84e5d45-33be-b325-08cf-41acdb848ce2);
DB_CRE_ChainOfCommand_TemplarADsPlayed(0);
DB_CombatReact_AD_OnEntered(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_ChainOfCommand_AD_TemplarTurnsCreacheHostile_318a7dda-c19e-fbdf-7fb3-ff9887063116);
DB_CombatReact_AD_OnTurn(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_ChainOfCommand_AD_TemplarCombatThirdLine_4a94a362-cd9a-8abe-5e8f-e44fa0f39791, 2);
DB_CombatReact_AD_OnTurn(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_ChainOfCommand_AD_TemplarCombatSecondLine_7f992f5b-b0b9-1282-ae38-14d0468d9cbf, 3);
DB_CombatReact_AD_OnCast(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_ChainOfCommand_AD_TemplarCombatFirstLine_ec898b4b-7313-7758-5346-5bdc7bc2c4ba, "Shout_CRE_GithyankiInquisitor_Mindsteal_Tempest");
DB_GLO_DefeatCounter(S_CRE_IntelligenceOfficer03_266e49a3-83f8-40aa-baff-5ffe2a1a35db, "CRE_InquisitorCombat_KillCounter_Minion");
DB_GLO_DefeatCounter(S_CRE_IntelligenceOfficer04_f51854ec-5dbc-4686-bb4a-b2f8b4c5341b, "CRE_InquisitorCombat_KillCounter_Minion");
DB_GLO_DefeatCounter(S_CRE_SecurityOfficer01_64445697-2adc-4784-883e-392bae899892, "CRE_InquisitorCombat_KillCounter_Minion");
DB_GLO_DefeatCounter(S_CRE_SecurityOfficer02_475367c4-aace-4884-af66-16097e2d2119, "CRE_InquisitorCombat_KillCounter_Minion");
PROC_TriggerRegisterForPlayers(S_CRE_CaptainJustOutsideDoorArea_29a0099a-4d92-4018-aa7c-0ca5ebe27e87);
PROC_TriggerRegisterForPlayers(S_CRE_SecurityOfficeJustOutsideDoorArea_15d77415-84dd-4dca-a446-ed7f755b1070);
DB_CRE_ChainOfCommand_DoorAreas(DOOR_GEN_DoubleBig_Metal_A_000_dbe0ccb4-7eeb-4388-88d1-a5571b6f5175, S_CRE_SecurityOfficeJustOutsideDoorArea_15d77415-84dd-4dca-a446-ed7f755b1070);
DB_CRE_ChainOfCommand_DoorAreas(S_CRE_CaptainsRoomDoor_4086aa49-b44b-462e-9c4b-8e27bdf3edcb, S_CRE_CaptainJustOutsideDoorArea_29a0099a-4d92-4018-aa7c-0ca5ebe27e87);

KBSECTION
IF
TextEvent("cre_gotocaptain", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_CRE_DebugPos_CaptainQuarters_96105be8-e699-48dd-9574-388ee320e8de, "", 1, 1, 1, 1, 1);

IF
TextEvent("cre_captaincombat", _, _, _, _)
THEN
PROC_CRE_ChainOfCommand_CaptainCombatStart();

IF
TextEvent("cre_setboxtemplar", _, _, _, _)
THEN
SetFlag(CRE_ChainOfCommand_State_ShowedBoxToTemplar_9c52fb50-caa1-4039-b8df-3d43c9734de7, NULL_00000000-0000-0000-0000-000000000000);

IF
TextEvent("cre_gotosecurity", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_CRE_DebugPos_SecurityOffice_a3ef5651-deb1-47b3-8700-f23c2a836a57, "", 1, 1, 1, 1, 1);

IF
TextEvent("cre_securitycombat", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_CRE_TemplarHostilePos_34b2a7e6-5743-48d8-aa53-26850a5e3e83, "", 1, 1, 1, 1, 1);
TeleportTo(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, S_CRE_TemplarSecurityOfficePos_4c46984d-d512-4b35-9df9-9c7ed50c49c4, "", 0, 0, 0, 1, 1);
PROC_CRE_ChainOfCommand_StartSecurityOfficeCombat();

IF
TextEvent("cre_officersleave", _, _, _, _)
THEN
PROC_CRE_ChainOfCommand_OfficersLeave();
SetFlag(CRE_ChainOfCommand_Event_OfficersLeave_23e1ccb8-12fd-44f2-bc20-f1ffa1bb6563);

IF
TextEvent("cre_crechehostile", _, _, _, _)
THEN
PROC_CRE_CrecheHostile();

IF
TextEvent("cre_givepuzzlebox", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_InfernalBox_Event_ForceGiveBox_7addbb64-502f-48aa-9b71-da1b8d6c28eb, _Var1, 0);

PROC
PROC_CRE_SkipToInquisitor()
THEN
NOT DB_CRE_CaptainsOffice_PassThroughForbidden(1);
PROC_CRE_ChainOfCommand_TemplarGoesToSecurityOffice();
PROC_SceneOver("CRE_CaptainsQuarters");
SetFlag(CRE_ChainOfCommand_State_CaptainBarrierDeactivated_fdfdbc4d-1713-495e-ad74-e969cfaf2b00);
TeleportTo(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, S_CRE_TemplarSecurityOfficePos_4c46984d-d512-4b35-9df9-9c7ed50c49c4);
DB_OnlyOnce("CRE_ChainOfCommand_CaptainsQuarters_DialogStarted");
PROC_CRE_ChainOfCommand_GithSquadLeavesCaptainsOffice();
PROC_SetRelationToPlayers(Act1B_CRE_Gith_ba6e076b-44ee-4a20-abee-86a56473bf49, 49);

IF
LevelLoaded("CRE_Main_A", _, _, _, _)
AND
DB_CRE_SkipToInquisitor(1, _, _, _, _)
THEN
PROC_CRE_SkipToInquisitor();

PROC
PROC_CRE_ChainOfCommand_TeleportToAndDie((CHARACTER)_Var1, (GUIDSTRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
TeleportTo(_Var1, _Var2, "", 0, 0, 0, 1, 1);
PROC_DieImmediate(_Var1, 0, 1);

IF
DB_CRE_ChainOfCommand_GuardClosesDoor(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
IsOpened(_Var2, 1, _Var1, _Var1, _Var1)
AND
DB_CRE_ChainOfCommand_DoorAreas(_Var2, _Var3, _Var1, _Var1, _Var1)
AND NOT
QRY_TriggerEvents_AnyPlayerInTrigger(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
Use(_Var1, _Var2, 1, 1, "");
NOT DB_CRE_ChainOfCommand_GuardClosesDoor(_Var1, _Var2);

IF
LeftTrigger(_, (GUIDSTRING)_Var2, _, _, _)
AND
DB_CRE_ChainOfCommand_DoorAreas(_Var3, _Var2, _, _, _)
AND
DB_CRE_ChainOfCommand_GuardClosesDoor(_Var4, _Var3, _, _, _)
AND NOT
QRY_TriggerEvents_AnyPlayerInTrigger(_Var2, _, _, _, _)
THEN
Use(_Var4, _Var3, 1, 1, "");
NOT DB_CRE_ChainOfCommand_GuardClosesDoor(_Var4, _Var3);

IF
DB_CRE_ChainOfCommand_CultistCaptureStartTriggers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TriggerRegisterForParty(_Var1);
DB_AddCharactersInTriggerToDialog(CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _Var1, 1, 0, 0);

IF
DB_CRE_ChainOfCommand_CultistCaptureSkipSceneTriggers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TriggerRegisterForParty(_Var1);

IF
DB_CRE_ChainOfCommand_GithGuardsMonastery(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SpotPlayers(_Var1, "CRE_CultistsCapture", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_SpotPlayers_SpotterIgnoreCantTalk(_Var1, "CRE_CultistsCapture");

IF
DB_InRegion(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_CRE_ChainOfCommand_CultistCaptureStartTriggers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_StartCultistsCaptureDialog", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc, S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8, S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_CRE_ChainOfCommand_CultistCaptureScene_ClearFlagsAndTriggers()
THEN
PROC_TriggerUnregisterForPlayers(S_CRE_CultistsCapture_CinematicIncludeZone_Main_73ce1fa9-babf-4bf0-bcac-ba6608cd1fc1);

IF
DialogEnded(CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_MonasteryGithGoInside", _, _, _, _)
THEN
PROC_CRE_ChainOfCommand_GithAndCultistsStartTransition();

IF
DialogEnded(CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
DB_InRegion(_Var2, _Var3, _, _, _)
AND
DB_CRE_ChainOfCommand_CultistCaptureStartTriggers(_Var3, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_PlayerBatnerAfterCultistCapture", _, _, _, _)
THEN
StartVoiceBark(CRE_ChainOfCommand_VB_ShouldGoToMainDoor_a030951c-71cf-c74b-1c19-b19a64f2f738, _Var2);
PROC_SceneOver("CRE_CultistsCapture");

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "CRE_CultistsCapture", _, _)
AND
DB_PartyMembers(_Var2, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_MonasteryGithGoInside", _, _, _, _)
THEN
PROC_ForceStopDialog(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77);
PROC_ForceStopDialog(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21);
NOT DB_CRE_ChainOfCommand_GithEnteringMovementSpeed("Walk");
DB_CRE_ChainOfCommand_GithEnteringMovementSpeed("Run");
PROC_CRE_ChainOfCommand_GithAndCultistsStartTransition();
PROC_SceneOver("CRE_CultistsCapture");

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "CRE_CultistsCapture", _, _)
AND
DB_PartyMembers(_Var2, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_SceneInterruptedAD", _, _, _, _)
THEN
RealtimeObjectTimerLaunch(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, "CRE_ChainOfCommand_SceneInterruptedAD_Delay", 600);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "CRE_ChainOfCommand_CRE_ChainOfCommand_SceneInterruptedAD_Delay", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_TryStartAD(CRE_ChainOfCommand_AD_CultistsSceneInterrupted_6f189cbb-6a08-b2f8-f968-3cb05429c45e, _Var1);

IF
DB_InRegion(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_CRE_ChainOfCommand_CultistCaptureSkipSceneTriggers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DialogName(CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(CRE_ChainOfCommand_Event_MonasteryGuardsStartWalkingDuringDialog_1f2f29ac-171e-4c13-b08d-341f9c1db1df, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_SkipCultistScene", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CRE_ChainOfCommand_GithAndCultistsStartTransition();

PROC
PROC_CRE_ChainOfCommand_GithAndCultistsStartTransition()
THEN
PROC_CRE_ChainOfCommand_CultistCaptureScene_ClearFlagsAndTriggers();

PROC
PROC_CRE_ChainOfCommand_GithAndCultistsStartTransition()
AND
QRY_TriggerEvents_AnyPlayerInTrigger(S_CRE_CultistCaptureProximityZone_e8dabda7-a8f3-499d-a784-98d075d62b1c, _, _, _, _)
THEN
SetFaction(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, Act1B_CRE_CultistEscapee_e93c571e-abe5-4ca9-9062-a9d00041841a);

PROC
PROC_CRE_ChainOfCommand_GithAndCultistsStartTransition()
AND NOT
QRY_TriggerEvents_AnyPlayerInTrigger(S_CRE_CultistCaptureProximityZone_e8dabda7-a8f3-499d-a784-98d075d62b1c, _, _, _, _)
THEN
NOT DB_GLO_DefeatCounter(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, "CRE_ChainOfCommand_Cultist03_Killed");
Die(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6);
PROC_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_Start();

IF
FlagSet(CRE_ChainOfCommand_Event_CultistKilled_332e2299-7888-41ee-9569-a953d10ebcb7, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
TeleportTo(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, S_CRE_CultistDieSpot_d317ccab-e8d9-49a9-aadc-3b3f31c0d21a, "CRE_ChainOfCommand_Cultist03_Teleported", 0, 0, 0, 1, 1);

IF
DialogStarted(CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_ItemUnlockAndOpen(S_CRE_MonasteryMainDoor_b50ee98d-848b-45f6-a4cb-335d28092aa7);

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_MonasteryGuardsStartWalkingDuringDialog_1f2f29ac-171e-4c13-b08d-341f9c1db1df, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_MonasteryGithGoInside", _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_Cultist03_Dead", _, _, _, _)
AND
DB_CRE_ChainOfCommand_GithEnteringMovementSpeed(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CRE_TeleportCultistCapture();
PROC_ItemCloseAndLock(S_CRE_MonasteryMainDoor_b50ee98d-848b-45f6-a4cb-335d28092aa7, "CRE_ChainOfCommand_MonasteryGuardKey");
PROC_CharacterMoveTo(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, S_CRE_CultistsCaptureGuardsMoveDestinationCreche_721bb357-f845-4b96-98c7-a6e539713db8, _Var1, "CRE_ChainOfCommand_Guard01_EnterCreche");
PROC_Follow(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8);
PROC_Follow(S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc, S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77);
PROC_Follow(S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8, S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77);

PROC
PROC_CRE_TeleportCultistCapture()
AND
DB_CRE_CultistCapture_Walkers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_CRE_CultistCapture_WalkStart_b0a88251-c275-4a8f-a6e5-edaffc9c0f36, "", 0, 0, 0);

PROC
PROC_GLO_DefeatCounter_AllDefeated("CRE_ChainOfCommand_Cultist03_Killed", _, _, _, _)
AND NOT
DB_DialogName(CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_Cultist03_Dead", _, _, _, _)
THEN
PROC_CRE_ChainOfCommand_GithAndCultistsStartWalking();

PROC
PROC_CRE_ChainOfCommand_GithAndCultistsStartWalking()
AND
DB_CRE_ChainOfCommand_GithEnteringMovementSpeed(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CharacterMoveTo(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, S_CRE_CultistsCaptureGuardsMoveDestinationDoor_9f1d7016-b311-46d6-9cff-374a1133d53c, _Var1, "CRE_CultistsCapture_ReachDoor");

IF
EntityEvent((GUIDSTRING)_Var1, "CRE_CultistsCapture_ReachDoor", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_ChainOfCommand_GithEnteringMovementSpeed(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_ItemUnlockAndOpen(S_CRE_MonasteryMainDoor_b50ee98d-848b-45f6-a4cb-335d28092aa7);
PROC_CharacterMoveTo(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, S_CRE_CultistsCaptureGuardsMoveDestinationCreche_721bb357-f845-4b96-98c7-a6e539713db8, _Var2, "CRE_ChainOfCommand_Guard01_EnterCreche");
PROC_Follow(S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc, S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77);
PROC_Follow(S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8, S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77);
PROC_CharacterMoveTo(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, S_CRE_MainGateLeverPos_b67dce9e-a3e2-43e7-9c17-0f38b047d9f9, _Var2, "CRE_CultistsCapture_ReachLever");

IF
EntityEvent((GUIDSTRING)_Var1, "CRE_CultistsCapture_ReachLever", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_ItemCloseAndLock(S_CRE_MonasteryMainDoor_b50ee98d-848b-45f6-a4cb-335d28092aa7, "CRE_ChainOfCommand_MonasteryGuardKey");
PROC_Follow(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8);

IF
EntityEvent(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, "CRE_ChainOfCommand_Guard01_EnterCreche", _, _, _)
AND NOT
DB_DialogName(CRE_ChainOfCommand_CultistsCapture_48a0ed58-27e9-8208-09cc-82725a497d0f, _, _, _, _)
THEN
PROC_SetOnStage(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, 0);
PROC_CRE_ChainOfCommand_CharacterEntersCreche(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21);
PROC_CRE_ChainOfCommand_CharacterEntersCreche(S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc);
PROC_CRE_ChainOfCommand_CharacterEntersCreche(S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8);

PROC
PROC_CRE_ChainOfCommand_CharacterEntersCreche((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CRE_ChainOfCommand_GithEnteringMovementSpeed(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_ClearStoryMove(_Var1);
PROC_StopFollow(_Var1);
PROC_CharacterMoveTo(_Var1, S_CRE_CultistsCaptureGuardsMoveDestinationCreche_721bb357-f845-4b96-98c7-a6e539713db8, _Var2, "CRE_ChainOfCommand_EnterCreche");
DB_CRE_ChainOfCommand_EnterCrecheList(_Var1);

IF
EntityEvent((GUIDSTRING)_Var1, "CRE_ChainOfCommand_EnterCreche", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_SetOnStage(_Var1, 0);
NOT DB_CRE_ChainOfCommand_EnterCrecheList(_Var1);
PROC_CRE_ChainOfCommand_EnterCrecheList_CheckRemaining();

PROC
PROC_CRE_ChainOfCommand_EnterCrecheList_CheckRemaining()
AND NOT
DB_CRE_ChainOfCommand_EnterCrecheList(_, _, _, _, _)
THEN
PROC_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_Start();

PROC
PROC_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_Start()
AND
DB_CRE_ChainOfCommand_GithGuardsMonastery(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SpotPlayers_StopSpotting(_Var1, "CRE_ChainOfCommand_CultistsCapture");

PROC
PROC_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_Start()
AND
QRY_OnlyOnce("CRE_ChainOfCommand_CultistsCaptureSceneCompleted", _, _, _, _)
THEN
SetFaction(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, Act1B_CRE_Gith_QuarterMistress_b097d106-3d22-4582-9e2a-847269236f6a);
SetFaction(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, Act1B_CRE_Gith_QuarterMistress_b097d106-3d22-4582-9e2a-847269236f6a);
DB_TriggerEvents_AllPartyMembersLeft(S_CRE_CultistsCaptureLeaveArea_38d10485-f8a4-477c-8245-7606459825c3, "CRE_ChainOfCommand_GuardsAndCultistsGoInside");
DB_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_PendingMove(1);

IF
DB_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_PendingMove(1, _, _, _, _)
AND NOT
QRY_TriggerEvents_AnyPartyMemberInTrigger(S_CRE_CultistsCaptureLeaveArea_38d10485-f8a4-477c-8245-7606459825c3, _, _, _, _)
THEN
NOT DB_TriggerEvents_AllPartyMembersLeft(S_CRE_CultistsCaptureLeaveArea_38d10485-f8a4-477c-8245-7606459825c3, "CRE_ChainOfCommand_GuardsAndCultistsGoInside");
PROC_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_Finish();

IF
EntityEvent(_, "CRE_ChainOfCommand_GuardsAndCultistsGoInside", _, _, _)
AND
DB_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_PendingMove(1, _, _, _, _)
THEN
PROC_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_Finish();

PROC
PROC_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_Finish()
THEN
SetFlag(CRE_ChainOfCommand_State_GatesSceneCompleted_1f2666fd-f8b1-4a4c-8dc9-1a7e948e00d7, NULL_00000000-0000-0000-0000-000000000000);
PROC_SetOnStage(S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc, 1);
PROC_SetOnStage(S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8, 1);
PROC_CRE_ChainOfCommand_TeleportToAndDie(S_CRE_Cultist01_58fb7ff5-6eff-4746-ba78-0f143fd251bc, S_CRE_DeadCultistCaptainOffice01_f5932644-afb2-40e8-8c36-a2f2d86cfae8);
PROC_CRE_ChainOfCommand_TeleportToAndDie(S_CRE_Cultist02_700a3d8e-c955-4fbb-9b55-e73053a5acb8, S_CRE_DeadCultistCaptainOffice02_04da512d-1c69-4f1a-8f66-4bb7be75182b);
PROC_SetOnStage(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, 1);
PROC_SetOnStage(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, 1);
PROC_AppearOutOfSightTo(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, S_CRE_GithGuardMonastery01InsidePos_1a9ab130-d35b-41d8-8dbb-4c93bf5dbdeb, S_CRE_MainDoorPassArea_9edb8b4e-4f2d-4255-b4a2-fb4fa3b609fd, "");
PROC_AppearOutOfSightTo(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, S_CRE_GithGuardMonastery02InsidePos_cc2e9833-8f12-499e-85e9-fba63ab607ee, S_CRE_MainDoorPassArea_9edb8b4e-4f2d-4255-b4a2-fb4fa3b609fd, "");
DB_Dialogs(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, CRE_ChainOfCommand_GithGuardMonastery01_ce97afe6-1f6e-92d6-bdf6-2cf9665ee898);
DB_Dialogs(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, CRE_ChainOfCommand_GithGuardMonastery02_e84a4897-3d76-8c27-018f-bb9ae9f5e553);
NOT DB_CRE_ChainOfCommand_GithAndCultistsGoInsideCreche_PendingMove(1);

IF
DB_Is_InCombat(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Is_InCombat(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_GithCultistsCombatStarted", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CRE_ChainOfCommand_StartGithCultistsCombat();

PROC
PROC_CRE_ChainOfCommand_StartGithCultistsCombat()
THEN
SetFlag(CRE_ChainOfCommand_State_MonasteryGuardsSpottedPlayer_8e2a2706-873a-471f-88af-1fe46710bc22);
PROC_CRE_CultistsCapture_CultistsRunForIt();

PROC
PROC_CRE_ChainOfCommand_StartGithCultistsCombat()
AND
QRY_OnlyOnce("CRE_ChainOfCommand_SceneInterruptedAD", _, _, _, _)
THEN
PROC_TryStartAD(CRE_ChainOfCommand_AD_CultistsSceneInterrupted_6f189cbb-6a08-b2f8-f968-3cb05429c45e, S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77);

PROC
PROC_CRE_CultistsCapture_CultistsRunForIt()
AND
DB_CRE_ChainOfCommand_Cultists(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_ForceStopDialog(_Var1);
PROC_StopFollow(_Var1);
PROC_DisappearOutOfSight(_Var1, "Run", 1, "");

IF
DB_Defeated(S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, _, _, _, _)
THEN
TeleportTo(S_CRE_DeadBodyArea_9443ac91-6839-4aa9-bedf-55eddce96382, S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, "", 0, 0, 0, 0, 1);
PROC_TriggerRegisterForPlayers(S_CRE_DeadBodyArea_9443ac91-6839-4aa9-bedf-55eddce96382);

IF
DB_InRegion(_Var1, S_CRE_DeadBodyArea_9443ac91-6839-4aa9-bedf-55eddce96382, _Var1, _Var1, _Var1)
AND
DB_Sees(_Var1, S_CRE_Cultist03_1953f136-1e57-4cfe-801a-9bde5c5344b6, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_DeadCultistVB", _Var1, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(CRE_ChainOfCommand_VB_NearDeadBody_520c9d5c-7ad0-902a-d536-14ca026b034e, _Var1);

IF
DB_CRE_ChainOfCommand_CaptainsBeasts(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SceneManager(_Var1, "CRE_CaptainsQuarters");

IF
UseFinished((GUIDSTRING)_Var1, S_CRE_CaptainsRoomDoor_4086aa49-b44b-462e-9c4b-8e27bdf3edcb, 1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_CaptainsQuarters_DialogStarted", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DB_InRegion(_Var1, S_CRE_CaptainDialogTriggerArea_b7218282-a0f0-4e31-8d20-590cfe062ae8, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_CaptainsQuarters_DialogStarted", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_StartDialog_AddExtraSpeakers(CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_CRE_ChainOfCommand_GithSquad(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, _Var2);

IF
DB_InRegion(_Var1, S_CRE_CaptainDialogTriggerArea_b7218282-a0f0-4e31-8d20-590cfe062ae8, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogName(CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa, _Var2, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsAvailable(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddListeningActor(_Var2, _Var1);

IF
DialogEnded(CRE_ChainOfCommand_CaptainSpeaksToTemplar_5235a97c-2857-3ba4-aae2-12aeba0a71fa, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
NOT DB_CRE_CaptainsOffice_PassThroughForbidden(1);
ClearFlag(CRE_ChainOfCommand_State_CaptainTalkingToTemplar_0b2b9e15-d9d4-4977-9cb9-bc81c63aa122);

IF
DB_InRegion(_Var1, S_CRE_PastCaptinBarrierDetect_192a2f9e-56d7-45a2-a891-f5f57bc4ab18, _Var1, _Var1, _Var1)
AND
DB_CRE_CaptainsOffice_PassThroughForbidden(1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_ForceStopDialog(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
PROC_CRE_CrecheHostile();

IF
AutomatedDialogEnded(CRE_ChainOfCommand_AD_TemplarTurnsCreacheHostile_318a7dda-c19e-fbdf-7fb3-ff9887063116, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_CRE_CrecheHostile();

IF
AutomatedDialogRequestFailed(CRE_ChainOfCommand_AD_TemplarTurnsCreacheHostile_318a7dda-c19e-fbdf-7fb3-ff9887063116, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_CRE_CrecheHostile();

IF
DB_Defeated(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _, _, _, _)
THEN
PROC_CRE_CrecheHostile();

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_TemplarLeavesCaptainDialog_c5263176-8df5-4e8d-a51e-e5bc35715f51, _, _, _, _)
THEN
PROC_SceneOver("CRE_CaptainsQuarters");
PROC_TryStartAD(CRE_ChainOfCommand_AD_CaptainOrdersToCloseDoor_233fa55b-3c78-582c-a8e3-e14bf6c762af, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565);
PROC_CRE_ChainOfCommand_TemplarGoesToSecurityOffice();
PROC_CRE_ChainOfCommand_GithSquadLeavesCaptainsOffice();

PROC
PROC_CRE_ChainOfCommand_TemplarGoesToSecurityOffice()
THEN
DB_SpotPlayers(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, "CRE_ChainOfCommand_SecurityOffice", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_SpotPlayers_SpotTrigger(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, "CRE_ChainOfCommand_SecurityOffice", S_CRE_SecurityOfficeSpottingArea_de03f3aa-3dd2-4c3b-82f7-40af185a4d23);
PROC_TriggerRegisterForPlayers(S_CRE_SecurityRoomEntranceArea_a174b833-5179-4931-8b97-8cf2988c5618);
DB_InRegionFlag(S_CRE_SecurityRoomEntranceArea_a174b833-5179-4931-8b97-8cf2988c5618, CRE_ChainOfCommand_State_PlayerAtSecurityRoomEntrance_527519dd-5ebf-4011-a908-eadf9aaabe12);
PROC_DisappearOutOfSightTo(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, S_CRE_TemplarSecurityOfficePos_4c46984d-d512-4b35-9df9-9c7ed50c49c4, "Walk", 1, "CRE_ChainOfCommand_TemplarInSecurityOffice");

IF
EntityEvent((GUIDSTRING)_Var1, "CRE_ChainOfCommand_TemplarInSecurityOffice", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
TeleportTo(_Var1, S_CRE_TemplarSecurityOfficePos_4c46984d-d512-4b35-9df9-9c7ed50c49c4, "", 0, 0, 0, 0, 1);
PROC_SetOnStage(_Var1, 1);
DB_OneShot_VoiceBarkTrigger(S_CRE_TemplarCorridorArea_5978a740-4711-46d3-b845-27bcf7e1f123, CRE_ChainOfCommand_VB_OnTheWayToTemplar_377d1a3f-c1f6-864c-6fd9-d034aec9ff8b);

PROC
PROC_CRE_ChainOfCommand_GithSquadLeavesCaptainsOffice()
AND
DB_CRE_ChainOfCommand_GithSquad(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
CharacterMoveTo(_Var1, S_CRE_SquadExitPoint_a283c0d4-558e-48c9-86d9-b198e4e4b6a1, "Run", "CRE_GithSquadArrivedAtExit");

IF
EntityEvent((GUIDSTRING)_Var1, "CRE_GithSquadArrivedAtExit", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_SetOnStage(_Var1, 0);

IF
FlagSet(CRE_ChainOfCommand_Event_CaptainWalkToBarrierControl_0b31c560-4c1a-4460-943c-557b92dbbe62, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
CharacterMoveTo(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, S_CRE_CaptainBackDoorPos_c6ad6b9f-423e-4928-87f6-dc6431bf1fe0, "Walk", "CRE_ChainOfCommand_CaptainAtBarrierToActivate");

IF
EntityEvent(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, "CRE_ChainOfCommand_CaptainAtBarrierToActivate", _, _, _)
THEN
LookAtEntity(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, S_CRE_CaptainQuartersPlanecaster_Placeholder_042cc28c-cbdd-4fe2-9e65-9f144fef1e3d, 4);

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_CaptainActivatesBarrier_1eea28d3-8058-4918-a94d-82e0ae57b46b, _, _, _, _)
THEN
PROC_CRE_CrecheTraps_PsionicBarriers_Activate(S_CRE_LathanderBarrier_CaptainsOffice_00f4e951-5514-43c7-8e45-4b1f77b2dba7);

IF
AutomatedDialogEnded(CRE_ChainOfCommand_AD_CaptainOrdersToCloseDoor_233fa55b-3c78-582c-a8e3-e14bf6c762af, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_GuardClosesDoor", _, _, _, _)
THEN
DB_CRE_ChainOfCommand_GuardClosesDoor(S_CRE_CaptainGuard_ea4643de-cc2c-42f0-949d-4968201ad2c7, S_CRE_CaptainsRoomDoor_4086aa49-b44b-462e-9c4b-8e27bdf3edcb);

PROC
PROC_StartDialog_AddExtraSpeakers(CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var1, S_CRE_CaptainsBeast01_82736dcd-8648-4795-a296-21aa1bcaf096, 7);
PROC_DialogAddSpeakingActorAt(_Var1, S_CRE_CaptainsBeast02_fcd64862-67ba-4358-9636-09ff9545177a, 8);

IF
DialogStarted(CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_GuardClosesDoor", _, _, _, _)
THEN
DB_CRE_ChainOfCommand_GuardClosesDoor(S_CRE_CaptainGuard_ea4643de-cc2c-42f0-949d-4968201ad2c7, S_CRE_CaptainsRoomDoor_4086aa49-b44b-462e-9c4b-8e27bdf3edcb);
NOT DB_OnlyOnce("CRE_ChainOfCommand_GuardClosesDoor");

IF
DialogEnded(CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND NOT
DB_DialogRequestFailed(CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776, _Var1, _Var1, _Var1, _Var1)
AND
DB_SpotPlayers_Continuous(_Var2, "CRE_ChainOfCommand_CaptainsQuarters", _Var1, _Var1, _Var1)
THEN
PROC_SpotPlayers_StopSpotting(_Var2, "CRE_ChainOfCommand_CaptainsQuarters");

IF
Combined(S_CRE_CaptainQuartersPlanecaster_Placeholder_042cc28c-cbdd-4fe2-9e65-9f144fef1e3d, S_CRE_CaptainBarrierKey_c3270804-062d-4550-8eed-e9bc415cc9f3, _, _, _, (CHARACTER)_Var4, _, _, _, _)
AND
QRY_StartDialog(CRE_ChainOfCommand_BarrierDeviceDialog_10957920-8094-b484-41fe-8f749bda5fd3, S_CRE_CaptainQuartersPlanecaster_Placeholder_042cc28c-cbdd-4fe2-9e65-9f144fef1e3d, _Var4, _, _)
THEN
DB_CRE_BarrierDeviceDialogInitiator(_Var4);

IF
Combined(S_CRE_CaptainQuartersPlanecaster_Placeholder_042cc28c-cbdd-4fe2-9e65-9f144fef1e3d, S_CRE_CaptainBarrierKey_c3270804-062d-4550-8eed-e9bc415cc9f3, _, _, _, (CHARACTER)_Var4, (ITEM)_Var5, (ITEM)_, (ITEM)_, (ITEM)_)
THEN
TeleportTo(_Var5, S_CRE_CaptainsOffice_KeyInsertedPosition_27b32656-24fd-4932-9e9c-f646c962553c, "", 0, 0, 0, 0, 0);
SetGravity(_Var5, 0, NULL_00000000-0000-0000-0000-000000000000);
SetCanPickUp(_Var5, 0);

IF
Combined(S_CRE_CaptainQuartersPlanecaster_Placeholder_042cc28c-cbdd-4fe2-9e65-9f144fef1e3d, S_CRE_CaptainBarrierKey_c3270804-062d-4550-8eed-e9bc415cc9f3, _, _, _, (CHARACTER)_Var4, (ITEM)_Var5, (ITEM)_, (ITEM)_, (ITEM)_)
THEN
PROC_CRE_CaptainsOffice_PeacefulResolveIfAlive();

PROC
PROC_StartDialog_AddExtraSpeakers(CRE_ChainOfCommand_BarrierDeviceDialog_10957920-8094-b484-41fe-8f749bda5fd3, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_CRE_BarrierDeviceDialogInitiator(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsAvailableAndInDialogRange(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565);

QRY
QRY_CRIME_BlockRegisterCrime(_, _, S_CRE_CaptainBarrierKey_c3270804-062d-4550-8eed-e9bc415cc9f3, _, (INTEGER)_Var4)
AND
DB_GlobalFlag(CRE_ChainOfCommand_State_CaptainBarrierDeactivated_fdfdbc4d-1713-495e-ad74-e969cfaf2b00, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, S_CRE_CaptainQuartersPlanecaster_Placeholder_042cc28c-cbdd-4fe2-9e65-9f144fef1e3d, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(CRE_ChainOfCommand_State_CaptainBarrierDeactivated_fdfdbc4d-1713-495e-ad74-e969cfaf2b00, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, S_CRE_CaptainQuartersPlanecaster_Placeholder_042cc28c-cbdd-4fe2-9e65-9f144fef1e3d, 0);
StartVoiceBark(CRE_ChainOfCommand_VB_DoorDeviceInteraction_c664ca47-6548-d7a7-45ad-bf8d5e543298, _Var1);

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_CaptainDeactivatesBarrier_df6f6bd2-63eb-4a96-9f06-2ed06a621a05, _, _, _, _)
AND NOT
QRY_IsInDangerousSurfaceFor(S_CRE_CaptainBackDoorPos_c6ad6b9f-423e-4928-87f6-dc6431bf1fe0, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, _, _, _)
THEN
CharacterMoveTo(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, S_CRE_CaptainBackDoorPos_c6ad6b9f-423e-4928-87f6-dc6431bf1fe0, "Walk", "CRE_ChainOfCommand_CaptainWalkToBarrier");

IF
EntityEvent(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, "CRE_ChainOfCommand_CaptainWalkToBarrier", _, _, _)
AND
IsInInventoryOf(S_CRE_CaptainBarrierKey_c3270804-062d-4550-8eed-e9bc415cc9f3, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, 1, _, _)
THEN
PROC_TryStartAD(CRE_ChainOfCommand_AD_CaptainSendsPlayerToInquisitior_4b1be372-c9d3-d294-6edc-931969bee354, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565);
SetFlag(CRE_ChainOfCommand_State_CaptainBarrierDeactivated_fdfdbc4d-1713-495e-ad74-e969cfaf2b00, NULL_00000000-0000-0000-0000-000000000000, 0);
TeleportTo(S_CRE_CaptainBarrierKey_c3270804-062d-4550-8eed-e9bc415cc9f3, S_CRE_CaptainsOffice_KeyInsertedPosition_27b32656-24fd-4932-9e9c-f646c962553c, "", 0, 0, 0, 0, 0);
SetGravity(S_CRE_CaptainBarrierKey_c3270804-062d-4550-8eed-e9bc415cc9f3, 0, NULL_00000000-0000-0000-0000-000000000000);
SetCanPickUp(S_CRE_CaptainBarrierKey_c3270804-062d-4550-8eed-e9bc415cc9f3, 0);
PROC_CRE_CaptainsOffice_PeacefulResolveIfAlive();

PROC
PROC_CRE_CaptainsOffice_PeacefulResolveIfAlive()
AND
DB_CRE_CaptainsOffice_PotentialFighters(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_PeacefulResolve(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565);

IF
EntityEvent(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, "CRE_ChainOfCommand_CaptainWalkToBarrier", _, _, _)
AND NOT
IsInInventoryOf(S_CRE_CaptainBarrierKey_c3270804-062d-4550-8eed-e9bc415cc9f3, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, 1, _, _)
THEN
PROC_TryStartAD(CRE_ChainOfCommand_AD_CaptainRealizesTheft_6ad4b02b-3975-d455-a279-028d8315e2db, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565);

IF
AutomatedDialogEnded(CRE_ChainOfCommand_AD_CaptainRealizesTheft_6ad4b02b-3975-d455-a279-028d8315e2db, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_CRE_ChainOfCommand_CaptainCombatStart();

IF
DB_GlobalFlag(CRE_ChainOfCommand_State_CaptainBarrierDeactivated_fdfdbc4d-1713-495e-ad74-e969cfaf2b00, _, _, _, _)
THEN
PROC_CRE_CrecheTraps_PsionicBarriers_Deactivate(S_CRE_LathanderBarrier_CaptainsOffice_00f4e951-5514-43c7-8e45-4b1f77b2dba7);

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "CRE_CaptainsQuarters", (STRING)_Var3, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
THEN
PROC_SceneOver("CRE_CaptainsQuarters");
PROC_ForceStopDialog(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565);
DB_CRE_ChainOfCommand_CaptainDialogInterrupted(1);

IF
DialogEnded(CRE_ChainOfCommand_Captain_5863baff-1617-644c-b023-efad34c63776, _, _, _, _)
AND
DB_CRE_ChainOfCommand_CaptainDialogInterrupted(1, _, _, _, _)
THEN
PROC_CRE_ChainOfCommand_CaptainCombatStart();

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_CaptainCombatStarts_8057c0ff-7254-4dd9-a5e3-8782cb45af15, _, _, _, _)
THEN
PROC_CRE_ChainOfCommand_CaptainCombatStart();

PROC
PROC_CRE_ChainOfCommand_CaptainCombatStart()
THEN
PROC_RemoveDialog(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565);
PROC_SetRelationToPlayers(Act1B_CRE_Gith_CaptainsQuarters_27e5030c-794e-4270-8ad0-de541d9311b6, 0);

IF
TurnStarted(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, _, _, _, _)
AND
DB_Is_InCombat(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, _, _, _, _)
AND NOT
DB_CantTalk_IgnoreCombat(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_CaptainCallsGuards", _, _, _, _)
THEN
PROC_TryStartAD(CRE_ChainOfCommand_AD_CaptainCallsGuards_f85bd7e1-778c-bee7-085e-fa762bf1ad8f, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565);

IF
AutomatedDialogEnded(CRE_ChainOfCommand_AD_CaptainCallsGuards_f85bd7e1-778c-bee7-085e-fa762bf1ad8f, _, _, _, _)
AND NOT
DB_Defeated(S_CRE_CaptainGuard_ea4643de-cc2c-42f0-949d-4968201ad2c7, _, _, _, _)
THEN
PROC_CharacterMoveTo(S_CRE_CaptainGuard_ea4643de-cc2c-42f0-949d-4968201ad2c7, S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, "Run", "");
SetFaction(S_CRE_CaptainGuard_ea4643de-cc2c-42f0-949d-4968201ad2c7, Act1B_CRE_Gith_CaptainsQuarters_27e5030c-794e-4270-8ad0-de541d9311b6);

IF
EnteredCombat(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_CRE_CaptainCombatID(_Var1);

IF
CombatEnded((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_CaptainCombatID(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Defeated(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GLO_IsOrWasInCombat(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_CaptainDeath_ReactionAD", _Var1, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(CRE_ChainOfCommand_VB_DefeatCaptain_b9523166-e6e8-5907-41fa-cec14039cbbb, _Var2);

IF
SwitchedCombat(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, (GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_CaptainCombatID(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_CRE_CaptainCombatID(_Var1);
DB_CRE_CaptainCombatID(_Var2);

QRY
QRY_SelectCustomDialog(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_GetClosestAvailableCharacterTo(_Var1, 0, _Var1, _Var1, _Var1)
AND
DB_ClosestAvailableCharacterTo_PreferAvatar(_Var2, _Var1, _Var3, 1, _Var1)
AND
_Var3 <= 15
AND
QRY_SameUser(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_OnlyOnce("CRE_ChainOfCommand_Templar_LaezelOM", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog_Fixed(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var2, _Var1, _Var1)
THEN
DB_OnlyOnce("CRE_ChainOfCommand_Templar_LaezelOM");
DB_Dialogs(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856);

QRY
QRY_SelectCustomDialog(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var2, REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, 1, _Var1, _Var1)
AND
QRY_SameUser(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsAvailableAndInDialogRange(_Var2, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var1, _Var1, _Var1)
AND NOT
DB_OnlyOnce("CRE_ChainOfCommand_Templar_LaezelOM", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog_Fixed(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var2, _Var1, _Var1)
THEN
DB_OnlyOnce("CRE_ChainOfCommand_Templar_LaezelOM");
DB_Dialogs(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856);

QRY
QRY_SelectCustomDialog(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_OnlyOnce("CRE_ChainOfCommand_Templar_LaezelOM", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var1, _Var1, _Var1)
THEN
DB_OnlyOnce("CRE_ChainOfCommand_Templar_LaezelOM");
DB_Dialogs(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856);

IF
EnteredCombat(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_TemplarBattleStarted", _, _, _, _)
THEN
PROC_CRE_ChainOfCommand_TemplarResolved();

PROC
PROC_CRE_ChainOfCommand_TemplarResolved()
AND NOT
DB_GlobalFlag(CRE_ChainOfCommand_State_TemplarResolved_c6eea22b-b5dc-4797-b202-9a6f5ab18100, _, _, _, _)
THEN
SetFlag(CRE_ChainOfCommand_State_TemplarResolved_c6eea22b-b5dc-4797-b202-9a6f5ab18100);

PROC
PROC_SpotPlayers_Spotted(_, "CRE_ChainOfCommand_SecurityOffice", (GUIDSTRING)_Var2, (CHARACTER)_, (CHARACTER)_)
THEN
PROC_TryStartAD(CRE_ChainOfCommand_AD_TemplarGreeting_4fd15927-7600-9f7a-5c9b-1fd469af9dee, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var2);
DB_CRE_ChainOfCommand_GuardClosesDoor(S_CRE_SecurityOfficer01_64445697-2adc-4784-883e-392bae899892, DOOR_GEN_DoubleBig_Metal_A_000_dbe0ccb4-7eeb-4388-88d1-a5571b6f5175);

IF
AutomatedDialogEnded(CRE_ChainOfCommand_AD_TemplarGreeting_4fd15927-7600-9f7a-5c9b-1fd469af9dee, _, _, _, _)
AND
DB_CRE_ChainOfCommand_TemplarADsPlayed(_Var2, _, _, _, _)
AND
IntegerSum(_Var2, 1, _Var3, _, _)
THEN
NOT DB_CRE_ChainOfCommand_TemplarADsPlayed(_Var2);
DB_CRE_ChainOfCommand_TemplarADsPlayed(_Var3);

IF
AutomatedDialogEnded(CRE_ChainOfCommand_AD_TemplarGreeting_4fd15927-7600-9f7a-5c9b-1fd469af9dee, _, _, _, _)
AND NOT
DB_CRE_ChainOfCommand_TemplarADsPlayed(3, _, _, _, _)
THEN
ObjectTimerLaunch(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, "CRE_ChainOfCommand_TemplarADRepeatTimer", 10000, 1);

IF
ObjectTimerFinished(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, "CRE_ChainOfCommand_TemplarADRepeatTimer", _, _, _)
THEN
PROC_SpotPlayers_RestartSpotting(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, "CRE_ChainOfCommand_SecurityOffice");

IF
DialogStarted(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
ObjectTimerCancel(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, "CRE_ChainOfCommand_TemplarADRepeatTimer");
PROC_RemoveOneShotVoiceBarkTrigger(S_CRE_TemplarCorridorArea_5978a740-4711-46d3-b845-27bcf7e1f123, CRE_ChainOfCommand_VB_OnTheWayToTemplar_377d1a3f-c1f6-864c-6fd9-d034aec9ff8b);

PROC
PROC_SceneInterrupted(_, _, "CRE_SecurityOffice", (STRING)_Var3, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
THEN
PROC_SceneOver("CRE_SecurityOffice");
PROC_CRE_ChainOfCommand_StartSecurityOfficeCombat();

PROC
PROC_SceneInterrupted(_, _, "CRE_SecurityOffice", (STRING)_Var3, (GUIDSTRING)_)
THEN
ObjectTimerCancel(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, "CRE_ChainOfCommand_TemplarADRepeatTimer");

PROC
PROC_CRE_CrecheHostile()
THEN
PROC_CRE_BattleStations();
PROC_SetRelationToPlayers(Act1B_CRE_Gith_ba6e076b-44ee-4a20-abee-86a56473bf49, 0);
SetFlag(CRE_General_State_CrecheTurnedHostile_e183e7dc-c07a-4093-91dc-7814375c9582);

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_State_SecurityOfficeHostile_04a08ea2-98de-4711-8cd1-9fa6e145a841, _, (INTEGER)_Var2, _, _)
AND
DB_DialogPlayers(_Var2, _Var3, 1, _, _)
THEN
PROC_CRE_ChainOfCommand_StartSecurityOfficeCombat();

PROC
PROC_CRE_ChainOfCommand_StartSecurityOfficeCombat()
THEN
PROC_SetRelationToPlayers(Act1B_CRE_Gith_SecurityOffice_6a8d9c32-b2ba-49e6-9ce8-8cc745bc015e, 0);
PROC_RemoveDialog(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);

IF
DialogEnded(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND NOT
DB_GlobalFlag(CRE_ChainOfCommand_Event_ShowedArtifactToTemplar_14e19375-1dfc-4b50-9f32-732bda87a19c, _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
THEN
PROC_ClearScreenFadeTimeline(_Var2, 0.5);

IF
FlagSet(CRE_ChainOfCommand_Event_OfficersLeave_23e1ccb8-12fd-44f2-bc20-f1ffa1bb6563, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_CRE_ChainOfCommand_OfficersLeave();

PROC
PROC_CRE_ChainOfCommand_OfficersLeave()
AND
DB_CRE_ChainOfCommand_SecurityOfficers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(_Var1, "");
SetFaction(_Var1, Act1B_CRE_Gith_SecuirtyOffice_Dismissed_15dd6417-255c-4305-846a-e98984d72371);

IF
DB_GlobalFlag(CRE_AstralPrison_State_BoxUnlocked_07e04b03-e958-461c-bda9-b4131da6884b, _, _, _, _)
THEN
PROC_SceneOver("CRE_SecurityOffice");

PROC
PROC_CRE_ChainOfCommand_StartPostAstralPlaneSpotting()
AND NOT
DB_Defeated(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _, _, _, _)
THEN
DB_SpotPlayers(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, "CRE_ChainOfCommand_PostAstralPlaneSpotting", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
PROC_RemoveDialog(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);

PROC
PROC_CRE_ChainOfCommand_StartPostAstralPlaneSpotting()
AND NOT
DB_GlobalFlag(CRE_ChainOfCommand_Event_OfficersLeave_23e1ccb8-12fd-44f2-bc20-f1ffa1bb6563, _, _, _, _)
AND
DB_CRE_ChainOfCommand_SecurityOfficers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SpotPlayers(_Var1, "CRE_ChainOfCommand_PostAstralPlaneSpotting", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);

IF
EntityEvent((GUIDSTRING)_Var1, "CRE_AstralPrison_Returned", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_StartBetrayalOM_AfterAstral", _Var1, _Var1, _Var1, _Var1)
THEN
RealtimeObjectTimerLaunch(_Var1, "CRE_ChainOfCommand_BackFromAstralPlane", 6000);
RealtimeObjectTimerLaunch(_Var1, "CRE_ChainOfCommand_ReturnAnim", 500);
DB_DangerZone(S_CRE_SecurityOfficeArea_4f8819f5-4898-4db1-b3bd-92d24c51c80f, "CRE_SecOffice_AfterAstral2seconds");

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "CRE_ChainOfCommand_ReturnAnim", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PlayAnimation(_Var1, CUST_Exiting_Astral_Plane_01_4043d9a9-8692-469b-9e7d-691ccfba8c3a, "CRE_AstralPrism_ReturnAnimFinished");

IF
ObjectTimerFinished((CHARACTER)_Var1, "CRE_ChainOfCommand_BackFromAstralPlane", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
QRY_CRE_ChainOfCommand_StartPostAstralPrisonDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CRE_CrecheHostile();
SetFlag(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "CRE_ChainOfCommand_BackFromAstralPlane", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_DangerZone_Safe("CRE_SecOffice_AfterAstral2seconds");

QRY
QRY_CRE_ChainOfCommand_StartPostAstralPrisonDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
QRY_CRE_ChainOfCommand_TemplarStartsFight_ShouldOverrideWithLaezelOM()
AND
QRY_SpeakerIsAvailable(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsAvailable(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_OnlyOnce("CRE_AstralPrison_TemplarDialogStarted", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(CRE_ChainOfCommand_TemplarStartsFight_ab5ddb04-eece-e8c0-9b5a-69c8ee8534ac, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, S_GLO_Vlaakith_6b00f9fb-b932-4ac9-8ed8-1ca89dd7d247, _Var1, _Var1)
THEN
DB_OnlyOnce("CRE_AstralPrison_TemplarDialogStarted");

QRY
QRY_CRE_ChainOfCommand_StartPostAstralPrisonDialog(_, _, _, _, _)
AND
QRY_OnlyOnce("CRE_ChainOfCommand_StartBetrayalOM", _, _, _, _)
AND
QRY_CRE_ChainOfCommand_TemplarStartsFight_ShouldOverrideWithLaezelOM()
AND
QRY_CRE_ChainOfCommand_StartBetrayalOM()
THEN
DB_NOOP(1);

QRY
QRY_CRE_ChainOfCommand_StartBetrayalOM()
AND
QRY_GetBestAvatarForCompanion(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND
DB_QRYRTN_GetBestAvatarForCompanion(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_OnlyOnce("CRE_AstralPrison_TemplarDialogStarted", _Var1, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsAvailable(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsAvailable(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog_Fixed(CRE_ChainOfCommand_Betrayal_OM_Laezel_COM_37646009-a3de-b772-d063-0d85c053ed88, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Var1, _Var1)
THEN
DB_OnlyOnce("CRE_AstralPrison_TemplarDialogStarted");

QRY
QRY_CRE_ChainOfCommand_TemplarStartsFight_ShouldOverrideWithLaezelOM()
AND
DB_Players(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND NOT
DB_Avatars(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND
QRY_SpeakerIsAvailable(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
THEN
DB_NOOP(1);

IF
DialogEnded(CRE_ChainOfCommand_TemplarStartsFight_ab5ddb04-eece-e8c0-9b5a-69c8ee8534ac, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_CRE_CrecheHostile();
SetFlag(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f);

IF
DialogEnded(CRE_ChainOfCommand_Betrayal_OM_Laezel_COM_37646009-a3de-b772-d063-0d85c053ed88, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_CRE_CrecheHostile();
SetFlag(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f);

IF
DialogRequestFailed(CRE_ChainOfCommand_TemplarStartsFight_ab5ddb04-eece-e8c0-9b5a-69c8ee8534ac, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_CRE_CrecheHostile();
SetFlag(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f);

IF
DialogRequestFailed(CRE_ChainOfCommand_Betrayal_OM_Laezel_COM_37646009-a3de-b772-d063-0d85c053ed88, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_CRE_CrecheHostile();
SetFlag(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f);

IF
EntityEvent(_, "CRE_AstralPrison_Returned", _, _, _)
AND
DB_PermaDefeated(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _, _, _, _)
AND NOT
DB_GlobalFlag(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f, _, _, _, _)
THEN
SetFlag(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f);

PROC
PROC_FlagReactionAfterDialog((GUIDSTRING)_Var1, CRE_ChainOfCommand_Event_ShowedArtifactToTemplar_14e19375-1dfc-4b50-9f32-732bda87a19c, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_CRE_ChainOfCommand_StartVlaakithDialog(_Var1);

IF
EnteredCombat(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_CRE_TemplarCombatID(_Var1);

IF
CombatEnded((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_TemplarCombatID(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Defeated(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GLO_IsOrWasInCombat(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var2, "Vlaakith Dialog started");
DB_CRE_ChainOfCommand_StartVlaakithDialog(_Var2);
NOT DB_CRE_TemplarCombatID(_Var1);

IF
SwitchedCombat(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, (GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_TemplarCombatID(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_CRE_TemplarCombatID(_Var1);
DB_CRE_TemplarCombatID(_Var2);

IF
DB_CRE_ChainOfCommand_StartVlaakithDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_CRE_SecurityOfficeArea_4f8819f5-4898-4db1-b3bd-92d24c51c80f, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(CRE_Lance_State_ExplosionCountdownActive_8b52ae9e-0cf3-46e5-924d-64e11aefa0e3, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_StartVlaakithDialog", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(CRE_ChainOfCommand_Vlaakith_8ca0aac9-c46a-8d02-00ff-c61e6ec77c8d, S_GLO_Vlaakith_6b00f9fb-b932-4ac9-8ed8-1ca89dd7d247, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DB_GlobalFlag(CRE_AstralPrison_Event_LeftAstralPlane_58ec28f6-be1a-4044-8fbf-4229d8482bac, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Defeated(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_KilledInquisitorAD", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DaisyAD(_Var1, CRE_ChainOfCommand_DaisyAD_KilledInquisitor_04070412-20a2-0799-ec62-a3736e6d4c94);

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_Event_VlaakithWish_cbcac30e-421f-4cb3-a715-e5d047306fbc, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
Die(_Var1, 0, S_GLO_Vlaakith_6b00f9fb-b932-4ac9-8ed8-1ca89dd7d247, 0, 1, 0);

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561, _, _, _, _)
THEN
PROC_LoopEffect(VFX_Script_CRE_HoloDeck_Planecaster_Activated_01_434a632f-1f52-361f-18dd-0b3ffdd77afa, S_CRE_SecurtiyOfficePlanecaster_9144098a-c9c7-4425-a99d-d7375069e7b7, "CRE_AstralPlanecaster_VFX", "CRE_Main_A", "", 1);

PROC
PROC_GLO_DefeatCounter_Notify("CRE_InquisitorCombat_KillCounter_Minion", _, _, 1, _)
AND
CheckRulesetModifierString(cac2d8bd-c197-4a84-9df1-f86f54ad4521, "HARD", 1, _, _)
THEN
SetTag(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, ACT1B_CRE_INQUISITOR_TRIGGERMINDSTEALTEMPEST_1271938d-b5a2-4321-9cae-f681045981b2);

PROC
PROC_GLO_DefeatCounter_Notify("CRE_InquisitorCombat_KillCounter_Minion", _, _, 2, _)
AND
CheckRulesetModifierString(cac2d8bd-c197-4a84-9df1-f86f54ad4521, "MEDIUM", 1, _, _)
THEN
SetTag(S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c, ACT1B_CRE_INQUISITOR_TRIGGERMINDSTEALTEMPEST_1271938d-b5a2-4321-9cae-f681045981b2);

IF
UseStarted((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CRE_ChainOfCommand_Planecaster(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsInInventoryOf(QUEST_Mysterious_Puzzlebox_3301071e-be9c-4473-92c0-4eb1c51b66e3, _Var1, 0, _Var1, _Var1)
THEN
SetFlag(GLO_InfernalBox_Event_ForceGiveBox_7addbb64-502f-48aa-9b71-da1b8d6c28eb, _Var1, 0);

IF
UseStarted((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_ChainOfCommand_Planecaster(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_UsePlanecasterAD", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DaisyAD(_Var1, CRE_ChainOfCommand_DaisyAD_UsePlanecaster_0d2c8ece-f389-4aca-5074-62bf25931f26);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CRE_ChainOfCommand_Planecaster(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, _Var2, 0);
StartVoiceBark(CRE_ChainOfCommand_VB_InactivePlanecasterComment_aafda489-7e64-0ae9-7aea-1b455ffad8c1, _Var1);

IF
UseStarted((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_ChainOfCommand_Planecaster(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561, _Var1, _Var1, _Var1, _Var1)
THEN
RealtimeObjectTimerLaunch(_Var1, "CRE_ChainOfCommand_DeviceDelay", 1200);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "CRE_ChainOfCommand_DeviceDelay", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_CRE_ChainOfCommand_EnterAstralReadyCheck_Initiator(_Var1);
ReadyCheckGlobal("CRE_ChainOfCommand_EnterAstralPrison", "CRE_AstralPrison_Entering_ReadyCheck", 1, _Var1);

IF
ReadyCheckPassed("CRE_ChainOfCommand_EnterAstralPrison", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CRE_ChainOfCommand_EnterAstralReadyCheck_Initiator(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_ORI_Laezel_CheckAddToParty()
AND NOT
QRY_CRE_StartEnteringAstralPrisonDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_InfernalBox_Event_ForceGiveBox_7addbb64-502f-48aa-9b71-da1b8d6c28eb, S_CRE_TempContainerOfPuzzlebox_6396399c-ce1e-48db-97e2-cbfd40b64dd7, 0);
SetFlag(CRE_AstralPrison_State_BoxUnlocked_07e04b03-e958-461c-bda9-b4131da6884b, NULL_00000000-0000-0000-0000-000000000000, 0);
NOT DB_CRE_ChainOfCommand_EnterAstralReadyCheck_Initiator(_Var1);

QRY
QRY_CRE_StartEnteringAstralPrisonDialog((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_StartDialogCustom(CRE_AstralPrison_Entering_a84e5d45-33be-b325-08cf-41acdb848ce2, _Var1, 0, 0, 0, 0, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_InfernalBox_Event_ForceGiveBox_7addbb64-502f-48aa-9b71-da1b8d6c28eb, S_CRE_TempContainerOfPuzzlebox_6396399c-ce1e-48db-97e2-cbfd40b64dd7, 0);
SetFlag(CRE_AstralPrison_State_BoxUnlocked_07e04b03-e958-461c-bda9-b4131da6884b, NULL_00000000-0000-0000-0000-000000000000, 0);
NOT DB_CRE_ChainOfCommand_EnterAstralReadyCheck_Initiator(_Var1);

PROC
PROC_StartDialog_AddExtraSpeakers(CRE_AstralPrison_Entering_a84e5d45-33be-b325-08cf-41acdb848ce2, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, _Var2);

IF
ReadyCheckFailed("CRE_ChainOfCommand_EnterAstralPrison", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CRE_ChainOfCommand_EnterAstralReadyCheck_Initiator(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_CRE_ChainOfCommand_EnterAstralReadyCheck_Initiator(_Var1);

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_AstralPrison_State_AstralPrisonWasEntered_2203e87a-6c7b-4aba-b2e8-e22ed96b9762, _, _, _, _)
AND NOT
QRY_Debug_RestoringState()
THEN
PROC_TeleportPartiesTo(S_CRE_AstralPlaneEntrance_b73922c5-5ac4-4551-b492-ce85e01175d1, "");
PROC_CRE_ChainOfCommand_StartPostAstralPlaneSpotting();
SetFlag(ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7);
AllowNewPlayers(0);

IF
FlagSet(GEN_MaxPlayerCountReached_823b5064-8aa4-c0b7-1b8c-657b46987ccd, _, _, _, _)
AND
DB_GlobalFlag(CRE_ChainOfCommand_State_LaezelWaitsAtPlanecaster_e25eb1e0-739e-489e-a1df-d2468682e9b3, _, _, _, _)
THEN
PROC_CRE_CrecheHostile();

IF
LeftTrigger((CHARACTER)_Var1, S_CRE_SecurityOfficeArea_4f8819f5-4898-4db1-b3bd-92d24c51c80f, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(CRE_ChainOfCommand_State_LeftInquisitorOfficeBeforeEnteringAstral_f4049c49-d505-4ddf-a790-45cc29eafabb, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(ORI_Laezel_State_BetrayedByVlaakith_175d8487-99dc-4009-9b45-6e9f29708cd7, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CRE_CrecheHostile();
SetFlag(CRE_ChainOfCommand_State_LeftInquisitorOfficeBeforeEnteringAstral_f4049c49-d505-4ddf-a790-45cc29eafabb);

IF
EnteredTrigger((GUIDSTRING)_Var1, S_CRE_AstralPlane_SUB_3f383c9a-fbe1-479e-a7ed-de86f65e93d9, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(CRE_AstralPrison_State_PlayerEnteredAstralPrison_889725f7-2635-462b-8062-97b5d8c91112, _Var1);
PlayAnimation(_Var1, CUST_Exiting_Astral_Plane_01_4043d9a9-8692-469b-9e7d-691ccfba8c3a, "");

IF
EnteredTrigger((GUIDSTRING)_Var1, S_CRE_AstralPlane_SUB_3f383c9a-fbe1-479e-a7ed-de86f65e93d9, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_StopLoopEffect(S_CRE_SecurtiyOfficePlanecaster_9144098a-c9c7-4425-a99d-d7375069e7b7, "CRE_AstralPlanecaster_VFX");


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act1b"
