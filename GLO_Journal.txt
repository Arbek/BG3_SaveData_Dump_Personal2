Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_GLO_TadpoleQuest_LearnedApprenticeConditions("LearnedNettieNearby_NoName");
DB_GLO_TadpoleQuest_LearnedApprenticeConditions("LearnedNettieNearby");
DB_GLO_TadpoleQuest_LearnedApprenticeConditions("LearnedAboutNettie");
DB_QuestDef_BookReadState("GLO_Tadpole", "LearnedCureDaleland", S_DEN_AntidoteRecipeBook_6557e2a7-ee82-4c5a-a26b-9056e4eb03df);
DB_QuestDef_ChainedState("GLO_Tadpole", "LearnedLostHalsin", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "LearnedResearchHalsin", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Unknown_KillLeaders", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Known_KillLeaders", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Unknown_AoD", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinLeft_NoHelp_Known", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinLeft_NoHelp_Unknown", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Known", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Unknown", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Known_Asharak", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Unknown_Asharak", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Known_Cerys", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Unknown_Cerys", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "GoToMoonrise", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "GoToMoonrise_NoIntro", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "GoToMoonrise_SkippedGrove", "LearnedHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "LearnedHalsinDiary", "LearnedHalsin");
DB_QuestDef_BookReadState("GLO_Tadpole", "ReadHalsinDiary", S_GLO_HalsinDiary_5e4aafd4-f56c-4b05-ad5a-00eccdb87d9d);
DB_QuestDef_ChainedState("GLO_Tadpole", "ReadHalsinDiary", "LearnedPostHalsin");
DB_QuestDef_ChainedState("GLO_Tadpole", "HeardHalsinSwD", "LearnedPostHalsin");
DB_QuestDef_SawDeadState("GLO_Tadpole", "EthelDiedEarly", S_HAG_Hag_c457d064-83fb-4ec6-b74d-1f30dfafd12d);
DB_QuestDef_ChainedState("GLO_Tadpole", "LearnPriestess", "LearnedPriestess");
DB_QuestDef_ChainedState("GLO_Tadpole", "GotBranded", "LearnedPriestess");
DB_QuestDef_SawDeadState("GLO_Tadpole", "MFDiedEarly", S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53);
DB_QuestDef_ChainedState("GLO_Tadpole", "AskedToCheck", "LearnedSociety");
DB_GLO_Tadpole_SUB_Apprentice_Died(0, "ApprenticeDied_BeforeTadpoled");
DB_GLO_Tadpole_SUB_Apprentice_Died(1, "ApprenticeDied_Tadpoled");
DB_QuestDef_State(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, "GLO_Tadpole", "Apprentice_PointOfNoReturn");
DB_QuestDef_ChainedState("GLO_Tadpole", "ToldEthelAboutTadpoleInGrove", "LearnedEthel");
DB_QuestDef_ChainedState("GLO_Tadpole", "ToldEthelAboutTadpoleInTeahouse", "LearnedEthel");
DB_QuestDef_SawDeadState("GLO_Tadpole", "HagDied", S_HAG_Hag_c457d064-83fb-4ec6-b74d-1f30dfafd12d);
DB_QuestDef_State(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, "GLO_Tadpole", "Hag_PointOfNoReturn");
DB_QuestDef_State(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, "GLO_Tadpole", "Priestess_PointOfNoReturn");
DB_QuestDef_ChainedState("ORI_COM_Laezel", "FoundZorruLZAbsent", "GLO_Tadpole", "FoundZorru_LaezelAtCamp");
DB_QuestDef_State_ConditionalFlag(GLO_GithCreche_State_EverEnteredBefore_3ebdfeaa-4e83-4878-90db-01adb9fdf629, "GLO_Tadpole", "ReachedCreche", 0, GLO_Laezel_State_PermaDefeated_43c2fc09-a064-42a9-a722-444b53a768fd);
DB_QuestDef_State_ConditionalFlag(GLO_GithCreche_State_EverEnteredBefore_3ebdfeaa-4e83-4878-90db-01adb9fdf629, "GLO_Tadpole", "ReachedCreche_LaezelPermaDefeated", 1, GLO_Laezel_State_PermaDefeated_43c2fc09-a064-42a9-a722-444b53a768fd);
DB_QuestDef_State(PLA_GithChokepoint_Event_AllGithsDefeated_b329e2d8-31c8-4861-ae87-224e86f51682, "GLO_Tadpole", "DefeatedCheckpoint");
DB_QuestDef_State(ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2, "GLO_Tadpole", "LearnedCreche");
DB_QuestDef_State(GLO_GithChokepoint_Knows_DecipheredMap_604768b9-c983-414d-8c3b-ba1dee3da387, "GLO_Tadpole", "LearnedCreche");
DB_GLO_Tadpole_SUB_Creche_KnowsAboutCrecheDevice("ReachedCreche");
DB_GLO_Tadpole_SUB_Creche_KnowsAboutCrecheDevice("ReachedCreche_LaezelPermaDefeated");
DB_GLO_Tadpole_SUB_Creche_KnowsAboutCrecheDevice("ReachedCreche_BetrayedByVlaakith");
DB_GLO_Tadpole_SUB_Creche_KnowsAboutCrecheDevice("DirectedToInfirmary");
DB_GLO_Tadpole_SUB_Creche_KnowsAboutCrecheDevice("DirectedToInfirmary_BetrayedByVlaakith");
DB_QuestDef_State(CRE_GithInfirmary_State_DoctorWaitsAtDevice_2b20d248-1378-432b-88c6-f5b052107afd, "GLO_Tadpole", "UseZaithisk");
DB_QuestDef_State(CRE_GithInfirmary_State_UsedDevice_a56d58c6-2a81-4a80-a4f6-4f73f254b40c, "GLO_Tadpole", "UsedPurifier");
DB_QuestDef_State(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, "GLO_Tadpole", "CrecheNoLongerAccessible");
DB_QuestDef_State(CRE_Lance_Event_Exploded_f7d93dd1-c30e-4ef2-87c0-0cada12f180d, "GLO_Tadpole", "CrecheExploded");
DB_GLO_Halsin_StartingEntries("LearnedLostHalsin");
DB_GLO_Halsin_StartingEntries("LearnedResearchHalsin");
DB_GLO_Halsin_StartingEntries("LearnedHalsinDiary");
DB_GLO_Halsin_StartingEntries("FoundHalsin_Unknown_KillLeaders");
DB_GLO_Halsin_StartingEntries("FoundHalsin_Known_KillLeaders");
DB_GLO_Halsin_StartingEntries("FoundHalsin_Unknown_AoD");
DB_GLO_Halsin_StartingEntries("FoundHalsin_Known_AoD");
DB_GLO_Halsin_StartingEntries("FoundHalsin_Unknown_LeadershipDead");
DB_GLO_Halsin_StartingEntries("FoundHalsin_Known_LeadershipDead");
DB_GLO_Halsin_StartingEntries("HalsinLeft_NoHelp_Known");
DB_GLO_Halsin_StartingEntries("HalsinLeft_NoHelp_Unknown");
DB_GLO_Halsin_StartingEntries("HalsinAtGrove_Known");
DB_GLO_Halsin_StartingEntries("HalsinAtGrove_Unknown");
DB_GLO_Halsin_ClosingEntries(1, "GoToMoonrise");
DB_GLO_Halsin_ClosingEntries(0, "GoToMoonrise_NoIntro");
DB_GLO_Halsin_SubquestStarted(0);
DB_GLO_Halsin_FirstHalsinInteraction(GLO_Halsin_Quest_AskedKilledLeaders_853122c7-f2e2-a2a0-a2b4-67ae09c3ac73, 1, "FoundHalsin_Known_KillLeaders");
DB_GLO_Halsin_FirstHalsinInteraction(GLO_Halsin_Quest_AskedKilledLeaders_853122c7-f2e2-a2a0-a2b4-67ae09c3ac73, 0, "FoundHalsin_Unknown_KillLeaders");
DB_GLO_Halsin_FirstHalsinInteraction(GLO_Halsin_Quest_AskedDefendGrove_1945d6bc-199a-d8c5-4b1a-641ee942bf78, 1, "FoundHalsin_Known_AoD");
DB_GLO_Halsin_FirstHalsinInteraction(GLO_Halsin_Quest_AskedDefendGrove_1945d6bc-199a-d8c5-4b1a-641ee942bf78, 0, "FoundHalsin_Unknown_AoD");
DB_GLO_Halsin_FirstHalsinInteraction(GLO_Halsin_Quest_LeadershipAlreadyDead_25d57f1d-f24d-17cc-29a4-40fa5b53afa2, 1, "FoundHalsin_Known_LeadershipDead");
DB_GLO_Halsin_FirstHalsinInteraction(GLO_Halsin_Quest_LeadershipAlreadyDead_25d57f1d-f24d-17cc-29a4-40fa5b53afa2, 0, "FoundHalsin_Unknown_LeadershipDead");
DB_QuestDef_BookReadState("GLO_Tadpole", "LearnedResearchHalsin", S_DEN_DruidTadpoleBook_acd84c20-a9f1-4c80-861a-e8636f77e02e);
DB_QuestDef_State(GLO_Halsin_Knows_StudiedTadpole_de639590-00c8-c4f1-7baf-56f92420ea41, "GLO_Tadpole", "LearnedResearchHalsin");
DB_QuestDef_State(GLO_Halsin_Knows_WentWithAdventurers_76537faa-016f-f6a9-8136-b236fbefd2e1, "GLO_Tadpole", "LearnedHalsinPosition");
DB_QuestDef_ConditionalState("GLO_Tadpole", "LearnedHalsinPosition", "LearnedExpeditionGoal", "LearnedResearchHalsin", 1);
DB_QuestDef_ConditionalState("GLO_Tadpole", "LearnedResearchHalsin", "LearnedExpeditionGoal", "LearnedHalsinPosition", 1);
DB_QuestDef_State(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, "GLO_Tadpole", "Halsin_PointOfNoReturn");
DB_GLO_TadpoleQuest_Druid_HalsinLeftNoHelp(0, "HalsinLeft_NoHelp_Unknown");
DB_GLO_TadpoleQuest_Druid_HalsinLeftNoHelp(1, "HalsinLeft_NoHelp_Known");
DB_GLO_TadpoleQuest_Druid_LeaderDiedEntries(0, "DruidLeaderDied_NoResearch");
DB_GLO_TadpoleQuest_Druid_LeaderDiedEntries(1, "DruidLeaderDied_Research");
DB_GLO_TadpoleQuest_Druid_HalsinReturnEntries(0, "HalsinReturned_Unknown");
DB_GLO_TadpoleQuest_Druid_HalsinReturnEntries(1, "HalsinReturned_Known");
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a, "HalsinAtGrove", 0, "HalsinAtGrove_Unknown");
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a, "HalsinAtGrove", 1, "HalsinAtGrove_Known");
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(S_DEN_Trainer_02025646-347a-4235-aef7-e46b7c94b435, "HalsinAtGrove", 0, "HalsinAtGrove_Unknown_Asharak");
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(S_DEN_Trainer_02025646-347a-4235-aef7-e46b7c94b435, "HalsinAtGrove", 1, "HalsinAtGrove_Known_Asharak");
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(S_DEN_BackupLeader_b304e07d-019c-4ec6-b5ea-c4ccb29ed892, "HalsinAtGrove", 0, "HalsinAtGrove_Unknown_Cerys");
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(S_DEN_BackupLeader_b304e07d-019c-4ec6-b5ea-c4ccb29ed892, "HalsinAtGrove", 1, "HalsinAtGrove_Known_Cerys");
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a, "HalsinSentToRath", 0, "HalsinSentToRath");
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(S_DEN_Trainer_02025646-347a-4235-aef7-e46b7c94b435, "HalsinSentToRath", 0, "HalsinSentToRath_Asharak");
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(S_DEN_BackupLeader_b304e07d-019c-4ec6-b5ea-c4ccb29ed892, "HalsinSentToRath", 0, "HalsinSentToRath_Cerys");
DB_GLO_TadpoleQuest_Druid_KillLeaders("FoundHalsin_KingDead", S_GOB_GoblinKing_11337af0-6a57-426b-a820-c4b00923dd54);
DB_GLO_TadpoleQuest_Druid_KillLeaders("FoundHalsin_DrowDead", S_GOB_DrowCommander_25721313-0c15-4935-8176-9f134385451b);
DB_GLO_TadpoleQuest_Druid_KillLeaders("FoundHalsin_PriestessDead", S_GOB_GoblinPriest_b983c336-9a14-4e9b-adb9-4689e7e0afa9);
DB_QuestDef_ChainedState("GLO_Tadpole", "UsedPurifier", "UsedPurifier_ParentCompletion");
DB_QuestDef_ChainedState("GLO_Tadpole", "HagTriedTadpoleHeal", "HagTriedTadpoleHeal_ParentCompletion");
DB_QuestDef_ChainedState("GLO_Tadpole", "PriestessImprisoned", "PriestessImprisoned_ParentCompletion");
DB_QuestDef_ChainedState("GLO_Tadpole", "PoisonedByApprentice", "PoisonedByApprentice_ParentCompletion");
DB_QuestDef_ChainedState("GLO_Tadpole", "ApprenticeDied_Tadpoled", "PoisonedByApprentice_ParentCompletion");
DB_QuestDef_ChainedState("GLO_Tadpole", "ApprenticePersuaded", "PoisonedByApprentice_ParentCompletion");
DB_QuestDef_ChainedState("GLO_Tadpole", "ToldAboutRing", "ToldAboutRing_ParentCompletion");
DB_QuestDef_State(PLA_Desire_State_Freed_1c015349-190c-d49f-1d93-227886976509, "PLA_GrandDukeRescue", "FreedCounsellor");
DB_QuestDef_State(PLA_Desire_State_Freed2_46dbc8ef-61fa-42c4-bc89-4a8f53d53e5b, "PLA_GrandDukeRescue", "FreedCounsellor");
DB_QuestDef_State(HAV_Florrick_Event_RavengardInTowers_8ecac57b-2137-36dd-2aee-7a43ec1169df, "PLA_GrandDukeRescue", "FlorrickTalkedHaven");
DB_QuestDef_State(COL_PartyProgress_EnteredColony_666abe92-f197-4c38-85a8-d879a9e258b6, "PLA_GrandDukeRescue", "ReachedMT");
DB_QuestDef_State(COL_KethericShowdown_Event_SawRavengardTadpoled_4c3514d1-7fe4-6ce5-8cc4-fc061c79d0b7, "PLA_GrandDukeRescue", "Tadpoled");
DB_QuestDef_State(IRN_IronThrone_State_RavengardPresent_2e102a34-500a-4cd2-ba93-51d1a8b96496, "PLA_GrandDukeRescue", "Kidnapped");
DB_QuestDef_State_ConditionalFlag(WYR_Ravengard_State_KilledBeforeIRN_bb43c67a-cc36-4498-9e76-1faaf010cc2a, "PLA_GrandDukeRescue", "DiedWyllParty", 1, GLO_Origin_PartOfTheTeam_Wyll_24e24ca7-3446-440b-b645-19404845e108);
DB_QuestDef_State(WYR_MeetingMizora_Event_MizoraLeftWYR_03f1d319-d5f4-8aa1-0f0d-d58e5b32bf2e, "PLA_GrandDukeRescue", "MizoraWentToCamp");
DB_QuestDef_State_ConditionalFlag(CAMP_MizorasPact_State_WyllReleasedFromPact_79a90490-b009-507c-e0d3-f79b0bdd4cb6, "PLA_GrandDukeRescue", "PactBroken", 0, GLO_Ravengard_State_Defeated_7bb624ef-09cb-4e55-b035-832c05427a61);
DB_QuestDef_State_ConditionalFlag(CAMP_MizorasPact_State_WyllReleasedFromPact_79a90490-b009-507c-e0d3-f79b0bdd4cb6, "PLA_GrandDukeRescue", "BrokenDead", 1, GLO_Ravengard_State_Defeated_7bb624ef-09cb-4e55-b035-832c05427a61);
DB_QuestDef_State_ConditionalFlag(CAMP_MizorasPact_State_WyllEternalPact_8da8b1fb-5aa9-8cf5-8b45-6f8ca31a1227, "PLA_GrandDukeRescue", "MizoraHint", 0, GLO_Ravengard_State_Defeated_7bb624ef-09cb-4e55-b035-832c05427a61);
DB_QuestDef_State(IRN_IronThrone_State_Visited_5b3fb5a7-61e8-44a9-a0a1-b6b45b59a23c, "PLA_GrandDukeRescue", "ReachedIRN");
DB_QuestDef_State(IRN_IronThrone_Event_RavengardLeftForCamp_c1492418-89a5-4d48-8a39-0f889281a5e2, "PLA_GrandDukeRescue", "RescuedIRN");
DB_QuestDef_State(WYR_Ravengard_State_Resurrected_86c9572d-84e7-b407-0ce6-84fd263418a1, "PLA_GrandDukeRescue", "Resurrected");
DB_QuestDef_State_ConditionalFlag(GLO_Ravengard_State_Defeated_7bb624ef-09cb-4e55-b035-832c05427a61, "PLA_GrandDukeRescue", "Dead", 0, GLO_Origin_PartOfTheTeam_Wyll_24e24ca7-3446-440b-b645-19404845e108);
DB_QuestDef_State_ConditionalFlag(GLO_Ravengard_State_Defeated_7bb624ef-09cb-4e55-b035-832c05427a61, "PLA_GrandDukeRescue", "Dead", 1, IRN_IronThrone_State_RavengardPresent_2e102a34-500a-4cd2-ba93-51d1a8b96496);
DB_QuestDef_State_ConditionalFlag(CAMP_Ravengard_Event_NoWyll_HasMet_9b370cfa-8be2-9f8e-b6c3-0bb23c165812, "PLA_GrandDukeRescue", "RescuedTalked", 1, IRN_IronThrone_State_RavengardPresent_2e102a34-500a-4cd2-ba93-51d1a8b96496);
DB_QuestDef_State_ConditionalFlag(CAMP_Ravengard_Event_NoWyll_HasMet_9b370cfa-8be2-9f8e-b6c3-0bb23c165812, "PLA_GrandDukeRescue", "ResurrectedTalked", 0, IRN_IronThrone_State_RavengardPresent_2e102a34-500a-4cd2-ba93-51d1a8b96496);
DB_QuestDef_State_ConditionalFlag(CAMP_Ravengard_Event_HasMetWyll_234fcc9d-b7bd-3ddb-cd16-e842b8a03988, "PLA_GrandDukeRescue", "RescuedTalked", 1, IRN_IronThrone_State_RavengardPresent_2e102a34-500a-4cd2-ba93-51d1a8b96496);
DB_QuestDef_State_ConditionalFlag(CAMP_Ravengard_Event_HasMetWyll_234fcc9d-b7bd-3ddb-cd16-e842b8a03988, "PLA_GrandDukeRescue", "ResurrectedTalked", 0, IRN_IronThrone_State_RavengardPresent_2e102a34-500a-4cd2-ba93-51d1a8b96496);
DB_GLO_GrandDukeRescue_LearnAboutMoonriseTowers(PLA_Tavern_Knows_DukeAtTowers_1c79d47a-6054-6de3-68ec-117f76e827ee);
DB_GLO_GrandDukeRescue_LearnAboutMoonriseTowers(GLO_Moonrise_Knows_Drow_13b2fa2a-c772-1073-d0ba-6f0c583593ff);
DB_GLO_GrandDukeRescue_LearnAboutMoonriseTowers(GLO_Absolute_Knows_MoonriseTowers_7253b35b-2ac8-ce7f-6181-689ef27536d9);
DB_GLO_GrandDukeRescue_LearnAboutMoonriseTowers(GLO_Moonrise_Knows_Prisoners_118341d6-8821-cd0d-c582-9ace3a6818f6);

KBSECTION
PROC
PROC_LevelLoadedOnce("WLD_Main_A", _, _, _, _)
THEN
QuestSetCategory("GLO_Tadpole", "Act1");

PROC
PROC_CRA_WakeupDone()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "WokeAtCrash");

IF
TimerFinished("CRA_Escape_Start_WakeUp", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var1, TRIGGERGUID_S_CRA_Escape_StartBox_53d01e20-6685-40f4-be98-5b967bf69e07, 0, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "WokeAtCrash");

IF
FlagSet(ORI_State_Recruited_e78c0aab-fb48-98e9-3ed9-773a0c39988d, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _)
AND
DB_CurrentLevel("WLD_Main_A", _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", "LaezelJoined");

IF
FlagSet(ORI_LaezelRecruitment_Event_InvitedToCamp_5ac352a5-58c2-a8ed-1957-199d8bc284da, NULL_00000000-0000-0000-0000-000000000000, _, _, _)
AND
DB_CurrentLevel("WLD_Main_A", _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", "LaezelJoined");

IF
QuestUpdateUnlocked((GUIDSTRING)_Var1, "GLO_Tadpole", (STRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GLO_TadpoleQuest_LearnedApprenticeConditions(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_Tadpole", "LearnedApprentice", 0, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_Tadpole", "LearnedApprentice_Scouts", 0, _Var1)
AND
DB_DialogPlayers(_Var3, _Var1, _, _Var1, _Var1)
THEN
PROC_GLO_Tadpole_GiveLearnedApprentice(_Var3, _Var1);

PROC
PROC_GLO_Tadpole_GiveLearnedApprentice((INTEGER)_Var1, (CHARACTER)_Var2, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND NOT
DB_DialogName(CHA_LaeZelRecruitment_TieflingsScene_e08f550a-8f06-89f7-40ed-98b02eb515e4, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", "LearnedApprentice");

PROC
PROC_GLO_Tadpole_GiveLearnedApprentice((INTEGER)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DialogName(CHA_LaeZelRecruitment_TieflingsScene_e08f550a-8f06-89f7-40ed-98b02eb515e4, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", "LearnedApprentice_Scouts");

PROC
PROC_DEN_RaidingParty_OpenGate_JournalHook()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "LearnedGroveSituation");

IF
DB_OnlyOnce("GLO_Tadpole_Tadpole", _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "SawTrueSoulMeldOrTadpole");

IF
DialogEnded(GLO_Tadpole_TrueSoulCorpse_8ceb5646-8c9b-f8f9-cfea-7e6a9f94159e, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", "SawTrueSoulMeldOrTadpole");

IF
QuestAccepted(_, "GLO_Moonrise", (CHARACTER)_, (CHARACTER)_, (CHARACTER)_)
THEN
QuestUpdate("GLO_Tadpole", "StartedInfiltration");

IF
DialogEnded(COL_KethericShowdown_CrownController_1bcd7cc6-6b38-3cf7-ca60-686d4eadc2b2, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
QuestUpdate("GLO_Tadpole", "SeenChosenThree");

IF
FlagSet(GLO_Halsin_State_Returned_5af86099-47f9-ba69-199a-fe91292a41bd, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
DB_GlobalFlag(_Var4, _, _, _, _)
AND
DB_CAMP_Halsin_HasMetHalsinFlags(_Var4, _, _, _, _)
THEN
QuestUpdate(_Var3, "GLO_Tadpole", "SavedHalsin_BeforeTadpoled");

IF
FlagSet((FLAG)_Var1, _, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_CAMP_Halsin_HasMetHalsinFlags(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(GLO_Halsin_State_Returned_5af86099-47f9-ba69-199a-fe91292a41bd, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var4, "GLO_Tadpole", "SavedHalsin_BeforeTadpoled");

IF
QuestUpdateUnlocked(_, "GLO_Tadpole", "LearnedKilledOrCaptured", (CHARACTER)_, (CHARACTER)_)
THEN
NOT DB_QuestDef_State(GLO_Halsin_Knows_WentWithAdventurers_76537faa-016f-f6a9-8136-b236fbefd2e1, "GLO_Tadpole", "LearnedHalsinPosition");

IF
FlagSet(DEN_AttackOnDen_Event_HalsinSpotted_40e35270-1762-2c46-ca80-c449802b755f, NULL_00000000-0000-0000-0000-000000000000, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
QuestIsAccepted(_Var2, "GLO_Tadpole_SUB_Druid", _Var3, _, _)
AND
DB_GLO_TadpoleQuest_Druid_HalsinReturnEntries(_Var3, _Var4, _, _, _)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", _Var4);

IF
DB_KnockedOut(S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, _, _, _, _)
AND NOT
DB_GlobalFlag(GLO_LiftingTheCurse_State_HalsinRecruitable_2c8b6be0-558d-485c-b4f2-93ec1926a2fa, _, _, _, _)
THEN
SetFlag(GLO_Halsin_State_PermaDefeated_86bc3df1-08b4-fbc4-b542-6241bcd03df1, NULL_00000000-0000-0000-0000-000000000000);

IF
QuestUpdateUnlocked(_, _, (STRING)_Var3, _, _)
AND
DB_GLO_Halsin_StartingEntries(_Var3, _, _, _, _)
AND NOT
DB_GlobalFlag(GLO_LiftingTheCurse_State_HalsinRecruitable_2c8b6be0-558d-485c-b4f2-93ec1926a2fa, _, _, _, _)
AND NOT
DB_QuestDef_SawDeadState("GLO_Tadpole", "HalsinDiedEarly", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, _, _)
THEN
DB_QuestDef_SawDeadState("GLO_Tadpole", "HalsinDiedEarly", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323);

IF
QuestUpdateUnlocked(_, _, (STRING)_Var3, _, _)
AND
DB_GLO_Halsin_StartingEntries(_Var3, _, _, _, _)
AND NOT
DB_GlobalFlag(GLO_LiftingTheCurse_State_HalsinRecruitable_2c8b6be0-558d-485c-b4f2-93ec1926a2fa, _, _, _, _)
AND NOT
DB_QuestDef_SawDefeatedState("GLO_Tadpole", "HalsinDiedEarly", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, _, _)
THEN
DB_QuestDef_SawDefeatedState("GLO_Tadpole", "HalsinDiedEarly", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323);

IF
FlagSet(GLO_Halsin_State_PermaDefeated_86bc3df1-08b4-fbc4-b542-6241bcd03df1, NULL_00000000-0000-0000-0000-000000000000, _, _, _)
AND NOT
DB_GlobalFlag(GLO_LiftingTheCurse_State_HalsinRecruitable_2c8b6be0-558d-485c-b4f2-93ec1926a2fa, _, _, _, _)
THEN
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "LearnedLostHalsin", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "LearnedResearchHalsin", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Unknown_KillLeaders", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Known_KillLeaders", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Unknown_AoD", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinLeft_NoHelp_Known", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinLeft_NoHelp_Unknown", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Known", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Unknown", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Known_Asharak", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Unknown_Asharak", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Known_Cerys", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Unknown_Cerys", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "GoToMoonrise", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "GoToMoonrise_NoIntro", "LearnedHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "LearnedHalsinDiary", "LearnedHalsin");

IF
QuestUpdateUnlocked(_, "GLO_Tadpole", "GoToMoonrise", (CHARACTER)_, (CHARACTER)_)
THEN
NOT DB_QuestDef_SawDeadState("GLO_Tadpole", "HalsinDiedEarly", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323);
NOT DB_QuestDef_SawDefeatedState("GLO_Tadpole", "HalsinDiedEarly", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323);

IF
QuestUpdateUnlocked(_, "GLO_Tadpole", "GoToMoonrise_NoIntro", (CHARACTER)_, (CHARACTER)_)
THEN
NOT DB_QuestDef_SawDeadState("GLO_Tadpole", "HalsinDiedEarly", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323);
NOT DB_QuestDef_SawDefeatedState("GLO_Tadpole", "HalsinDiedEarly", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323);

IF
UseStarted((GUIDSTRING)_Var1, S_GOB_GoblinPriest_HalsinNote_a10cb81b-ba44-446b-b736-f26d55475150, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_GlobalFlag(GLO_Halsin_Knows_IsFound_a0d83476-e2d0-4972-a76b-b23c39078cd7, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "LearnedHalsinDiary");

IF
QuestAccepted(_, "GLO_Tadpole_SUB_Druid", (CHARACTER)_, (CHARACTER)_, (CHARACTER)_)
THEN
NOT DB_GLO_Halsin_SubquestStarted(0);
DB_GLO_Halsin_SubquestStarted(1);
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "ReadHalsinDiary", "LearnedPostHalsin");
NOT DB_QuestDef_ChainedState("GLO_Tadpole", "HeardHalsinSwD", "LearnedPostHalsin");

IF
QuestUpdateUnlocked(_, "GLO_Tadpole", (STRING)_Var2, _, _)
AND
DB_QuestDef_State_ConditionalFlag(GLO_Halsin_Quest_AskedKilledLeaders_853122c7-f2e2-a2a0-a2b4-67ae09c3ac73, "GLO_Tadpole", _Var2, _, _)
THEN
DB_GLO_TadpoleQuest_Druid_FoundHalsinKillLeaders(1);

IF
DB_GLO_TadpoleQuest_Druid_FoundHalsinKillLeaders(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GLO_TadpoleQuest_Druid_KillLeaders(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var3, "GLO_Tadpole", _Var2);

IF
FlagSet((GUIDSTRING)_Var1, _, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GLO_Halsin_SubquestStarted(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
DB_GLO_Halsin_FirstHalsinInteraction(_Var1, _Var4, _Var5, _Var1, _Var1)
AND
DB_Players(_Var6, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var6, "GLO_Tadpole", _Var5);

IF
FlagSet(GOB_WolfPens_Event_HalsinLeavesGoblinCamp_a247e755-d8a0-4938-d122-d8ad9f48a674, NULL_00000000-0000-0000-0000-000000000000, _, _, _)
AND
DB_GlobalFlag(GOB_State_LeadersAreDead_a1c5b01f-4b7f-47ab-82b0-d24d9c6d8bc6, _, _, _, _)
AND NOT
DB_GlobalFlag(GLO_Halsin_State_WillSkipGrove_5c0de857-1de5-3098-5064-e6afaedb4eb4, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", "HalsinLeft_KilledLeaders");

IF
FlagSet(GOB_WolfPens_Event_HalsinLeavesGoblinCamp_a247e755-d8a0-4938-d122-d8ad9f48a674, NULL_00000000-0000-0000-0000-000000000000, _, _, _)
AND
DB_GlobalFlag(DEN_Lockdown_State_Active_0b54c7d2-b7b1-4d0f-b8e4-0cf1ee32b1eb, _, _, _, _)
AND
DB_GLO_Halsin_SubquestStarted(_Var2, _, _, _, _)
AND
DB_GLO_TadpoleQuest_Druid_HalsinLeftNoHelp(_Var2, _Var3, _, _, _)
AND
DB_Players(_Var4, _, _, _, _)
THEN
QuestUpdate(_Var4, "GLO_Tadpole", _Var3);

IF
FlagSet(GOB_WolfPens_Event_HalsinLeavesGoblinCamp_a247e755-d8a0-4938-d122-d8ad9f48a674, NULL_00000000-0000-0000-0000-000000000000, _, _, _)
AND
DB_GlobalFlag(GOB_DrowCommander_Event_RaidersSortie_26816b01-2d64-b50c-3bf6-bffd7dc5f0b9, _, _, _, _)
AND NOT
DB_GlobalFlag(DEN_Lockdown_State_Active_0b54c7d2-b7b1-4d0f-b8e4-0cf1ee32b1eb, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", "HalsinLeft_AoDStarted");

IF
FlagSet(GLO_Halsin_State_PermaDefeated_86bc3df1-08b4-fbc4-b542-6241bcd03df1, NULL_00000000-0000-0000-0000-000000000000, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
QuestIsAccepted(_Var2, "GLO_Tadpole_SUB_Druid", 1, _, _)
AND
QuestIsClosed("GLO_Tadpole_SUB_Druid", 0, _, _, _)
AND
QuestUpdateIsUnlocked(_Var2, "GLO_Tadpole", "LearnedResearchHalsin", _Var3, _)
AND
DB_GLO_TadpoleQuest_Druid_LeaderDiedEntries(_Var3, _Var4, _, _, _)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", _Var4);

PROC
PROC_GOB_DrowCommander_RaidersLeft_JournalHook()
AND
DB_GlobalFlag(GLO_Halsin_Quest_AskedKilledLeaders_853122c7-f2e2-a2a0-a2b4-67ae09c3ac73, _, _, _, _)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "ReportHalsin_AoDStarted");

PROC
PROC_DEN_TieflingRefugees_GobHuntVictory_JournalHook()
AND
DB_GlobalFlag(GLO_Halsin_Quest_AskedKilledLeaders_853122c7-f2e2-a2a0-a2b4-67ae09c3ac73, _, _, _, _)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "ReportHalsin_LeadersDefeated");

IF
DialogEnded(DEN_AttackOnDen_HalsinReturns_d9c2a89e-13fa-57f7-0fcf-4dfada32d693, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_DEN_HalsinReturns_JournalUpdate();

IF
DialogEnded(DEN_AttackOnDen_HalsinAndDruidLeader_790030b5-e20e-ff34-30e4-740e904fa6c7, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_DEN_HalsinReturns_JournalUpdate();

PROC
PROC_DEN_HalsinReturns_JournalUpdate()
AND NOT
DB_GlobalFlag(GLO_Halsin_Quest_MeetAgainInCamp_581b214b-2f5f-40e4-6171-8cbed7849026, _, _, _, _)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "StillNeedToSpeakToHalsin");

IF
FlagSet(GLO_Halsin_Quest_MeetAgainInCamp_581b214b-2f5f-40e4-6171-8cbed7849026, _, _, _, _)
AND
DB_DEN_CurrentDefenderLeader(_Var3, _, _, _, _)
AND
DB_GLO_Halsin_SubquestStarted(_Var4, _, _, _, _)
AND
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(_Var3, "HalsinAtGrove", _Var4, _Var5, _)
AND
DB_Players(_Var6, _, _, _, _)
THEN
QuestUpdate(_Var6, "GLO_Tadpole", _Var5);
DB_QuestDef_ChainedState("DEN_Conflict", "SidedTieflings_Celebrate", "GLO_Tadpole", "TalkedLeader_Celebrate");

IF
QuestUpdateUnlocked(_, "DEN_Conflict", "HalsinSentToRath", _, _)
AND
DB_DEN_CurrentDefenderLeader(_Var2, _, _, _, _)
AND
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(_Var2, "HalsinSentToRath", 0, _Var3, _)
AND
DB_GlobalFlag(GLO_Halsin_Quest_MeetAgainInCamp_581b214b-2f5f-40e4-6171-8cbed7849026, _, _, _, _)
AND
DB_Players(_Var4, _, _, _, _)
THEN
QuestUpdate(_Var4, "GLO_Tadpole", _Var3);

IF
QuestUpdateUnlocked(_, "DEN_Conflict", "HalsinSentToRath", _, _)
AND
DB_DEN_CurrentDefenderLeader(_Var2, _, _, _, _)
AND
DB_GLO_TadpoleQuest_Druid_HalsinLeaderEntries(_Var2, "HalsinSentToRath", 0, _Var3, _)
AND NOT
DB_GlobalFlag(GLO_Halsin_Quest_MeetAgainInCamp_581b214b-2f5f-40e4-6171-8cbed7849026, _, _, _, _)
AND
DB_Players(_Var4, _, _, _, _)
THEN
QuestUpdate(_Var4, "GLO_Tadpole", "HalsinSentToRath_Return");

IF
FlagSet(GLO_Halsin_Quest_GoToMoonrise_f334b6de-349a-01e6-2a04-d794a62b38ec, _, _, _, _)
AND NOT
DB_GlobalFlag(GLO_Halsin_State_WillSkipGrove_5c0de857-1de5-3098-5064-e6afaedb4eb4, _, _, _, _)
AND
GetFlag(GOB_WolfPens_State_HalsinIntroHappened_7d0751b9-1055-4a54-9ccd-f5e95e2a1f69, NULL_00000000-0000-0000-0000-000000000000, _Var3, _, _)
AND
DB_GLO_Halsin_ClosingEntries(_Var3, _Var4, _, _, _)
AND
DB_Players(_Var5, _, _, _, _)
THEN
QuestUpdate(_Var5, "GLO_Tadpole", _Var4);

IF
FlagSet(GLO_Halsin_Quest_GoToMoonrise_f334b6de-349a-01e6-2a04-d794a62b38ec, _, _, _, _)
AND
DB_GlobalFlag(GLO_Halsin_State_WillSkipGrove_5c0de857-1de5-3098-5064-e6afaedb4eb4, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
THEN
QuestUpdate(_Var3, "GLO_Tadpole", "GoToMoonrise_SkippedGrove");

IF
FlagSet(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestIsAccepted(_Var3, "GLO_Tadpole_SUB_Druid", 1, _, _)
THEN
QuestUpdate("GLO_Tadpole", "Tadpole_PointOfNoReturn");

PROC
PROC_GOB_GoblinPriest_FadeOut((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "PriestessImprisoned");

IF
FlagSet(GOB_GoblinPriest_State_Dead_78f21b35-a10a-4db2-9230-025691645103, NULL_00000000-0000-0000-0000-000000000000, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var2, "GLO_Tadpole", "LearnedPriestess", 1, _)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", "PriestessDied");

PROC
PROC_DEN_AttackOnDen_SideWithTieflings_JournalHook()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "PriestessTurnedHostile");

PROC
PROC_CAMP_GoblinHuntCelebration_RaidersBetrayal_JournalHook()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "PriestessTurnedHostile");

IF
QuestUpdateUnlocked((CHARACTER)_Var1, "GLO_Tadpole", "PriestessImprisoned", (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
NOT DB_QuestDef_SawDeadState("GLO_Tadpole", "PriestessDiedEarly", S_GOB_GoblinPriest_b983c336-9a14-4e9b-adb9-4689e7e0afa9);

IF
QuestAccepted(_, "GLO_Tadpole_SUB_Priestess", (CHARACTER)_, (CHARACTER)_, (CHARACTER)_)
THEN
DB_QuestDef_SawDeadState("GLO_Tadpole", "PriestessDiedEarly", S_GOB_GoblinPriest_b983c336-9a14-4e9b-adb9-4689e7e0afa9);

IF
FlagSet(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestIsAccepted(_Var3, "GLO_Tadpole_SUB_Priestess", 1, _, _)
THEN
QuestUpdate("GLO_Tadpole", "Tadpole_PointOfNoReturn");

PROC
PROC_CheckFirstTimeRecruited(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND
DB_GlobalFlag(ORI_LaezelRecruitment_State_CrashVersionInitiated_a80f2bd8-ffa1-4065-a92a-d01d59907637, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "LaezelToldCreche_NoZorru");

PROC
PROC_CheckFirstTimeRecruited(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND
DB_GlobalFlag(ORI_LaezelRecruitment_State_ChapelVersionInitiated_e6015bdf-276e-47b2-9a43-9bc0c981e1ad, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "LaezelToldCreche");

PROC
PROC_StateSet_PermaDefeated(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND NOT
DB_Players(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND NOT
DB_GlobalFlag(GLO_GithCreche_State_EverEnteredBefore_3ebdfeaa-4e83-4878-90db-01adb9fdf629, _, _, _, _)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate("GLO_Tadpole", "LaezelPermaDefeatedEarly");

IF
DB_Dead(S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Sees(_Var1, S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2, _Var1, _Var1, _Var1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_Tadpole", "FoundZorru_LaezelAtCamp", 1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_Tadpole", "TieflingToldCreche", 0, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_Tadpole", "TadpoleGotNoInfoFromZorru", 0, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_Tadpole", "TadpoleGotNoInfoFromZorruWithoutKnowingHim", 0, _Var1)
THEN
QuestUpdate("GLO_Tadpole", "TadpoleZorruDied");

IF
FlagSet(ORI_Laezel_Quest_ZorruLeft_f2a667a1-b1c9-4ead-97c3-54cccf099462, _, _, _, _)
AND NOT
DB_GlobalFlag(ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "FoundZorru_LaezelAtCamp", 1, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "TieflingToldCreche", 0, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "TadpoleGotNoInfoFromZorru", 0, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "TadpoleGotNoInfoFromZorruWithoutKnowingHim", 0, _)
THEN
QuestUpdate("GLO_Tadpole", "TadpoleZorruLeft");

IF
FlagSet(ORI_Laezel_Quest_GotNoInfoFromZorru_2780a235-1089-4135-aa37-6fa03a0467a8, _, _, _, _)
AND NOT
DB_GlobalFlag(ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "TadpoleGotNoInfoFromZorruWithoutKnowingHim");

IF
FlagSet(ORI_Laezel_Quest_GotNoInfoFromZorru_2780a235-1089-4135-aa37-6fa03a0467a8, _, _, _, _)
AND
DB_GlobalFlag(ORI_Laezel_State_CaringAboutZorru_05c85d1f-11e6-4219-a047-901b958c3578, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "TadpoleGotNoInfoFromZorru");

IF
DialogEnded(PLA_GithChokepoint_DragonEvent_3eb22b2c-bc59-03de-7a6e-68940620b16c, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var2, "GLO_Tadpole", "TieflingToldCreche", 1, _)
THEN
QuestUpdate("GLO_Tadpole", "FoundPatrol_KnewAboutPatrol");

IF
DialogEnded(PLA_GithChokepoint_DragonEvent_3eb22b2c-bc59-03de-7a6e-68940620b16c, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var2, "GLO_Tadpole", "TieflingToldCreche", 0, _)
THEN
QuestUpdate("GLO_Tadpole", "FoundPatrol_DidntKnowAboutPatrol");

PROC
PROC_GLO_GithChokepoint_Outcome(1, _, _, _, _)
AND NOT
DB_GlobalFlag(PLA_GithChokepoint_State_VossRevealedLocation_8e527ca3-eb01-4fe3-acb3-231c8ad18fcb, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "GithChokepointEnded");

PROC
PROC_GLO_GithChokepoint_Outcome(0, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "CheckpointCombatStarted");

PROC
PROC_PLA_GithChokepoint_CheckStartWRD()
AND NOT
DB_GlobalFlag(PLA_GithChokepoint_Event_AllGithsDefeated_b329e2d8-31c8-4861-ae87-224e86f51682, _, _, _, _)
AND
DB_GlobalFlag(PLA_GithChokepoint_State_VossRevealedLocation_8e527ca3-eb01-4fe3-acb3-231c8ad18fcb, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "LearnedCreche");

PROC
PROC_CheckFirstTimeRecruited(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND
DB_GlobalFlag(ORI_LaezelRecruitment_State_PlainsVersionInitiated_59bda4f5-708b-4f23-aaba-d5f387ae95c2, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "LaezelToldMap");

IF
LevelLoaded("CRE_Main_A", _, _, _, _)
AND
DB_GlobalFlag(ORI_Laezel_Knows_CrecheLocation_696c423d-e6da-428e-a7fe-c083fffccad2, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "ReachedCrecheRegionWithClues");

PROC
PROC_CheckFirstTimeRecruited(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND
DB_GlobalFlag(ORI_Laezel_State_RecruitmentInCrecheActive_674e1fbb-7174-4c62-9581-08c67aeeaaa4, _, _, _, _)
AND NOT
DB_GlobalFlag(ORI_Laezel_State_StayedBehindInCreche_9705545c-fb54-4ff4-b16b-3326cce76dd8, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "RecruitedLaezel_Creche");

IF
FlagSet(CRE_ChainofCommand_ToldReportToInfirmary_5c8cfe96-4428-417e-87de-ce1012f1dc30, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
QuestUpdate("GLO_Tadpole", "DirectedToInfirmary");

IF
FlagSet(CRE_GithInfirmary_State_PlayerVisited_6ff86231-2957-4b42-873e-3911adaa5458, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
QuestUpdate("GLO_Tadpole", "FoundInfirmary");

IF
FlagSet(CRE_GithInfirmary_State_DoctorWaitsAtDevice_2b20d248-1378-432b-88c6-f5b052107afd, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
QuestUpdate("GLO_Tadpole", "UseZaithisk");

IF
DialogEnded(CRE_GithInfirmary_Doctor_9d7953d8-4b2c-93a7-25ab-094c0ed931cd, _, _, _, _)
AND NOT
DB_GlobalFlag(CRE_GithInfirmary_State_DoctorWaitsAtDevice_2b20d248-1378-432b-88c6-f5b052107afd, _, _, _, _)
THEN
QuestUpdate("GLO_Tadpole", "SpokeToDoctor_NotWaiting");

IF
FlagSet(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "ReachedCreche", 1, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "DirectedToInfirmary", 0, _)
THEN
QuestUpdate("GLO_Tadpole", "ReachedCreche_BetrayedByVlaakith");

IF
FlagSet(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "ReachedCreche_LaezelPermaDefeated", 1, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "FoundInfirmary", 0, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "DirectedToInfirmary", 0, _)
THEN
QuestUpdate("GLO_Tadpole", "ReachedCreche_BetrayedByVlaakith");

IF
FlagSet(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "DirectedToInfirmary", 1, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "FoundInfirmary", 0, _)
THEN
QuestUpdate("GLO_Tadpole", "DirectedToInfirmary_BetrayedByVlaakith");

IF
FlagSet(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "FoundInfirmary", 1, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "UseZaithisk", 0, _)
THEN
QuestUpdate("GLO_Tadpole", "SpeakToDoctor_BetrayedByVlaakith");

IF
FlagSet(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "UseZaithisk", 1, _)
THEN
QuestUpdate("GLO_Tadpole", "UseZaithisk_BetrayedByVlaakith");

IF
DB_Defeated(S_CRE_Doctor_c04c1977-d53f-4b5c-a29d-2e8d75024768, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GLO_Tadpole_SUB_Creche_KnowsAboutCrecheDevice(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_Tadpole", _Var2, 1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_Tadpole", "UseZaithisk", 0, _Var1)
THEN
QuestUpdate("GLO_Tadpole", "UseDevice");

IF
FlagSet(CRE_ChainOfCommand_State_InquisitorSituationFinished_acc50a19-c0f3-425b-b1a1-ac5bbd466b8f, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "UseDevice", 1, _)
THEN
QuestUpdate("GLO_Tadpole", "UseDevice_BetrayedByVlaakith");

IF
FlagSet(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestIsAccepted(_Var3, "GLO_Tadpole_SUB_Creche", 1, _, _)
THEN
QuestUpdate("GLO_Tadpole", "Tadpole_PointOfNoReturn");

PROC
PROC_DEN_Apprentice_ThornCured((CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_Tadpole", "PoisonedByApprentice", 1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_Tadpole", "CuredApprenticePoison");

PROC
PROC_StateSet_PermaDefeated(S_DEN_Apprentice_7cabf226-e34b-4556-8903-a45d0fe26caf, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
GetFlag(DEN_Apprentice_Event_ReachedCyanideDialog_bcc31a3c-72e6-4720-98f1-6b7c2a40c6ba, NULL_00000000-0000-0000-0000-000000000000, _Var1, _Var1, _Var1)
AND
DB_GLO_Tadpole_SUB_Apprentice_Died(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
QuestUpdateIsUnlocked(_Var3, "GLO_Tadpole", "PoisonedByApprentice", 0, _Var1)
THEN
QuestUpdate(_Var3, "GLO_Tadpole", _Var2);

PROC
PROC_DEN_ApprenticePersuaded_JournalHook()
AND
DB_DEN_Apprentice_Tadpoled(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(DEN_Apprentice_Event_ApplyPoison_f4df286d-2866-4acd-818f-6008e8db4212, _Var1, 0, _Var1, _Var1)
AND
DB_DEN_Apprentice_Tadpoled(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var2, "GLO_Tadpole", "ApprenticePersuaded");

IF
QuestAccepted(_, "GLO_Tadpole_SUB_Apprentice", (CHARACTER)_, (CHARACTER)_, (CHARACTER)_)
THEN
DB_QuestDef_SawDeadState("GLO_Tadpole", "ApprenticeDiedEarly", S_DEN_Apprentice_7cabf226-e34b-4556-8903-a45d0fe26caf);

IF
QuestUpdateUnlocked(_, "GLO_Tadpole", "PoisonedByApprentice", (CHARACTER)_, (CHARACTER)_)
THEN
NOT DB_QuestDef_SawDeadState("GLO_Tadpole", "ApprenticeDiedEarly", S_DEN_Apprentice_7cabf226-e34b-4556-8903-a45d0fe26caf);

IF
FlagSet(DEN_Apprentice_Event_ReachedCyanideDialog_bcc31a3c-72e6-4720-98f1-6b7c2a40c6ba, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
NOT DB_QuestDef_SawDeadState("GLO_Tadpole", "ApprenticeDiedEarly", S_DEN_Apprentice_7cabf226-e34b-4556-8903-a45d0fe26caf);

IF
FlagSet(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestIsAccepted(_Var3, "GLO_Tadpole_SUB_Apprentice", 1, _, _)
THEN
QuestUpdate("GLO_Tadpole", "Tadpole_PointOfNoReturn");

IF
QuestUpdateUnlocked(_, "GLO_Tadpole", "HagTriedTadpoleHeal ", (CHARACTER)_, (CHARACTER)_)
THEN
NOT DB_QuestDef_SawDeadState("GLO_Tadpole", "EthelDiedEarly", S_HAG_Hag_c457d064-83fb-4ec6-b74d-1f30dfafd12d);

IF
FlagSet(Act2_PointOfNoReturnReached_a3155f30-b8f3-4db5-ac21-d3036f4426e3, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestIsAccepted(_Var3, "GLO_Tadpole_SUB_Hag", 1, _, _)
THEN
QuestUpdate("GLO_Tadpole", "Tadpole_PointOfNoReturn");

IF
QuestUpdateUnlocked((GUIDSTRING)_Var1, "GLO_Tadpole", "ToldAboutRing", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
NOT DB_QuestDef_SawDeadState("GLO_Tadpole", "MFDiedEarly", S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53);

IF
FlagSet(GLO_IronhandGnomes_Knows_WulbrenInMoonrise_28cc20f8-9052-110a-aa87-76b860f038b0, _, (INTEGER)_Var2, _, _)
AND
DB_DialogName(UND_GnomeForeman_a59832df-8838-e23b-3106-bb65e599f7fa, _Var2, _, _, _)
THEN
QuestUpdate("MOO_GnomeRescue", "UND_HeardCaptivesAtMT");

IF
FlagSet(GLO_IronhandGnomes_Knows_WulbrenInMoonrise_28cc20f8-9052-110a-aa87-76b860f038b0, _, (INTEGER)_Var2, _, _)
AND
DB_DialogName(UND_UnfortunateGnome_9b485467-6333-15a7-9c79-15757b5fb547, _Var2, _, _, _)
THEN
QuestUpdate("MOO_GnomeRescue", "UND_HeardCaptivesAtMT_Barcus");

IF
FlagSet((GUIDSTRING)_Var1, _, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GLO_GrandDukeRescue_LearnAboutMoonriseTowers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_GrandDukeRescue_UpdateLearnedAboutMoonrise();

IF
QuestUpdateUnlocked(_, "PLA_GrandDukeRescue", "Counsellor_AcceptedHelp_NoLocation", (CHARACTER)_, (CHARACTER)_)
THEN
PROC_GLO_GrandDukeRescue_UpdateLearnedAboutMoonrise();

PROC
PROC_GLO_GrandDukeRescue_UpdateLearnedAboutMoonrise()
AND NOT
DB_OnlyOnce("PLA_GrandDukeRescue_UnlockedLearnedMoonrise", _, _, _, _)
AND
QRY_GLO_GrandDukeRescue_KnowsAboutMoonrise()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "PLA_GrandDukeRescue", "Counsellor_AcceptedHelp_NoLocation", 1, _Var1)
AND
QRY_OnlyOnce("PLA_GrandDukeRescue_UnlockedLearnedMoonrise", _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "PLA_GrandDukeRescue", "LearnedMoonrise");

QRY
QRY_GLO_GrandDukeRescue_KnowsAboutMoonrise()
AND
DB_GLO_GrandDukeRescue_LearnAboutMoonriseTowers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
FlagSet(IRN_IronThrone_State_IndividualPrisonerFree_4c120f58-ad6c-438a-b35b-1bb3d4ed5e87, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
THEN
QuestUpdate(_Var2, "PLA_GrandDukeRescue", "EscortIRN");

IF
QuestUpdateUnlocked(_, "PLA_GrandDukeRescue", "LearnedMoonrise", (CHARACTER)_, (CHARACTER)_)
THEN
QuestSetCategory("PLA_GrandDukeRescue", "Shadowcurse");

IF
QuestUpdateUnlocked(_, "PLA_GrandDukeRescue", "Tadpoled", (CHARACTER)_, (CHARACTER)_)
THEN
QuestSetCategory("PLA_GrandDukeRescue", "BaldursGate");


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Start"
