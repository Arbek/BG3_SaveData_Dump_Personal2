Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_Achievements("BG3_Quest01", -1, "GLOBAL");
DB_Achievements("BG3_Quest02", -1, "GLOBAL");
DB_Achievements("BG3_Quest03", -1, "GLOBAL");
DB_Achievements("BG3_Quest04", -1, "GLOBAL");
DB_Achievements("BG3_Quest05", -1, "GLOBAL");
DB_Achievements("BG3_Quest06", -1, "GLOBAL");
DB_Achievements("BG3_Quest07", -1, "GLOBAL");
DB_Achievements("BG3_Quest08", -1, "GLOBAL");
DB_Achievements("BG3_Quest09", 10, "PER_USER");
DB_Achievements("BG3_Quest10", 4, "GLOBAL");
DB_Achievements("BG3_Quest11", -1, "PER_USER");
DB_Achievements("BG3_Quest12", 5, "PER_USER");
DB_Achievements("BG3_Quest13", -1, "PER_USER");
DB_Achievements("BG3_Quest14", -1, "PER_USER");
DB_Achievements("BG3_Quest15", -1, "PER_USER");
DB_Achievements("BG3_Quest16", -1, "PER_CHARACTER");
DB_Achievements("BG3_Quest17", 3, "PER_USER");
DB_Achievements("BG3_Quest18", -1, "PER_USER");
DB_Achievements("BG3_Quest19", -1, "PER_USER");
DB_Achievements("BG3_Quest20", -1, "PER_USER");
DB_Achievements("BG3_Quest21", -1, "GLOBAL");
DB_Achievements("BG3_Quest22", -1, "GLOBAL");
DB_Achievements("BG3_Quest23", -1, "GLOBAL");
DB_Achievements("BG3_Quest24", -1, "GLOBAL");
DB_Achievements("BG3_Quest25", -1, "GLOBAL");
DB_Achievements("BG3_Quest26", -1, "PER_USER");
DB_Achievements("BG3_Quest27", -1, "GLOBAL");
DB_Achievements("BG3_Quest28", 100, "PER_USER");
DB_Achievements("BG3_Quest29", 5, "PER_CHARACTER");
DB_Achievements("BG3_Quest30", -1, "PER_CHARACTER");
DB_Achievements("BG3_Quest31", -1, "GLOBAL");
DB_Achievements("BG3_Quest32", -1, "GLOBAL");
DB_Achievements("BG3_Quest33", -1, "GLOBAL");
DB_Achievements("BG3_Quest34", -1, "GLOBAL");
DB_Achievements("BG3_Quest35", -1, "GLOBAL");
DB_Achievements("BG3_Quest36", -1, "GLOBAL");
DB_Achievements("BG3_Quest37", -1, "GLOBAL");
DB_Achievements("BG3_Quest38", -1, "GLOBAL");
DB_Achievements("BG3_Quest39", -1, "GLOBAL");
DB_Achievements("BG3_Quest40", -1, "GLOBAL");
DB_Achievements("BG3_Quest41", -1, "GLOBAL");
DB_Achievements("BG3_Quest42", -1, "PER_USER");
DB_Achievements("BG3_Quest43", 100, "PER_USER");
DB_Achievements("BG3_Quest44", 20, "PER_USER");
DB_Achievements("BG3_Quest45", -1, "PER_USER");
DB_Achievements("BG3_Quest46", -1, "PER_USER");
DB_Achievements("BG3_Quest47", -1, "PER_USER");
DB_Achievements("BG3_Quest48", -1, "PER_USER");
DB_Achievements("BG3_Quest49", -1, "PER_USER");
DB_Achievements("BG3_Quest50", -1, "PER_USER");
DB_Achievements("BG3_Quest51", -1, "PER_USER");
DB_Achievements("BG3_Quest52", -1, "PER_USER");
DB_Achievements("BG3_Quest53", -1, "GLOBAL");
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_Bard_4a405fba-3000-4c63-97e5-a8001ebb883c);
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_SnakeKid_02257c1c-bbec-4ae3-9bcb-31c75a0a982f);
DB_Achievements_BG3_Quest24_Tieflings(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68);
DB_Achievements_BG3_Quest24_Tieflings(S_GLO_ProdigyBrother_d0187724-c0e2-4019-a01d-a03ee8153f1b);
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_BackupLeader_b304e07d-019c-4ec6-b5ea-c4ccb29ed892);
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_Weaponsmith_e2ad06ec-8034-479a-9f69-b86faea6dc79);
DB_Achievements_BG3_Quest24_Tieflings(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c);
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_Trainee_002_bd7f31a6-98e8-46cd-97be-4347fa45d387);
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_Tiefling_010_23129d6c-8d39-4a4c-a4f6-cfc6637b597c);
DB_Achievements_BG3_Quest24_Tieflings(S_GLO_ProdigySister_44d09b0b-0568-456c-b18d-559a0a3f981d);
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_ThiefHideoutLeader_c8ab1ca6-96bb-467e-91c9-af87bc4d3925);
DB_Achievements_BG3_Quest24_Tieflings(S_GLO_Prodigy_b6a3a9e9-b6eb-4c19-ab3f-4c431178fe1b);
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_Trainee_001_1f839ad2-2bcb-47d2-8de9-db7a1fb5d67f);
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a);
DB_Achievements_BG3_Quest24_Tieflings(S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f);
DB_Achievements_BG3_Quest29_DamageCause("Attack");
DB_Achievements_BG3_Quest29_DamageCause("Offhand");
DB_Achievements_BG3_Quest29_DamageCause("Inventory_Item_Throw");
DB_Achievements_BG3_Quest29_DamageCause("World_Item_Throw");
DB_Achievements_BG3_Quest34_SurgerySpells("Target_SurgeryAttack_Bonesaw_Surgeon");
DB_Achievements_BG3_Quest34_SurgerySpells("Target_SurgeryAttack_Leech_Surgeon");
DB_Achievements_BG3_Quest34_SurgerySpells("Target_SurgeryAttack_Syringe_Surgeon");
DB_Achievements_BG3_Quest34_SurgerySpells("Target_SurgeryAttack_Trepan_Surgeon");
DB_Achievements_BG3_Quest35_TollCollectorSpells("Target_Summon_TollCollector");
DB_Achievements_BG3_Quest35_TollCollectorSpells("Target_CoinDamage_TollCollector");
DB_Achievements_BG3_Quest37_TrapStatuses("WYR_GORTASH_INCINERATOR_OVERHEATING");
DB_Achievements_BG3_Quest37_TrapStatuses("WYR_GORTASH_GRENADE");
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest46", ORI_Gale_Event_BombDisarmed_3d014e79-5595-9365-87bb-5cbb1f87fe5c, GLO_Elminster_CFM_GaleAlone_18fbb9de-dde3-bcdb-027e-f4c4dca138e4);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest46", ORI_Gale_Event_BombDisarmed_3d014e79-5595-9365-87bb-5cbb1f87fe5c, GLO_Elminster_CFM_GaleCom_3ded0f21-9103-50f1-3e1c-1213ecb7f9a5);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest47", ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e, CAMP_Laezel_VossCampConfrontation_SCO_LaezelAvatar_e43d9a2a-7ea7-41a7-78cb-a62ccdc582b4);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest47", ORI_Laezel_State_AgreedWithVossInAct2_63f1a107-a2af-46ec-ac49-a10d0166ac2e, CAMP_Laezel_VossCampConfrontation_SCO_LaezelCom_a85065d0-f5ec-cb25-31cd-5354f0c0614c);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest48", ORI_Shadowheart_State_NightsongPoint_GaveNightOrchid_cd01256d-93df-4d80-8d94-1233fe16ddf6, ShadowHeart_InParty_95ca3833-09d0-5772-b16a-c7a5e9208fe5);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest48", ORI_Shadowheart_State_NightsongPoint_GaveNightOrchid_cd01256d-93df-4d80-8d94-1233fe16ddf6, ShadowHeart_InParty2_Nested_ShadowCurseChapter_058b61ef-8af6-3f48-08c3-46cbd4374446);
DB_Achievements_UnlockAfterDialogPlayerFlag("BG3_Quest49", ORI_Karlach_State_WentToDate_b30f31df-474f-15f3-9bfb-1fc2983c846a, CAMP_Karlach_CRD_ROM_Date_2bf0d0c0-495c-6866-d5ad-d37dd4fa3648);
DB_Achievements_UnlockAfterDialogPlayerFlag("BG3_Quest50", ORI_Astarion_Event_LetAstarionBite_9476bf47-90ae-eeac-7500-554049ee5642, CAMP_AstarionHunger_SCO_Companion_359981f9-d660-96e2-3e94-218e92d5e479);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest51", CAMP_MizorasPact_State_WyllReleasedFromPact_79a90490-b009-507c-e0d3-f79b0bdd4cb6, CAMP_MizorasPact_CFM_332084e3-3f24-6ad2-50af-62ee0d0d54c2);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest52", ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3, LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest52", ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3, CAMP_DarkUrge_Bloodwedding_SD_e0a79044-1745-8d6c-99f2-21a7226e7fa8);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest52", ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3, CAMP_DarkUrge_KilledIsobel_SD_cf9ed4a0-7e1d-a0d5-eea7-3ea5aced83a1);
DB_Achievements_UnlockAfterDialogGlobalFlag("BG3_Quest52", ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3, CAMP_DarkUrge_SkippedTempleFinale_SD_8b5bb777-741d-401b-23bb-106ca61b2d59);

KBSECTION
PROC
PROC_Achievements_BG3_EndingAchievementsHook()
THEN
PROC_Achievements_BG3_EndingAchievementsHook_EarlyEndInclusive();
PROC_Achievements_BG3_EndingAchievementsHook_EndgameOnly();

IF
FlagSet(ORI_Gale_Event_ColonyExplosion_7ff2626a-c1ff-829a-8bcf-90d763e8b2e9, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_Achievements_BG3_EndingAchievementsHook_EarlyEndInclusive();

PROC
PROC_END_GodsAndMonsters_RollCredits("END_GodsAndMonsters_GameFinished", _, _, _, _)
THEN
PROC_Achievements_BG3_EndingAchievementsHook();

IF
TextEvent("achievements_ending", _, _, _, _)
THEN
PROC_Achievements_BG3_EndingAchievementsHook();

IF
FlagSet(TUT_Helm_TransponderActivated_40d32a6d-8d41-4ceb-a4e9-bbd34d0664e4, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_Achievements_Unlock("BG3_Quest01");

IF
DB_GlobalFlag(VISITEDREGION_SCL_Main_A_f6e72539-9bc6-42e1-a20f-390f3a17ad8d, _, _, _, _)
AND
DB_GlobalFlag(VISITEDREGION_WLD_Main_A_925c721d-686b-4fbe-8c3c-d1233bf863b7, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest02");

IF
DB_GlobalFlag(VISITEDREGION_BGO_Main_A_40f06537-814f-4796-b012-5ffaa648a8d9, _, _, _, _)
AND
DB_GlobalFlag(VISITEDREGION_SCL_Main_A_f6e72539-9bc6-42e1-a20f-390f3a17ad8d, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest03");

PROC
PROC_Achievements_BG3_EndingAchievementsHook_EndgameOnly()
THEN
PROC_Achievements_Unlock("BG3_Quest04");

PROC
PROC_Achievements_BG3_EndingAchievementsHook_EndgameOnly()
AND
DB_GlobalFlag(END_BrainBattle_Event_EvilFinalDecision_71617aed-6f56-ad38-5657-189de2628cc8, _, _, _, _)
AND NOT
DB_GlobalFlag(ORI_DarkUrge_State_FinalDecisionForBhaal_a7683d15-4bca-4c96-a158-225acb497a8e, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest05");

PROC
PROC_Achievements_BG3_EndingAchievementsHook_EarlyEndInclusive()
AND NOT
DB_GlobalFlag(END_BrainBattle_Event_EvilFinalDecision_71617aed-6f56-ad38-5657-189de2628cc8, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest06");

PROC
PROC_Achievements_BG3_EndingAchievementsHook_EndgameOnly()
AND
DB_GlobalFlag(ORI_DarkUrge_State_FinalDecisionForBhaal_a7683d15-4bca-4c96-a158-225acb497a8e, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest07");

PROC
PROC_Achievements_BG3_EndingAchievementsHook_EndgameOnly()
AND
DB_GlobalFlag(END_General_State_PlayerIsMindFlayer_d138f537-2268-49a6-8dc4-256bd9cf5633, _, _, _, _)
AND NOT
DB_GlobalFlag(END_BrainBattle_Event_EvilFinalDecision_71617aed-6f56-ad38-5657-189de2628cc8, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest08");

PROC
PROC_GLO_Backgrounds_GivePoint((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest09", _Var1, _Var1, _Var1, _Var1)
AND
GetReservedUserID(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
GetUserProfileID(_Var3, _Var4, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest09_CompletedGoals(_Var4, _Var2, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest09_CompletedGoals(_Var4, _Var2);
PROC_Achievements_IncrementProgress("BG3_Quest09", _Var1);

IF
DB_Achievements_Completed("BG3_Quest09", _Var1, _Var1, _Var1, _Var1)
AND
GetReservedUserID(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetUserProfileID(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
DB_Achievements_BG3_Quest09_CompletedGoals(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest09_CompletedGoals(_Var3, _Var4);

IF
UserCharacterLongRested(_, 1, _, _, _)
AND NOT
DB_Achievements_Completed("BG3_Quest10", _, _, _, _)
AND
QRY_OnlyOnce("BG3_Quest10_LongRested", _, _, _, _)
THEN
PROC_Achievements_IncrementProgress("BG3_Quest10");

IF
LongRestFinished()
AND
DB_OnlyOnce("BG3_Quest10_LongRested", _, _, _, _)
THEN
NOT DB_OnlyOnce("BG3_Quest10_LongRested");

IF
DB_Achievements_Completed("BG3_Quest10", _, _, _, _)
AND
DB_OnlyOnce("BG3_Quest10_LongRested", _, _, _, _)
THEN
NOT DB_OnlyOnce("BG3_Quest10_LongRested");

IF
TadpolePowerAssigned((GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest11", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest11", _Var1);

PROC
PROC_Achievements_Quest12_GivenShovelRewardsHook((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest12", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_IncrementProgress("BG3_Quest12", _Var1);

IF
DialogRollResult((GUIDSTRING)_Var1, 1, _, 1, _)
AND NOT
DB_Achievements_Completed("BG3_Quest13", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest13", _Var1);

PROC
PROC_CRIME_Prison_Escaped((CHARACTER)_Var1, (CHARACTER)_Var2, (TRIGGER)_Var3, (INTEGER)_Var4, (STRING)_Var5, (STRING)_Var6, (STRING)_Var7, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest14", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest14", _Var1);

PROC
PROC_Hirelings_Hire(_, (CHARACTER)_Var2, _, _, _)
AND NOT
DB_Achievements_Completed("BG3_Quest15", _Var2, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest15", _Var2);

IF
TextEvent("achievements_test15", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Hirelings_HACK_Hire(_Var1);

IF
FlagSet(GLO_Respec_Start_6d4979bc-8e95-46be-9c27-96c6e22b0152, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest16_DoingRespec(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest16_DoingRespec(_Var1);

IF
RespecCompleted((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Achievements_BG3_Quest16_DoingRespec(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest16_DoingRespec(_Var1);

IF
RespecCancelled((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Achievements_BG3_Quest16_DoingRespec(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest16_DoingRespec(_Var1);

IF
RespecCompleted((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest16_AchievementBlocked(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest16_AchievementBlocked(_Var1);

IF
LeveledUp((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest16_AchievementBlocked(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest16_DoingRespec(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest16", _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_Achievements_BG3_Quest16_MissingClassTag(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest16", _Var1);

QRY
QRY_Achievements_BG3_Quest16_MissingClassTag((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_ClassTags(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest16_MissingClassTag_Break(1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, _Var2, 0, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest16_MissingClassTag_Break(1);

QRY
QRY_Achievements_BG3_Quest16_MissingClassTag(_, _, _, _, _)
AND
DB_Achievements_BG3_Quest16_MissingClassTag_Break(1, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest16_MissingClassTag_Break(1);

IF
TemplatesCombined(_, _, _, _, _, (GUIDSTRING)_Var6, (GUIDSTRING)_Var7, _, _, _)
AND NOT
DB_Achievements_Completed("BG3_Quest17", _Var6, _, _, _)
AND
IsTagged(_Var7, ALCH_SOLUTION_4b9a13c2-5499-4dd5-b8ba-331a2e972d78, 1, _, _)
AND
GetReservedUserID(_Var6, _Var8, _, _, _)
AND
GetUserProfileID(_Var8, _Var9, _, _, _)
AND
GetTemplate(_Var7, _Var10, _, _, _)
AND NOT
DB_Achievements_BG3_Quest17_PotionsCrafted(_Var10, _Var9, _, _, _)
THEN
DB_Achievements_BG3_Quest17_PotionsCrafted(_Var10, _Var9);
PROC_Achievements_IncrementProgress_UserProfile("BG3_Quest17", _Var9);

PROC
PROC_Achievements_Unlocked("BG3_Quest17", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetReservedUserID(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetUserProfileID(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
DB_Achievements_BG3_Quest17_PotionsCrafted(_Var4, _Var3, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest17_PotionsCrafted(_Var4, _Var3);

IF
TextEvent("achievements_test17", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
CreateAtObject(ALCH_Extract_AcornTruffle_69e2d2d1-3617-4f8b-8c40-3eb0ad71f521, _Var1, 0, 0, "", 0, _Var2, _Var1, _Var1, _Var1)
AND
CreateAtObject(ALCH_Extract_WoodBark_19d0c788-596c-4893-ac4a-bd609ed69753, _Var1, 0, 0, "", 0, _Var3, _Var1, _Var1, _Var1)
AND
CreateAtObject(ALCH_Extract_Balsam_a31d379e-b7fa-4d2b-bf16-80347e9f4a23, _Var1, 0, 0, "", 0, _Var4, _Var1, _Var1, _Var1)
AND
CreateAtObject(ALCH_Extract_WoodBark_19d0c788-596c-4893-ac4a-bd609ed69753, _Var1, 0, 0, "", 0, _Var5, _Var1, _Var1, _Var1)
AND
CreateAtObject(ALCH_Extract_UnicornHorn_cecf2e17-8922-45b7-8841-f49415b9a688, _Var1, 0, 0, "", 0, _Var6, _Var1, _Var1, _Var1)
AND
CreateAtObject(ALCH_Extract_WoodBark_19d0c788-596c-4893-ac4a-bd609ed69753, _Var1, 0, 0, "", 0, _Var7, _Var1, _Var1, _Var1)
THEN
ToInventory(_Var2, _Var1, 1, 1, 1);
ToInventory(_Var3, _Var1, 1, 1, 1);
ToInventory(_Var4, _Var1, 1, 1, 1);
ToInventory(_Var5, _Var1, 1, 1, 1);
ToInventory(_Var6, _Var1, 1, 1, 1);
ToInventory(_Var7, _Var1, 1, 1, 1);

IF
FlagSet(GLO_Achievement18_PlayerPettedScratch_05e73e2b-9d5f-7236-e47d-20631189b225, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest18", _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogName(CAMP_OwlbearCub_CFM_Dog_547dc3a3-f899-bc24-cb8e-43af4c721197, _Var3, _Var1, _Var1, _Var1)
AND
DB_DialogPlayers(_Var3, _Var1, _, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest18_PettedScratch(_Var1);

IF
FlagSet(GLO_Achievement18_PlayerPettedOwlbearCub_52c2d707-6797-3d40-6e22-64c330dcc7c3, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest18", _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogName(CAMP_OwlbearCub_CFM_Dog_547dc3a3-f899-bc24-cb8e-43af4c721197, _Var3, _Var1, _Var1, _Var1)
AND
DB_DialogPlayers(_Var3, _Var1, _, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest18_PettedOwlbearCub(_Var1);

IF
DialogEnded(CAMP_OwlbearCub_CFM_Dog_547dc3a3-f899-bc24-cb8e-43af4c721197, _, _, _, _)
AND
DB_Achievements_BG3_Quest18_PettedOwlbearCub(_Var2, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest18_PettedOwlbearCub(_Var2);

IF
DialogEnded(CAMP_OwlbearCub_CFM_Dog_547dc3a3-f899-bc24-cb8e-43af4c721197, _, _, _, _)
AND
DB_Achievements_BG3_Quest18_PettedScratch(_Var2, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest18_PettedScratch(_Var2);

IF
DB_Achievements_BG3_Quest18_PettedOwlbearCub(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Achievements_BG3_Quest18_PettedScratch(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest18", _Var1);

IF
DB_GLO_Quasit_Summoned(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
CharacterGetOwner(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest19", _Var2);

PROC
PROC_UND_AdamantineForge_SpawnCraftedItem((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest20", _Var1);

IF
DB_MOO_Jailbreak_Prisoner(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest21_PrisonEscapee(_Var1);

PROC
PROC_MOO_Jailbreak_Escaped((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Achievements_BG3_Quest21_PrisonEscapee(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_BG3_Quest21_PrisonerEscaped(_Var1);

PROC
PROC_Achievements_BG3_Quest21_PrisonerEscaped((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
NOT DB_Achievements_BG3_Quest21_PrisonEscapee(_Var1);

PROC
PROC_Achievements_BG3_Quest21_PrisonerEscaped(_, _, _, _, _)
AND NOT
DB_Achievements_BG3_Quest21_PrisonEscapee(_, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest21");

IF
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Achievements_BG3_Quest21_PrisonEscapee(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Achievements_BG3_Quest21_PrisonEscapee(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest21_PrisonEscapee(_Var2);

IF
DB_GlobalFlag(DEN_CapturedGoblin_State_Released_63535870-e8f0-6b53-4194-0ca66bc2416e, _, _, _, _)
AND
DB_GlobalFlag(GOB_CapturedGoblin_State_Spared_28a0e5c2-ee4a-3b33-a7cc-467adb5bdb88, _, _, _, _)
AND
DB_GlobalFlag(MOO_Execution_Event_ReleasedGoblins_3cddb715-d7cc-d6ce-e166-bce7f242a240, _, _, _, _)
AND NOT
DB_PermaDefeated(S_DEN_CapturedGoblin_783d7572-a846-455f-b686-247a95263ebb, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest22");

IF
FlagSet(CRE_BloodOfLathander_State_HasBloodOfLathander_e4b75f46-166f-4347-ab33-2b34acdd4b09, _, _, _, _)
AND NOT
DB_Achievements_Completed("BG3_Quest23", _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest23");

PROC
PROC_Achievements_BG3_EndingAchievementsHook_EndgameOnly()
AND NOT
DB_Achievements_BG3_Quest24_Failed(1, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest24");
PROC_Achievements_BG3_Quest24_CleanUp();

IF
DB_Dead(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Achievements_BG3_Quest24_Tieflings(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest24_Failed(1);
PROC_Achievements_BG3_Quest24_CleanUp();

PROC
PROC_Achievements_BG3_Quest24_CleanUp()
AND
DB_Achievements_BG3_Quest24_Tieflings(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest24_Tieflings(_Var1);

IF
FlagSet(LOW_MurderTribunal_State_BecameUnholyAssassin_75ba9b20-e08b-f48e-6f70-5c93586ec729, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_Achievements_Unlock("BG3_Quest25");

IF
DB_GlobalFlag(CAMP_DaisyAcknowledgement_SexWithEmperor_933959fb-958b-59bc-3d5e-31e12f619d8d, _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogName(CAMP_DaisyAcknowledgement_AvD_ROM_58e20a32-e432-1c93-9c75-97bebafc8b1b, _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogPlayers(_Var1, _Var2, 1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest26", _Var2);

IF
UsingSpellOnTarget((CHARACTER)_Var1, (CHARACTER)_Var2, "Throw_ImprovisedWeapon", "throw", "", (INTEGER)_Var3, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest27", _Var1, _Var1, _Var1, _Var1)
AND
IsEnemy(_Var1, _Var2, 1, _Var1, _Var1)
AND
IntegerToString(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
Concatenate("BG3_Quest27_Timer", _Var4, _Var5, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest27_Throwing(_Var1, _Var2, _Var3, _Var5);
ObjectTimerLaunch(_Var1, _Var5, 10000);

IF
AttackedBy((CHARACTER)_Var1, _, (CHARACTER)_Var3, _, _, _, (INTEGER)_Var7, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Achievements_BG3_Quest27_Throwing(_Var3, _Var8, _Var7, _, _Var1)
AND
_Var1 != _Var8
AND
IsEnemy(_Var3, _Var1, 1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest27", _Var3);

PROC
PROC_Achievements_Unlock("BG3_Quest27", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Achievements_BG3_Quest27_Throwing(_Var1, _Var2, _Var3, _Var4, _Var1)
THEN
ObjectTimerCancel(_Var1, _Var4);
NOT DB_Achievements_BG3_Quest27_Throwing(_Var1, _Var2, _Var3, _Var4);

IF
ObjectTimerFinished((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Achievements_BG3_Quest27_Throwing(_Var1, _Var3, _Var4, _Var2, _Var1)
THEN
NOT DB_Achievements_BG3_Quest27_Throwing(_Var1, _Var3, _Var4, _Var2);

PROC
PROC_CRIME_MusicalPerformance_TossedCoin((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest28", _Var2, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_IncrementProgress("BG3_Quest28", _Var2);
DebugText(_Var2, "Pling");

IF
AttackedBy(_, _, (GUIDSTRING)_Var3, _, _, (STRING)_Var6, (INTEGER)_Var7, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
DB_Achievements_BG3_Quest29_DamageCause(_Var6, _, _, _, _)
AND
DB_Is_InCombat(_Var3, _, _, _, _)
AND NOT
DB_Achievements_Completed("BG3_Quest29", _Var3, _, _, _)
THEN
PROC_Achievements_IncrementProgress("BG3_Quest29", _Var3);

IF
TurnStarted((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Achievements_Progress_Character("BG3_Quest29", _, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_SetProgress("BG3_Quest29", 0, _Var1);

IF
TurnEnded((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Achievements_Progress_Character("BG3_Quest29", _, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_SetProgress("BG3_Quest29", 0, _Var1);

IF
CastSpell((CHARACTER)_Var1, "Target_UnarmedAttack", _, _, (INTEGER)_Var4)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
CharacterGetOwner(_Var1, _Var5, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest30", _Var5, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_BG3_Quest30_UnarmedAttack(_Var5, _Var4);

IF
CastSpell((CHARACTER)_Var1, "Target_UnarmedAttack", _, _, (INTEGER)_Var4)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest30", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_BG3_Quest30_UnarmedAttack(_Var1, _Var4);

PROC
PROC_Achievements_BG3_Quest30_UnarmedAttack((CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IntegerToString(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
Concatenate("BG3_Quest30_Timer", _Var3, _Var4, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest30_UnarmedStoryAction(_Var1, _Var2, _Var4);
ObjectTimerLaunch(_Var1, _Var4, 10000);

IF
KilledBy(_, (CHARACTER)_Var2, _, (INTEGER)_Var4, _)
AND
DB_Achievements_BG3_Quest30_UnarmedStoryAction(_Var2, _Var4, _Var5, _, _)
AND NOT
DB_Achievements_Completed("BG3_Quest30", _Var2, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest30", _Var2);

PROC
PROC_Achievements_Unlock("BG3_Quest30", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Achievements_BG3_Quest30_UnarmedStoryAction(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
ObjectTimerCancel(_Var1, _Var3);
NOT DB_Achievements_BG3_Quest30_UnarmedStoryAction(_Var1, _Var2, _Var3);

IF
ObjectTimerFinished((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Achievements_BG3_Quest30_UnarmedStoryAction(_Var1, _Var3, _Var2, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest30_UnarmedStoryAction(_Var1, _Var3, _Var2);

IF
Died(S_TUT_Helm_Devil_005_ed103005-fd71-457d-ae6c-39654bbd8f2e, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest31");

IF
CastedSpell(S_FOR_Bottomless_SpiderQueen_e6b2f3ba-2d02-4507-8680-6047322e1a4b, "Target_FOR_SpiderQueen_HatchEggs", _, _, _)
AND NOT
DB_Achievements_BG3_Quest32_AchievementBlocked(1, _, _, _, _)
THEN
DB_Achievements_BG3_Quest32_AchievementBlocked(1);

IF
Died(S_FOR_Bottomless_SpiderQueen_e6b2f3ba-2d02-4507-8680-6047322e1a4b, _, _, _, _)
AND NOT
DB_Achievements_BG3_Quest32_AchievementBlocked(1, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest32");

IF
Died(S_FOR_Bottomless_SpiderQueen_e6b2f3ba-2d02-4507-8680-6047322e1a4b, _, _, _, _)
AND
DB_Achievements_BG3_Quest32_AchievementBlocked(1, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest32_AchievementBlocked(1);

IF
StatusAttempt(S_UND_KethericCity_AdamantineGolem_2a5997fc-5f2a-4a13-b309-bed16da3b255, "UND_ADAMANTINEFORGE_HAMMERHELPER", _, _, _)
AND NOT
DB_Achievements_BG3_Quest33_AchievementBlocked(1, _, _, _, _)
THEN
DB_Achievements_BG3_Quest33_AchievementBlocked(1);

IF
Died(S_UND_KethericCity_AdamantineGolem_2a5997fc-5f2a-4a13-b309-bed16da3b255, _, _, _, _)
AND NOT
DB_Achievements_BG3_Quest33_AchievementBlocked(1, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest33");

IF
Died(S_UND_KethericCity_AdamantineGolem_2a5997fc-5f2a-4a13-b309-bed16da3b255, _, _, _, _)
AND
DB_Achievements_BG3_Quest33_AchievementBlocked(1, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest33_AchievementBlocked(1);

IF
CastedSpell(S_TWN_Hospital_Surgeon_e58b8b34-038b-4858-b817-c2a8096a9381, (STRING)_Var1, _, _, _)
AND
DB_Achievements_BG3_Quest34_SurgerySpells(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest34_AchievementBlocked(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest34_AchievementBlocked(1);

IF
KilledBy(S_TWN_Hospital_Surgeon_e58b8b34-038b-4858-b817-c2a8096a9381, (CHARACTER)_Var1, _, _, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest34_AchievementBlocked(1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest34");

IF
KilledBy(S_TWN_Hospital_Surgeon_e58b8b34-038b-4858-b817-c2a8096a9381, _, _, _, _)
AND
DB_Achievements_BG3_Quest34_AchievementBlocked(1, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest34_AchievementBlocked(1);

IF
CastedSpell(S_TWN_Tollhouse_TollhouseMaster_3b460226-8ca2-4bbc-9bd7-8bb947aa2c06, (STRING)_Var1, _, _, _)
AND
DB_Achievements_BG3_Quest35_TollCollectorSpells(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest35_AchievementBlocked(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest35_AchievementBlocked(1);

IF
Died(S_TWN_Tollhouse_TollhouseMaster_3b460226-8ca2-4bbc-9bd7-8bb947aa2c06, _, _, _, _)
AND NOT
DB_Achievements_BG3_Quest35_AchievementBlocked(1, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest35");

IF
Died(S_TWN_Tollhouse_TollhouseMaster_3b460226-8ca2-4bbc-9bd7-8bb947aa2c06, _, _, _, _)
AND
DB_Achievements_BG3_Quest35_AchievementBlocked(1, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest35_AchievementBlocked(1);

IF
StatusApplied(S_MOO_Ketheric_e9918f3e-5b87-40a3-a9bd-61545151573f, "MYRKULS_BOON", _, _, _)
AND
DB_GlobalFlag(MOO_KethericShowdown_State_Started_33489af3-23b7-4340-bbf6-19033c9dae03, _, _, _, _)
AND NOT
DB_Achievements_Completed("BG3_Quest36", _, _, _, _)
AND NOT
DB_Achievements_BG3_Quest36_AchievementBlocked(1, _, _, _, _)
THEN
DB_Achievements_BG3_Quest36_AchievementBlocked(1);

IF
TimerFinished("COL_KethericShowdown_Death_FadeOut", _, _, _, _)
AND NOT
DB_Achievements_BG3_Quest36_AchievementBlocked(1, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest36");

IF
TimerFinished("COL_KethericShowdown_Death_FadeOut", _, _, _, _)
AND
DB_Achievements_BG3_Quest36_AchievementBlocked(1, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest36_AchievementBlocked(1);

IF
StatusApplied(_, (STRING)_Var2, _, _, _)
AND
DB_Achievements_BG3_Quest37_TrapStatuses(_Var2, _, _, _, _)
AND NOT
DB_Achievements_BG3_Quest37_AchievementBlocked(1, _, _, _, _)
THEN
DB_Achievements_BG3_Quest37_AchievementBlocked(1);

IF
Died(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
AND
DB_GlobalFlag(CURRENTREGION_BGO_Main_A_11239767-48ad-4879-8312-b9164b6e4978, _, _, _, _)
AND NOT
DB_Achievements_BG3_Quest37_AchievementBlocked(1, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest37");

IF
Died(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
AND
DB_Achievements_BG3_Quest37_AchievementBlocked(1, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest37_AchievementBlocked(1);

PROC
PROC_LOW_BhaalTemple_OrinBattle_BeginRitual()
THEN
DB_Achievements_BG3_Quest38_RitualActive(1);

PROC
PROC_LOW_BhaalTemple_OrinBattle_RitualEnd()
AND
DB_Achievements_BG3_Quest38_RitualActive(1, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest38_RitualActive(1);

PROC
PROC_LOW_BhaalTemple_AchievementHook()
AND
DB_Achievements_BG3_Quest38_RitualActive(1, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest38");

IF
Died(S_END_Dragon_823861a5-0132-4d15-b9f1-9bac2fa2e85e, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest39");

IF
StatusApplied(S_WYR_SkeletalDragon_67770922-5e0a-40c5-b3f0-67e8eb50493a, "DRAGON_SKELETAL_FLIGHTSTATE_INTERRUPTED", _, _, _)
AND NOT
DB_Achievements_Completed("BG3_Quest40", _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest40");

IF
SupplyTemplateSpent((GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest41", _, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest41_SupplySpent(_Var1);

IF
LongRestFinished()
AND NOT
DB_Achievements_Completed("BG3_Quest41", _, _, _, _)
AND NOT
QRY_Achievements_BG3_Quest41_UsedNonAlcohol()
THEN
PROC_Achievements_Unlock("BG3_Quest41");

IF
LongRestFinished()
AND
DB_Achievements_BG3_Quest41_SupplySpent(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest41_SupplySpent(_Var1);

QRY
QRY_Achievements_BG3_Quest41_UsedNonAlcohol()
AND
DB_Achievements_BG3_Quest41_SupplySpent(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, ALCOHOL_b8496c62-4ecb-45de-860c-ae3aab0ed7da, 0, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_Achievements_BG3_Quest41_UsedNonAlcohol()
AND NOT
DB_Achievements_BG3_Quest41_SupplySpent(_, _, _, _, _)
THEN
DB_NOOP(1);

IF
KilledBy((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, _, _, (GUIDSTRING)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest42", _Var2, _Var1, _Var1, _Var1)
AND
GetDeathType(_Var1, "Falling", _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest42", _Var2);

IF
GameBookInterfaceClosed((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest43", _Var2, _Var1, _Var1, _Var1)
AND
GetBookID(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_BG3_Quest43_AddReadBook(_Var2, _Var3);

IF
CustomBookUIClosed((GUIDSTRING)_Var1, (STRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest43", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_BG3_Quest43_AddReadBook(_Var1, _Var2);

PROC
PROC_Achievements_BG3_Quest43_AddReadBook((GUIDSTRING)_Var1, (STRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetReservedUserID(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
GetUserProfileID(_Var3, _Var4, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest43_BookRead(_Var4, _Var2, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest43_BookRead(_Var4, _Var2);
PROC_Achievements_IncrementProgress_UserProfile("BG3_Quest43", _Var4);

PROC
PROC_Achievements_Unlock("BG3_Quest43", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetReservedUserID(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetUserProfileID(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
DB_Achievements_BG3_Quest43_BookRead(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest43_BookRead(_Var3, _Var4);

IF
TextEvent("achievements_test43", _, _, _, _)
THEN
DB_Achievements_BG3_Quest43_BookIDs("DEN_VoloOperation_VoloCGBN");
DB_Achievements_BG3_Quest43_BookIDs("DEN_VoloOperation_VoloCGBN_Signed");
DB_Achievements_BG3_Quest43_BookIDs("FOR_PainPriest_Bible");
DB_Achievements_BG3_Quest43_BookIDs("PLA_ZhentShipment_NinefingersOrders");
DB_Achievements_BG3_Quest43_BookIDs("FOR_Courier_Letter1");
DB_Achievements_BG3_Quest43_BookIDs("FOR_Courier_Letter2");
DB_Achievements_BG3_Quest43_BookIDs("FOR_Courier_Letter3");
DB_Achievements_BG3_Quest43_BookIDs("DEN_VoloOperation_VoloGBG");
DB_Achievements_BG3_Quest43_BookIDs("DEN_VoloOperation_VoloGBG_Signed");
DB_Achievements_BG3_Quest43_BookIDs("DEN_VoloOperation_VoloGSS");
DB_Achievements_BG3_Quest43_BookIDs("DEN_VoloOperation_VoloGSS_Signed");
DB_Achievements_BG3_Quest43_BookIDs("GOB_VoloGoblinManuscript");
DB_Achievements_BG3_Quest43_BookIDs("DEN_HarperJournal");
DB_Achievements_BG3_Quest43_BookIDs("UND_MyconidCircle_DrowDiary");
DB_Achievements_BG3_Quest43_BookIDs("GOB_WarMap");
DB_Achievements_BG3_Quest43_BookIDs("DEN_AdventurerNote");
DB_Achievements_BG3_Quest43_BookIDs("HAG_HagAmbush_NoteFromSister");
DB_Achievements_BG3_Quest43_BookIDs("DEN_Spencer_Wanted");
DB_Achievements_BG3_Quest43_BookIDs("CRA_HarperBooster_Book");
DB_Achievements_BG3_Quest43_BookIDs("CRA_HarperBooster_Scroll");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_ShadowCurseResearch1");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_ShadowCurseResearch2");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_ShadowCurseResearch3");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_SharTempleResearch");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_EmeraldEnclaveFile");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_KethericFile");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_HagFile");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_OwlbearFile");
DB_Achievements_BG3_Quest43_BookIDs("DEN_TieflingLeader_Book1");
DB_Achievements_BG3_Quest43_BookIDs("DEN_TieflingLeader_Book2");
DB_Achievements_BG3_Quest43_BookIDs("CHA_SeluneChapel_Diary");
DB_Achievements_BG3_Quest43_BookIDs("DEN_StorageBook");
DB_Achievements_BG3_Quest43_BookIDs("FOR_IncompleteMasterwork_ApprenticeJournal");
DB_Achievements_BG3_Quest43_BookIDs("FOR_IncompleteMasterwork_ApprenticePlans");
DB_Achievements_BG3_Quest43_BookIDs("FOR_SchoolOgre_Diary");
DB_Achievements_BG3_Quest43_BookIDs("FOR_DoctorJournal");
DB_Achievements_BG3_Quest43_BookIDs("FOR_ThayanJournal");
DB_Achievements_BG3_Quest43_BookIDs("FOR_BottomlessWell_DangerousBook");
DB_Achievements_BG3_Quest43_BookIDs("FOR_ThayanCellar_ApothecaryLedger");
DB_Achievements_BG3_Quest43_BookIDs("DEN_Thieflings_MolNote");
DB_Achievements_BG3_Quest43_BookIDs("DEN_GoblinLeadersEvidence");
DB_Achievements_BG3_Quest43_BookIDs("FOR_DangerousBook_ThiefJournal");
DB_Achievements_BG3_Quest43_BookIDs("FOR_General_PriestessJournal");
DB_Achievements_BG3_Quest43_BookIDs("UND_ClericDiary");
DB_Achievements_BG3_Quest43_BookIDs("UND_ClericResearch");
DB_Achievements_BG3_Quest43_BookIDs("PLA_TollHouseLedger");
DB_Achievements_BG3_Quest43_BookIDs("ORI_Gale_DeathNote");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_Refugees");
DB_Achievements_BG3_Quest43_BookIDs("CRA_Fisher_LoveLetter");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_SeluneChapel");
DB_Achievements_BG3_Quest43_BookIDs("CHA_Crypt_BookOfRestoredGods");
DB_Achievements_BG3_Quest43_BookIDs("CHA_BookOfTheDead");
DB_Achievements_BG3_Quest43_BookIDs("FOR_SeluneStash_LoreBookA");
DB_Achievements_BG3_Quest43_BookIDs("FOR_SeluneStash_LoreBookB");
DB_Achievements_BG3_Quest43_BookIDs("CHA_SealingRitualScroll");
DB_Achievements_BG3_Quest43_BookIDs("DEN_ShadowDruid_Tenets");
DB_Achievements_BG3_Quest43_BookIDs("DEN_ShadowDruid_Letter");
DB_Achievements_BG3_Quest43_BookIDs("DEN_Apprentice_AntidoteRevealed");
DB_Achievements_BG3_Quest43_BookIDs("FOR_ThayanCellar_ResearchFromThay");
DB_Achievements_BG3_Quest43_BookIDs("FOR_ThayanCellar_ResearchNotes");
DB_Achievements_BG3_Quest43_BookIDs("DEN_ShadowDruid_Note");
DB_Achievements_BG3_Quest43_BookIDs("DEN_Apprentice_CircletHint");
DB_Achievements_BG3_Quest43_BookIDs("DEN_Apprentice_TadpoleResearch");
DB_Achievements_BG3_Quest43_BookIDs("DEN_Apprentice_DrowRecord");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_EmeraldTenets");
DB_Achievements_BG3_Quest43_BookIDs("DEN_DruidLair_Rite");
DB_Achievements_BG3_Quest43_BookIDs("FOR_SeluneStash_PrayerSheet");
DB_Achievements_BG3_Quest43_BookIDs("FOR_Bottomless_HermitBook1");
DB_Achievements_BG3_Quest43_BookIDs("FOR_Bottomless_HermitBook2");
DB_Achievements_BG3_Quest43_BookIDs("FOR_Bottomless_HermitBook3");
DB_Achievements_BG3_Quest43_BookIDs("FOR_Bottomless_HermitBook4");
DB_Achievements_BG3_Quest43_BookIDs("FOR_Bottomless_HermitParchment");
DB_Achievements_BG3_Quest43_BookIDs("UND_ClericPoem_Peace");
DB_Achievements_BG3_Quest43_BookIDs("UND_ClericPoem_Gift");
DB_Achievements_BG3_Quest43_BookIDs("UND_ClericPoem_Secret");
DB_Achievements_BG3_Quest43_BookIDs("UND_ClericPoem_Berserk");
DB_Achievements_BG3_Quest43_BookIDs("UND_ClericLetter_Bulette");
DB_Achievements_BG3_Quest43_BookIDs("DEN_HarpyMeal_KidStory");
DB_Achievements_BG3_Quest43_BookIDs("UND_GnomeVillage_Record");
DB_Achievements_BG3_Quest43_BookIDs("UND_GnomeVillage_Letter");
DB_Achievements_BG3_Quest43_BookIDs("GOB_TempleAccess_Lorebook");
DB_Achievements_BG3_Quest43_BookIDs("UND_GnomeVillage_LoreBookC");
DB_Achievements_BG3_Quest43_BookIDs("UND_GnomeVillage_LoreBookB");
DB_Achievements_BG3_Quest43_BookIDs("UND_GnomeVillage_LoreBookA");
DB_Achievements_BG3_Quest43_BookIDs("UND_ClericPoem_Love");
DB_Achievements_BG3_Quest43_BookIDs("FOR_ThayanCellar_ParanoidJournal");
DB_Achievements_BG3_Quest43_BookIDs("DEN_Thieflings_OldLetter");
DB_Achievements_BG3_Quest43_BookIDs("HAG_LetterToEthel_000");
DB_Achievements_BG3_Quest43_BookIDs("HAG_LetterToEthel_001");
DB_Achievements_BG3_Quest43_BookIDs("HAG_LetterFromEthel");
DB_Achievements_BG3_Quest43_BookIDs("DEN_PickpocketBook");
DB_Achievements_BG3_Quest43_BookIDs("UND_LastManStanding_Journal");
DB_Achievements_BG3_Quest43_BookIDs("UND_SharFortBattlefield_SeluneDiary_000");
DB_Achievements_BG3_Quest43_BookIDs("UND_SharFortBattlefield_SeluneDiary_001");
DB_Achievements_BG3_Quest43_BookIDs("HAG_NoteAboutSnacks");
DB_Achievements_BG3_Quest43_BookIDs("HAG_MuddyDoll_Note");
DB_Achievements_BG3_Quest43_BookIDs("UND_KethericCult_Registry");
DB_Achievements_BG3_Quest43_BookIDs("UND_NewRecruit_Journal");
DB_Achievements_BG3_Quest43_BookIDs("FOR_UnfortunateGnome_BarcusJournal");
DB_Achievements_BG3_Quest43_BookIDs("GOB_LetterToZrell_UnfinishedA");
DB_Achievements_BG3_Quest43_BookIDs("GOB_LetterToZrell_UnfinishedB");

IF
TextEvent("achievements_test43", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Achievements_BG3_Quest43_BookIDs(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
CreateAtObject(BASE_BOOK_StoryUse_4d0f9f0f-8290-4d24-a05a-e66c878d974d, _Var1, 0, 0, "", 0, _Var3, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest43_TestBooks(_Var3, _Var2);
AddEntryToCustomBook(_Var2, _Var2);

IF
TextEvent("achievements_test43", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_Achievements_BG3_Quest43_BookIDs(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest43_BookIDs(_Var1);

IF
UseFinished((CHARACTER)_Var1, (ITEM)_Var2, 1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Achievements_BG3_Quest43_TestBooks(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
OpenCustomBookUI(_Var1, _Var3);
SetOnStage(_Var2, 0);
NOT DB_Achievements_BG3_Quest43_TestBooks(_Var2, _Var3);

IF
KilledBy((CHARACTER)_Var1, (CHARACTER)_Var2, (GUIDSTRING)_Var3, _, (CHARACTER)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest44", _Var2, _Var1, _Var1, _Var1)
AND
HasActiveStatusWithGroup(_Var3, "SG_Drunk", 1, _Var1, _Var1)
AND
GetReservedUserID(_Var2, _Var5, _Var1, _Var1, _Var1)
AND
GetUserProfileID(_Var5, _Var6, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_BG3_Quest44_KilledWhileDrunk(_Var6, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Achievements_BG3_Quest44_KilledWhileDrunk(_Var6, _Var1);
PROC_Achievements_IncrementProgress_UserProfile("BG3_Quest44", _Var6);

PROC
PROC_Achievements_Unlock("BG3_Quest44", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetReservedUserID(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetUserProfileID(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
DB_Achievements_BG3_Quest44_KilledWhileDrunk(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
NOT DB_Achievements_BG3_Quest44_KilledWhileDrunk(_Var3, _Var4);

PROC
PROC_FOR_CourierDog_FetchedBallAchievementHook((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Achievements_Completed("BG3_Quest45", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Achievements_Unlock("BG3_Quest45", _Var1);

IF
LevelLoaded("TUT_Avernus_C", _, _, _, _)
AND
CheckRulesetModifierBool(HARD_MODE_0bf382a5-e32a-4310-807c-6de89de471b2, 1, 1, _, _)
THEN
DB_Achievements_BG3_Quest53_AchievementPossible(1);

IF
RulesetModifierChangedBool(HARD_MODE_0bf382a5-e32a-4310-807c-6de89de471b2, _, 0, _, _)
AND
DB_Achievements_BG3_Quest53_AchievementPossible(1, _, _, _, _)
THEN
NOT DB_Achievements_BG3_Quest53_AchievementPossible(1);

PROC
PROC_Achievements_BG3_EndingAchievementsHook_EndgameOnly()
AND
CheckRulesetModifierBool(HARD_MODE_0bf382a5-e32a-4310-807c-6de89de471b2, 1, 1, _, _)
AND
DB_Achievements_BG3_Quest53_AchievementPossible(1, _, _, _, _)
THEN
PROC_Achievements_Unlock("BG3_Quest53");


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "ModWrapper_Gustav"
