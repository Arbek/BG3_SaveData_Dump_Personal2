Version 1
SubGoalCombiner SGC_AND

INITSECTION
PROC_DefineSingleOriginMoment(LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718, REALLY_DARK_URGE_cd611d7d-b67d-42b4-a75c-a0c6091ef8a2, LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b);
DB_OriginMoment_MaxDistance(LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b, 50);
PROC_DefineSingleOriginMoment(LOW_BhaalTemple_PostBattle_DarkUrgeGetStoneFirst_5a302a8f-9d78-a450-2070-cf7a09c4ad9f, REALLY_DARK_URGE_cd611d7d-b67d-42b4-a75c-a0c6091ef8a2, LOW_BhaalTemple_PostBattle_DarkUrgeGetStoneFirst_5a302a8f-9d78-a450-2070-cf7a09c4ad9f);
DB_OriginMoment_MaxDistance(LOW_BhaalTemple_PostBattle_DarkUrgeGetStoneFirst_5a302a8f-9d78-a450-2070-cf7a09c4ad9f, 50);
PROC_DefineSingleOriginMoment(LOW_BhaalTemple_AD_ButlerDarkUrge_030a7706-e808-9a3a-3ed2-cc4467c50c31, REALLY_DARK_URGE_cd611d7d-b67d-42b4-a75c-a0c6091ef8a2, LOW_BhaalTemple_AD_ButlerDarkUrge_030a7706-e808-9a3a-3ed2-cc4467c50c31);
DB_OriginMoment_MaxDistance(LOW_BhaalTemple_AD_ButlerDarkUrge_030a7706-e808-9a3a-3ed2-cc4467c50c31, 30);
DB_HasItemEvent(S_LOW_MurderTribunal_BhaalAmulet_Sarevok_305049b2-b725-4e84-8f47-84fac8ea51f1, LOW_BhaalTemple_State_HasBhaalAmulet_66796361-3cf6-476a-8c09-a076dfa6a172);
DB_HasItemEvent(S_LOW_BhaalTemple_BhaalAmulet_Lieutenant_843a9a25-8b22-48a6-9039-5cd829732818, LOW_BhaalTemple_State_HasBhaalAmulet_66796361-3cf6-476a-8c09-a076dfa6a172);
DB_HasItemEvent(S_LOW_BhaalTemple_AltarKey_c817c1c6-fd0e-41d8-9750-93dfe0e85c92, LOW_BhaalTemple_State_HasAltarKey_b28652b9-bf05-4fa3-91f5-45d8d0e049ae);
DB_LOW_BhaalTemple_Harpers(S_LOW_BhaalTemple_HarperCaptain_8600e330-fa15-471e-ab67-958f0543ee9f);
DB_LOW_BhaalTemple_Harpers(S_LOW_BhaalTemple_Harper_01_a1909c71-b870-49d9-827b-2fad3b6e91bc);
DB_LOW_BhaalTemple_Harpers(S_LOW_BhaalTemple_Harper_02_60a4b43e-80c4-4af6-a932-68c37aa99cb5);
DB_LOW_BhaalTemple_Harpers(S_LOW_BhaalTemple_Harper_03_a5964a5e-8086-445e-989f-d9c7f32e32b6);
DB_LOW_BhaalTemple_Harpers(S_LOW_BhaalTemple_Harper_04_bc18267f-baeb-4d49-9de0-3c8518529762);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_UnholyAssassin_001_d00763c7-cac6-47b8-86be-a13ddd346861, LOW_BhaalTemple_UnholyAssassin_01_588fcf28-69d7-4182-198a-fc5abba07dd4);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_UnholyAssassin_002_cec194b2-0e8d-4d38-a136-0e9b1c38c684, LOW_BhaalTemple_UnholyAssassin_02_51203168-913d-2560-0f8c-64a21faf4a77);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Cultist_01_9f7607e0-abae-4722-921a-e18ee01b8984, LOW_BhaalTemple_Cultist_01_d68ad153-98f9-7383-a56e-5c0a13390a8c);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Cultist_02_b69fe2eb-20ec-4d32-a146-ade9dc4df5eb, LOW_BhaalTemple_Cultist_02_1f2fa5dd-f348-bcbf-3cad-bc73f4311539);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Cultist_03_09b965d0-49f7-4b00-a8ab-20f19e4a563b, LOW_BhaalTemple_Cultist_03_90c2f88c-d68b-45a9-adfd-eb53618b6f5a);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Cultist_04_92e27323-35e8-41ce-9644-76d668295c10, LOW_BhaalTemple_Cultist_04_d371d1e5-3911-9531-6272-49686f3b4abf);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Cultist_05_e20ee46e-ea8e-4781-95fd-5f1f72211703, LOW_BhaalTemple_Cultist_05_478751c9-10cd-2c75-4842-26125a4cf7c7);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Cultist_06_692c037a-b660-4461-abb5-7599b1d12702, LOW_BhaalTemple_Cultist_06_3509b9ff-622d-33b4-c050-72d5c5d5f5c5);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_DeathsHead_01_dc5d659c-8703-4e41-bf3e-0eeae60d919b, LOW_BhaalTemple_DeathsHead_01_02e2b5a7-b80d-8ef8-887d-4809388a2f3d);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2, LOW_BhaalTemple_DeathsHead_02_d6f3dd6d-32f0-c4cc-d741-4940afa51834);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_DeathsHead_03_1f0a7364-4893-4066-b188-907a51a75bd8, LOW_BhaalTemple_DeathsHead_03_fe915ed1-e297-8df2-f6a1-e3eeda113e77);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_DeathsHead_04_db8e11fc-5f93-4dae-9abb-a8223317fa29, LOW_BhaalTemple_DeathsHead_04_c1e3de46-6ad1-3170-6c49-72d9bd24ab1e);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab, LOW_BhaalTemple_Reaper_01_b6fcdf7f-5483-1b28-f46e-d5ea2c85f1c0);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Reaper_02_ef16770b-0590-457f-8475-712f2c491be2, LOW_BhaalTemple_Reaper_02_02dfcd29-6838-5288-f358-92b2834edf41);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Reaper_03_97c90688-1181-4893-a497-141e816a4c4a, LOW_BhaalTemple_Reaper_03_a0cbadb8-f366-7ac7-ce92-65a13bf45bc2);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Reaper_04_c01e3dc3-4323-4a50-a378-ae6c0b8a062a, LOW_BhaalTemple_Reaper_04_3fcd4d15-f82c-90fe-c34c-c9817ddacf49);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Reaper_05_a2bcb302-7a7b-4206-ac93-54b755bcb4d8, LOW_BhaalTemple_Reaper_05_ff7c2a19-4463-909c-5514-2748f2198c27);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_Reaper_06_646eaea2-2329-4d75-acc7-feddad951066, LOW_BhaalTemple_Reaper_06_e6d0265e-efa9-96e5-b664-cdcc6fb116c3);
DB_LOW_BhaalTemple_Denizens_Dialogs(S_LOW_BhaalTemple_NightBlade_01_7a82cf11-57a2-4796-8b3a-d3409c0cbe9e, LOW_BhaalTemple_NightBlade_01_be988e51-e3b3-020e-81c5-2e1e7b4f60be);
DB_LOW_BhaalTemple_Denizens_Combat(S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2);
DB_LOW_BhaalTemple_Denizens_Combat(S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab);
DB_LOW_BhaalTemple_Denizens_Combat(S_LOW_BhaalTemple_Reaper_02_ef16770b-0590-457f-8475-712f2c491be2);
DB_LOW_BhaalTemple_Denizens_Combat(S_LOW_BhaalTemple_Reaper_03_97c90688-1181-4893-a497-141e816a4c4a);
DB_LOW_BhaalTemple_Denizens_Combat(S_LOW_BhaalTemple_Reaper_04_c01e3dc3-4323-4a50-a378-ae6c0b8a062a);
DB_LOW_BhaalTemple_Denizens_Combat(S_LOW_BhaalTemple_Reaper_05_a2bcb302-7a7b-4206-ac93-54b755bcb4d8);
DB_LOW_BhaalTemple_Denizens_Combat(S_LOW_BhaalTemple_Reaper_06_646eaea2-2329-4d75-acc7-feddad951066);
DB_LOW_BhaalTemple_Denizens_Combat(S_LOW_BhaalTemple_NightBlade_01_7a82cf11-57a2-4796-8b3a-d3409c0cbe9e);
DB_LOW_BhaalTemple_Denizens_ObservationPos(S_LOW_BhaalTemple_UnholyAssassin_001_d00763c7-cac6-47b8-86be-a13ddd346861, S_LOW_BhaalTemple_ObservePos_05_4d44232d-cfde-4c66-b1a6-8aded5bc160c);
DB_LOW_BhaalTemple_Denizens_ObservationPos(S_LOW_BhaalTemple_UnholyAssassin_002_cec194b2-0e8d-4d38-a136-0e9b1c38c684, S_LOW_BhaalTemple_ObservePos_01_0bd75d21-f145-42aa-9129-57a4b0d9ff8d);
DB_LOW_BhaalTemple_Denizens_ObservationPos(S_LOW_BhaalTemple_Cultist_01_9f7607e0-abae-4722-921a-e18ee01b8984, S_LOW_BhaalTemple_ObservePos_03_42b97128-4b0e-4642-b410-5303d8abca1a);
DB_LOW_BhaalTemple_Denizens_ObservationPos(S_LOW_BhaalTemple_Cultist_02_b69fe2eb-20ec-4d32-a146-ade9dc4df5eb, S_LOW_BhaalTemple_ObservePos_04_f78f2336-6a30-4161-bae0-21380acac05b);
DB_LOW_BhaalTemple_Denizens_ObservationPos(S_LOW_BhaalTemple_Cultist_03_09b965d0-49f7-4b00-a8ab-20f19e4a563b, S_LOW_BhaalTemple_ObservePos_07_65d8bbde-8ca7-45cb-930c-016ef796037a);
DB_LOW_BhaalTemple_Denizens_ObservationPos(S_LOW_BhaalTemple_Cultist_04_92e27323-35e8-41ce-9644-76d668295c10, S_LOW_BhaalTemple_ObservePos_08_cdb302d2-f6a5-4459-92a5-7082708ed8fb);
DB_LOW_BhaalTemple_Denizens_ObservationPos(S_LOW_BhaalTemple_Cultist_05_e20ee46e-ea8e-4781-95fd-5f1f72211703, S_LOW_BhaalTemple_ObservePos_06_80c9f6d2-4207-40af-b5e2-86ad3721aebb);
DB_LOW_BhaalTemple_Denizens_ObservationPos(S_LOW_BhaalTemple_Cultist_06_692c037a-b660-4461-abb5-7599b1d12702, S_LOW_BhaalTemple_ObservePos_02_37ccaf8e-bedf-4110-ba79-f83d5ad74bc9);
DB_LOW_BhaalTemple_Denizens_Combat_ObservationPos(S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2, S_LOW_BhaalTemple_Duel_ObservePos_07_04d2bdef-a409-44f1-8261-cec77474cc0d);
DB_LOW_BhaalTemple_Denizens_Combat_ObservationPos(S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab, S_LOW_BhaalTemple_Duel_ObservePos_01_6e48c5c0-4004-4ff4-89e5-dc07bf164a45);
DB_LOW_BhaalTemple_Denizens_Combat_ObservationPos(S_LOW_BhaalTemple_Reaper_02_ef16770b-0590-457f-8475-712f2c491be2, S_LOW_BhaalTemple_Duel_ObservePos_02_85259fa2-16dd-4631-878f-ecd59ab374fc);
DB_LOW_BhaalTemple_Denizens_Combat_ObservationPos(S_LOW_BhaalTemple_Reaper_03_97c90688-1181-4893-a497-141e816a4c4a, S_LOW_BhaalTemple_Duel_ObservePos_03_79e44b0c-a941-45e1-82fd-35bbd5f9ae2d);
DB_LOW_BhaalTemple_Denizens_Combat_ObservationPos(S_LOW_BhaalTemple_Reaper_04_c01e3dc3-4323-4a50-a378-ae6c0b8a062a, S_LOW_BhaalTemple_Duel_ObservePos_04_3b036165-e4c3-438b-a1f8-5c5e68967b2b);
DB_LOW_BhaalTemple_Denizens_Combat_ObservationPos(S_LOW_BhaalTemple_Reaper_05_a2bcb302-7a7b-4206-ac93-54b755bcb4d8, S_LOW_BhaalTemple_Duel_ObservePos_05_aebd29f3-8266-498f-9f5e-f141aef557e7);
DB_LOW_BhaalTemple_Denizens_Combat_ObservationPos(S_LOW_BhaalTemple_Reaper_06_646eaea2-2329-4d75-acc7-feddad951066, S_LOW_BhaalTemple_Duel_ObservePos_06_3ead01a6-1d23-4bf7-8283-850c0999d967);
DB_LOW_BhaalTemple_Denizens_Combat_ObservationPos(S_LOW_BhaalTemple_NightBlade_01_7a82cf11-57a2-4796-8b3a-d3409c0cbe9e, S_LOW_BhaalTemple_Duel_ObservePos_08_b5d6768e-a0ef-47ee-a216-ccadfe1a3606);
DB_LOW_BhaalTemple_Denizens_Reinforcements(1, S_LOW_BhaalTemple_DeathsHead_01_dc5d659c-8703-4e41-bf3e-0eeae60d919b);
DB_LOW_BhaalTemple_Denizens_Reinforcements(2, S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2);
DB_LOW_BhaalTemple_Denizens_Reinforcements(3, S_LOW_BhaalTemple_DeathsHead_03_1f0a7364-4893-4066-b188-907a51a75bd8);
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList("Laezel", S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, LOW_BhaalTemple_InWorldAbduction_Laezel_62709722-9dcd-893f-e0ae-0d36405237ca);
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList("Halsin", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, LOW_BhaalTemple_InWorldAbduction_Halsin_b09fb417-6f49-6019-c647-cab6a8662f63);
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList("Gale", S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, LOW_BhaalTemple_InWorldAbduction_Gale_acc1013d-05c6-57b7-307e-e608115b7ec9);
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList("Minthara", S_GOB_DrowCommander_25721313-0c15-4935-8176-9f134385451b, LOW_BhaalTemple_InWorldAbduction_Minthara_b3e9630b-c791-3d59-9319-35511eed2d5f);
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList("Yenna", S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, LOW_BhaalTemple_InWorldAbduction_Yenna_60f5fcc6-df7a-f0d6-1f58-3f46630f7233);
DB_LOW_BhaalTemple_AbductionAreas(S_LOW_BhaalTemple_AbductionArea_02_fb4c231b-abbc-4f4c-b1b2-953c95135373, S_LOW_BhaalTemple_AbductionPos_02_86d6cb8f-5de1-4518-93e7-80e6515330e7);
DB_LOW_BhaalTemple_AbductionAreas(S_LOW_BhaalTemple_AbductionArea_03_2c3f9155-0e21-4a1c-935d-cd605e6c71b2, S_LOW_BhaalTemple_AbductionPos_03_6ad8590e-ff71-462c-bd66-bfcfa731df3b);
DB_LOW_BhaalTemple_AbductionAreas(S_LOW_BhaalTemple_AbductionArea_04_665389b1-cc49-48cd-8024-a4923f7851d9, S_LOW_BhaalTemple_AbductionPos_04_ef36c26e-f20d-44b7-90ca-b88f8880cb59);
DB_LOW_BhaalTemple_ChosenInWorldAbductionPos(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_LOW_BhaalTemple_ChosenInWorldAbductionPos(NULL_00000000-0000-0000-0000-000000000000);
DB_LOW_BhaalTemple_VictimList(1, S_LOW_BhaalTemple_OrinsVictim_01_736ffcb2-31b2-4c2b-9187-15296583e461, S_LOW_BhaalTemple_KilledImpersonation_Pos_01_5d0d63a7-94cc-4e96-b586-ebfc6733e645);
DB_LOW_BhaalTemple_VictimList(2, S_LOW_BhaalTemple_OrinsVictim_02_c5c49334-6c87-4ed7-acce-b77935cca031, S_LOW_BhaalTemple_KilledImpersonation_Pos_02_6956eebe-c11b-46a9-b5f2-244a14c13a89);
DB_LOW_BhaalTemple_AdmireKillADList(S_LOW_BhaalTemple_AdmireKillADArea_01_ac9593fb-9276-4b70-a962-b5abc507fab3, LOW_BhaalTemple_AD_AdmiringKill_01_225a8302-a751-e9ea-d954-bbf8556c38ee, S_LOW_BhaalTemple_Cultist_06_692c037a-b660-4461-abb5-7599b1d12702, S_LOW_BhaalTemple_UnholyAssassin_02_cec194b2-0e8d-4d38-a136-0e9b1c38c684);
DB_LOW_BhaalTemple_AdmireKillADList(S_LOW_BhaalTemple_AdmireKillADArea_02_188e3d00-bc5a-4ace-8800-f1f9056d33c5, LOW_BhaalTemple_AD_AdmiringKill_02_80eac312-050d-76d7-b641-a1e35f20e881, S_LOW_BhaalTemple_Cultist_03_09b965d0-49f7-4b00-a8ab-20f19e4a563b, S_LOW_BhaalTemple_Cultist_04_92e27323-35e8-41ce-9644-76d668295c10);
PROC_TriggerRegisterForPlayers(S_LOW_BhaalTemple_AdmireKillADArea_01_ac9593fb-9276-4b70-a962-b5abc507fab3);
PROC_TriggerRegisterForPlayers(S_LOW_BhaalTemple_AdmireKillADArea_02_188e3d00-bc5a-4ace-8800-f1f9056d33c5);
PROC_TriggerRegisterForPlayers(S_LOW_BhaalTemple_AltarArea_DialogTrigger_0a93c977-cdc9-40bf-b433-854084739104);
DB_LOW_BhaalTemple_Allies_DuelPos(S_LOW_BhaalTemple_Duel_Companion1_Pos_bde96a47-c724-4c6f-a237-e5a283d08a09, 0);
DB_LOW_BhaalTemple_Allies_DuelPos(S_LOW_BhaalTemple_Duel_Companion2_Pos_3486f7c9-090d-427d-bd01-16142a6c3d50, 0);
DB_LOW_BhaalTemple_Allies_DuelPos(S_LOW_BhaalTemple_Duel_Companion3_Pos_7babb553-989b-4687-a090-56a93cd223ed, 0);
TeleportTo(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, S_LOW_BhaalAvatar_Home_f0835274-40ce-405a-905f-8c025ad9c77e);
SetVisible(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 1);
SetDetached(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 0);
DB_DangerZone(S_LOW_BhaalTemple_Dangerzone_1d20188e-6154-4c9c-8cbd-39134c429113, "LOW_BhaalTemple_DangerZone");
DB_DangerZone(S_LOW_BhaalTemple_Dangerzone_Bridge_24294a7a-06c4-4258-a9c9-fec3c195ab86, "LOW_BhaalTemple_DangerZone_Bridge");
DB_LOW_BhaalTemple_AbducteeRescuer(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_LOW_BhaalTemple_AbducteeRescuer(NULL_00000000-0000-0000-0000-000000000000);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_TransformToSlayer_25508b93-831f-449b-92ef-d3baa32ae964, LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_TransformToSlayer_25508b93-831f-449b-92ef-d3baa32ae964, LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_State_OrinForcedSlayer_af3603a6-7114-4752-aa91-6c2a269d8c58, LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_State_OrinForcedSlayer_af3603a6-7114-4752-aa91-6c2a269d8c58, LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_PlayerTurnsIntoSlayerInDialog_4915ebb2-6d2c-41d0-baa0-b57d6a6df67f, LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_PlayerTurnsIntoSlayerInDialog_4915ebb2-6d2c-41d0-baa0-b57d6a6df67f, LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_Confrontation_Leaving_Wyll_e282515e-5415-4134-adbe-c70839deafb3, LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_Confrontation_Leaving_Gale_20844e0e-fb68-4050-a947-cebf996b262b, LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_Confrontation_Leaving_Karlach_f93d0bd8-5f3e-40c0-8174-88610dd8208d, LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
DB_GLO_CharacterCorpseDialog(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, LOW_BhaalTemple_OrinsMother_Dead_d96d66d3-b2e5-658f-a112-8b9c3b90580b);
PROC_LOW_BhaalTemple_MainDoor_Init();
PROC_LOW_BhaalTemple_Lieutenant_Init();
PROC_LOW_BhaalTemple_Orin_Init();
PROC_LOW_BhaalTemple_Confrontation_Init();
PROC_LOW_BhaalTemple_Books_Init();
PROC_LOW_BhaalTemple_ArenaIndicator_Disable();
PROC_LOW_BhaalTemple_NarrativeItems_Setup();
PROC_LOW_BhaalTemple_DarkUrge_Setup();
PROC_LOW_BhaalTemple_DarkUrgeClone_Setup();
PROC_LOW_BhaalTemple_Denizens_Dialogs_Setup();
PROC_LOW_BhaalTemple_Denizens_Combat_Setup();
PROC_LOW_BhaalTemple_Denizens_IgnoreShapeshiftReactions();
PROC_GEN_OrinsAbduction_InWorldAbductions_Init();
PROC_LOW_BhaalTemple_InWorldAbductionTriggers_Init();
DB_OneShot_VoiceBarkTrigger(S_LOW_BhaalTemple_RuinsWyllVB_Trigger_e913a9b2-351f-47fd-9712-e799186863a6, LOW_BhaalTemple_VB_WyllRuinsComment_2410babe-08a4-3f2e-efc7-7335205a6bd7);
DB_OneShot_VoiceBarkTrigger(S_LOW_BhaalTemple_VB_ArrivalBridge_8553d251-51c9-4afc-babd-7b4e3387ac67, LOW_BhaalTemple_VB_ArrivingBhaalTemple_e9f26edf-90ed-9cb9-fd54-777bae067f5e, "PerUserAndNearbyPlayers");
DB_OneShot_VoiceBarkTrigger(S_ORI_DarkUrge_VB_ChosenRoom_b3d6a7f1-f99b-4c10-98d7-c72017005aa9, ORI_DarkUrge_VB_ChosenRoom_c0a1db6d-c39b-1d26-1510-c7737e5e1a4b);
DB_TopicalGreeting(TG_DarkUrge_FailedBhaal_b5a1847d-9d89-4df2-978d-dddcb4780e6b);
DB_TopicalGreeting(TG_DarkUrge_DefiedBhaal_885a6052-a198-4e01-b153-72e3867e4faa);
DB_TopicalGreeting(TG_DarkUrge_AcceptedBhaal_3e081f26-3eb2-43c8-8c86-6200e464e8a9);
PROC_TriggerRegisterForPlayers(S_LOW_UndercityRuins_SUB_0ede416b-b162-462c-98a1-02e35f558773);
PROC_TriggerRegisterForPlayers(S_LOW_BhaalTemple_SewersBhaalDomain_e0628477-b5a3-4006-8b73-c382ce5f5431);
DB_TopicalGreeting(TG_LOW_Undercity_713b505c-952a-46ad-9358-f4494592ad23);
DB_TopicalGreetingEndCondition_LeaveTrigger(TG_LOW_Undercity_713b505c-952a-46ad-9358-f4494592ad23, S_LOW_UndercityRuins_SUB_0ede416b-b162-462c-98a1-02e35f558773);
DB_TopicalGreeting(TG_LOW_SewersBhaal_a0d35534-d2d3-4e2c-880e-b83e6dc4473d);
DB_TopicalGreetingEndCondition_LeaveTrigger(TG_LOW_SewersBhaal_a0d35534-d2d3-4e2c-880e-b83e6dc4473d, S_LOW_BhaalTemple_SewersBhaalDomain_e0628477-b5a3-4006-8b73-c382ce5f5431);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_01_078484d1-7d7f-2445-433c-deaf5b7d7c89, S_LOW_BhaalTemple_Cultist_01_9f7607e0-abae-4722-921a-e18ee01b8984, 1);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_03_04d05425-a36b-092c-f8ae-2684744cde3a, S_LOW_BhaalTemple_Cultist_01_9f7607e0-abae-4722-921a-e18ee01b8984, 3);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_02_19dc8500-4003-9ac5-ccee-48ca2258aa67, S_LOW_BhaalTemple_Cultist_01_9f7607e0-abae-4722-921a-e18ee01b8984, 5);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_02_19dc8500-4003-9ac5-ccee-48ca2258aa67, S_LOW_BhaalTemple_Cultist_02_b69fe2eb-20ec-4d32-a146-ade9dc4df5eb, 1);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_01_078484d1-7d7f-2445-433c-deaf5b7d7c89, S_LOW_BhaalTemple_Cultist_02_b69fe2eb-20ec-4d32-a146-ade9dc4df5eb, 2);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_03_04d05425-a36b-092c-f8ae-2684744cde3a, S_LOW_BhaalTemple_Cultist_02_b69fe2eb-20ec-4d32-a146-ade9dc4df5eb, 4);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_01_078484d1-7d7f-2445-433c-deaf5b7d7c89, S_LOW_BhaalTemple_Cultist_03_09b965d0-49f7-4b00-a8ab-20f19e4a563b, 3);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_03_04d05425-a36b-092c-f8ae-2684744cde3a, S_LOW_BhaalTemple_Cultist_03_09b965d0-49f7-4b00-a8ab-20f19e4a563b, 5);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_02_19dc8500-4003-9ac5-ccee-48ca2258aa67, S_LOW_BhaalTemple_Cultist_04_92e27323-35e8-41ce-9644-76d668295c10, 2);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_03_04d05425-a36b-092c-f8ae-2684744cde3a, S_LOW_BhaalTemple_Cultist_04_92e27323-35e8-41ce-9644-76d668295c10, 4);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_01_078484d1-7d7f-2445-433c-deaf5b7d7c89, S_LOW_BhaalTemple_Cultist_04_92e27323-35e8-41ce-9644-76d668295c10, 3);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_01_078484d1-7d7f-2445-433c-deaf5b7d7c89, S_LOW_BhaalTemple_Cultist_05_e20ee46e-ea8e-4781-95fd-5f1f72211703, 2);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_03_04d05425-a36b-092c-f8ae-2684744cde3a, S_LOW_BhaalTemple_Cultist_05_e20ee46e-ea8e-4781-95fd-5f1f72211703, 3);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_02_19dc8500-4003-9ac5-ccee-48ca2258aa67, S_LOW_BhaalTemple_Cultist_06_692c037a-b660-4461-abb5-7599b1d12702, 5);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_01_078484d1-7d7f-2445-433c-deaf5b7d7c89, S_LOW_BhaalTemple_Cultist_06_692c037a-b660-4461-abb5-7599b1d12702, 3);
DB_LOW_BhaalTemple_CombatAD_Cultists(LOW_BhaalCultist_AD_TakeTurn_Combat_03_04d05425-a36b-092c-f8ae-2684744cde3a, S_LOW_BhaalTemple_Cultist_06_692c037a-b660-4461-abb5-7599b1d12702, 4);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab, 1);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_02_ef16770b-0590-457f-8475-712f2c491be2, 1);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_03_97c90688-1181-4893-a497-141e816a4c4a, 2);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_04_c01e3dc3-4323-4a50-a378-ae6c0b8a062a, 2);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_03_950651f7-0cd2-7a53-cec9-0e53356f801b, S_LOW_BhaalTemple_Reaper_05_a2bcb302-7a7b-4206-ac93-54b755bcb4d8, 3);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_03_950651f7-0cd2-7a53-cec9-0e53356f801b, S_LOW_BhaalTemple_Reaper_06_646eaea2-2329-4d75-acc7-feddad951066, 3);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_04_5d7cde43-364c-8ca2-bb40-503f27733705, S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab, 4);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_04_5d7cde43-364c-8ca2-bb40-503f27733705, S_LOW_BhaalTemple_Reaper_02_ef16770b-0590-457f-8475-712f2c491be2, 4);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_03_97c90688-1181-4893-a497-141e816a4c4a, 5);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_04_c01e3dc3-4323-4a50-a378-ae6c0b8a062a, 5);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_05_a2bcb302-7a7b-4206-ac93-54b755bcb4d8, 6);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_06_646eaea2-2329-4d75-acc7-feddad951066, 6);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_03_950651f7-0cd2-7a53-cec9-0e53356f801b, S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab, 7);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_03_950651f7-0cd2-7a53-cec9-0e53356f801b, S_LOW_BhaalTemple_Reaper_02_ef16770b-0590-457f-8475-712f2c491be2, 7);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_03_97c90688-1181-4893-a497-141e816a4c4a, 8);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_04_c01e3dc3-4323-4a50-a378-ae6c0b8a062a, 8);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_04_5d7cde43-364c-8ca2-bb40-503f27733705, S_LOW_BhaalTemple_Reaper_05_a2bcb302-7a7b-4206-ac93-54b755bcb4d8, 9);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_04_5d7cde43-364c-8ca2-bb40-503f27733705, S_LOW_BhaalTemple_Reaper_06_646eaea2-2329-4d75-acc7-feddad951066, 9);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab, 10);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_02_ef16770b-0590-457f-8475-712f2c491be2, 10);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_04_5d7cde43-364c-8ca2-bb40-503f27733705, S_LOW_BhaalTemple_Reaper_03_97c90688-1181-4893-a497-141e816a4c4a, 11);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_04_5d7cde43-364c-8ca2-bb40-503f27733705, S_LOW_BhaalTemple_Reaper_04_c01e3dc3-4323-4a50-a378-ae6c0b8a062a, 11);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_05_a2bcb302-7a7b-4206-ac93-54b755bcb4d8, 12);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_06_646eaea2-2329-4d75-acc7-feddad951066, 12);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab, 13);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_02_ef16770b-0590-457f-8475-712f2c491be2, 13);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_03_97c90688-1181-4893-a497-141e816a4c4a, 14);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_04_c01e3dc3-4323-4a50-a378-ae6c0b8a062a, 14);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_03_950651f7-0cd2-7a53-cec9-0e53356f801b, S_LOW_BhaalTemple_Reaper_05_a2bcb302-7a7b-4206-ac93-54b755bcb4d8, 15);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_03_950651f7-0cd2-7a53-cec9-0e53356f801b, S_LOW_BhaalTemple_Reaper_06_646eaea2-2329-4d75-acc7-feddad951066, 15);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_04_5d7cde43-364c-8ca2-bb40-503f27733705, S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab, 16);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_04_5d7cde43-364c-8ca2-bb40-503f27733705, S_LOW_BhaalTemple_Reaper_02_ef16770b-0590-457f-8475-712f2c491be2, 16);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_03_97c90688-1181-4893-a497-141e816a4c4a, 17);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_02_3ab1e569-b4a9-7693-3d33-e4ec523e08d4, S_LOW_BhaalTemple_Reaper_04_c01e3dc3-4323-4a50-a378-ae6c0b8a062a, 17);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_05_a2bcb302-7a7b-4206-ac93-54b755bcb4d8, 18);
DB_LOW_BhaalTemple_CombatAD_Reapers(LOW_BhaalReaper_AD_Incantation_Combat_01_e4aad5de-e7ca-5c7f-b4e7-b11a6faa5920, S_LOW_BhaalTemple_Reaper_06_646eaea2-2329-4d75-acc7-feddad951066, 18);

KBSECTION
IF
DB_LOW_BhaalTemple_CombatAD_Cultists(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
DB_CombatReact_AD_OnTurn(_Var2, _Var1, _Var3);

IF
DB_LOW_BhaalTemple_CombatAD_Reapers(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
DB_CombatReact_AD_OnTurn(_Var2, _Var1, _Var3);

PROC
PROC_LOW_BhaalTemple_Orin_CombatAD_Setup()
THEN
DB_CombatReact_AD_OnTurn(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, LOW_Orin_AD_TakeTurn_Combat_01_2a255b32-868f-bec8-3a00-b68a004c1834, 2);
DB_CombatReact_AD_OnTurn(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, LOW_Orin_AD_TakeTurn_Combat_02_b1fd2091-ff7c-dc48-ad00-ad3e3f0489ec, 6);
DB_CombatReact_AD_OnTurn(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, LOW_Orin_AD_MurderMark_Combat_01_a6da324c-cc80-28c6-2097-1a1282ec4e1c, 4);
DB_CombatReact_AD_OnTurn(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, LOW_Orin_AD_MurderMark_Combat_02_2800dde1-68b9-138e-696f-2f8e50b89970, 8);
DB_CombatReact_AD_OnCast(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, LOW_Orin_AD_DeathBringerAssault_Combat_01_83d0972a-79b9-222d-5640-6dc7520dd178, "LOW_DeathbringerAssault_Orin");
DB_CombatReact_AD_OnCast(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, LOW_Orin_AD_DeathBringerAssault_Combat_02_03b062f2-647c-4359-5555-a93532026fe4, "LOW_DeathbringerAssault_Orin");

PROC
PROC_LOW_BhaalTemple_Lieutenant_Init()
THEN
SetOnStage(S_LOW_BhaalTemple_BhaalAmulet_Lieutenant_843a9a25-8b22-48a6-9039-5cd829732818, 0);

PROC
PROC_LOW_BhaalTemple_DarkUrgeClone_Setup()
AND NOT
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
DB_GEN_OrinsAbduction_OrinTransformRule_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetOnStage(S_LOW_BhaalTemple_DarkUrgeClone_5a96d12a-f7b4-4628-8257-8a463b49852c, 1);
PROC_GEN_OrinsAbduction_BloodiedChar_Apply(S_LOW_BhaalTemple_DarkUrgeClone_5a96d12a-f7b4-4628-8257-8a463b49852c);
PROC_LoopEffectAtPositionAndRotation(VFX_Script_Bhaals_Blood_Droplets_Root_01_437788a3-d32b-1b63-26d7-0ae76c67daa2, S_LOW_BhaalTemple_DarkUrgeClone_5a96d12a-f7b4-4628-8257-8a463b49852c, "LOW_BhaalTemple_DarkUrgeSacrificeSign", "CTY_Main_A", 0.6);

PROC
PROC_LOW_BhaalTemple_DarkUrgeClone_Setup()
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
THEN
SetOnStage(S_LOW_BhaalTemple_DarkUrgeClone_5a96d12a-f7b4-4628-8257-8a463b49852c, 0);

IF
CharacterLootedCharacter((CHARACTER)_Var1, S_LOW_BhaalTemple_DarkUrgeClone_5a96d12a-f7b4-4628-8257-8a463b49852c, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_BhaalTemple_FoundDarkUrgeClone", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(LOW_BhaalTemple_PAD_FindDarkUrgeBody_471d4a29-b0c3-0466-01c0-eebbd5550030, _Var1);

PROC
PROC_LOW_BhaalTemple_Orin_Init()
THEN
SetOnStage(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 1);
SetVisible(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 1);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_Event_TransformToOrin_9280b884-9f8e-41f4-bd49-dbfcb2827fe5);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_Event_TransformToSlayer_25508b93-831f-449b-92ef-d3baa32ae964);

IF
LevelLoaded("CTY_Main_A", _, _, _, _)
AND NOT
DB_LOW_BhaalTemple_OrinsMother_InPlace(1, _, _, _, _)
THEN
DB_LOW_BhaalTemple_OrinsMother_InPlace(1);
PROC_LOW_BhaalTemple_OrinsMother_Enable();

PROC
PROC_LOW_BhaalTemple_OrinsMother_Init()
THEN
SetOnStage(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, 0);
SetOnStage(S_LOW_BhaalTemple_OrinsMotherBed_641b0657-91de-4ce2-8b9c-b9ce33967f3b, 0);

PROC
PROC_LOW_BhaalTemple_OrinsMother_Enable()
THEN
SetOnStage(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, 1);
SetOnStage(S_LOW_BhaalTemple_OrinsMotherBed_641b0657-91de-4ce2-8b9c-b9ce33967f3b, 1);
PROC_LOW_BhaalTemple_OrinsMother_UseBed();

PROC
PROC_LOW_BhaalTemple_OrinsMother_UseBed()
THEN
Use(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, S_LOW_BhaalTemple_OrinsMotherBed_641b0657-91de-4ce2-8b9c-b9ce33967f3b, "");

IF
UseFinished(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, S_LOW_BhaalTemple_OrinsMotherBed_641b0657-91de-4ce2-8b9c-b9ce33967f3b, 1, _, _)
THEN
PROC_LOW_BhaalTemple_OrinsMother_TeleportBed();

PROC
PROC_LOW_BhaalTemple_OrinsMother_TeleportBed()
THEN
TeleportTo(S_LOW_BhaalTemple_OrinsMotherBed_641b0657-91de-4ce2-8b9c-b9ce33967f3b, S_LOW_BhaalTemple_OrinMotherBedPos_d4289963-a2f5-4932-b2c3-df057d71cc7b, "LOW_BhaalTemple_OrinsMother_UsedBed", 0, 0, 0, 0, 0);
SetVisible(S_LOW_BhaalTemple_OrinsMotherBed_641b0657-91de-4ce2-8b9c-b9ce33967f3b, 0);

IF
EntityEvent(_, "LOW_BhaalTemple_OrinsMother_UsedBed", (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
SetOnStage(S_LOW_BhaalTemple_OrinsMotherBed_641b0657-91de-4ce2-8b9c-b9ce33967f3b, 0);
PROC_LOW_BhaalTemple_OrinsMother_Kill();

PROC
PROC_LOW_BhaalTemple_OrinsMother_Kill()
THEN
PROC_DieImmediate(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, 0, 0);
ApplyStatus(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, "LOW_BHAALTEMPLE_ORINSMOTHER_DEAD_LOCKINPLACE", -1, 1, S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e);

PROC
PROC_LOW_BhaalTemple_OrinsMother_Resurrect()
THEN
Resurrect(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e);

PROC
PROC_LOW_BhaalTemple_OrinsMother_PlayDeadAnim()
THEN
PROC_PlayLoopingAnimation(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, CUST_Deathpose_Orin_Mother_01_d0d57381-b2cd-4e0a-9f4d-a16af3629367, CUST_Deathpose_Orin_Mother_01_d0d57381-b2cd-4e0a-9f4d-a16af3629367, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_LOW_BhaalTemple_OrinsMother_ApplyStatus()
THEN
ApplyStatus(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, "LOW_BHAALTEMPLE_ORINSMOTHER_DEAD_LOCKINPLACE", -1, 1, S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e);

PROC
PROC_LOW_BhaalTemple_ButlerSpotting_Started()
THEN
PROC_SpotPlayers_RestartSpotting(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, "LOW_BhaalTemple_Spotting_ButlerAtDoor");
DB_SpotPlayers(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, "LOW_BhaalTemple_Spotting_ButlerAtDoor", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_SpotPlayers_Spotted(_, "LOW_BhaalTemple_Spotting_ButlerAtDoor", (CHARACTER)_Var2, (CHARACTER)_, (CHARACTER)_)
THEN
PROC_LOW_BhaalTemple_Butler_StartDialog(_Var2);

PROC
PROC_LOW_BhaalTemple_Butler_StartDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_StartDialog(LOW_BhaalTemple_AD_ButlerDarkUrge_030a7706-e808-9a3a-3ed2-cc4467c50c31, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_Books_Init()
THEN
DB_BookFlags(S_LOW_BhaalTemple_OrinsManifesto_c173f028-6da8-4bb6-bde1-c5b863f7c780, LOW_MurderTribunal_Knows_Sarevok_OrinGranddaughter_5a46b659-d27f-06c1-ab73-0911d2b63c23);

PROC
PROC_LOW_BhaalTemple_NarrativeItems_Setup()
AND NOT
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
THEN
ToInventory(S_LOW_BhaalTemple_BloodEnvyForTheUnworthyV1_02_d8c403d6-f5cc-4bfc-be0f-51f3163db684, S_LOW_BhaalTemple_Narrative_Chest_ChosenRoom_01_8d7d7944-ec50-4467-8740-e672ff04c323, 1, 0, 0);
ToInventory(S_LOW_BhaalTemple_Book_APlanForChaos_01_e729109b-e25e-4eaa-a8cc-52badf9a787d, S_LOW_BhaalTemple_Narrative_Wardrobe_Wood_Rich_A_ChosenRoom_01_1f66cd01-7368-4a82-aa4a-acdb0902330e, 1, 0, 0);

PROC
PROC_LOW_BhaalTemple_NarrativeItems_Setup()
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
THEN
ToInventory(S_LOW_BhaalTemple_BloodEnvyForTheUnworthyV1_01_c8c13f25-24de-4991-b822-87f2940283a8, S_LOW_BhaalTemple_Narrative_Chest_ChosenRoom_01_8d7d7944-ec50-4467-8740-e672ff04c323, 1, 0, 0);
ToInventory(S_LOW_BhaalTemple_Book_TestMissionWithGortash_01_785eee09-ee31-44f9-b888-53b1c84b1538, S_LOW_BhaalTemple_Narrative_Wardrobe_Wood_Rich_A_ChosenRoom_01_1f66cd01-7368-4a82-aa4a-acdb0902330e, 1, 0, 0);
ToInventory(S_LOW_BhaalTemple_Book_BhaalButlersChecklist_01_5aa2559b-20e6-408f-a3b7-626e85a996fa, S_LOW_BhaalTemple_Narrative_Vase_Large_A_Glazed_01_a0887209-1317-4ab0-a365-2913ab119157, 1, 0, 0);

PROC
PROC_LOW_BhaalTemple_NarrativeItems_Setup()
THEN
ToInventory(S_LOW_BhaalTemple_Book_ConcerningOrinTheRed_000_6e1c9d3b-174e-4bde-915d-a838856ed5f6, S_LOW_BhaalTemple_Narrative_Wardrobe_A_ChosenRoom_01_30a14814-27e4-45f3-9e01-d3ad25d1a553, 1, 0, 0);
ToInventory(S_LOW_BhaalTemple_Book_WealthOfferingToBhaal_01_33749b63-fe11-4377-88e4-dfba53686817, S_LOW_BhaalTemple_Narrative_Chest_CorpseNiche_01_d99f4359-64ee-48e9-b888-5f610ad7cbcb, 1, 0, 0);

IF
EnteredTrigger((CHARACTER)_Var1, S_LOW_UndercityRuins_SUB_0ede416b-b162-462c-98a1-02e35f558773, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TopicalGreeting_UnlockTopic(TG_LOW_Undercity_713b505c-952a-46ad-9358-f4494592ad23);

IF
EnteredTrigger((GUIDSTRING)_Var1, S_LOW_BhaalTemple_SewersBhaalDomain_e0628477-b5a3-4006-8b73-c382ce5f5431, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TopicalGreeting_UnlockTopic(TG_LOW_SewersBhaal_a0d35534-d2d3-4e2c-880e-b83e6dc4473d);

PROC
PROC_LOW_BhaalTemple_SetupOrinInTemple()
THEN
RemoveHarmfulStatuses(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_RemoveAllDialogEntriesForSpeaker(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_SelfHealing_Enable(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
SetImmortal(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0);
NOT DB_PreventPermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
DB_DoNotRemoveKnockedOutCharacterOnLongRest(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2);
TeleportTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_BhaalTemple_OrinTemple_TriggerPos_810e97df-6e10-4ff3-94d4-2a466a3ec7c7, "", 0, 0, 0, 0, 0);
DB_SceneManager(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BhaalTemple_CombatDenizens_Scene");
PROC_GEN_OrinsAbduction_OrinTransformsBack();
PROC_LOW_BhaalTemple_Orin_Inventory_Setup();
PROC_LOW_BhaalTemple_OrinSpotting_Started();
PROC_LOW_BhaalTemple_Orin_CombatAD_Setup();
PROC_WYR_OrinsImpersonation_Remove_FlamingFistFaction();

PROC
PROC_LOW_BhaalTemple_Orin_Inventory_Setup()
THEN
CharacterGiveEquipmentSet(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "EQP_LOW_Orin");
Equip(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_Orin_Bhaalist_Dagger_Netherstone_7051fd5c-d777-457e-9aaf-e007b4cbbb55);
Equip(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_Orin_OffhandDagger_675b8dd2-b6df-44f6-8978-b4ad340e0959);
ToInventory(S_LOW_BhaalTemple_AltarKey_c817c1c6-fd0e-41d8-9750-93dfe0e85c92, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_GEN_OrinsAbduction_GiveOrinRing();

PROC
PROC_LOW_BhaalTemple_Orin_Inventory_Save()
THEN
DB_LOW_BhaalTemple_SavedOrinsInventory(1);
Unequip(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_Orin_OffhandDagger_675b8dd2-b6df-44f6-8978-b4ad340e0959);
Unequip(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_Orin_Bhaalist_Dagger_Netherstone_7051fd5c-d777-457e-9aaf-e007b4cbbb55);
IterateInventory(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BhaalTemple_Orin_Inventory_Save", "LOW_BhaalTemple_Orin_Inventory_Save_Finished");

IF
EntityEvent((ITEM)_Var1, "LOW_BhaalTemple_Orin_Inventory_Save", (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
THEN
ToInventory(_Var1, S_LOW_BhaalTemple_Orin_Chest_ImpersonationItems_38c55a73-1f33-4aa9-a208-2a0882b26f85);

PROC
PROC_LOW_BhaalTemple_Orin_Inventory_Restore()
AND
DB_LOW_BhaalTemple_SavedOrinsInventory(1, _, _, _, _)
THEN
NOT DB_LOW_BhaalTemple_SavedOrinsInventory(1);
IterateInventory(S_LOW_BhaalTemple_Orin_Chest_ImpersonationItems_38c55a73-1f33-4aa9-a208-2a0882b26f85, "LOW_BhaalTemple_Orin_Inventory_Restore", "LOW_BhaalTemple_Orin_Inventory_Restore_Finished");

IF
EntityEvent((ITEM)_Var1, "LOW_BhaalTemple_Orin_Inventory_Restore", (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
QRY_LOW_BhaalTemple_Orin_Inventory_CheckEquip(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_Orin_Inventory_CheckEquip((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
IsEquipable(_Var1, 1, _Var1, _Var1, _Var1)
AND
IsEquipped(_Var1, 0, _Var1, _Var1, _Var1)
THEN
Equip(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1);

QRY
QRY_LOW_BhaalTemple_Orin_Inventory_CheckEquip((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
IsEquipable(_Var1, 0, _Var1, _Var1, _Var1)
THEN
ToInventory(_Var1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

IF
AddedTo(S_GLO_Orin_Bhaalist_Dagger_Netherstone_7051fd5c-d777-457e-9aaf-e007b4cbbb55, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_BhaalTemple_SwapNetherstoneDagger", _Var1, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_GaveDagger(1);
ToInventory(S_GLO_Orin_Bhaalist_Dagger_Netherstone_7051fd5c-d777-457e-9aaf-e007b4cbbb55, S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec);
PROC_GEN_OrinsAbduction_GiveDagger_WithoutNetherstone(_Var1);
PROC_GEN_OrinsAbduction_GiveStone(_Var1);

IF
AddedTo(S_LOW_CrownController_Orin_360b0dfd-8e0b-48d2-a079-fcf68c104d6b, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GLO_EmperorPrelude_NotLastNetherstone(S_LOW_CrownController_Orin_360b0dfd-8e0b-48d2-a079-fcf68c104d6b, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_FacedOrinTemple_c770bc17-ffcd-400a-9316-b0d8f0202575, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
QRY_OnlyOnce("LOW_BhaalTemple_PostBattle_DarkUrgeGetStoneFirst", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_PostBattle_DarkUrgeGetStoneFirst_StartDialog(_Var1);

PROC
PROC_LOW_BhaalTemple_PostBattle_DarkUrgeGetStoneFirst_StartDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(ORI_DarkUrge_State_BhaalDisappointed_fb48dba0-24fd-e9ae-b6f9-4fadb9f8c4a0, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(LOW_BhaalTemple_PostBattle_DarkUrgeGetStoneFirst_5a302a8f-9d78-a450-2070-cf7a09c4ad9f, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_DarkUrge_Setup()
THEN
PROC_LOW_BhaalTemple_BhaalAvatar_Setup();
PROC_LOW_BhaalTemple_Butler_Setup();

PROC
PROC_LOW_BhaalTemple_BhaalAvatar_Setup()
AND NOT
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
THEN
SetOnStage(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 0);
SetVisible(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 0);

PROC
PROC_LOW_BhaalTemple_BhaalAvatar_Setup()
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
THEN
TeleportTo(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, S_LOW_BhaalAvatar_Home_f0835274-40ce-405a-905f-8c025ad9c77e, "", 0, 0, 0, 0, 0);
SetOnStage(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 1);
SetVisible(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 1);

PROC
PROC_LOW_BhaalTemple_BhaalAvatar_SetupInTemple()
THEN
SetVisible(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 0);
SetOnStage(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 0);
TeleportTo(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, S_LOW_BhaalTemple_BhaalAvatar_TemplePos_21451bec-8274-445c-aab7-9b7d7d662590);

PROC
PROC_LOW_BhaalTemple_BhaalAvatar_RemoveFromTemple()
THEN
SetVisible(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 1);
SetOnStage(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 1);
TeleportTo(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, S_LOW_BhaalAvatar_Home_f0835274-40ce-405a-905f-8c025ad9c77e);

PROC
PROC_LOW_BhaalTemple_Butler_Setup()
AND NOT
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_Butler_Setup()
AND NOT
DB_PartOfTheTeam(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, _, _, _, _)
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
THEN
SetVisible(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 1);
SetDetached(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 0);
TeleportTo(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, S_LOW_BhaalTemple_ButlerDarkUrge_Home_TriggerPos_8d6f75fa-85f9-4a79-aaa8-a7af1a8bfbe5, "", 0, 0, 0, 0, 0);
PROC_TriggerRegisterForPlayers(S_LOW_BhaalTemple_OrinButler_WaitAtDoor_d76f46a2-e44a-49e4-a062-b8c865fff355);
TriggerRegisterForCharacter(S_LOW_BhaalTemple_OrinButler_WaitAtDoor_d76f46a2-e44a-49e4-a062-b8c865fff355, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10);
DB_Dialogs(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, NULL_00000000-0000-0000-0000-000000000000);
PROC_SetHasDialogIfChar(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 1);
PROC_LOW_BhaalTemple_ButlerSpotting_Started();

QRY
QRY_SelectCustomDialog_AfterGenerics(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_FacedOrinTemple_c770bc17-ffcd-400a-9316-b0d8f0202575, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(LOW_BhaalTemple_MainDoor_6879d3df-5c9c-6cd6-78ca-340aadfbd989, S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, _Var1, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10);

IF
EnteredTrigger((CHARACTER)_Var1, S_LOW_BhaalTemple_OrinButler_WaitAtDoor_d76f46a2-e44a-49e4-a062-b8c865fff355, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_OpenedMainDoor_6f6497c1-6254-46ad-a3e9-46fcd0909b83, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_InRegion(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, S_LOW_BhaalTemple_OrinButler_WaitAtDoor_d76f46a2-e44a-49e4-a062-b8c865fff355, _Var1, _Var1, _Var1)
THEN
TeleportTo(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, S_LOW_BhaalTemple_ButlerDarkUrge_Home_TriggerPos_8d6f75fa-85f9-4a79-aaa8-a7af1a8bfbe5, "", 0, 0, 0, 0, 0);
SetVisible(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 1);
SetOnStage(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 1);
SetDetached(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 0);
PROC_GEN_OrinsAbduction_PlayEffect_TeleportOnCharPoof(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10);
PROC_LOW_BhaalTemple_ButlerSpotting_Started();

IF
LeftTrigger((CHARACTER)_Var1, S_LOW_BhaalTemple_OrinButler_WaitAtDoor_d76f46a2-e44a-49e4-a062-b8c865fff355, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_OpenedMainDoor_6f6497c1-6254-46ad-a3e9-46fcd0909b83, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_LOW_BhaalTemple_Butler_OtherPlayerInTrigger()
AND
DB_InRegion(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, S_LOW_BhaalTemple_OrinButler_WaitAtDoor_d76f46a2-e44a-49e4-a062-b8c865fff355, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_ButlerSpotting_Started();

QRY
QRY_LOW_BhaalTemple_Butler_OtherPlayerInTrigger()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_LOW_BhaalTemple_OrinButler_WaitAtDoor_d76f46a2-e44a-49e4-a062-b8c865fff355, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_Butler_ResurrectInTemple()
THEN
PROC_CharacterFullRestore(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10);
TeleportTo(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, S_LOW_BhaalTemple_ButlerDarkUrge_ObservePos_95b134c2-d4ae-42b1-a824-0657b52365fd);
SetOnStage(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 1);

PROC
PROC_LOW_BhaalTemple_Butler_FinalState()
THEN
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_Butler_State_PermaDead_d2f18c09-105a-7cbd-8c44-9a323ca0ce28);
TeleportTo(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, S_LOW_BhaalTemple_ButlerDarkUrge_AltarPos_88d5c5e8-8612-4eff-9904-ff167e686915);
PROC_DieImmediate(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 0, 0);
CreateSurface(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, "SurfaceBlood", 2, -1);
ToInventory(S_LOW_BhaalTemple_Butler_Hat_9e56a94e-cc96-4393-ad2e-db05ffd5e974, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10);

PROC
PROC_LOW_BhaalTemple_Butler_SendToCampAndHide()
THEN
PROC_ORI_SetupCamp(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 1);
SetOnStage(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 0);

PROC
PROC_LOW_BhaalTemple_Denizens_Dialogs_Setup()
AND
DB_LOW_BhaalTemple_Denizens_Dialogs(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_Dialogs(_Var1, _Var2);

PROC
PROC_LOW_BhaalTemple_Denizens_PostBattleDU_Resistance_Dialog_Setup()
AND
DB_LOW_BhaalTemple_Denizens_Combat(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_Denizens_Combat_Setup()
AND
DB_LOW_BhaalTemple_Denizens_Combat(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SceneManager(_Var1, "LOW_BhaalTemple_CombatDenizens_Scene");

PROC
PROC_LOW_BhaalTemple_Denizens_Combat_AddToCounter()
AND
DB_LOW_BhaalTemple_Denizens_Combat(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GLO_DefeatCounter(_Var1, "LOW_BhaalTemple_CombatWin_Counter");

PROC
PROC_LOW_BhaalTemple_Denizens_IgnoreShapeshiftReactions()
AND
DB_LOW_BhaalTemple_Denizens_Dialogs(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_CRIME_DisableDangerousShapeshiftReactions(_Var1);

PROC
PROC_LOW_BhaalTemple_SetupDefaultVictim()
AND NOT
QRY_LOW_BhaalTemple_AbductionHasOccured()
THEN
PROC_GEN_OrinsAbduction_SetupVictimInTemple(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, LOW_BhaalTemple_State_AbducteeIsYenna_fa8d1e59-26d5-4ad6-9706-1cb15a5cdb0a);
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_WasAbductedYenna_ff8e1e49-dcb0-4671-a747-dce5c704207b);
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_AbducteeIsFemale_844c25f6-51f5-a806-8e41-9a97942a6e0a);
PROC_GlobalSetFlagAndCache(GLO_OrinsAbduction_State_AbductionOccured_98dda46d-871c-4807-aced-5dc3ff5f4c2d);
PROC_GEN_OrinsAbduction_ClearDB_ChosenChar();
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship();
DB_GEN_OrinsAbduction_ChosenName("Yenna");
DB_GEN_OrinsAbduction_ChosenChar(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);
DB_GEN_OrinsAbduction_ChosenCharRelationship(LOW_BhaalTemple_State_AbducteeIsYenna_fa8d1e59-26d5-4ad6-9706-1cb15a5cdb0a);

QRY
QRY_LOW_BhaalTemple_AbductionHasOccured()
AND
DB_GlobalFlag(GLO_OrinsAbduction_State_AbductionOccured_98dda46d-871c-4807-aced-5dc3ff5f4c2d, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_RemoveDefaultVictim()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != "Yenna"
THEN
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_AbducteeIsYenna_fa8d1e59-26d5-4ad6-9706-1cb15a5cdb0a);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_WasAbductedYenna_ff8e1e49-dcb0-4671-a747-dce5c704207b);
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship();
PROC_SetOnStage(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, 0);
TeleportToPosition(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, -1540.599, 0, 263.127);

PROC
PROC_LOW_BhaalTemple_MainDoor_Init()
THEN
PROC_LoopEffect(VFX_Environment_CTY_Main_BhaalTemple_Door_01_def4232e-eec8-f5d9-2ea2-03bfccb1bbbd, S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, "LOW_BhaalTemple_MainDoorVFX", "CTY_Main_A", "");

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_OpenedMainDoor_6f6497c1-6254-46ad-a3e9-46fcd0909b83, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_BhaalAccepted_Confrontation_Enabled_103a9b67-e2bb-4823-8262-e0d97aaca769, _Var1, _Var1, _Var1, _Var1)
AND
QRY_LOW_BhaalTemple_MainDoor_StartDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, 0);

QRY
QRY_LOW_BhaalTemple_MainDoor_StartDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_StartDialog(LOW_BhaalTemple_MainDoor_6879d3df-5c9c-6cd6-78ca-340aadfbd989, S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_MainDoor_StartDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_LOW_BhaalTemple_MainDoor_StartDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_MainDoor_6879d3df-5c9c-6cd6-78ca-340aadfbd989, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND NOT
DB_CantTalk(S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 0, 1);

IF
DB_GlobalFlag(LOW_BhaalTemple_Event_OpenedMainDoor_6f6497c1-6254-46ad-a3e9-46fcd0909b83, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_OpenDoor();

PROC
PROC_LOW_BhaalTemple_OpenDoor()
AND NOT
DB_LOW_BhaalTemple_OpenedMainDoorFirstTime(_, _, _, _, _)
THEN
PROC_StopLoopEffect(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, "LOW_BhaalTemple_MainDoorVFX");
PROC_ItemUnlockAndOpen(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2);
SetCanInteract(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, 0);
PROC_LOW_BhaalTemple_SetupOrinInTemple();
PROC_LOW_BhaalTemple_SetupDefaultVictim();
PROC_LOW_BhaalTemple_SetupOrinsVictimsOnAltar();
PROC_GEN_OrinsAbduction_DisableAllImpersonations();
PROC_TriggerUnregisterForPlayers(S_LOW_BhaalTemple_OrinButler_WaitAtDoor_d76f46a2-e44a-49e4-a062-b8c865fff355);
DB_LOW_BhaalTemple_CurrentState("PreCombat");
DB_LOW_BhaalTemple_OpenedMainDoorFirstTime(1);
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Start();

PROC
PROC_LOW_BhaalTemple_OpenDoor()
AND
DB_LOW_BhaalTemple_OpenedMainDoorFirstTime(_, _, _, _, _)
AND
DB_GlobalFlag(LOW_BhaalTemple_BhaalAccepted_Confrontation_Enabled_103a9b67-e2bb-4823-8262-e0d97aaca769, _, _, _, _)
THEN
Open(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2);
SetCanInteract(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, 0);

PROC
PROC_LOW_BhaalTemple_CloseDoor()
AND
DB_GlobalFlag(LOW_BhaalTemple_BhaalAccepted_Confrontation_Enabled_103a9b67-e2bb-4823-8262-e0d97aaca769, _, _, _, _)
THEN
Close(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2);
SetCanInteract(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, 1);

PROC
PROC_LOW_BhaalTemple_SetupOrinsVictimsOnAltar()
THEN
PROC_LOW_BhaalTemple_GetOrinsVictims();
DB_LOW_BhaalTemple_VictimSpotFound("No");
PROC_LOW_BhaalTemple_ClearDB_VictimSpotFound();
PROC_LOW_BhaalTemple_PlaceVictimsOnAltar(1);
PROC_LOW_BhaalTemple_ClearDB_VictimSpotFound();
PROC_LOW_BhaalTemple_PlaceVictimsOnAltar(2);

PROC
PROC_LOW_BhaalTemple_GetOrinsVictims()
AND
DB_WYR_OrinsImpersonation_WorldImpersonationDeathFlag(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_OrinsImpersonation_WorldImpersonationList(_Var1, _, _, _Var5, _Var1)
AND
_Var1 != "Dryad"
THEN
DB_LOW_BhaalTemple_VictimsOnAltar(_Var5);

PROC
PROC_LOW_BhaalTemple_PlaceVictimsOnAltar((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_LOW_BhaalTemple_VictimList(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_VictimsOnAltar(_Var4, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_LOW_BhaalTemple_VictimSpotFound(_, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var2, 0);
TeleportTo(_Var4, _Var3, "", 0, 0, 0, 0, 0);
NOT DB_LOW_BhaalTemple_VictimsOnAltar(_Var4);
DB_LOW_BhaalTemple_VictimSpotFound("Yes");

IF
EnteredTrigger((CHARACTER)_Var1, (TRIGGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_AdmireKillADList(_Var2, _Var3, _Var4, _Var5, _Var1)
THEN
PROC_TryStartAD(_Var3, _Var4, _Var5);

PROC
PROC_LOW_BhaalTemple_AdmireKill_Disable()
THEN
PROC_TriggerUnregisterForPlayers(S_LOW_BhaalTemple_AdmireKillADArea_01_ac9593fb-9276-4b70-a962-b5abc507fab3);
PROC_TriggerUnregisterForPlayers(S_LOW_BhaalTemple_AdmireKillADArea_02_188e3d00-bc5a-4ace-8800-f1f9056d33c5);

IF
LevelLoaded("CTY_Main_A", _, _, _, _)
AND
DB_GlobalFlag(WYR_OrinsImpersonation_State_Impersonated_Smith_97b39a81-b28b-4228-b59d-18db921aef0a, _, _, _, _)
AND
DB_WYR_OrinsImpersonation_WorldImpersonationList("Smith", _, _, _Var3, _)
AND NOT
DB_PermaDefeated(_Var3, _, _, _, _)
AND
DB_WYR_OrinsImpersonation_PostOrinDeathPos("Smith", _Var4, _, _, _)
THEN
TeleportTo(_Var3, _Var4, "", 0, 0, 0, 0, 0);
SetVisible(_Var3, 1);
Die(_Var3, 0, 1);

QRY
QRY_SelectCustomDialog_AfterGenerics((CHARACTER)_Var1, (GUIDSTRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_Abductee_ExamineAbducteeDialog("Enabled", _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(LOW_BhaalTemple_ExamineAbductee_7e7974f1-fbaa-a19b-b9bf-73980a0b3503, _Var1, _Var2);

PROC
PROC_LOW_BhaalTemple_Altar_Enable()
THEN
SetCanInteract(S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, 1);
SetCanInteract(S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, 1);

PROC
PROC_LOW_BhaalTemple_Altar_Disable()
THEN
SetCanInteract(S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, 0);

IF
EnteredTrigger((CHARACTER)_Var1, S_LOW_BhaalTemple_AltarArea_DialogTrigger_0a93c977-cdc9-40bf-b433-854084739104, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_LOW_BhaalTemple_State_SeenAltar(_, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_State_SeenAltar(1);
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_SeenBhaalAltar_9a6db3ce-ddb0-4288-b419-a521b6a63004);

PROC
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Start()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsForceUpdate(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0, _Var1, _Var1, _Var1)
THEN
SetForceUpdate(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 1);
SetForceUpdate(_Var1, 1);

PROC
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Start()
AND
DB_LOW_BhaalTemple_Denizens_Combat(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsForceUpdate(_Var1, 0, _Var1, _Var1, _Var1)
THEN
SetForceUpdate(_Var1, 1);

PROC
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Stop()
AND
IsForceUpdate(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 1, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetForceUpdate(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0);
SetForceUpdate(_Var1, 0);

PROC
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Stop()
AND
DB_LOW_BhaalTemple_Denizens_Combat(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsForceUpdate(_Var1, 1, _Var1, _Var1, _Var1)
THEN
SetForceUpdate(_Var1, 0);

IF
EnteredTrigger((CHARACTER)_Var1, S_LOW_BhaalTemple_Dangerzone_1d20188e-6154-4c9c-8cbd-39134c429113, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_Event_OpenedMainDoor_6f6497c1-6254-46ad-a3e9-46fcd0909b83, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_TempleCombatBegun_b3cf3252-a9af-47b1-9d06-8eae5a397235, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Start();

IF
LeftTrigger((CHARACTER)_Var1, S_LOW_BhaalTemple_Dangerzone_1d20188e-6154-4c9c-8cbd-39134c429113, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_AnyPlayerInTrigger(S_LOW_BhaalTemple_Dangerzone_1d20188e-6154-4c9c-8cbd-39134c429113, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Stop();

IF
Unlocked(S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_AbducteeRescuer(_Var1);
PROC_LOW_BhaalTemple_Abductee_Unlock();
PROC_LOW_BhaalTemple_DropInvisibility(_Var1);
PROC_LOW_BhaalTemple_OrinSpotting_Stopped();
PROC_LOW_BhaalTemple_Orin_PreDialogSetup();
PROC_LOW_BhaalTemple_Orin_StartDialog(_Var1);

PROC
PROC_LOW_BhaalTemple_DropInvisibility((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
HasActiveStatusWithGroup(_Var1, "SG_Invisible", 1, _Var1, _Var1)
THEN
RemoveStatusesWithGroup(_Var1, "SG_Invisible");

PROC
PROC_LOW_BhaalTemple_Orin_SeeInvisibility_Apply()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_VictimUnlocked_6fd6bf7c-dee2-4987-8469-ba8dacd18231, _, _, _, _)
THEN
ApplyStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "SEE_INVISIBILITY", 6, 0, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

IF
Unlocked(S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
AND
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_AbducteeRescuer(_Var1);
PROC_LOW_BhaalTemple_Abductee_Unlock();
PROC_LOW_BhaalTemple_Abductee_WakeUp();

IF
Unlocked(S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_AbducteeRescuer(_Var1);
PROC_LOW_BhaalTemple_Abductee_Unlock();
PROC_LOW_BhaalTemple_Abductee_WakeUp();

PROC
PROC_LOW_BhaalTemple_Abductee_Unlock()
THEN
PROC_LOW_BhaalTemple_Altar_Disable();
PROC_LOW_BhaalTemple_AdmireKill_Disable();
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_VictimUnlocked_6fd6bf7c-dee2-4987-8469-ba8dacd18231);

PROC
PROC_LOW_BhaalTemple_Abductee_WakeUp()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_VictimUnlocked_6fd6bf7c-dee2-4987-8469-ba8dacd18231, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_KilledVictim_ba91f332-45d5-483c-b460-dfec2e6d87e9, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_Abductee_Awakened();

PROC
PROC_LOW_BhaalTemple_Abductee_Awakened()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_VictimAwakened_cedc10cf-2d82-496e-ad98-83ea5a7b3565);
PROC_GEN_OrinsAbduction_Temple_KnockedOut_Remove(_Var1);
PROC_LOW_BhaalTemple_AbducteeAwaken_AD_StartDialog();
PROC_LOW_BhaalTemple_AbducteeAwaken_Setup();

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_AD_StartDialog()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_AD_AwakenAbductee_e190e3b3-1cfe-ee65-a3ff-c5b594489ad4);
PROC_TryStartAD(LOW_BhaalTemple_AD_AwakenAbductee_e190e3b3-1cfe-ee65-a3ff-c5b594489ad4, _Var1);

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_Setup()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 == "Yenna"
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_LOW_BhaalTemple_IsPreOrDuringCombat()
THEN
PROC_DisappearOutOfSightTo(_Var2, S_LOW_BhaalTemple_MapMarker_Door_1fbd7ac6-c15d-4c3e-93e8-f9bff39ed7c0, "Sprint", 0, "LOW_BhaalTemple_YennaFlee");
DB_LOW_BhaalTemple_State_YennaWentToHide("Yes");

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_Setup()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 == "Yenna"
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_LOW_BhaalTemple_IsPreOrDuringCombat()
THEN
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby();

QRY
QRY_LOW_BhaalTemple_IsPreOrDuringCombat()
AND
DB_LOW_BhaalTemple_CurrentState("PreCombat", _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_IsPreOrDuringCombat()
AND
DB_LOW_BhaalTemple_CurrentState("DuringCombat", _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_Setup()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != "Yenna"
AND
QRY_LOW_BhaalTemple_IsPreOrDuringCombat()
THEN
PROC_LOW_BhaalTemple_AbducteeAwaken_Joins();

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_Setup()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != "Yenna"
AND NOT
QRY_LOW_BhaalTemple_IsPreOrDuringCombat()
THEN
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby();

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_Joins()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_AbducteeRescuer(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
AddPartyFollower(_Var1, _Var2);

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_LeavesParty()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsPartyFollower(_Var1, 1, _Var1, _Var1, _Var1)
AND
CharacterGetOwner(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
RemovePartyFollower(_Var1, _Var2);
PROC_CharacterMoveTo(_Var1, S_BhaalTemple_PostBattle_AbducteePos_bee54c03-3701-4937-8698-36a1a1aed229, "Walk", "LOW_BhaalTemple_PostBattleAbducteePos");

IF
EntityEvent((CHARACTER)_Var1, "LOW_BhaalTemple_PostBattleAbducteePos", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby();

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_GoCampOnLongRest()
THEN
DB_LOW_BhaalTemple_State_WaitForLongRest("Yes");

PROC
PROC_LongRest()
AND
DB_LOW_BhaalTemple_State_WaitForLongRest("Yes", _, _, _, _)
AND
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("No", _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_State_WaitForLongRest("No");
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("Yes");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_SpokenToAbducteePostCombat_8dca8ba2-f2ca-44ca-b966-75ff7d839075);
NOT DB_Dialogs(_Var1, LOW_BhaalTemple_PostBattleAbductee_970134ac-8c2b-a65a-496e-2551c7b245ef);
PROC_LOW_BhaalTemple_AbducteeAwaken_GoCamp();

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_GoCamp()
AND
DB_GEN_OrinsAbduction_ChosenName("Yenna", _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_AbducteeRescuer(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(CAMP_Yenna_State_PostAbductionCampChat_d30c5b6a-eada-4c8c-927d-a50de178ec29);
RegisterAsCompanion(_Var1, _Var2);
PROC_ORI_SetupCamp(_Var1);

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_GoCamp()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != "Yenna"
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_AbducteeRescuer(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
RegisterAsCompanion(_Var2, _Var3);
PROC_ORI_SetupCamp(_Var2);

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_GoCamp()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginInPartyDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_RelationshipDialog_WRD_TriggerInCamp(_Var2, WYR_Orin_IPRD_CompanionReturned_8d7f983e-864d-2209-64d9-49416d4a0d3b);
PROC_RelationshipDialog(_Var1, _Var2, WYR_Orin_IPRD_CompanionReturned_8d7f983e-864d-2209-64d9-49416d4a0d3b, _Var1, 0);
PROC_LOW_BhaalTemple_RestoreAbducteeRelationshipDialogs();

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != "Yenna"
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("No");
PROC_LOW_BhaalTemple_StoreAbducteeRelationshipDialogs(_Var2);
DB_Dialogs(_Var2, LOW_BhaalTemple_PostBattleAbductee_970134ac-8c2b-a65a-496e-2551c7b245ef);
PROC_LOW_BhaalTemple_AbducteeAwaken_GoCampOnLongRest();
SteerTo(_Var2, S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, 0);

PROC
PROC_LOW_BhaalTemple_StoreAbducteeRelationshipDialogs((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_HandlingRelationshipDialog(_Var1, _Var2, _Var3, _Var4, _Var5, _Var6, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_AbducteeStoredRelationshipDialogs(_Var1, _Var2, _Var3, _Var4, _Var5, _Var6);

PROC
PROC_LOW_BhaalTemple_StoreAbducteeRelationshipDialogs((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_RelationshipDialog_Queue(_Var1, _Var2, _Var3, _Var4, _Var5, _Var6, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_AbducteeStoredRelationshipDialogs(_Var1, _Var2, _Var3, _Var4, _Var5, _Var6);

PROC
PROC_LOW_BhaalTemple_StoreAbducteeRelationshipDialogs((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_CancelAllRelationshipDialogs(_Var1);

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby()
AND
DB_GEN_OrinsAbduction_ChosenName("Yenna", _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_AbducteeRescuer(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("No");
DB_Dialogs(_Var1, LOW_BhaalTemple_PostBattleAbductee_970134ac-8c2b-a65a-496e-2551c7b245ef);
PROC_LOW_BhaalTemple_AbducteeAwaken_GoCampOnLongRest();
SteerTo(_Var1, _Var2, 0);

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby()
AND
DB_GEN_OrinsAbduction_ChosenName("Yenna", _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_State_YennaWentToHide("Yes", _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_State_YennaWentToHide("Done");
PROC_AppearOutOfSightTo(_Var1, S_BhaalTemple_PostBattle_AbducteePos_bee54c03-3701-4937-8698-36a1a1aed229, S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, "LOW_BhaalTemple_PostBattle_YennaReappears");
PROC_LOW_BhaalTemple_AbducteeAwaken_GoCampOnLongRest();

IF
EntityEvent(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, "LOW_BhaalTemple_PostBattle_YennaReappears", _, _, _)
THEN
PROC_CharacterMoveTo(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, S_BhaalTemple_PostBattle_AbducteePos_bee54c03-3701-4937-8698-36a1a1aed229, "Run", "LOW_BhaalTemple_PostBattle_YennaStandby");

IF
EntityEvent(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, "LOW_BhaalTemple_PostBattle_YennaStandby", _, _, _)
THEN
SteerTo(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, 0);

PROC
PROC_LOW_BhaalTemple_AbducteeAwaken_TeleportToPos()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_LOW_BhaalTemple_PostBattle_AbducteePos_bee54c03-3701-4937-8698-36a1a1aed229);

QRY
QRY_SelectCustomDialog_AfterGenerics((CHARACTER)_Var1, (GUIDSTRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("No", _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_CurrentState("PostCombat", _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(LOW_BhaalTemple_PostBattleAbductee_970134ac-8c2b-a65a-496e-2551c7b245ef, _Var1, _Var2);
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("Yes");

IF
DialogEnded(LOW_BhaalTemple_PostBattleAbductee_970134ac-8c2b-a65a-496e-2551c7b245ef, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 == "Yenna"
AND
DB_DialogPlayers(_Var1, _Var4, 1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_SpokenToAbducteePostCombat_8dca8ba2-f2ca-44ca-b966-75ff7d839075);
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("Yes");
PROC_GlobalSetFlagAndCache(CAMP_Yenna_State_PostAbductionCampChat_d30c5b6a-eada-4c8c-927d-a50de178ec29);
PROC_ORI_SendToCampAfterDialog(_Var2, _Var1, "Sprint", _Var4);

IF
DialogEnded(LOW_BhaalTemple_PostBattleAbductee_970134ac-8c2b-a65a-496e-2551c7b245ef, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 != "Yenna"
AND
DB_DialogPlayers(_Var1, _Var4, 1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_SpokenToAbducteePostCombat_8dca8ba2-f2ca-44ca-b966-75ff7d839075);
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("Yes");
PROC_ORI_SendToCampAfterDialog(_Var2, _Var1, "Walk", _Var4);

IF
EntityEvent((GUIDSTRING)_Var1, "ORI_ToCamp", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("Yes", _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 == "Yenna"
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_RemoveAllDialogEntriesForSpeaker(_Var3);
DB_Dialogs(_Var3, CAMP_MeetingYenna_InviteYenna_dc450528-d148-fdf9-35c7-de3b8851c860);
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("Done");

IF
EntityEvent((CHARACTER)_Var1, "ORI_ToCamp", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("Yes", _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 != "Yenna"
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginInPartyDialog(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
DB_RelationshipDialog_WRD_TriggerInCamp(_Var3, WYR_Orin_IPRD_CompanionReturned_8d7f983e-864d-2209-64d9-49416d4a0d3b);
PROC_RelationshipDialog(_Var1, _Var3, WYR_Orin_IPRD_CompanionReturned_8d7f983e-864d-2209-64d9-49416d4a0d3b, _Var1, 0);
PROC_LOW_BhaalTemple_RestoreAbducteeRelationshipDialogs();
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("Done");

PROC
PROC_LOW_BhaalTemple_RestoreAbducteeRelationshipDialogs()
AND
DB_LOW_BhaalTemple_AbducteeStoredRelationshipDialogs(_Var1, _Var2, _Var3, "WORLD", _Var4, _Var5, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_BhaalTemple_AbducteeStoredRelationshipDialogs(_Var1, _Var2, _Var3, "WORLD", _Var4, _Var5);
PROC_RelationshipDialog(_Var1, _Var2, _Var3, _Var1, _Var4, _Var5);

PROC
PROC_LOW_BhaalTemple_RestoreAbducteeRelationshipDialogs()
AND
DB_LOW_BhaalTemple_AbducteeStoredRelationshipDialogs(_Var1, _Var2, _Var3, "WORLDORCAMP", _Var4, _Var5, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_BhaalTemple_AbducteeStoredRelationshipDialogs(_Var1, _Var2, _Var3, "WORLDORCAMP", _Var4, _Var5);
DB_RelationshipDialog_WRD_TriggerInCamp(_Var2, _Var3);
PROC_RelationshipDialog(_Var1, _Var2, _Var3, _Var1, _Var4, _Var5);

PROC
PROC_LOW_BhaalTemple_RestoreAbducteeRelationshipDialogs()
AND
DB_LOW_BhaalTemple_AbducteeStoredRelationshipDialogs(_Var1, _Var2, _Var3, _Var4, _Var5, _Var6, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_BhaalTemple_AbducteeStoredRelationshipDialogs(_Var1, _Var2, _Var3, _Var4, _Var5, _Var6);

PROC
PROC_LOW_BhaalTemple_OrinSpotting_Started()
THEN
PROC_SpotPlayers_RestartSpotting(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BhaalTemple_Spotting_OrinInTemple");
DB_LOW_BhaalTemple_OrinSpotting(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

IF
DB_LOW_BhaalTemple_OrinSpotting(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SpotPlayers(_Var1, "LOW_BhaalTemple_Spotting_OrinInTemple", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_SpotPlayers_IncludeWildshapedPlayers(_Var1, "LOW_BhaalTemple_Spotting_OrinInTemple");
DB_SpotPlayers_TargetIgnoreCantTalk(_Var1, "LOW_BhaalTemple_Spotting_OrinInTemple");

PROC
PROC_LOW_BhaalTemple_OrinSpotting_Stopped()
THEN
PROC_SpotPlayers_StopSpotting(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BhaalTemple_Spotting_OrinInTemple");
NOT DB_LOW_BhaalTemple_OrinSpotting(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

IF
Saw(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, (CHARACTER)_Var1, 1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_LOW_BhaalTemple_OrinSpotting(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_SpottedSneaking_e5a6fb52-171f-4c43-9eb7-a29199adbf2d);

PROC
PROC_SpotPlayers_Spotted(_, "LOW_BhaalTemple_Spotting_OrinInTemple", (CHARACTER)_Var2, (CHARACTER)_, (CHARACTER)_)
THEN
PROC_LOW_BhaalTemple_OrinSpotting_Stopped();
PROC_LOW_BhaalTemple_Orin_PreDialogSetup();
PROC_LOW_BhaalTemple_Orin_StartDialog(_Var2);

PROC
PROC_LOW_BhaalTemple_Orin_PreDialogSetup()
THEN
PROC_LOW_BhaalTemple_OrinDarkUrgeDummy_Setup();
PROC_LOW_BhaalTemple_AdmireKill_Disable();
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718);
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b);
DB_DropMutingStatussesDialog(LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718);
DB_DropMutingStatussesDialog(LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b);
DB_DropMutingStatussesDialog(LOW_BhaalTemple_PostBattle_018ab395-a061-9b69-d053-df796c294c5e);
PROC_GEN_OrinsAbduction_YennaImmortality_Remove();

PROC
PROC_LOW_BhaalTemple_Orin_StartDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, _Var2, 0, 1);
PROC_DialogAddSpeakingActor(_Var1, S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 0, 1);
DB_AddCharactersInTriggerToDialog(LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718, S_LOW_BhaalTemple_AltarArea_DialogTrigger_0a93c977-cdc9-40bf-b433-854084739104, 1);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, _Var2, 0, 1);
PROC_DialogAddSpeakingActor(_Var1, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, 0, 1);
PROC_DialogAddSpeakingActor(_Var1, S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, 0, 1);
PROC_DialogAddSpeakingActorAt(_Var1, S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4, 6);
PROC_TriggerRegisterForPlayers(S_LOW_BhaalTemple_AltarArea_DialogTrigger_0a93c977-cdc9-40bf-b433-854084739104);
DB_AddCharactersInTriggerToDialog(LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b, S_LOW_BhaalTemple_AltarArea_DialogTrigger_0a93c977-cdc9-40bf-b433-854084739104, 1);

IF
DialogEnded(LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718, _, _, _, _)
AND NOT
DB_LOW_BhaalTemple_CombatStartedPrematurely(_, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_OrinNonDuel_Start();
PROC_LOW_BhaalTemple_Abductee_WakeUp();
PROC_GEN_OrinsAbduction_YennaImmortality_Reset();
PROC_LOW_BhaalTemple_Orin_SeeInvisibility_Apply();

IF
DialogEnded(LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b, _, _, _, _)
AND NOT
DB_LOW_BhaalTemple_CombatStartedPrematurely(_, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_OrinDuel_Start();
PROC_LOW_BhaalTemple_Abductee_WakeUp();
PROC_GEN_OrinsAbduction_YennaImmortality_Reset();
PROC_LOW_BhaalTemple_Orin_SeeInvisibility_Apply();

PROC
PROC_LOW_BhaalTemple_ObservationSpot_NonCombat()
AND
DB_LOW_BhaalTemple_Denizens_ObservationPos(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_CharacterMoveTo(_Var1, _Var2, "Run", "LOW_BhaalTemple_Observe_NonCombat");

PROC
PROC_LOW_BhaalTemple_ObservationSpot_Combat()
AND
DB_LOW_BhaalTemple_Denizens_Combat_ObservationPos(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_CharacterMoveTo(_Var1, _Var2, "Run", "LOW_BhaalTemple_Observe_NonCombat");

IF
EntityEvent((CHARACTER)_Var1, "LOW_BhaalTemple_Observe_NonCombat", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
SteerTo(_Var1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0);

PROC
PROC_LOW_BhaalTemple_ArenaIndicator_Enable()
THEN
SetCanInteract(S_LOW_BhaalTemple_ArenaIndicator_64d2b4cc-d0af-4267-9e78-48d922842f71, 0);
PROC_SetOnStage(S_LOW_BhaalTemple_ArenaIndicator_64d2b4cc-d0af-4267-9e78-48d922842f71, 1);

PROC
PROC_LOW_BhaalTemple_ArenaIndicator_Disable()
THEN
PROC_SetOnStage(S_LOW_BhaalTemple_ArenaIndicator_64d2b4cc-d0af-4267-9e78-48d922842f71, 0);

PROC
PROC_LOW_BhaalTemple_Duel_Orin_Setup()
THEN
ApplyStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BHAALTEMPLE_DUEL_NOTIFICATION", -1, 1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
ApplyStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "GROUNDED", -1, 1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
ApplyStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "PERMANENTLY_HOSTILE_MANUAL", -1, 1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
TeleportTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_LOW_BhaalTemple_Duel_Orin_Pos_cc5d5884-403a-4cae-8b13-365d55f37a2e);
NOT DB_SceneManager(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BhaalTemple_CombatDenizens_Scene");

PROC
PROC_LOW_BhaalTemple_Duel_Orin_RemoveStatus()
AND
HasActiveStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BHAALTEMPLE_DUEL_NOTIFICATION", 1, _, _)
THEN
RemoveStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BHAALTEMPLE_DUEL_NOTIFICATION", S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
RemoveStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "GROUNDED", S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
RemoveStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "PERMANENTLY_HOSTILE_MANUAL", S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
SetFaction(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e);

PROC
PROC_LOW_BhaalTemple_Duel_DarkUrge_Setup()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_DialogDeath(_Var1);
DetachFromPartyGroup(_Var1);
PROC_LOW_BhaalTemple_Duel_DarkUrgeFaction_Apply();
TeleportTo(_Var1, S_LOW_BhaalTemple_Duel_DarkUrge_Pos_e56bc6fe-690b-4098-825e-a260cbf4bfef, "LOW_BHAALTEMPLE_DUEL_INPOSITION", 0, 1, 1, 0, 1);

IF
EntityEvent(_, "LOW_BHAALTEMPLE_DUEL_INPOSITION", (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_LOW_BhaalTemple_PlayerTransformIntoSlayer();

PROC
PROC_LOW_BhaalTemple_Duel_DarkUrgeFaction_Apply()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ApplyStatus(_Var1, "LOW_BHAALTEMPLE_DUEL_DARKURGE_FACTION", -1, 1, _Var1);

PROC
PROC_LOW_BhaalTemple_Duel_DarkUrgeFaction_RemoveStatus()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
HasActiveStatus(_Var1, "LOW_BHAALTEMPLE_DUEL_DARKURGE_FACTION", 1, _Var1, _Var1)
THEN
RemoveStatus(_Var1, "LOW_BHAALTEMPLE_DUEL_DARKURGE_FACTION", _Var1);

PROC
PROC_LOW_BhaalTemple_Duel_Allies_Setup()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 != _Var1
AND
QRY_LOW_BhaalTemple_Duel_GetNextPosForAlly()
AND
DB_QRYRTN_LOW_BhaalTemple_Duel_Allies_GetNextPosForAlly(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Duel_Ally_Setup(_Var2, _Var3);

PROC
PROC_LOW_BhaalTemple_Duel_Ally_Setup((CHARACTER)_Var1, (TRIGGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
ApplyStatus(_Var1, "LOW_BHAALTEMPLE_DUEL_NOTIFICATION", -1, 1, _Var1);
TeleportTo(_Var1, _Var2, "LOW_BhaalTemple_ObservePosArrived", 0, 1, 1, 0, 1);
NOT DB_LOW_BhaalTemple_Allies_DuelPos_Found(1);

PROC
PROC_LOW_BhaalTemple_Duel_Ally_RemoveStatus()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 != _Var1
AND
HasActiveStatus(_Var2, "LOW_BHAALTEMPLE_DUEL_NOTIFICATION", 1, _Var1, _Var1)
THEN
RemoveStatus(_Var2, "LOW_BHAALTEMPLE_DUEL_NOTIFICATION", _Var2);

IF
EntityEvent((CHARACTER)_Var1, "LOW_BhaalTemple_ObservePosArrived", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
SteerTo(_Var1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0);

QRY
QRY_LOW_BhaalTemple_Duel_GetNextPosForAlly()
AND
DB_QRYRTN_LOW_BhaalTemple_Duel_Allies_GetNextPosForAlly(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_QRYRTN_LOW_BhaalTemple_Duel_Allies_GetNextPosForAlly(_Var1);

QRY
QRY_LOW_BhaalTemple_Duel_GetNextPosForAlly()
AND
DB_LOW_BhaalTemple_Allies_DuelPos(_Var1, 0, _Var1, _Var1, _Var1)
AND NOT
DB_LOW_BhaalTemple_Allies_DuelPos_Found(_, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_Allies_DuelPos_Found(1);
NOT DB_LOW_BhaalTemple_Allies_DuelPos(_Var1, 0);
DB_LOW_BhaalTemple_Allies_DuelPos(_Var1, 1);
DB_QRYRTN_LOW_BhaalTemple_Duel_Allies_GetNextPosForAlly(_Var1);

PROC
PROC_LOW_BhaalTemple_Duel_Start()
THEN
PROC_LOW_BhaalTemple_Duel_Orin_Setup();
PROC_LOW_BhaalTemple_Duel_DarkUrge_Setup();
PROC_LOW_BhaalTemple_Duel_Allies_Setup();
PROC_LOW_BhaalTemple_Duel_Arena_Setup();
PROC_LOW_BhaalTemple_ObservationSpot_NonCombat();
PROC_LOW_BhaalTemple_ObservationSpot_Combat();
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b);

PROC
PROC_LOW_BhaalTemple_Duel_End()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_Duel_Orin_RemoveStatus();
PROC_LOW_BhaalTemple_Duel_DarkUrgeFaction_RemoveStatus();
PROC_LOW_BhaalTemple_Duel_Ally_RemoveStatus();
PROC_LOW_BhaalTemple_Duel_Arena_Remove();
PROC_LOW_BhaalTemple_PostBattleDarkUrge_AttachToParty();
PROC_LOW_BhaalTemple_ArenaIndicator_Disable();
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b);

PROC
PROC_LOW_BhaalTemple_Duel_Arena_Setup()
THEN
PROC_TriggerRegisterForParty(S_LOW_BhaalTemple_Duel_ArenaArea_16865414-0aea-45c8-9584-c1af399f4f9c);
PROC_LOW_BhaalTemple_ArenaIndicator_Enable();

PROC
PROC_LOW_BhaalTemple_Duel_Arena_Remove()
THEN
PROC_TriggerUnregisterForParty(S_LOW_BhaalTemple_Duel_ArenaArea_16865414-0aea-45c8-9584-c1af399f4f9c);
PROC_LOW_BhaalTemple_ArenaIndicator_Disable();

QRY
QRY_LOW_BhaalTemple_IsNotDarkUrgeOrFollower((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
AND NOT
CharacterGetOwner(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
EnteredTrigger((CHARACTER)_Var1, S_LOW_BhaalTemple_Duel_ArenaArea_16865414-0aea-45c8-9584-c1af399f4f9c, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b, _Var1, _Var1, _Var1, _Var1)
AND
QRY_LOW_BhaalTemple_IsNotDarkUrgeOrFollower(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e);

IF
LeftTrigger((CHARACTER)_Var1, S_LOW_BhaalTemple_Duel_ArenaArea_16865414-0aea-45c8-9584-c1af399f4f9c, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e);

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "LOW_BhaalTemple_CombatDenizens_Scene", (STRING)_Var3, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e, _, _, _, _)
AND
QRY_LOW_BhaalTemple_IsNotDarkUrgeOrFollower(_Var2, _, _, _, _)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b, _, _, _, _)
AND
DB_PartyMembers(_Var2, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e);

IF
UsingSpellOnTarget((CHARACTER)_Var1, (CHARACTER)_Var2, (STRING)_Var3, _, _, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_LOW_BhaalTemple_IsNotDarkUrgeOrFollower(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_Denizens_Dialogs(_Var2, _, _Var1, _Var1, _Var1)
AND
SpellHasSpellFlag(_Var3, "IsHarmful", 1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e);

IF
AttackedBy((CHARACTER)_Var1, (CHARACTER)_Var2, _, (STRING)_Var4, (INTEGER)_Var5, (STRING)_Var6, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_Denizens_Dialogs(_Var1, _, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_LOW_BhaalTemple_IsNotDarkUrgeOrFollower(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var5 != 0
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e);

IF
UsingSpellInTrigger((CHARACTER)_Var1, (STRING)_Var2, _, _, S_LOW_BhaalTemple_Duel_ArenaArea_16865414-0aea-45c8-9584-c1af399f4f9c, (INTEGER)_Var5, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_LOW_BhaalTemple_IsNotDarkUrgeOrFollower(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e);

IF
DB_GlobalFlag(LOW_BhaalTemple_Event_DuelBroken_0fff2041-7f85-4143-abf3-d16783b4c45e, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_Duel_End();
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_DeathsHead_02_AD_DarkUrgeDuel_64b28fd5-33e9-87ab-db2a-7d8dd40be23f);
PROC_TryStartAD(LOW_BhaalTemple_DeathsHead_02_AD_DarkUrgeDuel_64b28fd5-33e9-87ab-db2a-7d8dd40be23f, S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2);
PROC_LOW_BhaalTemple_Duel_TurnsHostileCultists();

IF
Dying((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_TempleCombatBegun_b3cf3252-a9af-47b1-9d06-8eae5a397235, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Is_InCombat(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2, _Var1, _Var1, _Var1)
THEN
SetFlag(TG_DarkUrge_FailedBhaal_b5a1847d-9d89-4df2-978d-dddcb4780e6b, _Var1, 0);
PauseCombat(_Var2);
DB_LOW_BhaalTemple_CombatID(_Var2);
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_MissedTempleFinale_640cb288-0b40-434a-b13c-0c871d931bcc);
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_DUDefeatedByOrin_a09d2272-853e-4d46-a7de-27c8f2f9895c);
PROC_LOW_BhaalTemple_Duel_End();
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_LINE_DarkUrgeDefeated_5b24f91c-cb36-043c-3c8b-45399248a9a5);
DB_AddCharactersInTriggerToDialog(LOW_BhaalTemple_LINE_DarkUrgeDefeated_5b24f91c-cb36-043c-3c8b-45399248a9a5, S_LOW_BhaalTemple_AltarArea_DialogTrigger_0a93c977-cdc9-40bf-b433-854084739104, 1);
PROC_LOW_BhaalTemple_DarkUrgeDefeated_StartDialog();

PROC
PROC_LOW_BhaalTemple_DarkUrgeDefeated_StartDialog()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_CombatID(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_StartDialog_Fixed(LOW_BhaalTemple_LINE_DarkUrgeDefeated_5b24f91c-cb36-043c-3c8b-45399248a9a5, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, NULL_00000000-0000-0000-0000-000000000000)
THEN
ResumeCombat(_Var2);

QRY
QRY_DialogStarted_CheckPlayerForStopConditions_IgnoreDowned((INTEGER)_Var1, (CHARACTER)_Var2, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_ORI_DarkUrge(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogName(LOW_BhaalTemple_LINE_DarkUrgeDefeated_5b24f91c-cb36-043c-3c8b-45399248a9a5, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DialogEnded(LOW_BhaalTemple_LINE_DarkUrgeDefeated_5b24f91c-cb36-043c-3c8b-45399248a9a5, _, _, _, _)
AND
DB_ORI_DarkUrge(_Var2, _, _, _, _)
AND
DB_LOW_BhaalTemple_CombatID(_Var3, _, _, _, _)
THEN
NOT DB_DialogDeath(_Var2);
ResumeCombat(_Var3);
PROC_TryStartAD(LOW_BhaalTemple_DeathsHead_02_AD_DarkUrgeDuel_64b28fd5-33e9-87ab-db2a-7d8dd40be23f, S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2);
PROC_LOW_BhaalTemple_Duel_TurnsHostileCultists();

IF
DB_GlobalFlag(ORI_DarkUrge_State_BhaalDisappointed_fb48dba0-24fd-e9ae-b6f9-4fadb9f8c4a0, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
Resurrect(_Var1);
RemoveHarmfulStatuses(_Var1);
ApplyStatus(_Var1, "DAZED", 12, 0, S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c);
ApplyStatus(_Var1, "STUNNED", 12, 0, S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c);
SetHitpoints(_Var1, 1);

PROC
PROC_LOW_BhaalTemple_OrinNonDuel_Start()
THEN
PROC_LOW_BhaalTemple_NonDuelPos_Setup();
PROC_LOW_BhaalTemple_TurnsHostileOrin();
PROC_LOW_BhaalTemple_TurnsHostileCultists();
PROC_LOW_BhaalTemple_ObservationSpot_NonCombat();
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Stop();

PROC
PROC_LOW_BhaalTemple_OrinDuel_Start()
THEN
PROC_TryStartAD(LOW_BhaalTemple_DeathsHead_02_AD_DarkUrgeDuel_64b28fd5-33e9-87ab-db2a-7d8dd40be23f, S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2);
PROC_LOW_BhaalTemple_Duel_Start();
PROC_LOW_BhaalTemple_TurnsHostileOrinDuel();
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Stop();

PROC
PROC_LOW_BhaalTemple_OrinDuel_Start()
AND
DB_GlobalFlag(ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_OrinFightAsHuman_61556db9-9a53-4098-b333-70f8565d6cc4);

PROC
PROC_LOW_BhaalTemple_NonDuelPos_Setup()
THEN
TeleportTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_LOW_BhaalTemple_NonDuel_Orin_Pos_dd0e2e0f-a5ce-4dc4-a69d-15e8fa5df336);
TeleportTo(S_LOW_BhaalTemple_NightBlade_01_7a82cf11-57a2-4796-8b3a-d3409c0cbe9e, S_LOW_BhaalTemple_NonDuel_Pos_01_7153d087-1505-4ee7-943f-3914375fcb17);
TeleportTo(S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2, S_LOW_BhaalTemple_NonDuel_Pos_02_7d5bcef0-dfa2-4a03-89d8-b04e068d3bdd);

PROC
PROC_LOW_BhaalTemple_TurnsHostileOrin()
AND
GetClosestAlivePlayer(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_TempleCombatBegun_b3cf3252-a9af-47b1-9d06-8eae5a397235);
PROC_SetRelationToPlayers(ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e, 0);
SetHostileAndEnterCombat(Hero_a1542c81-6895-929e-4522-10ce218bb360, ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e, _Var1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_LOW_BhaalTemple_OrinTransformIntoSlayer();
DB_LOW_BhaalTemple_CurrentState("DuringCombat");

PROC
PROC_LOW_BhaalTemple_TurnsHostileCultists()
AND
GetClosestAlivePlayer(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Denizens_Combat_AddToCounter();
PROC_SetRelationToPlayers(ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e, 0);
PROC_SetRelationMutual(ACT3_LOW_BhaalTemple_Cultists_Orin_cee859bf-01fe-4a21-ad1d-0c0bbc910acf, ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e, 100);
SetHostileAndEnterCombat(Hero_a1542c81-6895-929e-4522-10ce218bb360, ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e, _Var1, S_LOW_BhaalTemple_Reaper_01_72d472ba-5e32-4922-ab0b-b5a554c6dcab);
DB_LOW_BhaalTemple_CurrentState("DuringCombat");
PROC_SceneOver("LOW_BhaalTemple_CombatDenizens_Scene");

PROC
PROC_LOW_BhaalTemple_Duel_TurnsHostileCultists()
THEN
PROC_LOW_BhaalTemple_Duel_Orin_RemoveStatus();
PROC_LOW_BhaalTemple_Duel_DarkUrgeFaction_RemoveStatus();
PROC_LOW_BhaalTemple_Duel_Ally_RemoveStatus();
PROC_LOW_BhaalTemple_Denizens_Combat_AddToCounter();
PROC_SetRelationToPlayers(ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e, 0);
PROC_SetRelationMutual(ACT3_LOW_BhaalTemple_Cultists_Orin_cee859bf-01fe-4a21-ad1d-0c0bbc910acf, ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e, 100);
DB_LOW_BhaalTemple_CurrentState("DuringCombat");
PROC_SceneOver("LOW_BhaalTemple_CombatDenizens_Scene");

PROC
PROC_LOW_BhaalTemple_TurnsHostileOrinDuel()
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_TempleCombatBegun_b3cf3252-a9af-47b1-9d06-8eae5a397235);
SetFaction(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, ACT3_LOW_BhaalTemple_Cultists_Orin_cee859bf-01fe-4a21-ad1d-0c0bbc910acf);
PROC_SetRelationMutual(ACT3_LOW_BhaalTemple_Cultists_Orin_cee859bf-01fe-4a21-ad1d-0c0bbc910acf, ACT3_LOW_BhaalTemple_Duel_DarkUrge_56443c8e-d76b-49ec-bdb2-e436e2b48c36, 0);
PROC_LOW_BhaalTemple_OrinTransformIntoSlayer();
DB_LOW_BhaalTemple_CurrentState("DuringCombat");

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "LOW_BhaalTemple_CombatDenizens_Scene", (STRING)_Var3, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b, _, _, _, _)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_TempleCombatBegun_b3cf3252-a9af-47b1-9d06-8eae5a397235, _, _, _, _)
AND
QRY_GEN_OrinsAbduction_PlayerTeam(_Var2, _, _, _, _)
AND
DB_ActiveLevel("CTY_Main_A", _, _, _, _)
THEN
PROC_LOW_BhaalTemple_OrinNonDuel_StartPrematurely();

QRY
QRY_DialogAttackRequested_CustomResponse(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DialogPlayers(_Var2, _Var1, _, _Var1, _Var1)
AND
DB_DialogName(LOW_BhaalTemple_OM_OrinDarkUrge_AOM_0abe133f-0f13-4d72-0f18-e6c390d1148b, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_DialogCombat_Start(_Var1);

QRY
QRY_DialogAttackRequested_CustomResponse(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DialogPlayers(_Var2, _Var1, _, _Var1, _Var1)
AND
DB_DialogName(LOW_BhaalTemple_Orin_aeff0a89-2e7a-d237-6155-221138d17718, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_DialogCombat_Start(_Var1);

PROC
PROC_LOW_BhaalTemple_DialogCombat_Start((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_TryStopDialogFor(_Var1);
PROC_LOW_BhaalTemple_OrinNonDuel_StartPrematurely();
PROC_LOW_BhaalTemple_Abductee_WakeUp();
PROC_GEN_OrinsAbduction_YennaImmortality_Reset();

PROC
PROC_LOW_BhaalTemple_OrinNonDuel_StartPrematurely()
AND
GetClosestAlivePlayer(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_OrinTransformsBack();
DB_LOW_BhaalTemple_CombatStartedPrematurely(1);
PROC_LOW_BhaalTemple_DarkUrge_IsPresent_PreCombat();
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_TempleCombatBegun_b3cf3252-a9af-47b1-9d06-8eae5a397235);
SetHostileAndEnterCombat(Hero_a1542c81-6895-929e-4522-10ce218bb360, ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e, _Var1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
DB_LOW_BhaalTemple_CurrentState("DuringCombat");
PROC_LOW_BhaalTemple_TurnsHostileCultists();
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Stop();

IF
TurnStarted(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _, _, _, _)
AND
DB_LOW_BhaalTemple_CombatStartedPrematurely(1, _, _, _, _)
AND NOT
DB_LOW_BhaalTemple_CombatFirstTurn(_, _, _, _, _)
THEN
DB_LOW_BhaalTemple_CombatFirstTurn(1);
PROC_LOW_BhaalTemple_CombatStartedPrematurely_StartAD();

PROC
PROC_LOW_BhaalTemple_CombatStartedPrematurely_StartAD()
AND
DB_Is_InCombat(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk_IgnoreCombat(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(LOW_BhaalTemple_AD_CombatStart_22ff4636-83d2-6c7f-ffce-70c9fc03ae6a, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1)
THEN
PauseCombat(_Var1);

PROC
PROC_LOW_BhaalTemple_CombatStartedPrematurely_StartAD()
AND
DB_Is_InCombat(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
AND
DB_CantTalk_IgnoreCombat(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_OrinTransformIntoSlayer();

IF
AutomatedDialogEnded(LOW_BhaalTemple_AD_CombatStart_22ff4636-83d2-6c7f-ffce-70c9fc03ae6a, _, _, _, _)
AND
DB_LOW_BhaalTemple_CombatStartedPrematurely(1, _, _, _, _)
AND
DB_Is_InCombat(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2, _, _, _)
THEN
ResumeCombat(_Var2);
PROC_LOW_BhaalTemple_OrinTransformIntoSlayer();

IF
CastedSpell(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "Shout_LOW_LivingSacrifice_Slayer", _, _, _)
THEN
DB_LOW_BhaalTemple_Skeletons_AddToCombatCounter(1);

IF
EnteredLevel((GUIDSTRING)_Var1, Undead_Skeleton_Blood_46056850-5aa7-461b-a49e-6599b9c286f9, "CTY_Main_A", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_LOW_BhaalTemple_Skeletons_AddToCombatCounter(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GLO_DefeatCounter(_Var1, "LOW_BhaalTemple_CombatWin_Counter");

PROC
PROC_GLO_DefeatCounter_AllDefeated("LOW_BhaalTemple_CombatWin_Counter", _, _, _, _)
AND NOT
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
QRY_GetClosestAvailableCharacterTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0, 0, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, 0, 0, 1, _, _)
AND
DB_ClosestAvailableCharacterTo_PreferAvatar(_Var1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2, _, _Var1)
AND
DB_InRegion(_Var1, S_LOW_BhaalTemple_Dangerzone_1d20188e-6154-4c9c-8cbd-39134c429113, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_CurrentState("PostCombat");
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_PostBattle_018ab395-a061-9b69-d053-df796c294c5e);
DB_AddCharactersInTriggerToDialog(LOW_BhaalTemple_PostBattle_018ab395-a061-9b69-d053-df796c294c5e, S_LOW_BhaalTemple_AltarArea_DialogTrigger_0a93c977-cdc9-40bf-b433-854084739104, 1);
PROC_LOW_BhaalTemple_PostBattle_StartDialog(_Var1);
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_FacedOrinTemple_c770bc17-ffcd-400a-9316-b0d8f0202575);
PROC_LOW_BhaalTemple_OrinsRoom_ClearNPC();
NOT DB_LOW_BhaalTemple_Skeletons_AddToCombatCounter(1);

PROC
PROC_GLO_DefeatCounter_AllDefeated("LOW_BhaalTemple_CombatWin_Counter", _, _, _, _)
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_CurrentState("PostCombat");
PROC_LOW_BhaalTemple_DarkUrge_IsPresent_PostCombat();
DB_DialogDeath(_Var1);
PROC_LOW_BhaalTemple_Duel_End();
PROC_LOW_BhaalTemple_BhaalAvatar_SetupInTemple();
PROC_LOW_BhaalTemple_Butler_ResurrectInTemple();
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466);
PROC_LOW_BhaalTemple_DarkUrge_DropSlayerform();
DB_AddCharactersInTriggerToDialog(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, S_LOW_BhaalTemple_AltarArea_DialogTrigger_0a93c977-cdc9-40bf-b433-854084739104, 1);
PROC_LOW_BhaalTemple_PostBattleDarkUrge_StartDialog();
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_FacedOrinTemple_c770bc17-ffcd-400a-9316-b0d8f0202575);
NOT DB_LOW_BhaalTemple_Skeletons_AddToCombatCounter(1);

PROC
PROC_LOW_BhaalTemple_PostBattle_StartDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
QRY_StartDialog(LOW_BhaalTemple_PostBattle_018ab395-a061-9b69-d053-df796c294c5e, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_BhaalTemple_PostBattle_WaitForDialog", _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_PostBattle_WaitForDialog(_Var1);

IF
DB_LOW_BhaalTemple_PostBattle_WaitForDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_PostBattle_StartDialog(_Var1);

IF
DialogStarted(LOW_BhaalTemple_PostBattle_018ab395-a061-9b69-d053-df796c294c5e, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_LOW_BhaalTemple_PostBattle_WaitForDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_BhaalTemple_PostBattle_WaitForDialog(_Var2);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_PostBattle_018ab395-a061-9b69-d053-df796c294c5e, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_VictimAwakened_cedc10cf-2d82-496e-ad98-83ea5a7b3565, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var1, _Var2, 13);

PROC
PROC_LOW_BhaalTemple_PostBattleDarkUrge_StartDialog()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_StartDialog_Fixed(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, S_GLO_DarkUrge_Butler_f3486165-268f-4e41-9e0c-51485dfdff10, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_BhaalTemple_PostBattleDarkUrge_WaitForDialog", _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_PostBattleDarkUrge_WaitForDialog(1);

IF
DB_LOW_BhaalTemple_PostBattleDarkUrge_WaitForDialog(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(S_GLO_BhaalAvatar_2737cdb7-19b0-483c-bd35-eb1e5da5579c, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Butler_ResurrectInTemple();
PROC_LOW_BhaalTemple_PostBattleDarkUrge_StartDialog();

IF
DialogStarted(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_LOW_BhaalTemple_PostBattleDarkUrge_WaitForDialog(1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_BhaalTemple_PostBattleDarkUrge_WaitForDialog(1);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_Event_VictimAwakened_cedc10cf-2d82-496e-ad98-83ea5a7b3565, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var1, _Var2, 4);

IF
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _, _, _, _)
THEN
SetHitpointsPercentage(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0);
Unequip(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_Orin_Bhaalist_Dagger_Netherstone_7051fd5c-d777-457e-9aaf-e007b4cbbb55);
NOT DB_LOW_BhaalTemple_Skeletons_AddToCombatCounter(1);

IF
DialogEnded(LOW_BhaalTemple_PostBattle_018ab395-a061-9b69-d053-df796c294c5e, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DialogPlayers(_Var1, _Var2, 1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_GiveDagger_WithNetherstone(_Var2);

IF
DialogEnded(LOW_BhaalTemple_PostBattle_018ab395-a061-9b69-d053-df796c294c5e, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var2, _, _, _, _)
AND
_Var2 != "Yenna"
AND
DB_GlobalFlag(LOW_BhaalTemple_Event_VictimAwakened_cedc10cf-2d82-496e-ad98-83ea5a7b3565, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_AbducteeAwaken_LeavesParty();

IF
DialogEnded(LOW_BhaalTemple_PostBattle_018ab395-a061-9b69-d053-df796c294c5e, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var2, _, _, _, _)
AND
_Var2 == "Yenna"
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var3, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby();

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, _, _, _, _)
AND
DB_GlobalFlag(ORI_DarkUrge_State_BhaalDisappointed_fb48dba0-24fd-e9ae-b6f9-4fadb9f8c4a0, _, _, _, _)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DUDefeatedByOrin_a09d2272-853e-4d46-a7de-27c8f2f9895c, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_Butler_DisappointedCampNight_Enable();
PROC_LOW_BhaalTemple_Butler_SendToCampAndHide();

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, _, _, _, _)
AND
DB_ORI_DarkUrge(_Var2, _, _, _, _)
THEN
NOT DB_DialogDeath(_Var2);
PROC_LOW_BhaalTemple_PostBattleDarkUrge_AttachToParty();

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var2, _, _, _, _)
AND
_Var2 != "Yenna"
AND
DB_GlobalFlag(LOW_BhaalTemple_Event_VictimAwakened_cedc10cf-2d82-496e-ad98-83ea5a7b3565, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_AbducteeAwaken_LeavesParty();

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var2, _, _, _, _)
AND
_Var2 == "Yenna"
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var3, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby();

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_DUDefeatedByOrin_a09d2272-853e-4d46-a7de-27c8f2f9895c, _, _, _, _)
AND
DB_GlobalFlag(ORI_DarkUrge_State_BhaalResisted_74944ac3-1ea0-4eae-9653-1f1319f8646b, _, _, _, _)
AND
DB_ORI_DarkUrge(_Var2, _, _, _, _)
THEN
QuestUpdate(_Var2, "ORI_Avatar_DarkUrge", "BhaalResisted");
SetFlag(TG_DarkUrge_DefiedBhaal_885a6052-a198-4e01-b153-72e3867e4faa, _Var2, 0);
PROC_LOW_BhaalTemple_BhaalAvatar_RemoveFromTemple();
PROC_LOW_BhaalTemple_Withers_AwakensAbductee();
PROC_LOW_BhaalTemple_DarkUrge_MoveToAltar();
PROC_GLO_Jergal_Appear();
PROC_LOW_BhaalTemple_Withers_ResurrectsPlayers();
DB_AddCharactersInTriggerToDialog(LOW_BhaalTemple_PostBattleDarkUrge_Resistance_b05e4a6a-ce3b-41e5-3d4d-bc1ef68db351, S_LOW_BhaalTemple_AltarArea_DialogTrigger_0a93c977-cdc9-40bf-b433-854084739104, 1);
PROC_LOW_BhaalTemple_Denizens_PostBattleDU_Resistance_Dialog_Setup();
DB_DialogBlockTradeButton(LOW_BhaalTemple_PostBattleDarkUrge_Resistance_b05e4a6a-ce3b-41e5-3d4d-bc1ef68db351);
DB_DialogBlockAttackButton(LOW_BhaalTemple_PostBattleDarkUrge_Resistance_b05e4a6a-ce3b-41e5-3d4d-bc1ef68db351);
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_PostBattleDarkUrge_Resistance_b05e4a6a-ce3b-41e5-3d4d-bc1ef68db351);
PROC_LOW_BhaalTemple_Butler_FinalState();
PROC_LOW_BhaalTemple_DarkUrgeResisted_StartDialog();

PROC
PROC_LOW_BhaalTemple_DarkUrge_MoveToAltar()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_LOW_BhaalTemple_DarkUrge_Resistance_RevivePos_d187739c-f9ae-459d-b7c9-c01a394f7cbd);

PROC
PROC_LOW_BhaalTemple_DarkUrgeResisted_StartDialog()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_StartDialog_Fixed(LOW_BhaalTemple_PostBattleDarkUrge_Resistance_b05e4a6a-ce3b-41e5-3d4d-bc1ef68db351, S_GLO_JergalAvatar_0133f2ad-e121-4590-b5f0-a79413919805, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_PostBattleDarkUrge_Resistance_b05e4a6a-ce3b-41e5-3d4d-bc1ef68db351, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var1, _Var2, 13);

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_Resistance_b05e4a6a-ce3b-41e5-3d4d-bc1ef68db351, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_LOW_BhaalTemple_Withers_ReturnToCamp_StartTimer();

PROC
PROC_LOW_BhaalTemple_Withers_ResurrectsPlayers()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(S_GLO_JergalAvatar_0133f2ad-e121-4590-b5f0-a79413919805, _Var1);
PROC_GLO_Jergal_SetDeadPlayers();
DB_Debug_InJergalRes(1);
PROC_GLO_Jergal_PrepareAllPlayersResurrection();
NOT DB_Debug_InJergalRes(1);
PROC_GLO_Jergal_ResurrectPlayers();
TeleportTo(S_GLO_JergalAvatar_0133f2ad-e121-4590-b5f0-a79413919805, S_LOW_BhaalTemple_BhaalAvatar_TemplePos_21451bec-8274-445c-aab7-9b7d7d662590);

PROC
PROC_LOW_BhaalTemple_Withers_ResurrectsPlayers()
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
RemoveHarmfulStatuses(_Var1);

PROC
PROC_LOW_BhaalTemple_Withers_ReturnToCamp_StartTimer()
THEN
TimerLaunch("LOW_BhaalTemple_Withers_ReturnToCamp_Timer", 5000);

IF
TimerFinished("LOW_BhaalTemple_Withers_ReturnToCamp_Timer", _, _, _, _)
THEN
PROC_GLO_Jergal_MoveToCamp();

PROC
PROC_LOW_BhaalTemple_Withers_AwakensAbductee()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_WithersAwakenedVictim_985bbeec-3d2b-4e0f-9bc4-1e12410a758a);
DB_LOW_BhaalTemple_AbducteeRescuer(_Var1);
PROC_LOW_BhaalTemple_Abductee_Unlock();
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_VictimAwakened_cedc10cf-2d82-496e-ad98-83ea5a7b3565);
PROC_GEN_OrinsAbduction_Temple_KnockedOut_Remove(_Var2);
PROC_LOW_BhaalTemple_AbducteeAwaken_TeleportToPos();
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby();
DB_DialogDeath(_Var2);

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_Resistance_b05e4a6a-ce3b-41e5-3d4d-bc1ef68db351, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _, _, _, _)
THEN
NOT DB_DialogDeath(_Var2);

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_DUDefeatedByOrin_a09d2272-853e-4d46-a7de-27c8f2f9895c, _, _, _, _)
AND
DB_GlobalFlag(ORI_DarkUrge_State_BhaalAccepted_904c45e0-bb06-40ed-b5d7-4f1c851b9d86, _, _, _, _)
AND
DB_ORI_DarkUrge(_Var2, _, _, _, _)
THEN
SetFlag(TG_DarkUrge_AcceptedBhaal_3e081f26-3eb2-43c8-8c86-6200e464e8a9, _Var2, 0);
QuestUpdate(_Var2, "ORI_Avatar_DarkUrge", "BhaalWon");
PROC_LOW_BhaalTemple_BhaalAvatar_RemoveFromTemple();
PROC_LOW_BhaalTemple_DarkUrgeAcceptance_JaheiraMinscInParty();
DB_DialogBlockTradeButton(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
DB_DialogBlockAttackButton(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
DB_LOW_BhaalTemple_DarkUrgeAcceptance_PreConfrontation(1);
PROC_LOW_BhaalTemple_DarkUrgeAcceptance_PreConfrontation_SelectDialogFlow();

PROC
PROC_LOW_BhaalTemple_DarkUrgeAcceptance_PreConfrontation_SelectDialogFlow()
AND
QRY_LOW_BhaalTemple_DarkUrgeAcceptance_PreConfrontation_StartDialog()
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_DarkUrgeAcceptance_PreConfrontation_StartDialog()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(ORI_Jaheira_State_IsInParty_1b86aa78-a2db-4faa-b4a6-c5591c03bac9, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_StartDialog_Fixed(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_BhaalTemple_Acceptance_Dialog", _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_DarkUrgeAcceptance_PreConfrontation_StartDialog()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(ORI_Minsc_State_IsInParty_aeb58e60-562a-4e20-8cb2-0deb03b010fc, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_StartDialog_Fixed(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, NULL_00000000-0000-0000-0000-000000000000, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_BhaalTemple_Acceptance_Dialog", _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GlobalFlag(ORI_Minsc_State_IsInParty_aeb58e60-562a-4e20-8cb2-0deb03b010fc, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var1, S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, 4);

QRY
QRY_LOW_BhaalTemple_DarkUrgeAcceptance_PreConfrontation_StartDialog()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_StartDialog_Fixed(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, NULL_00000000-0000-0000-0000-000000000000, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_BhaalTemple_Acceptance_Dialog", _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_DUDefeatedByOrin_a09d2272-853e-4d46-a7de-27c8f2f9895c, _, _, _, _)
AND
DB_GlobalFlag(ORI_DarkUrge_State_BhaalAccepted_904c45e0-bb06-40ed-b5d7-4f1c851b9d86, _, _, _, _)
AND
DB_LOW_BhaalTemple_DarkUrgeAcceptance_PreConfrontation(1, _, _, _, _)
AND
DB_ORI_DarkUrge(_Var2, _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_GiveDagger_WithNetherstone(_Var2);
NOT DB_LOW_BhaalTemple_DarkUrgeAcceptance_PreConfrontation(1);

PROC
PROC_LOW_BhaalTemple_DarkUrgeAcceptance_JaheiraMinscInParty()
AND
DB_GlobalFlag(ORI_Jaheira_State_IsInParty_1b86aa78-a2db-4faa-b4a6-c5591c03bac9, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(ORI_Jaheira_State_SawDarkUrgeAccept_0456dcfb-f691-3368-d6c5-8935d15b5019);

PROC
PROC_LOW_BhaalTemple_DarkUrgeAcceptance_JaheiraMinscInParty()
AND
DB_GlobalFlag(ORI_Minsc_State_IsInParty_aeb58e60-562a-4e20-8cb2-0deb03b010fc, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(ORI_Minsc_State_SawDarkUrgeAccept_35a4bf9a-9efb-ef19-50e7-8ac2c251f5e5);

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, _, _, _, _)
AND
DB_GlobalFlag(ORI_Jaheira_State_IsInParty_1b86aa78-a2db-4faa-b4a6-c5591c03bac9, _, _, _, _)
AND NOT
DB_PermaDefeated(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _, _, _, _)
AND NOT
DB_LOW_BhaalTemple_JaheiraLeaves(_, _, _, _, _)
THEN
PROC_Origins_CompanionLeavePermanently(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "LOW_BhaalTemple_Confrontation_DarkUrge");
PROC_DisappearOutOfSightTo(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, S_LOW_BhaalTemple_MapMarker_Door_1fbd7ac6-c15d-4c3e-93e8-f9bff39ed7c0, "Sprint", 0, "LOW_BhaalTemple_JaheiraLeave");
DB_LOW_BhaalTemple_JaheiraLeaves(1);

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, _, _, _, _)
AND
DB_GlobalFlag(ORI_Minsc_State_IsInParty_aeb58e60-562a-4e20-8cb2-0deb03b010fc, _, _, _, _)
AND NOT
DB_PermaDefeated(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, _, _, _, _)
AND NOT
DB_LOW_BhaalTemple_MinscLeaves(_, _, _, _, _)
THEN
PROC_Origins_CompanionLeavePermanently(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, "LOW_BhaalTemple_Confrontation_DarkUrge");
PROC_DisappearOutOfSightTo(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, S_LOW_BhaalTemple_MapMarker_Door_1fbd7ac6-c15d-4c3e-93e8-f9bff39ed7c0, "Sprint", 0, "LOW_BhaalTemple_MinscLeave");
DB_LOW_BhaalTemple_MinscLeaves(1);

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, _, _, _, _)
AND NOT
DB_LOW_BhaalTemple_JaheiraLeaves(_, _, _, _, _)
AND NOT
DB_LOW_BhaalTemple_MinscLeaves(_, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_Confrontation_Setup();

IF
EntityEvent(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "LOW_BhaalTemple_JaheiraLeave", _, _, _)
AND NOT
DB_PermaDefeated(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_Confrontation_Setup();

IF
EntityEvent(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, "LOW_BhaalTemple_MinscLeave", _, _, _)
AND NOT
DB_LOW_BhaalTemple_JaheiraLeaves(1, _, _, _, _)
AND NOT
DB_PermaDefeated(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_Confrontation_Setup();

PROC
PROC_LOW_BhaalTemple_Confrontation_Init()
AND
DB_LOW_BhaalTemple_Harpers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_LOW_BhaalTemple_Confrontation_Setup()
AND NOT
DB_PermaDefeated(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _, _, _, _)
THEN
DB_DialogBlockAttackButton(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
DB_DialogBlockTradeButton(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
DB_AddCharactersInTriggerToDialog(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, S_LOW_BhaalTemple_Confrontation_SpottingArea_dd62aa17-aa35-442b-9e6b-e8d5f9d47138, 1);
PROC_LOW_BhaalTemple_Confrontation_Jaheira_Setup();
PROC_LOW_BhaalTemple_Confrontation_Minsc_Setup();
PROC_LOW_BhaalTemple_Confrontation_Harper_Setup();
PROC_LOW_BhaalTemple_Confrontation_SpottingTrigger_Setup();
PROC_LOW_BhaalTemple_Confrontation_Spotting_Setup();

PROC
PROC_LOW_BhaalTemple_Confrontation_SpottingTrigger_Setup()
AND
DB_LOW_BhaalTemple_JaheiraConfrontation(1, _, _, _, _)
THEN
PROC_TriggerRegisterForPlayers(S_LOW_BhaalTemple_Confrontation_SpottingArea_dd62aa17-aa35-442b-9e6b-e8d5f9d47138);

PROC
PROC_LOW_BhaalTemple_Confrontation_SpottingTrigger_Remove()
AND
DB_LOW_BhaalTemple_JaheiraConfrontation(1, _, _, _, _)
THEN
PROC_TriggerUnregisterForPlayers(S_LOW_BhaalTemple_Confrontation_SpottingArea_dd62aa17-aa35-442b-9e6b-e8d5f9d47138);

PROC
PROC_LOW_BhaalTemple_Confrontation_Harper_Setup()
AND
DB_LOW_BhaalTemple_JaheiraConfrontation(1, _, _, _, _)
AND
DB_LOW_BhaalTemple_Harpers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 1);
DB_SceneManager(_Var1, "LOW_BhaalTemple_Confrontation_Scene");
DB_GLO_DefeatCounter(_Var1, "LOW_BhaalTemple_Confrontation_CombatWin_Counter");
SetCombatGroupID(_Var1, "LOW_BhaalTemple_Confrontation_Harpers");

IF
WentOnStage((CHARACTER)_Var1, 1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_LOW_BhaalTemple_Harpers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
HasSpell(_Var1, "Target_ConjureWoodlandBeings", 1, _Var1, _Var1)
AND
GetPosition(_Var1, _Var2, _Var3, _Var4, _Var1)
AND
FindValidPosition(_Var2, _Var3, _Var4, 6, _Var1, 1, _Var5, _Var6, _Var7, _Var1)
THEN
UseSpellAtPosition(_Var1, "Target_ConjureWoodlandBeings", _Var5, _Var6, _Var7);

IF
WentOnStage((CHARACTER)_Var1, 1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_LOW_BhaalTemple_Harpers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
HasSpell(_Var1, "Target_RangersCompanion_Wolf", 1, _Var1, _Var1)
AND
GetPosition(_Var1, _Var2, _Var3, _Var4, _Var1)
AND
FindValidPosition(_Var2, _Var3, _Var4, 6, _Var1, 1, _Var5, _Var6, _Var7, _Var1)
THEN
UseSpellAtPosition(_Var1, "Target_RangersCompanion_Wolf", _Var5, _Var6, _Var7);

PROC
PROC_LOW_BhaalTemple_Confrontation_Jaheira_Setup()
AND
QRY_LOW_BhaalTemple_Confrontation_CheckJaheiraJoin()
THEN
TeleportTo(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, S_LOW_BhaalTemple_Confrontation_Jaheira_Pos_5729d3ef-e25e-484a-af72-8b41706b5ca6, "", 0, 0, 0, 0, 0);
PROC_SetOnStage(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, 1);
DB_SceneManager(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "LOW_BhaalTemple_Confrontation_Scene");
DB_GLO_DefeatCounter(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "LOW_BhaalTemple_Confrontation_CombatWin_Counter");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_BhaalAccepted_Confrontation_Enabled_103a9b67-e2bb-4823-8262-e0d97aaca769);
DB_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_BhaalAccepted_Confrontation_StartCombat_05b66d87-1271-48a5-92bc-b226aedb79a6, LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
DB_LOW_BhaalTemple_JaheiraConfrontation(1);

IF
DB_LOW_BhaalTemple_JaheiraConfrontation(1, _, _, _, _)
THEN
DB_Origins_BlockTransferReasons("LOW_BhaalTemple_Confrontation_DarkUrge");
PROC_Origins_CompanionLeavePermanently(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "LOW_BhaalTemple_Confrontation_DarkUrge");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_BhaalAccepted_Confrontation_JaheiraPresent_33f7a59c-37c6-426e-a76e-fa44178eff11);
SetFaction(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, ACT3_LOW_BhaalTemple_Harpers_3819e5ff-4733-49e7-94e1-eb8e4dd073ab);
SetLevel(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, 12);
ApplyStatus(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "FREEDOM_OF_MOVEMENT", -1, 1, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a);
ApplyStatus(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "MIRROR_IMAGE_3", -1, 1, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a);
ApplyStatus(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "MIRROR_IMAGE_2", -1, 1, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a);
ApplyStatus(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "MIRROR_IMAGE_1", -1, 1, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a);
SetCombatGroupID(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "LOW_BhaalTemple_Confrontation_Harpers");

QRY
QRY_LOW_BhaalTemple_Confrontation_CheckJaheiraJoin()
AND NOT
DB_PermaDefeated(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _, _, _, _)
AND
DB_LOW_BhaalTemple_JaheiraLeaves(1, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_Confrontation_CheckJaheiraJoin()
AND NOT
DB_PermaDefeated(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _, _, _, _)
AND
DB_GlobalFlag(GLO_Origin_PartOfTheTeam_Jaheira_d7d29efe-70bb-47c2-9db3-bc8a10347bc6, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_Confrontation_Minsc_Setup()
AND
DB_LOW_BhaalTemple_JaheiraConfrontation(1, _, _, _, _)
AND
QRY_LOW_BhaalTemple_Confrontation_CheckMinscJoin()
THEN
TeleportTo(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, S_LOW_BhaalTemple_Confrontation_Minsc_Pos_63e1dcf1-273b-4fd4-ba9d-8b56a02bfcda, "", 0, 0, 0, 0, 0);
PROC_SetOnStage(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, 1);
DB_SceneManager(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, "LOW_BhaalTemple_Confrontation_Scene");
DB_GLO_DefeatCounter(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, "LOW_BhaalTemple_Confrontation_CombatWin_Counter");
DB_GLO_DieFlag(LOW_BhaalTemple_Event_Confrontation_MinscKillsJaheira_f1e861f2-9cf7-45b9-9497-c435e66c40a6, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, 0, S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba);
DB_LOW_BhaalTemple_MinscConfrontation(1);

IF
DB_LOW_BhaalTemple_MinscConfrontation(1, _, _, _, _)
THEN
DB_Origins_BlockTransferReasons("LOW_BhaalTemple_Confrontation_DarkUrge");
PROC_Origins_CompanionLeavePermanently(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, "LOW_BhaalTemple_Confrontation_DarkUrge");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_BhaalAccepted_Confrontation_MinscPresent_8b77181d-8340-4b11-93b7-c3e54e52b4ab);
SetFaction(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, ACT3_LOW_BhaalTemple_Harpers_3819e5ff-4733-49e7-94e1-eb8e4dd073ab);
SetCombatGroupID(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, "LOW_BhaalTemple_Confrontation_Harpers");
TemplateAddTo(CONS_Potion_Speed_ad9f3f24-d755-48b6-aa7b-c34da068209f, S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, 1, 0);

QRY
QRY_LOW_BhaalTemple_Confrontation_CheckMinscJoin()
AND NOT
DB_PermaDefeated(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, _, _, _, _)
AND
DB_LOW_BhaalTemple_MinscLeaves(1, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_Confrontation_CheckMinscJoin()
AND NOT
DB_PermaDefeated(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, _, _, _, _)
AND
DB_GlobalFlag(GLO_Origin_PartOfTheTeam_Minsc_3510cd49-7ff6-475c-829b-d4d68a07b085, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_Confrontation_CheckMinscJoin()
AND NOT
DB_PermaDefeated(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, _, _, _, _)
AND
DB_GlobalFlag(ORI_Minsc_State_SavedFromAbsolute_62e1d5ec-7c7e-70c2-68de-cadc7c7f5f20, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_Confrontation_Spotting_Setup()
AND
DB_LOW_BhaalTemple_Harpers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SpotPlayers(_Var1, "LOW_BhaalTemple_ConfrontationSpotting", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_SpotPlayers_IncludeWildshapedPlayers(_Var1, "LOW_BhaalTemple_ConfrontationSpotting");

PROC
PROC_LOW_BhaalTemple_Confrontation_Spotting_Setup()
AND
DB_LOW_BhaalTemple_JaheiraConfrontation(1, _, _, _, _)
THEN
DB_SpotPlayers(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "LOW_BhaalTemple_ConfrontationSpotting", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_SpotPlayers_IncludeWildshapedPlayers(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "LOW_BhaalTemple_ConfrontationSpotting");

PROC
PROC_LOW_BhaalTemple_Confrontation_Spotting_Setup()
AND
DB_LOW_BhaalTemple_MinscConfrontation(1, _, _, _, _)
THEN
DB_SpotPlayers(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, "LOW_BhaalTemple_ConfrontationSpotting", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_SpotPlayers_IncludeWildshapedPlayers(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, "LOW_BhaalTemple_ConfrontationSpotting");

PROC
PROC_LOW_BhaalTemple_Confrontation_Spotting_Remove()
THEN
PROC_LOW_BhaalTemple_Confrontation_SpottingTrigger_Remove();
PROC_LOW_BhaalTemple_Confrontation_Spotting_Harper_Remove();
NOT DB_SpotPlayers(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, "LOW_BhaalTemple_ConfrontationSpotting", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
NOT DB_SpotPlayers(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, "LOW_BhaalTemple_ConfrontationSpotting", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_LOW_BhaalTemple_Confrontation_Spotting_Harper_Remove()
AND
DB_LOW_BhaalTemple_Harpers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_SpotPlayers(_Var1, "LOW_BhaalTemple_ConfrontationSpotting", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_SpotPlayers_Spotted(_, "LOW_BhaalTemple_ConfrontationSpotting", (CHARACTER)_Var2, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
DB_PermaDefeated(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _, _, _, _)
AND
QRY_OnlyOnce("LOW_BhaalTemple_ConfrontationSpotting", _, _, _, _)
THEN
PROC_LOW_BhaalTemple_Confrontation_Spotting_Remove();
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_BhaalAccepted_Confrontation_WithoutJaheira_ad77de2a-eac2-4e3d-a2b1-df6f56c8a580);
DB_DropMutingStatussesDialog(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
PROC_LOW_BhaalTemple_Confrontation_StartDialogCaptain(_Var2);

PROC
PROC_SpotPlayers_Spotted(_, "LOW_BhaalTemple_ConfrontationSpotting", (CHARACTER)_Var2, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
DB_ORI_DarkUrge(_Var3, _, _, _, _)
AND
DB_InRegion(_Var3, S_LOW_BhaalTemple_Confrontation_SpottingArea_dd62aa17-aa35-442b-9e6b-e8d5f9d47138, _, _, _)
AND
QRY_OnlyOnce("LOW_BhaalTemple_ConfrontationSpotting", _, _, _, _)
THEN
PROC_LOW_BhaalTemple_Confrontation_Spotting_Remove();
DB_DropMutingStatussesDialog(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
PROC_LOW_BhaalTemple_Confrontation_StartDialogDU(_Var3);

PROC
PROC_SpotPlayers_Spotted((CHARACTER)_Var1, "LOW_BhaalTemple_ConfrontationSpotting", (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_DarkUrge(_Var3, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_InRegion(_Var3, S_LOW_BhaalTemple_Confrontation_SpottingArea_dd62aa17-aa35-442b-9e6b-e8d5f9d47138, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_BhaalTemple_ConfrontationSpotting", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Confrontation_Spotting_Remove();
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Event_Confrontation_NotDarkUrge_b48d71c0-8b2e-49b0-b686-02eb7e0e30e5);
DB_DropMutingStatussesDialog(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741);
PROC_LOW_BhaalTemple_Confrontation_StartDialogNonDU(_Var2);

PROC
PROC_LOW_BhaalTemple_Confrontation_StartDialogDU((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog_Fixed(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_Confrontation_StartDialogDU((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 != _Var1
AND
QRY_StartDialog_Fixed(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _Var2, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_Confrontation_StartDialogNonDU((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_StartDialog(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_Confrontation_StartDialogCaptain((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_StartDialog(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, NULL_00000000-0000-0000-0000-000000000000, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_BhaalAccepted_Confrontation_Enabled_103a9b67-e2bb-4823-8262-e0d97aaca769, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_MinscConfrontation(1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var1, S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, 4);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_PostBattleDarkUrge_Acceptance_dd5794c1-8fd4-d91a-6899-edd9b3bef741, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_BhaalAccepted_Confrontation_WithoutJaheira_ad77de2a-eac2-4e3d-a2b1-df6f56c8a580, _Var1, _Var1, _Var1, _Var1)
AND
DB_PermaDefeated(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var1, S_LOW_BhaalTemple_HarperCaptain_8600e330-fa15-471e-ab67-958f0543ee9f, 12);

PROC
PROC_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_Confrontation_Leaving_Wyll_e282515e-5415-4134-adbe-c70839deafb3, _, (INTEGER)_Var2, _, _)
AND NOT
DB_Avatars(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, _, _, _, _)
THEN
DB_Origins_BlockTransferReasons("LOW_BhaalTemple_Confrontation_DarkUrge");
PROC_Origins_CompanionLeavePermanently(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, "LOW_BhaalTemple_Confrontation_DarkUrge");
SetFaction(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, ACT3_LOW_BhaalTemple_Harpers_3819e5ff-4733-49e7-94e1-eb8e4dd073ab);
SetCombatGroupID(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, "LOW_BhaalTemple_Confrontation_Harpers");

PROC
PROC_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_Confrontation_Leaving_Gale_20844e0e-fb68-4050-a947-cebf996b262b, _, (INTEGER)_Var2, _, _)
AND NOT
DB_Avatars(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, _, _, _, _)
THEN
DB_Origins_BlockTransferReasons("LOW_BhaalTemple_Confrontation_DarkUrge");
PROC_Origins_CompanionLeavePermanently(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, "LOW_BhaalTemple_Confrontation_DarkUrge");
SetFaction(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, ACT3_LOW_BhaalTemple_Harpers_3819e5ff-4733-49e7-94e1-eb8e4dd073ab);
SetCombatGroupID(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, "LOW_BhaalTemple_Confrontation_Harpers");

PROC
PROC_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_Confrontation_Leaving_Karlach_f93d0bd8-5f3e-40c0-8174-88610dd8208d, _, (INTEGER)_Var2, _, _)
AND NOT
DB_Avatars(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _, _, _)
THEN
DB_Origins_BlockTransferReasons("LOW_BhaalTemple_Confrontation_DarkUrge");
PROC_Origins_CompanionLeavePermanently(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, "LOW_BhaalTemple_Confrontation_DarkUrge");
SetFaction(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, ACT3_LOW_BhaalTemple_Harpers_3819e5ff-4733-49e7-94e1-eb8e4dd073ab);
SetCombatGroupID(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, "LOW_BhaalTemple_Confrontation_Harpers");

PROC
PROC_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_BhaalAccepted_Confrontation_StartCombat_05b66d87-1271-48a5-92bc-b226aedb79a6, _, (INTEGER)_Var2, _, _)
AND
DB_DialogPlayers(_Var2, _Var3, 1, _, _)
THEN
PROC_SceneOver("LOW_BhaalTemple_Confrontation_Scene");
PROC_LOW_BhaalTemple_Confrontation_Allies_Setup();
PROC_TryStopDialogFor(_Var3);
PROC_LOW_BhaalTemple_Confrontation_StartCombat(_Var3);

PROC
PROC_LOW_BhaalTemple_Confrontation_StartCombat((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
SetHostileAndEnterCombat(Hero_a1542c81-6895-929e-4522-10ce218bb360, ACT3_LOW_BhaalTemple_Harpers_3819e5ff-4733-49e7-94e1-eb8e4dd073ab, _Var1, S_LOW_BhaalTemple_HarperCaptain_8600e330-fa15-471e-ab67-958f0543ee9f);

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "LOW_BhaalTemple_Confrontation_Scene", (STRING)_Var3, _)
AND NOT
DB_LOW_BhaalTemple_Confrontation_MinscKillsJaheira(1, _, _, _, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
THEN
PROC_SceneOver("LOW_BhaalTemple_Confrontation_Scene");
PROC_LOW_BhaalTemple_Confrontation_Spotting_Remove();
PROC_LOW_BhaalTemple_Confrontation_Allies_Setup();
PROC_TryStopDialogFor(_Var2);
PROC_LOW_BhaalTemple_Confrontation_StartCombat(_Var2);

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "LOW_BhaalTemple_Confrontation_Scene", (STRING)_Var3, _)
AND
DB_LOW_BhaalTemple_Confrontation_MinscKillsJaheira(1, _, _, _, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
THEN
NOT DB_LOW_BhaalTemple_Confrontation_MinscKillsJaheira(1);

PROC
PROC_LOW_BhaalTemple_Confrontation_Allies_Setup()
AND
DB_LOW_BhaalTemple_Denizens_Reinforcements(_, _Var2, _, _, _)
AND NOT
DB_PermaDefeated(_Var2, _, _, _, _)
THEN
SetFaction(_Var2, ACT3_LOW_BhaalTemple_Cultists_AcceptanceAllies_f72b2677-b706-4341-85be-f111cbdf02ee);
PROC_SetRelationToPlayers(ACT3_LOW_BhaalTemple_Cultists_AcceptanceAllies_f72b2677-b706-4341-85be-f111cbdf02ee, 100);
PROC_AppearOutOfSightTo(_Var2, S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, "LOW_BhaalTemple_AcceptanceAllies_AppearedOutOfSight");

IF
EntityEvent((CHARACTER)_Var1, "LOW_BhaalTemple_AcceptanceAllies_AppearedOutOfSight", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_LOW_BhaalTemple_Denizens_Reinforcements(_, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_DarkUrge(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CharacterMoveTo(_Var1, _Var3, "Run", "LOW_BhaalTemple_AcceptanceAllies");
PROC_SetRelationMutual(ACT3_LOW_BhaalTemple_Cultists_AcceptanceAllies_f72b2677-b706-4341-85be-f111cbdf02ee, ACT3_LOW_BhaalTemple_Harpers_3819e5ff-4733-49e7-94e1-eb8e4dd073ab, 0);

IF
EntityEvent((CHARACTER)_Var1, "LOW_BhaalTemple_AcceptanceAllies", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_LOW_BhaalTemple_Denizens_Reinforcements(_, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_BhaalTemple_AcceptanceAllies", _Var1, _Var1, _Var1, _Var1)
THEN
SetHostileAndEnterCombat(ACT3_LOW_BhaalTemple_Cultists_AcceptanceAllies_f72b2677-b706-4341-85be-f111cbdf02ee, ACT3_LOW_BhaalTemple_Harpers_3819e5ff-4733-49e7-94e1-eb8e4dd073ab, _Var1, S_LOW_BhaalTemple_HarperCaptain_8600e330-fa15-471e-ab67-958f0543ee9f);

IF
TurnStarted(S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2, _, _, _, _)
AND
DB_GlobalFlag(LOW_BhaalTemple_BhaalAccepted_Confrontation_Enabled_103a9b67-e2bb-4823-8262-e0d97aaca769, _, _, _, _)
AND NOT
DB_LOW_BhaalTemple_AcceptanceAllies_CombatFirstTurn(_, _, _, _, _)
THEN
DB_LOW_BhaalTemple_AcceptanceAllies_CombatFirstTurn(1);
PROC_TryStartAD(LOW_BhaalTemple_DeathsHead_02_AD_DarkUrgeDuel_64b28fd5-33e9-87ab-db2a-7d8dd40be23f, S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2);

PROC
PROC_GLO_DefeatCounter_AllDefeated("LOW_BhaalTemple_Confrontation_CombatWin_Counter", _, _, _, _)
AND
DB_LOW_BhaalTemple_Denizens_Reinforcements(_, _Var2, _, _, _)
AND NOT
DB_PermaDefeated(_Var2, _, _, _, _)
AND
DB_LOW_BhaalTemple_Denizens_Dialogs(_Var2, _Var3, _, _, _)
THEN
PROC_ClearStoryMove(_Var2);

IF
FlagSet(LOW_BhaalTemple_Event_Confrontation_MinscKillsJaheira_f1e861f2-9cf7-45b9-9497-c435e66c40a6, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_MinscKilledJaheira_fe1c4255-b8ba-4b0b-88e8-93177aed26f6);
DB_LOW_BhaalTemple_Confrontation_MinscKillsJaheira(1);

PROC
PROC_LOW_BhaalTemple_InWorldAbductionTriggers_Init()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InWorldAbductionEnabled_efddef72-84c2-4a44-b5a4-5d82ce887010, _, _, _, _)
AND
DB_LOW_BhaalTemple_AbductionAreas(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_TriggerRegisterForPlayers(_Var1);

PROC
PROC_LOW_BhaalTemple_InWorldAbductionTriggers_Remove()
AND
DB_LOW_BhaalTemple_AbductionAreas(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_TriggerUnregisterForPlayers(_Var1);

IF
EnteredTrigger((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InWorldAbductionEnabled_efddef72-84c2-4a44-b5a4-5d82ce887010, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_LOW_BhaalTemple_ChosenInWorldAbductionPos(_, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_AbductionAreas(_Var2, _Var4, _Var1, _Var1, _Var1)
AND NOT
QRY_LOW_BhaalTemple_CheckGuildHallDuringCoup(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_LOW_BhaalTemple_AbductionPossibleArea(_Var1, _Var2, _Var4);
PROC_LOW_BhaalTemple_CheckIfAbductionCanOccur();

IF
LeftTrigger((CHARACTER)_Var1, (TRIGGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InWorldAbductionEnabled_efddef72-84c2-4a44-b5a4-5d82ce887010, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_AbductionAreas(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_BhaalTemple_AbductionPossibleArea(_Var1, _Var2, _Var3);

QRY
QRY_LOW_BhaalTemple_CheckGuildHallDuringCoup(S_LOW_BhaalTemple_AbductionArea_01_4ac47f4d-e8e3-43f6-915b-817e7332dd09, _, _, _, _)
AND
DB_GlobalFlag(LOW_Guildhall_State_DuringCoup_6dba56a5-8220-41f4-8849-085e38b80d4e, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_InWorldAbductions_Disable()
THEN
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_InWorldAbductionEnabled_efddef72-84c2-4a44-b5a4-5d82ce887010);
PROC_LOW_BhaalTemple_InWorldAbductionTriggers_Remove();

PROC
PROC_LOW_BhaalTemple_CheckIfAbductionCanOccur()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InWorldAbductionEnabled_efddef72-84c2-4a44-b5a4-5d82ce887010, _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_ClearDB_ChosenName();
PROC_LOW_BhaalTemple_InWorldAbduction_FindBest();
PROC_GEN_OrinsAbduction_ClearDB_ChosenChar();
PROC_LOW_BhaalTemple_InWorldAbduction_SetupBest();
PROC_LOW_BhaalTemple_InWorldAbduction_SetupOrin();
PROC_LOW_BhaalTemple_InWorldAbduction_AbductCompanion();

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_FindBest()
AND
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList(_Var1, _Var2, _, _Var1, _Var1)
AND NOT
DB_GEN_OrinsAbduction_ChosenName(_, _Var1, _Var1, _Var1, _Var1)
AND
QRY_LOW_BhaalTemple_InWorldAbduction_CheckBasicReq(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GEN_OrinsAbduction_CheckValidFriend()
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_InWorldAbduction_CheckRomance((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
_Var1 != "Minthara"
AND
DB_GEN_OrinsAbduction_PartneredList(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(_Var2, _Var3, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_InWorldAbduction_CheckRomance("Minthara", _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_FindBest()
AND
QRY_LOW_BhaalTemple_InWorldAbduction_CheckValidFriend()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_LOW_BhaalTemple_InWorldAbduction_CheckValidFriend()
AND
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList(_Var1, _Var2, _, _Var1, _Var1)
AND NOT
DB_GEN_OrinsAbduction_ChosenName(_, _Var1, _Var1, _Var1, _Var1)
AND
QRY_LOW_BhaalTemple_InWorldAbduction_CheckFriendConditions(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_ChosenName(_Var1);

QRY
QRY_LOW_BhaalTemple_InWorldAbduction_CheckFriendConditions((STRING)_Var1, (CHARACTER)_Var2, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
QRY_LOW_BhaalTemple_InWorldAbduction_CheckBasicReq(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_LOW_BhaalTemple_InWorldAbduction_CheckRomance(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship();
DB_GEN_OrinsAbduction_ChosenCharRelationship(LOW_BhaalTemple_State_AbducteeIsFriend_dd552cb0-4429-4bc9-849c-85fb611124bd);

QRY
QRY_LOW_BhaalTemple_InWorldAbduction_CheckFriendConditions("Yenna", _, (CHARACTER)_, (CHARACTER)_, (CHARACTER)_)
THEN
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship();
DB_GEN_OrinsAbduction_ChosenCharRelationship(LOW_BhaalTemple_State_AbducteeIsYenna_fa8d1e59-26d5-4ad6-9706-1cb15a5cdb0a);

QRY
QRY_LOW_BhaalTemple_InWorldAbduction_CheckBasicReq((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_InCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_SetupBest()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_AbducteeFlagList(_Var1, _Var4, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_AbducteeGender(_Var1, _Var5, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_ChosenChar(_Var2);
DB_GEN_OrinsAbduction_ChosenCharFlag(_Var4);
PROC_GlobalSetFlagAndCache(_Var4);
PROC_GlobalSetFlagAndCache(_Var5);
PROC_LOW_BhaalTemple_ClearDB_ChosenInWorldAbductionPos();
PROC_LOW_BhaalTemple_InWorldAbduction_SetupPos();

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_SetupPos()
AND
DB_GEN_OrinsAbduction_ChosenName(_, _, _, _, _)
AND
DB_LOW_BhaalTemple_AbductionPossibleArea(_, _Var3, _Var4, _, _)
THEN
DB_LOW_BhaalTemple_ChosenInWorldAbductionArea(_Var3);
DB_LOW_BhaalTemple_ChosenInWorldAbductionPos(_Var4);

IF
DB_LOW_BhaalTemple_ChosenInWorldAbductionPos(S_LOW_BhaalTemple_AbductionPos_02_86d6cb8f-5de1-4518-93e7-80e6515330e7, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_InWorldAbduction_UnlockDoor();

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_UnlockDoor()
AND
IsDestroyed(DOOR_Double_Slim_City_House_B_013_ed6c6209-e2eb-4124-a48d-a78de97970b3, 0, _, _, _)
AND
IsLocked(DOOR_Double_Slim_City_House_B_013_ed6c6209-e2eb-4124-a48d-a78de97970b3, 1, _, _, _)
THEN
PROC_ItemUnlockAndOpen(DOOR_Double_Slim_City_House_B_013_ed6c6209-e2eb-4124-a48d-a78de97970b3);

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_SetupOrin()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_ChosenInWorldAbductionPos(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_OrinTransformRule_Common(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_OrinSpotting_Stopped();
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_Event_TransformToOrin_9280b884-9f8e-41f4-bd49-dbfcb2827fe5);
DB_PreventPermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
TeleportTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var3, "GEN_OrinsAbduction_OrinTeleported", 0, 0, 0, 0, 0);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2);
DB_GEN_OrinsAbduction_IsTransformed(1);
Transform(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2, _Var4);
CopyCharacterEquipment(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2);
PROC_GEN_OrinsAbduction_BloodiedChar_Apply(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_LOW_BhaalTemple_InWorldAbduction_OrinRunsToPlayers(_Var1);
PROC_LOW_BhaalTemple_InWorldAbduction_WaitForPlayersFallback();
DB_SceneManager(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "GEN_OrinsAbduction_Scene");

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_OrinRunsToPlayers((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
GetClosestPlayer(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2, _Var3, _Var1, _Var1)
AND
_Var3 < 30
AND
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList(_Var1, _, _Var5, _Var1, _Var1)
THEN
PROC_CharacterMoveToAndTalk(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2, _Var5, "LOW_BhaalTemple_InWorldAbduction", "Run", 15);

PROC
PROC_StartDialog_AddExtraSpeakers((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList(_Var3, _, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_ChosenInWorldAbductionArea(_Var5, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var2, S_LOW_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec, 3);
DB_AddCharactersInTriggerToDialog(_Var1, _Var5, 1);

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_WaitForPlayersFallback()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList(_Var1, _, _Var3, _Var1, _Var1)
THEN
DB_DialogBlockAttackButton(_Var3);
DB_DialogBlockTradeButton(_Var3);
DB_Dialogs(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var3);

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_AbductCompanion()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenCharRelationship(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_RemoveDefaultVictim();
PROC_GEN_OrinsAbduction_SetupVictimInTemple(_Var1, _Var3);
PROC_GlobalSetFlagAndCache(GLO_OrinsAbduction_State_AbductionOccured_98dda46d-871c-4807-aced-5dc3ff5f4c2d);
DB_GEN_OrinsAbduction_AbductionPlace("InWorld");

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_AbductCompanion()
AND
DB_GEN_OrinsAbduction_ChosenName("Yenna", _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_Yenna_Killcat();
NOT DB_YennaDismissedFromCamp(1);

IF
DialogEnded((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_InWorldAbduction_AbducteeList(_Var3, _, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_ChosenInWorldAbductionArea(_Var5, _Var1, _Var1, _Var1, _Var1)
THEN
DB_AddCharactersInTriggerToDialog(LOW_BhaalTemple_InWorldAbduction_Nested_a1504daf-2fb7-7cc7-9165-b749c2bcd115, _Var5, 1);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_Event_TransformToGortash_aca677a0-c532-44df-ac77-3156f0c06925);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_Event_TransformToOrin_9280b884-9f8e-41f4-bd49-dbfcb2827fe5);
PROC_GEN_OrinsAbduction_SetupOrinGortash();
DB_DialogBlockAttackButton(LOW_BhaalTemple_InWorldAbduction_Nested_a1504daf-2fb7-7cc7-9165-b749c2bcd115);
PROC_GEN_OrinsAbduction_NestedDialog_Start(_Var2);

IF
DialogEnded(LOW_BhaalTemple_InWorldAbduction_Nested_a1504daf-2fb7-7cc7-9165-b749c2bcd115, _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _, _, _, _)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InWorld", _, _, _, _)
THEN
PROC_LOW_BhaalTemple_InWorldAbduction_Completed();

PROC
PROC_LOW_BhaalTemple_InWorldAbduction_Completed()
THEN
PROC_GEN_OrinsAbduction_CompanionLeaves();
NOT DB_GEN_OrinsAbduction_AbductionPlace("InWorld");
PROC_SceneOver("GEN_OrinsAbduction_Scene");
PROC_GEN_OrinsAbduction_DisableAllImpersonations();
PROC_GEN_OrinsAbduction_OrinTeleportOut();
PROC_GEN_OrinsMessages_Setup();

PROC
PROC_LOW_BhaalTemple_OrinsRoom_ClearNPC()
THEN
PROC_DieImmediate(S_LOW_BhaalTemple_DeathsHead_01_dc5d659c-8703-4e41-bf3e-0eeae60d919b, 0, 1);
PROC_DieImmediate(S_LOW_BhaalTemple_DeathsHead_03_1f0a7364-4893-4066-b188-907a51a75bd8, 0, 1);
PROC_DieImmediate(S_LOW_BhaalTemple_DeathsHead_04_db8e11fc-5f93-4dae-9abb-a8223317fa29, 0, 1);

IF
DB_GlobalFlag(LOW_BhaalTemple_State_KilledVictim_ba91f332-45d5-483c-b460-dfec2e6d87e9, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
Die(_Var1, 0, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0, 1);
PROC_GEN_OrinsAbduction_Altar_PlayEffect_Bloodied();

IF
CharacterLootedCharacter((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_KilledVictim_ba91f332-45d5-483c-b460-dfec2e6d87e9, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("GEN_OrinsAbduction_AbducteeDeadBody", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(LOW_BhaalTemple_PostBattle_PAD_AbducteeKilled_e009fffc-1479-6522-f2db-4106ddd3ba4a, _Var1);

PROC
PROC_LOW_BhaalTemple_PostBattleDarkUrge_AttachToParty()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
AttachToPartyGroup(_Var2, _Var1);

PROC
PROC_LOW_BhaalTemple_PlayerTransformIntoSlayer()
AND
DB_GlobalFlag(LOW_BhaalTemple_Event_PlayerTurnsIntoSlayerInDialog_4915ebb2-6d2c-41d0-baa0-b57d6a6df67f, _, _, _, _)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
HasSpell(_Var1, "Shout_DarkUrge_Slayer", 1, _Var1, _Var1)
AND
HasActiveStatus(_Var1, "SLAYER_PLAYER", 0, _Var1, _Var1)
AND
HasActiveStatus(_Var1, "SLAYER_PLAYER_10", 0, _Var1, _Var1)
THEN
SetFlag(ORI_DarkUrge_State_SlayerForm_88b450d5-3815-4f5d-0c6f-0de221513d64, _Var1, 1);

PROC
PROC_LOW_BhaalTemple_DarkUrge_DropSlayerform()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
HasActiveStatus(_Var1, "SLAYER_PLAYER", 1, _Var1, _Var1)
THEN
ClearFlag(ORI_DarkUrge_State_SlayerForm_88b450d5-3815-4f5d-0c6f-0de221513d64, _Var1, 1);

PROC
PROC_LOW_BhaalTemple_DarkUrge_DropSlayerform()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
HasActiveStatus(_Var1, "SLAYER_PLAYER_10", 1, _Var1, _Var1)
THEN
ClearFlag(ORI_DarkUrge_State_SlayerForm_88b450d5-3815-4f5d-0c6f-0de221513d64, _Var1, 1);

PROC
PROC_LOW_BhaalTemple_OrinTransformIntoSlayer()
AND NOT
DB_GlobalFlag(ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinForcedSlayer_af3603a6-7114-4752-aa91-6c2a269d8c58, _, _, _, _)
THEN
ApplyStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BHAALTEMPLE_ORINSLAYER", -1, 1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

PROC
PROC_LOW_BhaalTemple_OrinTransformIntoSlayer()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_OrinForcedSlayer_af3603a6-7114-4752-aa91-6c2a269d8c58, _, _, _, _)
THEN
ApplyStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BHAALTEMPLE_ORINSLAYER", -1, 1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
ApplyStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BHAALTEMPLE_ORINSLAYER_ENRAGE", -1, 1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

IF
Deactivated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _, _, _, _)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InWorld", _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_InWorldAbduction_Completed();

PROC
PROC_LOW_BhaalTemple_OrinDarkUrgeDummy_Setup()
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_OrinTransformRule_DarkUrge(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
Transform(S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4, _Var1, _Var2);
CopyCharacterEquipment(S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4, _Var1);

PROC
PROC_GlobalFlagReactionAfterDialog(LOW_BhaalTemple_Event_TransformToSlayer_25508b93-831f-449b-92ef-d3baa32ae964, _, (INTEGER)_Var2, (DIALOGRESOURCE)_, (DIALOGRESOURCE)_)
THEN
PROC_LOW_BhaalTemple_OrinTransformIntoSlayer();

IF
DB_GlobalFlag(LOW_BhaalTemple_Event_TransformToDarkUrge_61007916-a8ef-47c9-9d44-b3e1c2d21ba8, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_OrinTransformRule_Common(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Orin_Inventory_Save();
PROC_GEN_OrinsAbduction_PlayEffect_Transform();
DB_GEN_OrinsAbduction_IsTransformed(1);
Transform(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var2);
CopyCharacterEquipment(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1);

PROC
PROC_LOW_BhaalTemple_DarkUrge_IsPresent_PreCombat()
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_InRegion(_Var1, S_LOW_BhaalTemple_Dangerzone_1d20188e-6154-4c9c-8cbd-39134c429113, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_DUMissingInTemplePrecombat_76e9fee8-c9f1-42b0-82b5-1b00d91788d0);

PROC
PROC_LOW_BhaalTemple_DarkUrge_IsPresent_PostCombat()
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_InRegion(_Var1, S_LOW_BhaalTemple_Dangerzone_1d20188e-6154-4c9c-8cbd-39134c429113, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Butler_DisappointedCampNight_Enable();

PROC
PROC_LOW_BhaalTemple_Butler_DisappointedCampNight_Enable()
THEN
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_MissedTempleFinale_640cb288-0b40-434a-b13c-0c871d931bcc);

IF
DialogEnded(LOW_BhaalTemple_PostBattleDarkUrge_94891e15-1541-a5e4-c50e-b74d543cb466, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_DUDefeatedByOrin_a09d2272-853e-4d46-a7de-27c8f2f9895c, _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
THEN
PROC_ClearScreenFadeTimeline(_Var2, 0.5);

IF
DB_LOW_BhaalTemple_CurrentState(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_CurrentState(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
THEN
NOT DB_LOW_BhaalTemple_CurrentState(_Var2);

IF
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
THEN
NOT DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat(_Var2);

IF
DB_LOW_BhaalTemple_State_WaitForLongRest(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_State_WaitForLongRest(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
THEN
NOT DB_LOW_BhaalTemple_State_WaitForLongRest(_Var2);

IF
DB_LOW_BhaalTemple_State_YennaWentToHide(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_State_YennaWentToHide(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
THEN
NOT DB_LOW_BhaalTemple_State_YennaWentToHide(_Var2);

IF
DB_LOW_BhaalTemple_ChosenInWorldAbductionArea(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_BhaalTemple_ChosenInWorldAbductionArea(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
THEN
NOT DB_LOW_BhaalTemple_ChosenInWorldAbductionArea(_Var2);

PROC
PROC_LOW_BhaalTemple_ClearDB_ChosenInWorldAbductionPos()
AND
DB_LOW_BhaalTemple_ChosenInWorldAbductionPos(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_BhaalTemple_ChosenInWorldAbductionPos(_Var1);

PROC
PROC_LOW_BhaalTemple_ClearDB_VictimSpotFound()
AND
DB_LOW_BhaalTemple_VictimSpotFound(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_BhaalTemple_VictimSpotFound(_Var1);

PROC
PROC_LOW_BhaalTemple_ClearDB_Allies_DuelPos()
AND
DB_LOW_BhaalTemple_Allies_DuelPos(_Var1, 1, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_BhaalTemple_Allies_DuelPos(_Var1, 1);
DB_LOW_BhaalTemple_Allies_DuelPos(_Var1, 0);

IF
TextEvent("BTResetMainDoor", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTResetMainDoor");
PROC_LOW_BhaalTemple_MainDoor_Init();

IF
TextEvent("BTOrinSpottingStart", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTOrinSpottingStart");
PROC_LOW_BhaalTemple_OrinSpotting_Started();

IF
TextEvent("BTOrinSpottingStop", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTOrinSpottingStop");
PROC_LOW_BhaalTemple_OrinSpotting_Stopped();

IF
TextEvent("BTForceOpenDoor", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceOpenDoor");
PROC_LOW_BhaalTemple_OpenDoor();

IF
TextEvent("BTForceOpenDoor2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceOpenDoor2");
Open(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2);

IF
TextEvent("BTForceCloseDoor", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceCloseDoor");
Close(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2);

IF
TextEvent("BTForceCloseDoor2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceCloseDoor2");
PROC_LOW_BhaalTemple_CloseDoor();

IF
TextEvent("BTAltarEnable", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTAltarEnable");
PROC_ItemCloseAndLock(S_LOW_BhaalTemple_MainDoors_a0774eb3-06c6-40ca-90c8-3dc14fae25f2, "NeedBhaalAmulet");
PROC_LOW_BhaalTemple_Altar_Enable();

IF
TextEvent("BTAbducteeAwakenStandby", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTAbducteeAwakenStandby");
PROC_LOW_BhaalTemple_AbducteeAwaken_Standby();

IF
TextEvent("BTSetupDefaultVictim", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTSetupDefaultVictim");
PROC_LOW_BhaalTemple_SetupDefaultVictim();
PROC_GEN_OrinsAbduction_DisableAllImpersonations();

IF
TextEvent("BTConfrontationWyll", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTConfrontationWyll");
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_SparedIsobelWithWyll_150efcb9-0b87-4fbf-af6c-44fa3292fab7);

IF
TextEvent("BTConfrontationGale", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTConfrontationGale");
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_SparedIsobelWithGale_a318c0cd-f261-41c9-88c9-3cddceb477b7);

IF
TextEvent("BTConfrontationKarlach", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTConfrontationKarlach");
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_SparedIsobelWithKarlach_40ad195b-2fa2-492d-9fc5-359fb363c65d);

IF
TextEvent("BTCheckAvatarsDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Check Avatars DB");
PROC_LOW_BhaalTemple_CheckAvatarsDB();

PROC
PROC_LOW_BhaalTemple_CheckAvatarsDB()
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var3, _Var2);

IF
TextEvent("BTCheckAbductionPossibleAreaDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Check AbductionPossibleArea DB");
PROC_LOW_BhaalTemple_CheckAbductionPossibleAreaDB();

PROC
PROC_LOW_BhaalTemple_CheckAbductionPossibleAreaDB()
AND
DB_LOW_BhaalTemple_AbductionPossibleArea(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var4, _Var1, _Var1, _Var1)
AND
Concatenate(": ", _Var4, _Var5, _Var1, _Var1)
AND
GetHostCharacter(_Var6, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var6, _Var5);

IF
TextEvent("BTCheckAbducteeFlag", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Check BTCheckAbducteeFlag DB");
PROC_LOW_BhaalTemple_CheckBTCheckAbducteeFlagDB();

PROC
PROC_LOW_BhaalTemple_CheckBTCheckAbducteeFlagDB()
AND
DB_GEN_OrinsAbduction_ChosenCharFlag(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
Concatenate(": ", _Var2, _Var3, _Var1, _Var1)
AND
GetHostCharacter(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var4, _Var3);

IF
TextEvent("BTCheckAbducteeRescuer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Check BTCheckAbducteeRescuer DB");
PROC_LOW_BhaalTemple_CheckBTCheckAbducteeRescuer();

PROC
PROC_LOW_BhaalTemple_CheckBTCheckAbducteeRescuer()
AND
DB_LOW_BhaalTemple_AbducteeRescuer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, _Var2);

IF
TextEvent("BTCheckStateDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTCheckStateDB");
PROC_LOW_BhaalTemple_BTCheckStateDB();

PROC
PROC_LOW_BhaalTemple_BTCheckStateDB()
AND
DB_LOW_BhaalTemple_CurrentState(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var2, _Var1);

IF
TextEvent("BTCheckVictimsOnAltarDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTCheckVictimsOnAltarDB");
PROC_LOW_BhaalTemple_CheckVictimsOnAltarDB();

PROC
PROC_LOW_BhaalTemple_CheckVictimsOnAltarDB()
AND
DB_LOW_BhaalTemple_VictimsOnAltar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var3, _Var2);

IF
TextEvent("BTCheckChosenInWorldAbductionAreaDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTCheckChosenInWorldAbductionAreaDB");
PROC_LOW_BhaalTemple_CheckChosenInWorldAbductionAreaDB();

PROC
PROC_LOW_BhaalTemple_CheckChosenInWorldAbductionAreaDB()
AND
DB_LOW_BhaalTemple_ChosenInWorldAbductionArea(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var3, _Var2);

IF
TextEvent("BTCheckDuelPos_OriDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Check BTCheckDuelPos DB");
PROC_LOW_BhaalTemple_CheckAllies_DuelPosDB();

PROC
PROC_LOW_BhaalTemple_CheckAllies_DuelPosDB()
AND
DB_LOW_BhaalTemple_Allies_DuelPos(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
IntegerToString(_Var2, _Var4, _Var1, _Var1, _Var1)
AND
Concatenate(_Var3, _Var4, _Var5, _Var1, _Var1)
AND
GetHostCharacter(_Var6, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var6, _Var5);

IF
TextEvent("BTSetAllFlags", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTSetAllFlags");
PROC_GlobalSetFlagAndCache(LOW_MurderTribunal_State_BecameUnholyAssassin_75ba9b20-e08b-f48e-6f70-5c93586ec729);
PROC_GlobalSetFlagAndCache(LOW_MurderTribunal_Sarevok_State_Dead_e9d30711-af25-4ba9-813e-cc7c131b17b6);
PROC_GlobalSetFlagAndCache(GLO_Gortash_State_PermaDefeated_74dd56ff-7e00-42a6-a0f3-0d122f364769);
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3);

IF
TextEvent("BTSetAbducteeYenna", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTSetAbducteeYenna");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_AbducteeIsYenna_fa8d1e59-26d5-4ad6-9706-1cb15a5cdb0a);

IF
TextEvent("BTSetAbducteeFriend", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTSetAbducteeFriend");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_AbducteeIsFriend_dd552cb0-4429-4bc9-849c-85fb611124bd);

IF
TextEvent("BTSetAbducteeRomance", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTSetAbducteeRomance");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_AbducteeIsRomance_115d7115-c924-485f-8b76-3e13d661f4e5);

IF
TextEvent("BTEnableAbduction", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTEnableAbduction");
PROC_GEN_OrinsAbduction_Debug_EnableAbduction();

IF
TextEvent("BTStartDefault", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTStartDefault");
PROC_LOW_BhaalTemple_Debug_StartDefault();

PROC
PROC_LOW_BhaalTemple_Debug_StartDefault()
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_Debug_EnableAbduction();
PROC_LOW_BhaalTemple_Debug_GiveBhaalAmulet();
PROC_GEN_OrinsAbduction_Debug_SetKilledGortash();

IF
TextEvent("BTEnableWithers", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTEnableWithers");
PROC_LOW_BhaalTemple_Debug_EnableWithers();

PROC
PROC_LOW_BhaalTemple_Debug_EnableWithers()
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Withers_ResurrectsPlayers();

IF
TextEvent("BTGiveBhaalAmulet", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTGiveBhaalAmulet");
PROC_LOW_BhaalTemple_Debug_GiveBhaalAmulet();

PROC
PROC_LOW_BhaalTemple_Debug_GiveBhaalAmulet()
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ToInventory(S_LOW_MurderTribunal_BhaalAmulet_Sarevok_305049b2-b725-4e84-8f47-84fac8ea51f1, _Var1);

IF
TextEvent("BTGiveAltarKey", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTGiveAltarKey");
PROC_LOW_BhaalTemple_Debug_GiveAltarKey();

PROC
PROC_LOW_BhaalTemple_Debug_GiveAltarKey()
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ToInventory(S_LOW_BhaalTemple_AltarKey_c817c1c6-fd0e-41d8-9750-93dfe0e85c92, _Var1);

IF
TextEvent("BTGiveNetherstone", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTGiveNetherstone");
PROC_GEN_OrinsAbduction_GiveStone(_Var1);

IF
TextEvent("BTGiveDUSlayerForm", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTGiveDUSlayerForm");
PROC_LOW_BhaalTemple_Debug_DUGivenSlayerForm();

PROC
PROC_LOW_BhaalTemple_Debug_DUGivenSlayerForm()
THEN
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3);

IF
TextEvent("BTRemoveSlayerForm", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTRemoveSlayerForm");
PROC_GlobalClearFlagAndCache(ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3);

IF
TextEvent("BTSetWarnedOrin", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTSetWarnedOrin");
PROC_LOW_BhaalTemple_Debug_SetWarnedOrin();

PROC
PROC_LOW_BhaalTemple_Debug_SetWarnedOrin()
THEN
DB_NOOP(1);

IF
TextEvent("BTSetKilledGortash", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTSetKilledGortash");
PROC_GEN_OrinsAbduction_Debug_SetKilledGortash();

IF
TextEvent("BTSetKilledSarevok", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTSetKilledSarevok");
PROC_LOW_BhaalTemple_Debug_SetKilledSarevok();

PROC
PROC_LOW_BhaalTemple_Debug_SetKilledSarevok()
THEN
PROC_GlobalSetFlagAndCache(LOW_MurderTribunal_Sarevok_State_Dead_e9d30711-af25-4ba9-813e-cc7c131b17b6);

IF
TextEvent("BTSetUnholyAssassin", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTUnholyAssassin");
PROC_LOW_BhaalTemple_Debug_SetUnholyAssassin();

PROC
PROC_LOW_BhaalTemple_Debug_SetUnholyAssassin()
THEN
PROC_GlobalSetFlagAndCache(LOW_MurderTribunal_State_BecameUnholyAssassin_75ba9b20-e08b-f48e-6f70-5c93586ec729);

IF
TextEvent("BTGoAbductionArea1", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction1();

PROC
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction1()
THEN
PROC_TeleportPartiesTo(S_Debug_Teleport_LOW_Guildhall_f9341da6-8022-448d-b886-47a6560d0b54, "");

IF
TextEvent("BTGoAbductionArea2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction2();

PROC
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction2()
THEN
PROC_TeleportPartiesTo(S_Teleport_SewerToKots_087bb1f2-8178-4c6e-aeef-b48dc204bd72, "");

IF
TextEvent("BTGoAbductionArea3", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction3();

PROC
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction3()
THEN
PROC_TeleportPartiesTo(TeleportTrigger_Sewer_CazadorSecret_1e3afc1e-b3ff-488d-8517-5941a61c5a9a, "");

IF
TextEvent("BTGoAbductionArea4", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction4();

PROC
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction4()
THEN
PROC_TeleportPartiesTo(S_Debug_LOW_AbandonedCisternInterior_a22cef19-7eaa-4611-b5cc-79b6b95bc90e, "");

IF
TextEvent("BTJumpToOrinHumanCombat", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTJumpToOrinHumanCombat");
PROC_LOW_BhaalTemple_Debug_DUGivenSlayerForm();
PROC_Debug_LOW_BhaalTemple_JumpToOrinCombat();

IF
TextEvent("BTJumpToOrinCombat", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTJumpToOrinCombat");
PROC_Debug_LOW_BhaalTemple_JumpToOrinCombat();

PROC
PROC_Debug_LOW_BhaalTemple_JumpToOrinCombat()
THEN
PROC_LOW_BhaalTemple_Debug_StartDefault();
PROC_LOW_BhaalTemple_OpenDoor();
PROC_LOW_BhaalTemple_OrinSpotting_Stopped();
PROC_LOW_BhaalTemple_AdmireKill_Disable();
PROC_TeleportPartiesTo(S_Debug_Teleport_LOW_BhaalTemple_Inner_86321aa0-40d0-4244-982d-f1da2709726d, "LOW_BhaalTemple_Debug_ArrivedInTemple");

IF
EntityEvent(_, "LOW_BhaalTemple_Debug_ArrivedInTemple", _, _, _)
AND
QRY_OnlyOnce("LOW_BhaalTemple_Debug_ArrivedInTemple", _, _, _, _)
THEN
PROC_Debug_LOW_BhaalTemple_StartBattle();

PROC
PROC_Debug_LOW_BhaalTemple_StartBattle()
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
THEN
PROC_LOW_BhaalTemple_OrinDuel_Start();
PROC_LOW_BhaalTemple_Abductee_WakeUp();
PROC_GEN_OrinsAbduction_YennaImmortality_Reset();

PROC
PROC_Debug_LOW_BhaalTemple_StartBattle()
AND NOT
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
THEN
PROC_LOW_BhaalTemple_OrinNonDuel_Start();
PROC_LOW_BhaalTemple_Abductee_WakeUp();
PROC_GEN_OrinsAbduction_YennaImmortality_Reset();

IF
TextEvent("BTRemoveOrinSlayerFormCombat", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTRemoveOrinSlayerFormCombat");
PROC_LOW_BhaalTemple_Debug_RemoveOrinSlayerForm();

PROC
PROC_LOW_BhaalTemple_Debug_RemoveOrinSlayerForm()
AND
HasActiveStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BHAALTEMPLE_ORINSLAYER", 1, _, _)
THEN
RemoveStatus(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BHAALTEMPLE_ORINSLAYER", S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

IF
TextEvent("BTJumpToConfrontationFight", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTJumpToConfrontationFight");
PROC_LOW_BhaalTemple_Debug_StartDefault();
PROC_LOW_BhaalTemple_OpenDoor();
PROC_LOW_BhaalTemple_OrinSpotting_Stopped();
PROC_LOW_BhaalTemple_AdmireKill_Disable();
PROC_TeleportPartiesTo(S_Debug_Teleport_LOW_BhaalTemple_Inner_86321aa0-40d0-4244-982d-f1da2709726d, "LOW_BhaalTemple_Debug_ArrivedInTemple_Combat");

IF
EntityEvent(_, "LOW_BhaalTemple_Debug_ArrivedInTemple_Combat", _, _, _)
AND
QRY_OnlyOnce("LOW_BhaalTemple_Debug_ArrivedInTemple_Combat", _, _, _, _)
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
DB_ORI_DarkUrge(_Var2, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_ObservationSpot_NonCombat();
PROC_LOW_BhaalTemple_ObservationSpot_Combat();
PROC_LOW_BhaalTemple_Abductee_WakeUp();
PROC_GEN_OrinsAbduction_YennaImmortality_Reset();
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_DarkUrgeIsDuel_bcaa9b35-be89-4775-b493-7f8d40338a1b);
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_TempleCombatBegun_b3cf3252-a9af-47b1-9d06-8eae5a397235);
DB_LOW_BhaalTemple_CurrentState("PostCombat");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_FacedOrinTemple_c770bc17-ffcd-400a-9316-b0d8f0202575);
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_BhaalAccepted_904c45e0-bb06-40ed-b5d7-4f1c851b9d86);
PROC_LOW_BhaalTemple_Confrontation_Setup();
PROC_TeleportPartiesTo(S_LOW_BhaalTemple_MapMarker_Door_1fbd7ac6-c15d-4c3e-93e8-f9bff39ed7c0, "LOW_BhaalTemple_Debug_JumpToConfrontation_Combat");

IF
EntityEvent(_, "LOW_BhaalTemple_Debug_JumpToConfrontation_Combat", _, _, _)
AND
QRY_OnlyOnce("LOW_BhaalTemple_Debug_JumpToConfrontation_Combat", _, _, _, _)
AND
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
DB_ORI_DarkUrge(_Var2, _, _, _, _)
THEN
PROC_LOW_BhaalTemple_OpenDoor();

IF
FlagSet(Debug_LOW_BhaalTemple_PathResistOrin_26e6310f-420f-4544-8206-a08484c6306f, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(Debug_LOW_BhaalTemple_PathResistOrin_26e6310f-420f-4544-8206-a08484c6306f);
PROC_GEN_OrinsAbduction_Debug_EnableAbduction();
PROC_LOW_BhaalTemple_Debug_GiveBhaalAmulet();

IF
FlagSet(Debug_LOW_BhaalTemple_PathEvilViolent_360527e0-921d-4f84-af20-2bd89c777eba, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(Debug_LOW_BhaalTemple_PathEvilViolent_360527e0-921d-4f84-af20-2bd89c777eba);
PROC_Debug_LOW_BhaalTemple_PathEvilViolent();

PROC
PROC_Debug_LOW_BhaalTemple_PathEvilViolent()
THEN
PROC_GEN_OrinsAbduction_Debug_EnableAbduction();
PROC_GEN_OrinsAbduction_Debug_SetKilledGortash();
PROC_LOW_BhaalTemple_Debug_SetKilledSarevok();
PROC_LOW_BhaalTemple_Debug_SetUnholyAssassin();

IF
FlagSet(Debug_LOW_BhaalTemple_EnableAbduction_0eb49187-311c-4fdd-866a-9901f35926c6, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(Debug_LOW_BhaalTemple_EnableAbduction_0eb49187-311c-4fdd-866a-9901f35926c6);
PROC_GEN_OrinsAbduction_Debug_EnableAbduction();

IF
FlagSet(Debug_LOW_BhaalTemple_SentinelsWarnedOrin_6e6e5e58-0d23-4924-948f-7b9fc3a832e0, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
DB_NOOP(1);

IF
FlagSet(Debug_LOW_BhaalTemple_KilledGortash_ee1d03d6-5bf0-461e-a3d9-7c0af674029f, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(Debug_LOW_BhaalTemple_KilledGortash_ee1d03d6-5bf0-461e-a3d9-7c0af674029f);
PROC_GEN_OrinsAbduction_Debug_SetKilledGortash();

IF
FlagSet(Debug_LOW_BhaalTemple_KilledSarevok_240e212c-81bd-4b75-9bcf-449c119b2d73, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(Debug_LOW_BhaalTemple_KilledSarevok_240e212c-81bd-4b75-9bcf-449c119b2d73);
PROC_LOW_BhaalTemple_Debug_SetKilledSarevok();

IF
FlagSet(Debug_LOW_BhaalTemple_BecameUnholyAssasin_f66442bf-6e74-468a-9e64-c754293b62f0, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(Debug_LOW_BhaalTemple_BecameUnholyAssasin_f66442bf-6e74-468a-9e64-c754293b62f0);
PROC_LOW_BhaalTemple_Debug_SetUnholyAssassin();

IF
FlagSet(Debug_LOW_BhaalTemple_DUGivenSlayerForm_969ddf4a-a062-41a1-88c2-0bcfee3b3c1b, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(Debug_LOW_BhaalTemple_DUGivenSlayerForm_969ddf4a-a062-41a1-88c2-0bcfee3b3c1b);
PROC_LOW_BhaalTemple_Debug_DUGivenSlayerForm();

IF
FlagSet(Debug_LOW_BhaalTemple_GiveBhaalAmulet_7e06357c-a95e-4bec-8804-347cb0fb841a, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(Debug_LOW_BhaalTemple_GiveBhaalAmulet_7e06357c-a95e-4bec-8804-347cb0fb841a);
PROC_LOW_BhaalTemple_Debug_GiveBhaalAmulet();

IF
FlagSet(Debug_LOW_BhaalTemple_ResetFlags_3eb8c782-175b-4687-870d-fe1875ce2931, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(Debug_LOW_BhaalTemple_ResetFlags_3eb8c782-175b-4687-870d-fe1875ce2931);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75);
PROC_GlobalClearFlagAndCache(GLO_Gortash_State_PermaDefeated_74dd56ff-7e00-42a6-a0f3-0d122f364769);
PROC_GlobalClearFlagAndCache(LOW_MurderTribunal_Sarevok_State_Dead_e9d30711-af25-4ba9-813e-cc7c131b17b6);
PROC_GlobalClearFlagAndCache(LOW_MurderTribunal_State_BecameUnholyAssassin_75ba9b20-e08b-f48e-6f70-5c93586ec729);
PROC_GlobalClearFlagAndCache(ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3);

IF
FlagSet(Debug_LOW_BhaalTemple_InWorldAbduction_1_47426717-bfab-4644-99cf-d1533cfe9c5b, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction1();

IF
FlagSet(Debug_LOW_BhaalTemple_InWorldAbduction_2_88f4d536-e819-44f1-a355-3149fdb15396, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction2();

IF
FlagSet(Debug_LOW_BhaalTemple_InWorldAbduction_3_ce6ef184-c164-44e6-9a20-8a8203f81aa0, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction3();

IF
FlagSet(Debug_LOW_BhaalTemple_InWorldAbduction_4_24a9d7c2-7467-44cf-846a-aa68d8918f4a, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_LOW_BhaalTemple_Debug_GoInWorldAbduction4();

IF
TextEvent("BTOrinMotherAnim1", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var2, "BTOrinMotherAnim1");
PROC_PlayLoopingAnimation(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, NULL_00000000-0000-0000-0000-000000000000, DIE_Generic_Deathpose_01_eecf9fb5-6669-4ed0-8a44-d5e3762d0a05, NULL_00000000-0000-0000-0000-000000000000);

IF
TextEvent("BTOrinMotherAnim2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var2, "BTOrinMotherAnim2");
PROC_PlayLoopingAnimation(S_LOW_BhaalTemple_OrinsMother_178bc423-a543-4cf9-99cb-ef4e93a1056e, NULL_00000000-0000-0000-0000-000000000000, DIE_Generic_KO_01_8145f891-e1f3-4510-b166-d974ef1c3896, NULL_00000000-0000-0000-0000-000000000000);

IF
TextEvent("BTForceTransformOrinToDU", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var2, "BTForceTransformOrinToDU");
PROC_LOW_BhaalTemple_Orin_Inventory_Save();
DB_GEN_OrinsAbduction_IsTransformed(1);
Transform(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, DISGUISE_ceccc4eb-d774-4cd5-9147-12322b81b763);
CopyCharacterEquipment(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1);

IF
TextEvent("BTForceTransformOrinToHerself", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceTransformOrinToHerself");
PROC_GEN_OrinsAbduction_Orin_RemoveAllItems();
PROC_LOW_BhaalTemple_Orin_Inventory_Restore();
RemoveTransforms(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

IF
TextEvent("BTTransformDummy1", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var2, "BTTransformDummy1");
TeleportTo(S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4, _Var2, "", 0, 0, 0, 1, 1);
Transform(S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4, _Var1, DISGUISE_ceccc4eb-d774-4cd5-9147-12322b81b763);
CopyCharacterEquipment(S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4, _Var1);

IF
TextEvent("BTTransformDummy2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var2, "BTTransformDummy2");
TeleportTo(S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4, _Var2, "", 0, 0, 0, 1, 1);
Transform(S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4, _Var1, DISGUISE_WITH_CUSTOM_LOOKS_8194cfb6-4199-46d2-9027-613c302352aa);
CopyCharacterEquipment(S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4, _Var1);

IF
TextEvent("BTRemoveTransformDummy", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTRemoveTransformDummy");
RemoveTransforms(S_LOW_BhaalTemple_OrinDarkUrgeDummy_34bec6b6-80e9-47f6-9735-5bc1525241b4);

IF
TextEvent("BTInTempleFlagSet", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTInTempleFlagSet");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2);

IF
TextEvent("BTInTempleFlagClear", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTInTempleFlagClear");
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2);

IF
TextEvent("BTForceVictimRunAway", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceVictimRunAway");
PROC_LOW_BhaalTemple_AbducteeAwaken_Setup();

IF
TextEvent("BTForceVictimJoin", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceVictimJoin");
PROC_LOW_BhaalTemple_AbducteeAwaken_Joins();

IF
TextEvent("BTForceRepeatPostCombatDialog", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceRepeatPostCombatDialog");
DB_LOW_BhaalTemple_State_SpokenToAbducteePostCombat("No");

IF
TextEvent("BTGetOrinsVictims", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTGetOrinsVictims");
PROC_LOW_BhaalTemple_GetOrinsVictims();

IF
TextEvent("BTForceConfrontationDialogDU", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceConfrontationDialogDU");

IF
TextEvent("BTOrinInvSave", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTOrinInvSave");
PROC_LOW_BhaalTemple_Orin_Inventory_Save();

IF
TextEvent("BTOrinInvRestore", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTOrinInvRestore");
PROC_LOW_BhaalTemple_Orin_Inventory_Restore();

IF
TextEvent("BTClearAlliesDuelPosDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTClearAlliesDuelPosDB");
PROC_LOW_BhaalTemple_ClearDB_Allies_DuelPos();

IF
TextEvent("BTTestQRYPos", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTTestQRYPos");
PROC_LOW_BhaalTemple_Duel_Allies_Setup();

IF
TextEvent("BTDuelStatusApply", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTDuelStatusApply");
PROC_LOW_BhaalTemple_Duel_DarkUrgeFaction_Apply();

IF
TextEvent("BTDuelStatusRemove", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTDuelStatusRemove");
PROC_LOW_BhaalTemple_Duel_DarkUrgeFaction_RemoveStatus();

IF
TextEvent("BTTryBreakDuelAD", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTTryBreakDuelAD");
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_DeathsHead_02_AD_DarkUrgeDuel_64b28fd5-33e9-87ab-db2a-7d8dd40be23f);
PROC_TryStartAD(LOW_BhaalTemple_DeathsHead_02_AD_DarkUrgeDuel_64b28fd5-33e9-87ab-db2a-7d8dd40be23f, S_LOW_BhaalTemple_DeathsHead_02_adf3d591-4442-4543-86fd-9ca5b1cb73d2);

IF
TextEvent("BTResumeOrinCombat", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Is_InCombat(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var2, "BTResumeOrinCombat");
ResumeCombat(_Var1);
PROC_LOW_BhaalTemple_OrinTransformIntoSlayer();

IF
TextEvent("BTGuildHallDuringCoupSet", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTGuildHallDuringCoupSet");
PROC_GlobalSetFlagAndCache(LOW_Guildhall_State_DuringCoup_6dba56a5-8220-41f4-8849-085e38b80d4e);

IF
TextEvent("BTGuildHallDuringCoupClear", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTGuildHallDuringCoupClear");
PROC_GlobalClearFlagAndCache(LOW_Guildhall_State_DuringCoup_6dba56a5-8220-41f4-8849-085e38b80d4e);

IF
TextEvent("BTButlerSpottingStart", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTButlerSpottingStart");
PROC_LOW_BhaalTemple_ButlerSpotting_Started();

IF
TextEvent("OACheckOwner", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
CharacterGetOwner(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, _Var3);

IF
TextEvent("OASteerTo", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
CharacterGetOwner(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, _Var3);

IF
TextEvent("BTForceUpdateStart", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceUpdateStart");
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Start();

IF
TextEvent("BTForceUpdateStop", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceUpdateStop");
PROC_LOW_BhaalTemple_ForceUpdateAltarArea_Stop();


EXITSECTION
PROC_StopLoopEffect(VFX_Script_Bhaals_Blood_Droplets_Root_01_437788a3-d32b-1b63-26d7-0ae76c67daa2, "LOW_BhaalTemple_DarkUrgeSacrificeSign");
ENDEXITSECTION

ParentTargetEdge "Act3b"
