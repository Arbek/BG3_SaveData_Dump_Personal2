Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_END_GameFinale_CharacterPartneredDialogs(ORI_State_PartneredWithAstarion_30819c8d-b39d-42e7-acd1-2a8c2c309994, END_GameFinale_RomanceFates_Astarion_73fb7151-e772-cae7-8d7a-bb5eb8e8860a, S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255);
DB_END_GameFinale_CharacterPartneredDialogs(ORI_State_PartneredWithGale_e008e20d-d642-42ed-9008-297b6273aa21, END_GameFinale_RomanceFates_Gale_81fc2269-0613-259c-b950-c0dcebbb7934, S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604);
DB_END_GameFinale_CharacterPartneredDialogs(ORI_State_PartneredWithHalsin_7b53fe60-bb16-48a9-ae5c-9bce1dfac1a9, END_GameFinale_RomanceFates_Halsin_a853d059-2572-04c4-88db-d737e4a264f7, S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323);
DB_END_GameFinale_CharacterPartneredDialogs(ORI_State_PartneredWithHalsinSecondary_6af0be74-d032-4a20-876a-11bab5f86db2, END_GameFinale_RomanceFates_Halsin_a853d059-2572-04c4-88db-d737e4a264f7, S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323);
DB_END_GameFinale_CharacterPartneredDialogs(ORI_State_PartneredWithLaezel_d169a786-6e56-4f0d-a2eb-33c48d8d1160, END_GameFinale_RomanceFates_Laezel_523b1bb2-0443-79bf-cf3e-8f435ff5f2e9, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_END_GameFinale_CharacterPartneredDialogs(ORI_State_PartneredWithMinthara_39ac48fa-b440-47e6-a436-6dc9b10058d8, END_GameFinale_RomanceFates_Minthara_699ad056-06a4-db4f-53c4-6706dbb7c544, S_GOB_DrowCommander_25721313-0c15-4935-8176-9f134385451b);
DB_END_GameFinale_CharacterPartneredDialogs(ORI_State_PartneredWithShadowheart_3808ae35-ad4e-465b-800b-63d32b77211e, END_GameFinale_RomanceFates_Shadowheart_b9ebb9af-ad65-4e64-6015-105e831d49c0, S_Player_ShadowHeart_3ed74f06-3c60-42dc-83f6-f034cb47c679);
DB_END_GameFinale_CharacterPartneredDialogs(ORI_State_PartneredWithWyll_5db4c1b6-3c42-43ae-aa85-1844acbf5a1d, END_GameFinale_RomanceFates_Wyll_32de9167-3489-9257-e3c1-e430f2f455ab, S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d);
DB_END_GameFinale_CharacterPartneredDialogs(ORI_State_PartneredWithKarlach_d9ff60fa-0af9-45d7-99b4-bd7c3f80ed12, END_GameFinale_RomanceFates_Karlach_091af35d-0d30-a4bf-b056-9eda505138b5, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c);
DB_END_GameFinale_UnpartneredOriginDialogues(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, END_GameFinale_SoloFates_Astarion_9a09777b-c0ac-d3d3-c2f4-5e6794fa2ca0);
DB_END_GameFinale_UnpartneredOriginDialogues(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, END_GameFinale_SoloFates_Laezel_fbee59b9-cb3a-c1f2-66b4-b0fb82cf24fa);
DB_END_GameFinale_UnpartneredOriginDialogues(S_Player_ShadowHeart_3ed74f06-3c60-42dc-83f6-f034cb47c679, END_GameFinale_SoloFates_Shadowheart_bdc19865-8e61-2db2-f135-4a611b15cae1);
DB_END_GameFinale_UnpartneredOriginDialogues(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, END_GameFinale_SoloFates_Wyll_1667181c-2c0a-5255-ecfd-bd0752b4639c);
DB_END_GameFinale_UnpartneredOriginDialogues(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, END_GameFinale_SoloFates_Karlach_0181cc77-4b25-dd9a-025b-b08e85387645);
DB_END_GameFinale_FatesPositions(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, S_END_FatesAstarionPoint_b16b352c-3fba-4af0-8515-0f211559d266);
DB_END_GameFinale_FatesPositions(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, S_END_FatesGalePoint_34c36805-aad7-493e-9cd1-dab8f58b54f3);
DB_END_GameFinale_FatesPositions(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, S_END_FatesLaezelPoint_4c729d4d-0721-463d-9be9-f20cea053359);
DB_END_GameFinale_FatesPositions(S_Player_ShadowHeart_3ed74f06-3c60-42dc-83f6-f034cb47c679, S_END_FatesShadowheartPoint_bc6c7e08-dc46-4c41-8c8a-3b71b6c522d2);
DB_END_GameFinale_FatesPositions(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, S_END_FatesWyllPoint_caa39fd7-a132-4c09-9b46-1e8b3bae1d1a);
DB_END_GameFinale_FatesPositions(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, S_END_FatesMinscPoint_97a137b2-6aad-4567-922b-d5449d500d4d);
DB_END_GameFinale_FatesPositions(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, S_END_FatesJaheiraPoint_2f1cdb98-6759-48cd-b807-c7819078e1c0);
DB_END_GameFinale_FatesPositions(S_GOB_DrowCommander_25721313-0c15-4935-8176-9f134385451b, S_END_FatesMintharaPoint_109cef63-089c-47e6-9712-015d76d3cb5c);
DB_END_GameFinale_FatesPositions(S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, S_END_FatesHalsinPoint_f38c0c01-cad9-4d02-ac61-3d5b7599712e);
DB_END_GameFinale_FatesPositions(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, S_END_FatesKarlachPoint_ba41b4af-4665-427c-beb6-5412b9ba1c1e);
DB_END_GameFinale_QueuedFatesDialog(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_END_GameFinale_QueuedFatesDialog(NULL_00000000-0000-0000-0000-000000000000);
DB_END_GameFinale_NoSeque(END_GameFinale_State_GaleInElysium_d6c53ee8-ce94-4016-73ee-74d44d309837);
DB_END_GameFinale_NoSeque(END_GameFinale_state_GaleChallengedMystra_d6dfa722-f85e-e191-a7e0-776d19c9f18a);
DB_END_GameFinale_NoSeque(END_GameFinale_Event_GaleBecameGod_e85955a3-58d0-17ea-2d31-ed3713121d9b);
DB_Debug_END_GameFinale_RecruitedCompanions(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, ORI_Astarion_State_IsInParty_ef789a01-f41e-4a7d-9097-fa9c4f1d0f16);
DB_Debug_END_GameFinale_RecruitedCompanions(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, ORI_Gale_State_IsInParty_639d141f-6fa8-4d93-8eb7-41243e0fea32);
DB_Debug_END_GameFinale_RecruitedCompanions(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, ORI_Karlach_State_IsInParty_eb7c4de0-36b7-4086-aa33-82c09596a395);
DB_Debug_END_GameFinale_RecruitedCompanions(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, ORI_Laezel_State_IsInParty_3ee6b1f2-24f4-4e85-b7dc-49060e6d2699);
DB_Debug_END_GameFinale_RecruitedCompanions(S_Player_ShadowHeart_3ed74f06-3c60-42dc-83f6-f034cb47c679, ORI_ShadowHeart_State_IsInParty_9a029c5a-e3c3-45ef-9cd4-1cb45718deb1);
DB_Debug_END_GameFinale_RecruitedCompanions(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, ORI_Wyll_State_IsInParty_3c0972ef-d7a4-46ac-abdd-0ce6aadd61b0);
DB_Debug_END_GameFinale_RecruitedCompanions(S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, ORI_Minsc_State_IsInParty_aeb58e60-562a-4e20-8cb2-0deb03b010fc);
DB_Debug_END_GameFinale_RecruitedCompanions(S_GOB_DrowCommander_25721313-0c15-4935-8176-9f134385451b, ORI_Minthara_State_IsInParty_766b8981-eb17-3ec5-5d30-2626509c550f);
DB_Debug_END_GameFinale_RecruitedCompanions(S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, ORI_Halsin_State_IsInParty_9a3ea4cd-3a44-40f7-9d63-2b29bdb28725);
DB_Debug_END_GameFinale_RecruitedCompanions(S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, ORI_Jaheira_State_IsInParty_1b86aa78-a2db-4faa-b4a6-c5591c03bac9);

KBSECTION
IF
TextEvent("Gamefinale_Setup", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_BrainBattle_DominationCompleted(_Var1);

IF
TextEvent("Gamefinale_Setup_Raph", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_Monitor_State_MadeDeal_86f40f63-0bfa-4ab6-b3b0-d01475c3cbdc);
PROC_END_BrainBattle_DominationCompleted(_Var1);

IF
TextEvent("GameFinale_SetEvilflags", _, _, _, _)
THEN
SetFlag(END_FinalDecisions_PlayerBecameTheAbsolute_2eca30e3-7741-051a-8686-ce3c8dae0a81);
SetFlag(END_FinalDecisions_PlayerSubjugatesBrainForBhaal_7f28008c-606e-b7ef-c1c1-94999670e653);

IF
TextEvent("GameFinale_SetGaleFlag", _, _, _, _)
THEN
SetFlag(END_FinalDecisions_Event_GaleExploded_a32e3cb5-9536-3c3e-a4d2-1837ee3b6190);

IF
FlagSet((FLAG)_Var1, _, (INTEGER)_Var3, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_Debug_END_GameFinale_RecruitedCompanions(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(ORI_State_Recruited_e78c0aab-fb48-98e9-3ed9-773a0c39988d, _Var4, _Var3);
DB_PartOfTheTeam(_Var4);

IF
FlagSet(END_Debug_GameFinale_SetAllCompanions_b5a6126b-7706-1254-b91a-1cf48de9cb45, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
SetFlag(ORI_Wyll_State_IsInParty_3c0972ef-d7a4-46ac-abdd-0ce6aadd61b0);
SetFlag(ORI_ShadowHeart_State_IsInParty_9a029c5a-e3c3-45ef-9cd4-1cb45718deb1);
SetFlag(ORI_Minsc_State_IsInParty_aeb58e60-562a-4e20-8cb2-0deb03b010fc);
SetFlag(ORI_Laezel_State_IsInParty_3ee6b1f2-24f4-4e85-b7dc-49060e6d2699);
SetFlag(ORI_Karlach_State_IsInParty_eb7c4de0-36b7-4086-aa33-82c09596a395);
SetFlag(ORI_Jaheira_State_IsInParty_1b86aa78-a2db-4faa-b4a6-c5591c03bac9);
SetFlag(ORI_Halsin_State_IsInParty_9a3ea4cd-3a44-40f7-9d63-2b29bdb28725);
SetFlag(ORI_Gale_State_IsInParty_639d141f-6fa8-4d93-8eb7-41243e0fea32);
SetFlag(ORI_Astarion_State_IsInParty_ef789a01-f41e-4a7d-9097-fa9c4f1d0f16);

IF
FlagSet(END_Debug_GameFinale_SetOnlyOrigins_c0226304-4b3f-5928-c40f-5f374ae94a05, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
SetFlag(ORI_Astarion_State_IsInParty_ef789a01-f41e-4a7d-9097-fa9c4f1d0f16);
SetFlag(ORI_Gale_State_IsInParty_639d141f-6fa8-4d93-8eb7-41243e0fea32);
SetFlag(ORI_Laezel_State_IsInParty_3ee6b1f2-24f4-4e85-b7dc-49060e6d2699);
SetFlag(ORI_Karlach_State_IsInParty_eb7c4de0-36b7-4086-aa33-82c09596a395);
SetFlag(ORI_ShadowHeart_State_IsInParty_9a029c5a-e3c3-45ef-9cd4-1cb45718deb1);
SetFlag(ORI_Wyll_State_IsInParty_3c0972ef-d7a4-46ac-abdd-0ce6aadd61b0);

IF
FlagSet(END_Debug_GameFinale_SetRandomRomanticInterest_4026fe3e-12a0-68c5-b2e6-1e184c1c2923, (CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GetRandom("DB_END_GameFinale_CharacterPartneredDialogs", 3, "DB_END_GameFinale_RandomRomance", _Var1, _Var1)
AND
DB_END_GameFinale_RandomRomance(_Var3, _Var4, _Var5, _Var1, _Var1)
THEN
SetFlag(_Var3, _Var1, _Var2);
NOT DB_END_GameFinale_RandomRomance(_Var3, _Var4, _Var5);

IF
FlagSet(ORI_DarkUrge_State_GoMadEnding_a0bea44c-be8a-26e4-ded5-c6c5827d4190, _, _, _, _)
AND NOT
DB_GlobalFlag(ORI_DarkUrge_State_BhaalDisappointed_fb48dba0-24fd-e9ae-b6f9-4fadb9f8c4a0, _, _, _, _)
THEN
SetFlag(ORI_DarkUrge_State_BhaalDisappointed_fb48dba0-24fd-e9ae-b6f9-4fadb9f8c4a0);

PROC
PROC_END_General_MakeAvatarUnavailable((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_GameFinale_CharacterPartneredDialogs(_Var2, _, _Var1, _Var1, _Var1)
AND
DB_ORI_Partnered(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(_Var2, _Var4);

PROC
PROC_END_BrainBattle_Over()
AND
DB_END_Underground_AlertedSearchers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetOnStage(_Var1, 0);

PROC
PROC_END_BrainBattle_Over()
AND
DB_END_Underground_FirstGroup(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetOnStage(_Var1, 0);

PROC
PROC_END_BrainBattle_Over()
AND NOT
DB_END_RealPartOfTheTeam(S_GOB_DrowCommander_25721313-0c15-4935-8176-9f134385451b, _, _, _, _)
THEN
SetOnStage(S_GOB_DrowCommander_25721313-0c15-4935-8176-9f134385451b, 0);

PROC
PROC_END_BrainBattle_Over()
AND
DB_GlobalFlag(ORI_DarkUrge_State_BhaalDisappointed_fb48dba0-24fd-e9ae-b6f9-4fadb9f8c4a0, _, _, _, _)
AND NOT
DB_GlobalFlag(ORI_DarkUrge_State_BhaalResisted_74944ac3-1ea0-4eae-9653-1f1319f8646b, _, _, _, _)
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, REALLY_DARK_URGE_cd611d7d-b67d-42b4-a75c-a0c6091ef8a2, 1, _Var1, _Var1)
THEN
PROC_END_General_MakeAvatarUnavailable(_Var1);

PROC
PROC_END_BrainBattle_Over()
THEN
PROC_END_GameFinale_FatesSetup();

PROC
PROC_END_GameFinale_FatesSetup()
THEN
NOT DB_END_RealPartOfTheTeam(S_GLO_Orpheus_47c90728-af68-4cbc-baaa-6497eebd8d7e);
SetOnStage(S_GLO_Orpheus_47c90728-af68-4cbc-baaa-6497eebd8d7e, 0);
NOT DB_END_RealPartOfTheTeam(S_GLO_Emperor_73d49dc5-8b8b-45dc-a98c-927bb4e3169b);
SetOnStage(S_GLO_Emperor_73d49dc5-8b8b-45dc-a98c-927bb4e3169b, 0);
TeleportTo(S_LOW_Mystra_InvisibleHelper_c5470b50-3ab0-4d5f-b84a-ed68cdc65676, S_GLO_PixieAsylumPos_Act3c_9f22d897-b3df-49cb-82e9-3db74617dd26);
TeleportTo(S_GLO_JergalAvatar_0133f2ad-e121-4590-b5f0-a79413919805, S_END_GodMonWithersPoint_4017bacc-a1ab-49fd-bee4-1aa3f0326140);
SetOnStage(S_GLO_JergalAvatar_0133f2ad-e121-4590-b5f0-a79413919805, 1);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_END_RealPartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_GameFinale_FatesPositions(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, _Var2, "", 0, 0, 0);
DetachFromPartyGroup(_Var1);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_GameFinale_FatesPositions(_Var1, _, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_END_AvatarWaitPoint_d15cbfdc-fa3f-41c8-9f98-008038cd258e, "", 0, 0, 0);
DetachFromPartyGroup(_Var1);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, REALLY_DARK_URGE_cd611d7d-b67d-42b4-a75c-a0c6091ef8a2, 1, _Var1, _Var1)
AND
DB_END_GameFinale_CharacterPartneredDialogs(_Var2, _Var3, _Var4, _Var1, _Var1)
AND
GetFlag(_Var2, _Var1, 1, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_CharacterCannotFinale(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_CharacterCannotFinale(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_GameFinale_FatesGroupDialogues(_Var3);
DB_END_GameFinale_QueuedPartneredSpeakers(_Var3, _Var1, _Var4);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, REALLY_DARK_URGE_cd611d7d-b67d-42b4-a75c-a0c6091ef8a2, 1, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_CharacterCannotFinale(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_GameFinale_QueuedSoloSpeaker(_, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_GameFinale_QueuedPartneredSpeakers(_, _Var1, _, _Var1, _Var1)
THEN
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_SoloFates_CustomAvatar_f346a423-c718-45ca-3a0d-cc228b92abe6);
DB_END_GameFinale_QueuedSoloSpeaker(END_GameFinale_SoloFates_CustomAvatar_f346a423-c718-45ca-3a0d-cc228b92abe6, _Var1);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_GameFinale_RomanceFatesDialogues(_Var1);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, REALLY_DARK_URGE_cd611d7d-b67d-42b4-a75c-a0c6091ef8a2, 1, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_CharacterCannotFinale(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_Partnered(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_END_GameFinale_QueuedSoloSpeaker(END_GameFinale_SoloFates_CustomAvatar_f346a423-c718-45ca-3a0d-cc228b92abe6, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_SoloFates_CustomAvatar_f346a423-c718-45ca-3a0d-cc228b92abe6);
DB_END_GameFinale_QueuedSoloSpeaker(END_GameFinale_SoloFates_CustomAvatar_f346a423-c718-45ca-3a0d-cc228b92abe6, _Var1);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_GameFinale_SegueQueued(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_SequeToElfsong_7633bf1a-a3e5-d33c-8986-a5fe85f680f3);
DB_END_GameFinale_QueuedSoloSpeaker(END_GameFinale_SequeToElfsong_7633bf1a-a3e5-d33c-8986-a5fe85f680f3, _Var1);
DB_END_GameFinale_SegueQueued(1);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_GlobalFlag(ORI_Gale_Knows_KarsiteWeave_22350fca-200a-bbf7-90ad-8d15168641f9, _, _, _, _)
AND NOT
DB_GlobalFlag(END_GameFinale_Event_SkipMystra_cbed4012-43a0-6b1b-6bd7-36c2a6d68d8b, _, _, _, _)
AND
DB_Avatars(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, _, _, _, _)
THEN
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_MystraGaleConfrontation_06f1e7cd-25bf-492a-be6d-5fe608de4bbb);
DB_END_GameFinale_QueuedPartneredSpeakers(END_GameFinale_MystraGaleConfrontation_06f1e7cd-25bf-492a-be6d-5fe608de4bbb, S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, S_LOW_Mystra_InvisibleHelper_c5470b50-3ab0-4d5f-b84a-ed68cdc65676);
TeleportTo(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, S_END_GameFinale_ConfrontationGalePoint_9052b30d-59f2-4078-a2a0-27d2ef17df8f, "", 0, 0, 0);
TeleportTo(S_LOW_Mystra_InvisibleHelper_c5470b50-3ab0-4d5f-b84a-ed68cdc65676, S_END_GameFinale_ConfrontationMystraPoint_984c4c76-cd6a-49ce-bc0b-db5085b9575d, "", 0, 0, 0);
Transform(S_LOW_Mystra_InvisibleHelper_c5470b50-3ab0-4d5f-b84a-ed68cdc65676, CINE_Mystra_a8240a68-1d48-4391-a878-765bcb1390e0, Disguise_ceccc4eb-d774-4cd5-9147-12322b81b763);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_END_RealPartOfTheTeam(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _, _, _)
AND
IsTagged(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, FULL_CEREMORPH_3797bfc4-8004-4a19-9578-61ce0714cc0b, 0, _, _)
AND
DB_ORI_Partnered(_Var1, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _Var1, _Var1, _Var1)
THEN
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4);
DB_END_GameFinale_QueuedPartneredSpeakers(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _Var1, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c);

PROC
PROC_END_GameFinale_FatesSetup()
AND
DB_END_RealPartOfTheTeam(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _, _, _)
AND NOT
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _, _, _, _)
AND
IsTagged(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, FULL_CEREMORPH_3797bfc4-8004-4a19-9578-61ce0714cc0b, 0, _, _)
AND
QRY_GetBestAvatarForCompanion(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _, _, _)
AND
DB_QRYRTN_GetBestAvatarForCompanion(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4);
DB_END_GameFinale_QueuedPartneredSpeakers(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _Var1, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c);

PROC
PROC_END_GameFinale_FatesSetup()
THEN
PROC_END_GameFinale_BeginFatesGroupDialogues();

PROC
PROC_END_GameFinale_RomanceFatesDialogues((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_GameFinale_QueuedSoloSpeaker(_, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_GameFinale_QueuedPartneredSpeakers(_, _Var1, _, _Var1, _Var1)
AND
DB_END_GameFinale_CharacterPartneredDialogs(_Var5, _Var6, _Var7, _Var1, _Var1)
AND
GetFlag(_Var5, _Var1, 1, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_CharacterCannotFinale(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_CharacterCannotFinale(_Var7, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_GameFinale_FatesGroupDialogues(_Var6);
DB_END_GameFinale_QueuedPartneredSpeakers(_Var6, _Var1, _Var7);

PROC
PROC_END_GameFinale_RomanceFatesDialogues((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_END_GameFinale_QueuedSoloSpeaker(_, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_GameFinale_QueuedPartneredSpeakers(_, _Var1, _, _Var1, _Var1)
AND
DB_END_GameFinale_UnpartneredOriginDialogues(_Var1, _Var5, _Var1, _Var1, _Var1)
THEN
DB_END_GameFinale_FatesGroupDialogues(_Var5);
DB_END_GameFinale_QueuedSoloSpeaker(_Var5, _Var1);

PROC
PROC_END_GameFinale_BeginFatesGroupDialogues()
AND
SysCount("DB_END_GameFinale_FatesGroupDialogues", 1, _Var1, _Var1, _Var1)
AND
SysFactAtIndex("DB_END_GameFinale_FatesGroupDialogues", 1, _Var1, "DB_END_GameFinale_QueuedFatesDialog", _Var1)
AND
DB_END_GameFinale_QueuedFatesDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_GameFinale_QueuedDialogAttempt(1);
PROC_END_GameFinale_PlayQueuedDialog(_Var2);
NOT DB_END_GameFinale_QueuedFatesDialog(_Var2);

PROC
PROC_END_GameFinale_BeginFatesGroupDialogues()
AND NOT
DB_END_GameFinale_QueuedDialogAttempt(1, _, _, _, _)
AND NOT
DB_END_GameFinale_FatesGroupDialogues(_, _, _, _, _)
THEN
PROC_END_GodsAndMonsters_RollCredits("END_GodsAndMonsters_GameFinished");

PROC
PROC_END_GameFinale_PlayQueuedDialog(END_GameFinale_MystraGaleConfrontation_06f1e7cd-25bf-492a-be6d-5fe608de4bbb, _, _, _, _)
THEN
Transform(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, ORIGIN_Gale_God_458fa72d-10e7-46bd-896b-0bb60e71bb29, Disguise_ceccc4eb-d774-4cd5-9147-12322b81b763);

PROC
PROC_END_GameFinale_PlayQueuedDialog(END_GameFinale_MystraGaleConfrontation_06f1e7cd-25bf-492a-be6d-5fe608de4bbb, _, _, _, _)
AND
IsTagged(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, FULL_CEREMORPH_3797bfc4-8004-4a19-9578-61ce0714cc0b, 1, _, _)
THEN
Transform(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, Mindflayer_Form_Player_Gale_God_ee59c821-1372-4530-a4a6-1a22962c9fc5, Disguise_ceccc4eb-d774-4cd5-9147-12322b81b763);

PROC
PROC_END_GameFinale_PlayQueuedDialog(END_GameFinale_SequeToElfsong_7633bf1a-a3e5-d33c-8986-a5fe85f680f3, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, TheHerosRevelry_PlayerLocation_2ff3e244-c7c6-452f-b849-182f067b1989);

PROC
PROC_END_GameFinale_PlayQueuedDialog((DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
_Var1 != END_GameFinale_MystraGaleConfrontation_06f1e7cd-25bf-492a-be6d-5fe608de4bbb
AND
DB_END_GameFinale_QueuedPartneredSpeakers(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
TeleportTo(_Var2, S_END_FatesAvatar_02a0aaa1-1801-4d52-95f9-d685809a7f24);
TeleportTo(_Var3, S_END_FatesPartner_0154876d-39fa-4c82-b64d-e16a4c998265);
PROC_SetArmourSet(_Var2, 0);
PROC_SetArmourSet(_Var3, 0);

PROC
PROC_END_GameFinale_PlayQueuedDialog((DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_END_GameFinale_QueuedSoloSpeaker(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var2, S_END_FatesAvatar_02a0aaa1-1801-4d52-95f9-d685809a7f24, "", 0, 0, 0);
PROC_SetArmourSet(_Var2, 0);

PROC
PROC_END_GameFinale_PlayQueuedDialog(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_GameFinale_QueuedPartneredSpeakers(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _Var1, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _Var1, _Var1)
THEN
PROC_SetArmourSet(_Var1, 0);
PROC_SetArmourSet(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, 0);
TeleportTo(_Var1, S_END_DeathOfKarlach_KarlachPoint_3166c3d4-c6fb-4c9b-a1ab-755e440916d5, "", 0, 0, 0);
TeleportTo(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, S_END_DeathOfKalach_AvatarPoint_c96d7a62-93f3-413b-8919-354bfc28e6df, "", 0, 0, 0);

PROC
PROC_END_GameFinale_PlayQueuedDialog(END_GameFinale_SequeToElfsong_7633bf1a-a3e5-d33c-8986-a5fe85f680f3, _, _, _, _)
AND NOT
QRY_END_GameFinale_SkipSeque()
AND
DB_END_GameFinale_QueuedSoloSpeaker(END_GameFinale_SequeToElfsong_7633bf1a-a3e5-d33c-8986-a5fe85f680f3, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(END_GameFinale_SequeToElfsong_7633bf1a-a3e5-d33c-8986-a5fe85f680f3, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_GameFinale_QueuedDialogAttempt(1);

PROC
PROC_END_GameFinale_PlayQueuedDialog(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _, _, _, _)
AND
DB_END_General_MainDialogAnchor(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _, _, _)
AND
DB_END_GameFinale_QueuedDialogAttempt(1, _, _, _, _)
THEN
PROC_SetArmourSet(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, 0);
TeleportTo(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, S_END_DeathOfKarlach_KarlachPoint_3166c3d4-c6fb-4c9b-a1ab-755e440916d5, "", 0, 0, 0);

PROC
PROC_END_GameFinale_PlayQueuedDialog(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _, _, _, _)
AND
DB_Avatars(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _, _, _)
AND
DB_END_GameFinale_QueuedSoloSpeaker(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _, _)
AND NOT
DB_GlobalFlag(END_BrainBattle_Event_GaleExplodedMidBattle_993173dd-a519-c8aa-67d7-b4fecfd2b5dc, _, _, _, _)
AND
DB_END_GameFinale_QueuedDialogAttempt(1, _, _, _, _)
AND
QRY_StartDialog(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, NULL_00000000-0000-0000-0000-000000000000, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _)
THEN
NOT DB_END_GameFinale_QueuedDialogAttempt(1);

PROC
PROC_END_GameFinale_PlayQueuedDialog(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _, _, _, _)
AND
DB_END_RealPartOfTheTeam(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _, _, _)
AND
DB_END_GameFinale_QueuedPartneredSpeakers(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _Var1, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _Var1, _Var1)
AND
QRY_END_GameFinale_CharacterCannotFinale(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_General_MainDialogAnchor(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(END_BrainBattle_Event_GaleExplodedMidBattle_993173dd-a519-c8aa-67d7-b4fecfd2b5dc, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_GameFinale_QueuedDialogAttempt(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _Var2, _Var1, _Var1)
THEN
NOT DB_END_GameFinale_QueuedDialogAttempt(1);

PROC
PROC_END_GameFinale_PlayQueuedDialog(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _, _, _, _)
AND
DB_END_RealPartOfTheTeam(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _, _, _)
AND
DB_END_GameFinale_QueuedPartneredSpeakers(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, _Var1, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _Var1, _Var1)
AND NOT
DB_GlobalFlag(END_BrainBattle_Event_GaleExplodedMidBattle_993173dd-a519-c8aa-67d7-b4fecfd2b5dc, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_GameFinale_QueuedDialogAttempt(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _Var1, _Var1, _Var1)
THEN
NOT DB_END_GameFinale_QueuedDialogAttempt(1);

PROC
PROC_END_GameFinale_PlayQueuedDialog((DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_END_GameFinale_QueuedPartneredSpeakers(_Var1, _Var2, _Var3, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_CharacterCannotFinale(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_CharacterCannotFinale(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_GameFinale_QueuedDialogAttempt(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog_Fixed(_Var1, _Var3, _Var2, _Var1, _Var1)
THEN
NOT DB_END_GameFinale_QueuedDialogAttempt(1);

PROC
PROC_END_GameFinale_PlayQueuedDialog((DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_END_GameFinale_QueuedSoloSpeaker(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_DialogueCannotPlay(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
QRY_END_GameFinale_CharacterCannotFinale(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_GameFinale_QueuedDialogAttempt(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_END_GameFinale_QueuedDialogAttempt(1);

PROC
PROC_END_GameFinale_PlayQueuedDialog((DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_END_GameFinale_QueuedDialogAttempt(1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_GameFinale_QueuedDialogAttempt(1);
PROC_END_GameFinale_ChooseNextDialog(_Var1);

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_END_GameFinale_FatesGroupDialogues(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_GameFinale_ChooseNextDialog(_Var1);

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_END_GameFinale_FatesGroupDialogues(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_GameFinale_QueuedPartneredSpeakers(_Var1, _Var3, _Var4, _Var1, _Var1)
AND
DB_END_GameFinale_FatesPositions(_Var4, _Var5, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var3, S_END_AvatarWaitPoint_634f76b1-2325-4ed5-91f0-554f09ef5f5b, "", 0, 0, 0);
TeleportTo(_Var4, _Var5, "", 0, 0, 0);
PROC_SetArmourSet(_Var3, 0);
PROC_SetArmourSet(_Var4, 0);

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_END_GameFinale_FatesGroupDialogues(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_GameFinale_QueuedSoloSpeaker(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var3, S_END_AvatarWaitPoint_d15cbfdc-fa3f-41c8-9f98-008038cd258e, "", 0, 0, 0);
PROC_SetArmourSet(_Var3, 0);

IF
DialogEnded(END_GameFinale_MystraGaleConfrontation_06f1e7cd-25bf-492a-be6d-5fe608de4bbb, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
RemoveTransforms(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604);

PROC
PROC_END_GameFinale_ChooseNextDialog((DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_END_GameFinale_FatesGroupDialogues(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_GameFinale_FatesGroupDialogues(_Var1);
PROC_END_GameFinale_BeginFatesGroupDialogues();

PROC
PROC_END_GameFinale_ChooseNextDialog((DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND NOT
DB_END_GameFinale_FatesGroupDialogues(_, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_GodsAndMonsters_RollCredits("END_GodsAndMonsters_GameFinished");

QRY
QRY_END_GameFinale_SkipSeque()
AND
DB_Avatars(S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, _, _, _, _)
AND
DB_END_GameFinale_NoSeque(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_General_MainDialogAnchor(_, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
FlagSet(END_GameFinale_Event_KarlachChoseDeath_f9900bec-33dc-44db-ac8c-666dd5b8eec1, _, _, _, _)
AND
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_SoloFates_Karlach_0181cc77-4b25-dd9a-025b-b08e85387645, _, _, _, _)
THEN
DB_END_GameFinale_QueuedSoloSpeaker(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c);
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4);

IF
FlagSet(END_GameFinale_Event_KarlachChoseDeath_f9900bec-33dc-44db-ac8c-666dd5b8eec1, _, _, _, _)
AND
DB_ORI_Partnered(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _Var3, _, _, _)
THEN
DB_END_GameFinale_QueuedPartneredSpeakers(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _Var3);
DB_END_GameFinale_FatesGroupDialogues(END_GameFinale_DeathofKarlach_e419b950-b6ba-64bc-f041-1d07a602dfc4);

IF
FlagSet(GLO_END_GameFinale_DeathOfKarlach_WentToAvernusWithAvatar_35150cbf-2c72-1049-37ed-14dbc3736135, _, (INTEGER)_Var2, _, _)
AND
DB_DialogSpeakers(_Var2, _Var3, 2, _, _)
THEN
PROC_END_General_MakeAvatarUnavailable(_Var3);

QRY
QRY_END_GameFinale_CharacterCannotFinale((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_General_ForcedListener(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_GameFinale_CharacterCannotFinale((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsTagged(_Var1, REALLY_DARK_URGE_cd611d7d-b67d-42b4-a75c-a0c6091ef8a2, 1, _Var1, _Var1)
AND
DB_GlobalFlag(ORI_DarkUrge_State_GoMadEnding_a0bea44c-be8a-26e4-ded5-c6c5827d4190, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(ORI_DarkUrge_State_BhaalResisted_74944ac3-1ea0-4eae-9653-1f1319f8646b, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_GameFinale_DialogueCannotPlay((DIALOGRESOURCE)_Var1, (CHARACTER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
_Var2 != S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c
AND
IsTagged(_Var2, FULL_CEREMORPH_3797bfc4-8004-4a19-9578-61ce0714cc0b, 1, _Var1, _Var1)
AND
DB_END_GameFinale_UnpartneredOriginDialogues(_, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_GameFinale_DialogueCannotPlay((DIALOGRESOURCE)_Var1, S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
IsTagged(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, FULL_CEREMORPH_3797bfc4-8004-4a19-9578-61ce0714cc0b, 0, _Var1, _Var1)
AND NOT
DB_END_GameFinale_QueuedSoloSpeaker(END_GameFinale_SoloFates_Karlach_0181cc77-4b25-dd9a-025b-b08e85387645, _, _Var1, _Var1, _Var1)
AND NOT
DB_ORI_Partnered(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, _, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act3c"
