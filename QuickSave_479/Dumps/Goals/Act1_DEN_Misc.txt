Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_Trainer_Ownership_5db200ee-bcb1-4a41-b5cc-72be9bc9cbc4, S_DEN_Trainer_02025646-347a-4235-aef7-e46b7c94b435);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_CookOwnership_c24dc854-a503-48b8-9f4a-9529a21af5ce, S_DEN_Tiefling_003_1b35671b-e5d7-4943-bbd0-4c816b69b7cb);
DB_ItemShopTrigger(S_DEN_CookOwnership_c24dc854-a503-48b8-9f4a-9529a21af5ce, S_DEN_Tiefling_003_1b35671b-e5d7-4943-bbd0-4c816b69b7cb);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_AdventurersOwnership_cae8006a-7681-40a9-a30f-226a98222f11, S_DEN_AdventurerLeader_82d1b843-9e8c-48a5-9d87-caddea5c193c);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_HagOwnership_d19456f1-799e-46d4-8a9c-e817997d0d6f, S_HAG_Hag_c457d064-83fb-4ec6-b74d-1f30dfafd12d);
DB_ItemShopTrigger(S_DEN_HagOwnership_d19456f1-799e-46d4-8a9c-e817997d0d6f, S_HAG_Hag_c457d064-83fb-4ec6-b74d-1f30dfafd12d);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_Refugee001_Ownership_7af2e1ed-65e7-4de0-b2e3-01f63c23621f, S_DEN_TieflingRefugee_RangerTrader_001_637d8d68-2a04-409e-a77d-cf31ac9478ee);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_TieflingGuard_004_Ownership_9f0db868-d124-4b57-8546-8c4b35492161, S_DEN_Tiefling_004_c9562174-44af-4ffa-9e5e-da58538f23d8);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_YoungLover_Ownership_f2100a37-48df-40a3-bdfa-fe6630db40cf, S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_Tiefling005_Trespassing_a2f33199-1006-4371-ac62-3dbfbd6513fb, S_DEN_Tiefling_005_e5319db6-ea86-43cc-9fd0-5ec1e0eab492);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_Weaponsmith_Ownership_85ef12d9-33ce-4772-9519-b902935d1232, S_DEN_Weaponsmith_e2ad06ec-8034-479a-9f69-b86faea6dc79);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_Pickpocket_Ownership_4c0e2489-d97c-49da-aedd-9b27d0251cd5, S_DEN_PickpocketTrader_e1fda08b-45d4-41db-84b5-20e9931ba5af);
DB_ItemShopTrigger(S_DEN_Pickpocket_Ownership_4c0e2489-d97c-49da-aedd-9b27d0251cd5, S_DEN_PickpocketTrader_e1fda08b-45d4-41db-84b5-20e9931ba5af);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_Hideout_ThiefSpotBox_de0d46cf-d0bf-4879-b79e-bcec68bf64f4, S_DEN_ThiefHideoutLeader_c8ab1ca6-96bb-467e-91c9-af87bc4d3925);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_LeaderMainOwnership_7ff915af-57a5-4d4d-9fd3-95e33d37c433, S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_SenderOwnership_78e70f78-e183-497f-ace8-462df3dd8b56, S_DEN_BirdSender_30ee2bc0-0e69-4999-8d1c-8335c439cecf);
DB_ItemShopTrigger(S_DEN_SenderOwnership_78e70f78-e183-497f-ace8-462df3dd8b56, S_DEN_BirdSender_30ee2bc0-0e69-4999-8d1c-8335c439cecf);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_PondOwnership_aff112d5-b79e-405e-9114-6b70aea65a06, S_DEN_RitualDruid_001_9c5c4c89-890b-4e72-8698-53d36e6b4271);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_ZenBearOwnership_d2c760c9-32d1-4cef-8ddd-7337325cf178, S_DEN_ZenBear_d4d4bfd2-9639-45bc-a256-2f079e53db29);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_DruidEntrance_Ownership_137c1348-fafd-44cf-924e-eb4df6de9bb6, S_DEN_DruidOpposed_322cf8d2-32ee-453f-987e-f12b32652b5d);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_DruidsQuartersOwnership_989c7fa8-4a8d-4159-8625-b802dbf81b97, S_DEN_DruidOpposed_322cf8d2-32ee-453f-987e-f12b32652b5d);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_SecretLibrary_SUB_14dd754c-4b74-4aa7-bbec-471c2f8a0c61, S_DEN_Apprentice_7cabf226-e34b-4556-8903-a45d0fe26caf);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_AppOwnership_6b0e6f9c-bffe-4643-922e-2c97ea39dca7, S_DEN_Apprentice_7cabf226-e34b-4556-8903-a45d0fe26caf);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_DEN_DruidVault_SUB_f4c22466-5963-4192-b939-f1056f4f806a, S_DEN_DruidOpposed_322cf8d2-32ee-453f-987e-f12b32652b5d);
DB_ItemOwnerShipClearItem("WLD_Main_A", DLC_DD_Painting_Portrait_Lohse_000_c474a3fe-0e04-41cc-94e2-8978c15033da);
DB_AutoSaveTrigger(TRIGGERGUID_S_DEN_Raid_Autosave_20c91632-2d90-44ef-ab0a-354b9db43698);
DB_AutoSaveTrigger(TRIGGERGUID_S_DEN_Harpy_Autosave_88f37111-46af-477d-84c8-340e783fafa2);
DB_AutoSaveTrigger(TRIGGERGUID_S_DEN_Cave_SUB_adecafa4-27c6-4b2f-bf9e-6ffd7c81a766);
DB_State_Current(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_Peace");
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_Peace", 0);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_DruidAttack", 1000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_PostDruidAttack", 2000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_DruidsHostileNoTieflings", 2500);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_Lockdown", 3000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_RitualStopped", 4000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_GoblinHuntVictory", 5000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_RitualStoppedNoTieflings", 5500);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_AttackOnDen", 6000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_AttackOnDenVictory", 7000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_RaiderVictory", 8000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_TieflingsGone", 9000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_LockdownComplete", 10000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_LockdownAttackOnDen", 11000);
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_Final", 100000);
DB_SoundStates_StateGroups("DEN", "S_DEN_Grove_States");
DB_SoundStates(Amb_SV_RangerCamp_FZ_000_3fd38540-d846-770c-ba66-21c4924dacd6, "DEN", "DEN_State_DruidAttack", "Druid_Attack");
DB_SoundStates(Amb_SV_RangerCamp_FZ_000_3fd38540-d846-770c-ba66-21c4924dacd6, "DEN", "DEN_State_Lockdown", "Grove_Lockdown");
DB_SoundStates(Amb_SV_RangerCamp_FZ_000_3fd38540-d846-770c-ba66-21c4924dacd6, "DEN", "DEN_State_GoblinHuntVictory", "Tiefling_Departure");
DB_SoundStates(Amb_SV_RangerCamp_FZ_000_3fd38540-d846-770c-ba66-21c4924dacd6, "DEN", "DEN_State_AttackOnDen", "Goblin_Attack");
DB_SoundStates(Amb_SV_RangerCamp_FZ_000_3fd38540-d846-770c-ba66-21c4924dacd6, "DEN", "DEN_State_AttackOnDenVictory", "Tiefling_Departure");
DB_SoundStates(Amb_SV_RangerCamp_FZ_000_3fd38540-d846-770c-ba66-21c4924dacd6, "DEN", "DEN_State_RaiderVictory", "Grove_Devastated");
DB_SoundStates(Amb_SV_RangerCamp_FZ_000_3fd38540-d846-770c-ba66-21c4924dacd6, "DEN", "DEN_State_LockdownComplete", "Grove_Lockdown");
DB_SoundStates(Amb_SV_RangerCamp_FZ_000_3fd38540-d846-770c-ba66-21c4924dacd6, "DEN", "DEN_State_LockdownAttackOnDen", "Grove_Lockdown");
DB_SoundStates(Amb_SV_RangerCamp_FZ_000_3fd38540-d846-770c-ba66-21c4924dacd6, "DEN", "DEN_State_TieflingsGone", "Tiefling_Gone");
DB_DEN_FinalStates("DEN_State_TieflingsGone");
DB_DEN_FinalStates("DEN_State_LockdownAttackOnDen");
DB_DEN_FinalStates("DEN_State_RaiderVictory");
DB_DEN_DefaultStates("DEN_State_Peace");
DB_DEN_DefaultStates("DEN_State_RitualStopped");
DB_DEN_StableStates("DEN_State_Peace");
DB_DEN_StableStates("DEN_State_RitualStopped");
DB_DEN_StableStates("DEN_State_PostDruidAttack");
DB_DEN_LockdownStates("DEN_State_Lockdown");
DB_DEN_LockdownStates("DEN_State_LockdownComplete");
DB_DEN_LockdownStates("DEN_State_LockdownAttackOnDen");
DB_DEN_NoTieflingsStates("DEN_State_DruidsHostileNoTieflings");
DB_DEN_NoTieflingsStates("DEN_State_RitualStoppedNoTieflings");
DB_DEN_CombatStates("DEN_State_AttackOnDen");
DB_DEN_CombatStates("DEN_State_DruidAttack");
DB_DEN_ZorruGoneState("DEN_State_PostDruidAttack");
DB_DEN_ZorruGoneState("DEN_State_Lockdown");
DB_DEN_ZorruGoneState("DEN_State_GoblinHuntVictory");
DB_DEN_ZorruGoneState("DEN_State_AttackOnDen");
DB_DEN_ZorruGoneState("DEN_State_TieflingsGone");
DB_DEN_ZorruGoneState("DEN_State_RitualStoppedNoTieflings");
DB_DEN_ZorruGoneState("DEN_State_Final");
DB_DEN_OnlyDruidStates("DEN_State_RitualStoppedNoTieflings");
DB_DEN_OnlyDruidStates("DEN_State_TieflingsGone");
DB_DEN_VictoryStates("DEN_State_GoblinHuntVictory");
DB_DEN_VictoryStates("DEN_State_AttackOnDenVictory");
PROC_TriggerRegisterForPlayers(TRIGGERGUID_S_DEN_EntranceArea_27796261-6c41-4fa2-8afe-6616d7d3e176);
DB_DEN_InDenTriggers(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211);
DB_DEN_InDenTriggers(S_DEN_Hideout_SUB_8016de65-4be3-4083-960f-4d14a7455d4b);
DB_DEN_InDenTriggers(S_DEN_Tunnel_SUB_6d2ed20e-f315-463a-9783-d02b173cb35a);
DB_DEN_InDenTriggers(S_DEN_DruidLair_SUB_a9794f19-187a-4d79-b739-443548411d29);
DB_DEN_InDenTriggers(S_DEN_DruidVault_SUB_f4c22466-5963-4192-b939-f1056f4f806a);
DB_DEN_InDenTriggers(S_DEN_EntranceArea_27796261-6c41-4fa2-8afe-6616d7d3e176);
DB_DEN_InDenTriggers(S_DEN_TieflingLeader_SUB_f667e6fe-2b30-4509-9bba-7918bb71a2a7);
DB_DEN_GreetingReaction(S_HAG_Hag_c457d064-83fb-4ec6-b74d-1f30dfafd12d, DEN_HagTrader_AD_GreetingPlayer_43502f23-c748-de1e-2078-f409cb755165);
DB_DEN_GreetingReaction(S_DEN_Trainer_02025646-347a-4235-aef7-e46b7c94b435, DEN_Trainer_AD_GreetingPlayer_2b7577d9-ea31-bb1f-6121-6340f782cd80);
DB_DEN_GreetingReaction(S_GLO_Volo_2af25a85-5b9a-4794-85d3-0bd4c4d262fa, DEN_Volo_AD_GreetingPlayer_54371743-de6a-cfa8-8d15-1b49afd1d180);
DB_DEN_NPC(S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a, "Gate", DEN_AttackOnDen_TieflingLeader_58770ebe-023d-e18e-6d43-7b21512f08a6);
DB_DEN_NPC(S_DEN_Trainer_02025646-347a-4235-aef7-e46b7c94b435, "Gate", DEN_AttackOnDen_Trainer_32f4845d-c84b-6e67-23e1-1f17d68627d7);
DB_DEN_NPC(S_DEN_Gatekeeper_847717b3-82eb-45a7-b875-78665c12ce9a, "Gate", DEN_AttackOnDen_Gatekeeper_57e13b63-cf2a-3ff0-c468-9cf4e4970957);
DB_DEN_NPC(S_DEN_TieflingRefugee_RangerTrader_001_637d8d68-2a04-409e-a77d-cf31ac9478ee, "Defenseless", DEN_AttackOnDen_Refugee001_e9fa7a22-8a76-3170-49de-f2b04d5ae7c7);
DB_DEN_NPC(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, "Defenseless", DEN_AttackOnDen_Refugee002_8d6b295f-59a1-0eab-10cf-22a66f64b03c);
DB_DEN_NPC(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, "Defenseless", DEN_AttackOnDen_Refugee003_e580ee18-9765-27c4-63b5-f408d39d7975);
DB_DEN_NPC(S_DEN_TieflingRefugee_004_bc4c4282-86b0-4330-9df8-246ed0a704a2, "Defenseless", DEN_AttackOnDen_Refugee004_80c4f530-08a1-15b2-58cb-3a2bf0217794);
DB_DEN_NPC(S_DEN_PrisonGuard_3ff71f38-28e9-4e72-ba17-9f6d3bb2a995, "Cave", DEN_AttackOnDen_PrisonGuard_b02ce50c-3813-fa37-5924-d427772227a4);
DB_DEN_NPC(S_DEN_Griefling_7ce0afc2-e8f2-4f2e-82d8-27df98acc3d8, "Gate", DEN_AttackOnDen_Griefling_4dc17e35-32f2-427d-c935-3171dc2fdebf);
DB_DEN_NPC(S_DEN_GrieflingFriend_c3334ee5-38dc-4197-aacc-4aa55803ff52, "Defenseless", DEN_AttackOnDen_GrieflingFriend_ab984a7f-9474-e39d-714a-eb63c948173a);
DB_DEN_NPC(S_DEN_CapturedGoblin_783d7572-a846-455f-b686-247a95263ebb, "Specific", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_AdventurerLeader_82d1b843-9e8c-48a5-9d87-caddea5c193c, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_RobbedAdventurer_534bceaf-678c-40a0-8ca9-e1134f95ba0d, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_RaidAdventurer_4faf77a0-b883-4f7b-acbf-4500973f446d, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_HAG_Hag_c457d064-83fb-4ec6-b74d-1f30dfafd12d, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_GLO_GruntingKid_0f8ef61e-cb63-49e1-a242-677173bff5e0, "Hideout", DEN_AttackOnDen_Grunting_0308c7f8-756f-723b-7be8-853b18ce6823);
DB_DEN_NPC(S_DEN_Tiefling_005_e5319db6-ea86-43cc-9fd0-5ec1e0eab492, "Defenseless", DEN_AttackOnDen_Tiefling005_6b7ddc9b-4e0b-a7c3-9470-3ef74ee1bda7);
DB_DEN_NPC(S_DEN_Tiefling_010_23129d6c-8d39-4a4c-a4f6-cfc6637b597c, "Cave", DEN_AttackOnDen_Tiefling010_e4d2bc33-02c2-75ca-e85c-fa3bb89e2203);
DB_DEN_NPC(S_DEN_Tiefling_001_82f8662d-76da-4352-b37e-01ba433b5d43, "Cave", DEN_AttackOnDen_Tiefling001_b9cfdd58-28ee-6859-b2bc-d5e22293e6e2);
DB_DEN_NPC(S_DEN_Tiefling_FoodTrader_001_1b35671b-e5d7-4943-bbd0-4c816b69b7cb, "Defenseless", DEN_AttackOnDen_Tiefling003_e0cba3df-3687-25d0-16b4-5931a5870a4f);
DB_DEN_NPC(S_DEN_Tiefling_004_c9562174-44af-4ffa-9e5e-da58538f23d8, "Cave", DEN_AttackOnDen_Tiefling004_e884b110-2041-0112-d496-91b821320d4c);
DB_DEN_NPC(S_DEN_Weaponsmith_e2ad06ec-8034-479a-9f69-b86faea6dc79, "Defenseless", DEN_AttackOnDen_Weaponsmith_f74a35e9-5895-dd0f-5c83-52009f6b0379);
DB_DEN_NPC(S_GLO_IrritatedTiefling_65ad9da0-0efb-4cc3-bf82-c006f43dda6c, "Defenseless", DEN_AttackOnDen_Tiefling007_02af85ca-5904-06b2-82b4-6e6925fede9f);
DB_DEN_NPC(S_DEN_Tiefling_008_03b6fae4-d250-4ce9-9a01-19cb427deb17, "Cave", DEN_AttackOnDen_SonOfChef_4a7a4cb9-3b91-71ff-5892-628020dec7d4);
DB_DEN_NPC(S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_GLO_Volo_2af25a85-5b9a-4794-85d3-0bd4c4d262fa, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, "Defenseless", DEN_AttackOnDen_Stargazer_828c1ee0-279c-5bf8-523c-33f6c81861b9);
DB_DEN_NPC(S_DEN_Bard_4a405fba-3000-4c63-97e5-a8001ebb883c, "Hideout", DEN_AttackOnDen_Bard_ab277b67-337e-53ff-e79a-ad9a3f5a3ed1);
DB_DEN_NPC(S_DEN_ThiefHideoutLeader_c8ab1ca6-96bb-467e-91c9-af87bc4d3925, "Hideout", DEN_AttackOnDen_LeaderKid_3870faac-f81a-1a60-9e78-0aec60e06728);
DB_DEN_NPC(S_DEN_PickpocketTrader_e1fda08b-45d4-41db-84b5-20e9931ba5af, "Hideout", DEN_AttackOnDen_PickpocketTrader_9aedfe65-65ac-ee90-49ff-00e6496f1c3d);
DB_DEN_NPC(S_DEN_RobberKid_94e865e9-790d-4633-a378-8fb50832b5e9, "Hideout", DEN_AttackOnDen_RobberKid_8048df11-fb42-fd9f-13a5-8969f4230cfd);
DB_DEN_NPC(S_DEN_Pickpocket_540ddc1f-42c6-4347-ba03-b3cf3d3942ab, "Hideout", DEN_AttackOnDen_Pickpocket_76cf890c-bfec-2245-2ac6-15363a24d419);
DB_DEN_NPC(S_DEN_TieflingKid_004_6644185d-385e-4dfc-973c-bb854cbfd540, "Hideout", DEN_AttackOnDen_Kid004_c2d7edd7-726c-919b-4274-07f7a3f32058);
DB_DEN_NPC(S_DEN_Mule_001_06ed1274-9d16-4320-b5ad-162fca5fb85d, "Defenseless Offstage", DEN_AttackOnDen_Mule1_7d410b4f-9ba1-625e-52cc-f190714f85b5);
DB_DEN_NPC(S_DEN_Mule_002_ac37baa6-624a-418d-a6ca-52ed9a77f00c, "Defenseless Offstage", DEN_AttackOnDen_Mule2_c43646f4-733a-35b5-1d61-5e942244b52c);
DB_DEN_NPC(S_DEN_Trainee_001_1f839ad2-2bcb-47d2-8de9-db7a1fb5d67f, "Hideout", DEN_AttackOnDen_Trainee001_10b2c360-27e4-f635-6373-b39505d92724);
DB_DEN_NPC(S_DEN_Trainee_002_bd7f31a6-98e8-46cd-97be-4347fa45d387, "Hideout", DEN_AttackOnDen_Trainee002_d4be82cd-6000-62bc-34db-18d21ad6d8ab);
DB_DEN_NPC(S_DEN_Trainee_003_71bdc11d-b488-427d-8453-632e91178c7e, "Hideout", DEN_AttackOnDen_Trainee003_6d8c7247-57c8-fb3e-a2d7-77b0ec990125);
DB_DEN_NPC(S_DEN_SnakeKid_02257c1c-bbec-4ae3-9bcb-31c75a0a982f, "", DEN_AttackOnDen_SnakeKid_1d800272-037e-6143-c939-07f2a1dfcc2e);
DB_DEN_NPC(S_DEN_ParentA_d6d88c8b-6ba7-4350-b3b3-d60565a44e90, "Defenseless", DEN_AttackOnDen_ParentA_13b0ba44-91cc-6b73-4ecf-5646a487e0fb);
DB_DEN_NPC(S_DEN_ParentB_397467d4-1631-447b-a505-d44275dca78e, "Defenseless", DEN_AttackOnDen_ParentB_ccf5f962-c2a6-c07b-0286-9e06d325ebfa);
DB_DEN_NPC(S_DEN_Protester_001_bd673fe3-983d-4aee-b73b-6ba6217e8a20, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_Protester_002_5ba86ab9-b36e-468a-a0ac-0439c0ec205a, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_Protester_003_650d1cdc-fff6-49f0-aaa2-0a10bcf89abf, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_BardSquirrel2_73f18550-4755-4e3c-9326-c328d34478af, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_BardSquirrel_efc0ba71-b3fa-4bb5-8a38-10bd0dd8b923, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_SenderBird_bf90aa40-232b-40fd-a43e-699bb964e337, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_Rat_b61c2b37-da0d-47ad-ba9f-a4f8230f3b53, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_ZenBear_d4d4bfd2-9639-45bc-a256-2f079e53db29, "Lair Offstage", DEN_AttackOnDen_ZenBear_be1b72da-c332-e222-711a-71544822f78a);
DB_DEN_NPC(S_DEN_ExcitedBoar_5e856a8e-957a-49b1-8ec7-f430984e08ca, "Lair Offstage", DEN_AttackOnDen_Pet004_7c0060e2-eb4c-e697-ac8a-5688f3478393);
DB_DEN_NPC(S_DEN_PetWolf_63471e30-7413-4496-97de-0bdf67c2f753, "Lair", DEN_AttackOnDen_Pet002_f9c99bbd-0f6c-4baf-935e-fd80e1d3b29f);
DB_DEN_NPC(S_DEN_ElevatorBear_04b7ef23-1002-4682-b962-33a2328bcd5c, "Lair Offstage", DEN_AttackOnDen_ElevatorBear_b749e5ea-1e70-813f-ef27-8d30dee5d5c6);
DB_DEN_NPC(S_DEN_VoloBear_893c5f40-a760-4b04-bd86-c8fb8f5dd08a, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_PetBird_72bd7f25-0644-4323-a428-85ba5630e6ea, "", DEN_AttackOnDen_Pet003_c1b8f65a-c77d-9c11-f2cd-09a6dc2e10d7);
DB_DEN_NPC(S_DEN_WoundedBird_200bc56e-f3e1-445b-8b75-a5ddb541e123, "", DEN_Apprentice_HealedBird_76eae63c-b4b4-e39c-01bd-9a60e739ee98);
DB_DEN_NPC(S_DEN_Apprentice_7cabf226-e34b-4556-8903-a45d0fe26caf, "Lair", DEN_AttackOnDen_Apprentice_6ef96b2d-b548-2a4e-bc8a-94f52a50adc4);
DB_DEN_NPC(S_DEN_DruidLeader_95eb2b0b-a522-4ea5-8167-c5f4d1418156, "Lair", DEN_AttackOnDen_DruidLeader_3d7eb0a1-4b24-0851-e82e-65f580b44918);
DB_DEN_NPC(S_DEN_DruidOpposed_322cf8d2-32ee-453f-987e-f12b32652b5d, "Lair", DEN_AttackOnDen_DruidOpposed_944ed88d-50e2-80ec-a7ba-fee24a63e6fc);
DB_DEN_NPC(S_DEN_ServantIntolerant_002_6f36c7a1-edfd-4e99-bd90-6d874f68c9b8, "Lair", DEN_AttackOnDen_Servant002_a26efdf1-4eba-d7dc-f335-b585a530c2da);
DB_DEN_NPC(S_DEN_ServantGnome_003_0d971a2f-5fd7-4358-8966-147ed8b106dd, "Lair Offstage", DEN_AttackOnDen_Servant003_9e9476bb-10da-5350-58d7-e41bab7eed74);
DB_DEN_NPC(S_DEN_DruidGuard_001_d1de6b4d-02d1-47f9-8e9e-55a593e3dc71, "Lair Offstage", DEN_AttackOnDen_DruidGuard001_aecb85ac-19f4-26ed-b68c-b569ca7ae956);
DB_DEN_NPC(S_DEN_DruidGuard_002_8e2433db-55e9-4d03-a8fc-f8d02711907c, "Lair Offstage", DEN_AttackOnDen_DruidGuard002_9f1f59be-d68c-2f6e-7db9-81f6ec7ff9c3);
DB_DEN_NPC(S_DEN_DruidGuard_003_b888b138-951a-4092-b356-333b4b65123d, "Lair Offstage", DEN_AttackOnDen_DruidGuard003_98960ec1-b905-38bc-7953-587c171ebd60);
DB_DEN_NPC(S_DEN_RitualDruid_001_9c5c4c89-890b-4e72-8698-53d36e6b4271, "Lair Offstage", DEN_AttackOnDen_RitualDruid001_222e80a6-069e-99e6-c6cf-6a8fe8f04003);
DB_DEN_NPC(S_DEN_RitualDruid_002_96e41e71-9239-498b-9cb8-8b14fd48acd0, "Lair Offstage", DEN_AttackOnDen_RitualDruid002_46986a27-9ac8-f286-ee0a-08e989b6e8dd);
DB_DEN_NPC(S_DEN_RitualDruid_003_7cae8e24-d610-4229-859d-7b2da7c5d162, "Lair Offstage", DEN_AttackOnDen_RitualDruid003_e2a09613-bc78-761c-db80-2e25a68d7764);
DB_DEN_NPC(S_DEN_RitualDruid_004_32bef45a-47ca-4c3a-b907-13a857b316fd, "Lair Offstage", DEN_AttackOnDen_Servant004_2b10cdf6-f82b-10f1-42cd-aeb67ac016a9);
DB_DEN_NPC(S_DEN_RitualDruid_005_641fc4b5-3c42-4c4d-a759-541ad437f9df, "Lair Offstage", DEN_AttackOnDen_RitualDruid005_947b669f-bdc1-1cd8-5974-69545d8e9d9a);
DB_DEN_NPC(S_DEN_BirdSender_30ee2bc0-0e69-4999-8d1c-8335c439cecf, "Lair Offstage", DEN_AttackOnDen_BirdSender_2c923c42-bfa2-1acc-c4f1-e2471f34f540);
DB_DEN_NPC(S_DEN_ServantPlight_005_13db744d-8a48-4131-8801-fd5fc289fdf6, "Lair", DEN_AttackOnDen_Servant005_46ba4d8a-93b4-3a68-3182-b34ae3c6e458);
DB_DEN_NPC(S_DEN_ScoutCaptive_f5b5819f-1636-4f2e-82bb-709522cc399f, "Lair Offstage", DEN_AttackOnDen_ScoutCaptive_7f1deb2e-fedc-d5b0-614c-5c0f0264c044);
DB_DEN_NPC(S_DEN_ShadowDruid_003_53b08334-9f79-4bb5-b580-2662355d54ad, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_ShadowDruid_002_0820c093-f400-4efc-95b9-a6d08a58cac9, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_ShadowDruid_003_53b08334-9f79-4bb5-b580-2662355d54ad, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_DEN_Snake_001_af2ff867-467e-4765-a66c-fed091af4a09, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_GLO_Prodigy_b6a3a9e9-b6eb-4c19-ab3f-4c431178fe1b, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_GLO_ProdigyBrother_d0187724-c0e2-4019-a01d-a03ee8153f1b, "", NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_NPC(S_GLO_ProdigySister_44d09b0b-0568-456c-b18d-559a0a3f981d, "", NULL_00000000-0000-0000-0000-000000000000);
PROC_DeclareCounter("DEN_MissingTieflings");
DB_DEN_Misc_TieflingCountTreshold(21);
DB_Children(S_DEN_Trainee_001_1f839ad2-2bcb-47d2-8de9-db7a1fb5d67f);
DB_Children(S_DEN_Trainee_002_bd7f31a6-98e8-46cd-97be-4347fa45d387);
DB_Children(S_DEN_Trainee_003_71bdc11d-b488-427d-8453-632e91178c7e);
DB_Dialogs(S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, DEN_General_Squirrel_910734d1-dfb8-2aaf-2913-e15466181f73);
DB_Dialogs(S_DEN_Rat_b61c2b37-da0d-47ad-ba9f-a4f8230f3b53, DEN_General_Rat_1e8b2638-5cbe-d1f1-83f6-3c345067368c);
DB_Dialogs(S_DEN_Tiefling_001_82f8662d-76da-4352-b37e-01ba433b5d43, DEN_General_Tiefling001_96b1d6bb-5dde-cec2-4cfa-68eb3b56a3d1);
DB_Dialogs(S_DEN_Weaponsmith_e2ad06ec-8034-479a-9f69-b86faea6dc79, DEN_Weaponsmith_PostEA_f2e19bab-4804-9a49-c7ee-0a190f1fcafd);
DB_Dialogs(S_DEN_Tiefling_010_23129d6c-8d39-4a4c-a4f6-cfc6637b597c, DEN_General_TieflingGuard10_d43304e2-1268-7715-0d15-e28e52108970);
DB_Dialogs(S_DEN_TieflingRefugee_001_637d8d68-2a04-409e-a77d-cf31ac9478ee, DEN_General_Refugee1_4ea9a8e7-fc6f-8ace-aae4-e1f6768b51b3);
DB_Dialogs(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, DEN_General_YoungLover_1_e9c0afe0-919f-e0c4-63e6-0f2dbb25da99);
DB_Dialogs(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, DEN_General_YoungLover_2_5749ab40-51da-b8c0-6105-2f5f89d55f12);
DB_Dialogs(S_DEN_TieflingRefugee_004_bc4c4282-86b0-4330-9df8-246ed0a704a2, DEN_General_Refugee4_a92b2d89-dd62-103b-1b0f-7342667c76f9);
DB_Dialogs(S_DEN_GruntingKid_0f8ef61e-cb63-49e1-a242-677173bff5e0, DEN_General_GruntingKid_37a3539d-3d6a-111b-8a76-283e6915248f);
DB_Dialogs(S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f, DEN_General_TieflingGuard11_5285ea7c-7994-ba01-02c7-fa05017342ee);
DB_Dialogs(S_DEN_Tiefling_003_1b35671b-e5d7-4943-bbd0-4c816b69b7cb, DEN_General_RefugeeChef_2a4f00f2-fbfe-93cd-119e-13a6e72582c8);
DB_Dialogs(S_DEN_Tiefling_005_e5319db6-ea86-43cc-9fd0-5ec1e0eab492, DEN_General_TieflingGuard5_7d3ed8cb-6b82-ccdf-3030-9f97de65b219);
DB_Dialogs(S_DEN_Tiefling_004_c9562174-44af-4ffa-9e5e-da58538f23d8, DEN_General_TieflingGuard4_c36dc228-1cfc-15ab-18d6-bb75d807b73b);
DB_PermaDefeatedEvent(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, DEN_YoungLover01_State_PermaDefeated_6990edd2-07b4-4e40-bbcc-776385c4060f);
DB_PermaDefeatedEvent(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, DEN_YoungLover02_State_PermaDefeated_caa0d96e-1ea6-4c64-88d3-cbc1e1dbf165);
DB_PermaDefeatedEvent(S_GLO_IrritatedTiefling_65ad9da0-0efb-4cc3-bf82-c006f43dda6c, DEN_IrritatedTiefling_State_PermaDefeated_a0ee8b73-370a-45e8-aa89-13c71e408393);
DB_DEN_YoungLovers(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c);
DB_DEN_YoungLovers(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68);
DB_Dialogs(S_GLO_IrritatedTiefling_65ad9da0-0efb-4cc3-bf82-c006f43dda6c, DEN_IrritatedTiefling_5b0bd225-2326-0794-7a25-ef56cb3c26f0);
DB_HasItemEvent(S_DEN_IrritatedReward_c79f5527-afd4-4a2b-9b73-0867c832e5ef, DEN_IrritatedTiefling_State_HasReward_4fa6bc00-978e-b1f5-cfaf-dcb7e0cf0529);
DB_GiveItemToEvent(S_DEN_IrritatedReward_c79f5527-afd4-4a2b-9b73-0867c832e5ef, DEN_IrritatedTiefling_Event_GiveReward_6f11ac41-9b28-2ab9-e4c1-7b03aaa4f026);
DB_ItemDialog_NarratorAD(S_DEN_EntranceStatuePlaque_312fa4ca-3e79-4c1d-9a58-b250f091a7c6, DEN_General_PAD_EntranceStatue_1fe57424-412d-99bb-8782-b50ff4747c23);
DB_ItemDialog_NarratorAD(S_DEN_ElkStatuePlaque_d5d55588-58c9-4e85-8e11-26331138a85b, DEN_General_PAD_ElkStatue_7c1445d7-037e-caf8-5aee-0b99cd33cc04);
DB_ItemDialog_NarratorAD(S_DEN_BearStatuePlaque_3f4f1540-4e74-438c-9f78-0d2f9598e8fb, DEN_General_PAD_BearStatue_d3a0737e-3f7c-86f1-8557-0e92af33268d);
DB_ItemDialog_NarratorAD(S_DEN_WolfStatuePlaque_55934158-520d-4ef0-b8ea-3e11f552f0b3, DEN_General_PAD_WolfStatue_86c9c2b5-92a3-5375-4c0f-41a7e12db177);
PROC_TriggerRegisterForPlayers(S_DEN_BugbearNinjaActivateArea_3112588e-833d-4f11-82e5-e2ac4547560d);
SetOnStage(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, 0);
DB_SceneManager(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, "DEN_BugbearScout_Ambush");
DB_SceneManager(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, "DEN_BugbearScout_Ambush");
DB_IgnoreAssault(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523);
DB_Dialogs(S_DEN_ElevatorBear_04b7ef23-1002-4682-b962-33a2328bcd5c, DEN_General_ElevatorBear_16b75a3b-b278-37b3-9a03-11e9c5acf59f);
DB_GLO_SleepingDialog(DEN_General_ElevatorBear_16b75a3b-b278-37b3-9a03-11e9c5acf59f);
DB_GLO_SleepingDialog(DEN_AttackOnDen_ElevatorBear_b749e5ea-1e70-813f-ef27-8d30dee5d5c6);
TriggerRegisterForCharacter(DEN_BearElevatorArea_5b6e4f15-6005-41fd-80ac-6cdbb6a7ed40, S_DEN_ElevatorBear_04b7ef23-1002-4682-b962-33a2328bcd5c);
DB_DEN_General_ElevatorLevers(S_PLT_DEN_ElevatorLever_66e3c440-2f6b-8cd3-4860-e24e0548298d);
DB_DEN_General_ElevatorLevers(S_DEN_ElevatorUpLever_368d2417-96f6-4cd2-a173-66c02a772f71);
DB_DEN_General_ElevatorLevers(S_DEN_ElevatorDownLever_13ea5ac4-e2a2-469e-a86c-3bc4eb6e47ff);
DB_DEN_ElevatorPosition(1);
DB_DEN_ElevatorPoints(1, S_DEN_ElevatorUpPoint_93fc052f-c8d2-405a-905c-7309aad5e859);
DB_DEN_ElevatorPoints(0, S_DEN_ElevatorDownPoint_b51aad68-b37c-47b4-bf62-93a9329bfa28);
DB_DEN_AdventurerOwnership(S_DEN_AdventurerLeader_82d1b843-9e8c-48a5-9d87-caddea5c193c, 1);
DB_DEN_AdventurerOwnership(S_DEN_RobbedAdventurer_534bceaf-678c-40a0-8ca9-e1134f95ba0d, 0);
DB_DEN_AdventurerOwnership(S_DEN_RaidAdventurer_4faf77a0-b883-4f7b-acbf-4500973f446d, 0);
DB_DialogMoneyTransfer(1, DEN_General_TieflingGuard10_d43304e2-1268-7715-0d15-e28e52108970, 10);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_DruidGuard_001_d1de6b4d-02d1-47f9-8e9e-55a593e3dc71, S_DEN_GatekeeperPos_12e49637-70dc-4b9f-b1a5-942a2c534314);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_DruidGuard_002_8e2433db-55e9-4d03-a8fc-f8d02711907c, S_DEN_DruidGuardPoint_002_RitualStopped_61a8e270-d37a-46ca-aba0-29545397f39b);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_DruidGuard_003_b888b138-951a-4092-b356-333b4b65123d, S_DEN_AttackOnDruidsPos_018_96eea6fa-1b45-47e3-9c95-16b3b0ce48de);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_RitualDruid_001_9c5c4c89-890b-4e72-8698-53d36e6b4271, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_RitualDruid_002_96e41e71-9239-498b-9cb8-8b14fd48acd0, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_RitualDruid_003_7cae8e24-d610-4229-859d-7b2da7c5d162, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_RitualDruid_004_32bef45a-47ca-4c3a-b907-13a857b316fd, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_RitualDruid_005_641fc4b5-3c42-4c4d-a759-541ad437f9df, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_ServantGnome_003_0d971a2f-5fd7-4358-8966-147ed8b106dd, S_DEN_RobberKid_SeatTrigger_0da18fb6-f5d2-452e-b917-74493bc6b9df);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_ServantPlight_005_13db744d-8a48-4131-8801-fd5fc289fdf6, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_DruidLeader_95eb2b0b-a522-4ea5-8167-c5f4d1418156, S_DEN_DruidLeader_OverwatchPoint_8b4a5c18-e599-4d52-9bb6-8e73da6bd3a3);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_ServantIntolerant_002_6f36c7a1-edfd-4e99-bd90-6d874f68c9b8, S_DEN_AdventurerArea_002_963c5af9-111d-4325-a17b-b555449d3f38);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_ScoutCaptive_f5b5819f-1636-4f2e-82bb-709522cc399f, S_DEN_LeaderKidAttackPos_bc52ba5f-4fef-493d-908a-e2ac2303d950);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_Apprentice_7cabf226-e34b-4556-8903-a45d0fe26caf, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_DruidOpposed_322cf8d2-32ee-453f-987e-f12b32652b5d, S_DEN_OpposedPoint_845d3860-5756-44b0-b6f3-1f2ebe31a7a5);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_BirdSender_30ee2bc0-0e69-4999-8d1c-8335c439cecf, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_VoloBear_893c5f40-a760-4b04-bd86-c8fb8f5dd08a, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_ZenBear_d4d4bfd2-9639-45bc-a256-2f079e53db29, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_ExcitedBoar_5e856a8e-957a-49b1-8ec7-f430984e08ca, S_DEN_ExcitedBoar_TeleportPos_712ab32c-e72f-4287-ad1b-0de01db1e96f);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_ElevatorBear_04b7ef23-1002-4682-b962-33a2328bcd5c, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_PetWolf_63471e30-7413-4496-97de-0bdf67c2f753, S_DEN_WolfSitPoint_f39b7717-50d9-4c35-9db6-b2e493ce1c0e);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_Rat_b61c2b37-da0d-47ad-ba9f-a4f8230f3b53, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, TeleportTrigger_012_3612bd97-71ea-4a3d-bdad-b10cb05f12e7);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_PetBird_72bd7f25-0644-4323-a428-85ba5630e6ea, NULL_00000000-0000-0000-0000-000000000000);
DB_DEN_TieflingsGone_GroveNPCs(S_DEN_WoundedBird_200bc56e-f3e1-445b-8b75-a5ddb541e123, NULL_00000000-0000-0000-0000-000000000000);
PROC_RegisterWorldGossipTrigger(S_PartyBanterTrigger_FOR_ForestBridgeCleared_ae5e7879-d579-419b-8317-fe2e7a32457a);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_TieflingLeader_475200ee-cc3c-4dbe-84b1-1820c02ea26a, S_DEN_TieflingCorpse_001_39afbc4f-9e70-4d87-b35f-289f4c884952);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Trainer_02025646-347a-4235-aef7-e46b7c94b435, S_DEN_TieflingCorpse_002_4bba15c5-73a1-4e65-839e-69c6abb12127);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Gatekeeper_847717b3-82eb-45a7-b875-78665c12ce9a, S_DEN_TieflingCorpse_003_0e18ae14-b6f3-4108-b44a-976d683e331a);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_TieflingRefugee_RangerTrader_001_637d8d68-2a04-409e-a77d-cf31ac9478ee, S_DEN_TieflingCorpse_004_919e1b8e-f45f-4084-8c52-7e1d426c7313);
DB_FOR_SlaughteredTieflingTriggers(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, S_DEN_TieflingCorpse_005_fdfb93fd-a248-4e6a-8c38-aa906fbd6bc2);
DB_FOR_SlaughteredTieflingTriggers(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, S_DEN_TieflingCorpse_006_6f8a265d-50da-4335-8af9-7cae10a7a164);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_TieflingRefugee_004_bc4c4282-86b0-4330-9df8-246ed0a704a2, S_DEN_TieflingCorpse_007_66a66508-c5de-4c9d-92e1-f519c81f7216);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_PrisonGuard_3ff71f38-28e9-4e72-ba17-9f6d3bb2a995, S_DEN_TieflingCorpse_008_fc45f559-559a-43a6-af2f-fde3a58df615);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Griefling_7ce0afc2-e8f2-4f2e-82d8-27df98acc3d8, S_DEN_TieflingCorpse_009_11f8228e-d6b0-42b5-8c9a-509b64d241a7);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_GrieflingFriend_c3334ee5-38dc-4197-aacc-4aa55803ff52, S_DEN_TieflingCorpse_010_5668847b-1e67-4cd6-8523-6107c81f2e3d);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Tiefling_005_e5319db6-ea86-43cc-9fd0-5ec1e0eab492, S_DEN_TieflingCorpse_011_14d45a39-e943-4218-8c8b-f7928137b671);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Tiefling_010_23129d6c-8d39-4a4c-a4f6-cfc6637b597c, S_DEN_TieflingCorpse_012_e5a3a694-ab6a-4043-a3b3-8a0b807003b2);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Tiefling_001_82f8662d-76da-4352-b37e-01ba433b5d43, S_DEN_TieflingCorpse_013_b93cd751-4b2e-4c93-9c33-dc7df38dfbbd);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Tiefling_FoodTrader_001_1b35671b-e5d7-4943-bbd0-4c816b69b7cb, S_DEN_TieflingCorpse_014_eea3a51b-dddb-4fe4-99da-a0c6a512dcc6);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Tiefling_004_c9562174-44af-4ffa-9e5e-da58538f23d8, S_DEN_TieflingCorpse_015_5e98eee1-78b2-45b2-a6c7-849e676133ac);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Weaponsmith_e2ad06ec-8034-479a-9f69-b86faea6dc79, S_DEN_TieflingCorpse_016_f5166da8-58ae-4ed2-a058-5f6182f1b0be);
DB_FOR_SlaughteredTieflingTriggers(S_GLO_IrritatedTiefling_65ad9da0-0efb-4cc3-bf82-c006f43dda6c, S_DEN_TieflingCorpse_017_26646cea-c8c1-40ef-adda-931fba1dbb60);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Tiefling_008_03b6fae4-d250-4ce9-9a01-19cb427deb17, S_DEN_TieflingCorpse_018_4dec82f3-5ce6-4dd9-99f2-82f4505e5a58);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Tiefling_011_77439e86-3f60-4456-bd55-931e2f45654f, S_DEN_TieflingCorpse_019_371c345f-8bcb-440e-bbe3-234ac706e2bf);
DB_FOR_SlaughteredTieflingTriggers(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, S_DEN_TieflingCorpse_020_e01498b3-3e73-46ed-bd9b-6547358ddcba);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Bard_4a405fba-3000-4c63-97e5-a8001ebb883c, S_DEN_TieflingCorpse_021_bb81133c-600d-489d-9d3e-69778ad1733e);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Pickpocket_540ddc1f-42c6-4347-ba03-b3cf3d3942ab, S_DEN_TieflingCorpse_022_21b1bf5e-a978-45a2-b849-adbf5d72b591);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_TieflingKid_004_6644185d-385e-4dfc-973c-bb854cbfd540, S_DEN_TieflingCorpse_023_c1e7734a-f04b-4568-9868-9a6eb1cbeedb);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Trainee_001_1f839ad2-2bcb-47d2-8de9-db7a1fb5d67f, S_DEN_TieflingCorpse_024_ad1b5dcc-44ee-4b5f-b2ad-5d58d579225e);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Trainee_002_bd7f31a6-98e8-46cd-97be-4347fa45d387, S_DEN_TieflingCorpse_025_32c6614d-60ef-4b1b-b04f-4967f8c4d7e6);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Trainee_003_71bdc11d-b488-427d-8453-632e91178c7e, S_DEN_TieflingCorpse_026_ac3d3640-0136-42b5-ba02-f77415bded83);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_ParentA_d6d88c8b-6ba7-4350-b3b3-d60565a44e90, S_DEN_TieflingCorpse_027_88f7f001-fe73-46d7-a3e9-503c67f16cb1);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_ParentB_397467d4-1631-447b-a505-d44275dca78e, S_DEN_TieflingCorpse_028_3e5fdad1-fb56-46f6-95b4-2ca4afcd75a4);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Protester_001_bd673fe3-983d-4aee-b73b-6ba6217e8a20, S_DEN_TieflingCorpse_029_e77b6e00-8b57-4272-965b-360634fc642b);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Protester_002_5ba86ab9-b36e-468a-a0ac-0439c0ec205a, S_DEN_TieflingCorpse_030_799f01da-5dfa-4f66-a4a1-35de2d995fdd);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_Protester_003_650d1cdc-fff6-49f0-aaa2-0a10bcf89abf, S_DEN_TieflingCorpse_031_61bf8244-240a-4b61-bd6e-c838bb6b50d7);
DB_FOR_SlaughteredTieflingTriggers(S_GLO_Prodigy_b6a3a9e9-b6eb-4c19-ab3f-4c431178fe1b, S_DEN_TieflingCorpse_032_356eb227-bcc7-49f9-8d23-7d6992817f56);
DB_FOR_SlaughteredTieflingTriggers(S_GLO_ProdigyBrother_d0187724-c0e2-4019-a01d-a03ee8153f1b, S_DEN_TieflingCorpse_033_73be3827-987d-4fc6-96a2-42de71ab4492);
DB_FOR_SlaughteredTieflingTriggers(S_GLO_ProdigySister_44d09b0b-0568-456c-b18d-559a0a3f981d, S_DEN_TieflingCorpse_034_78c9d576-bbb8-48f2-8b4f-7979f10e2a6a);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_ThiefHideoutLeader_c8ab1ca6-96bb-467e-91c9-af87bc4d3925, S_DEN_TieflingCorpse_035_0dcd3468-2711-4f09-94d7-cb3c915fdcda);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_SnakeKid_02257c1c-bbec-4ae3-9bcb-31c75a0a982f, S_DEN_TieflingCorpse_036_8dbe1cf8-3371-4e8d-ace2-ecba5d1dbf32);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_PickpocketTrader_e1fda08b-45d4-41db-84b5-20e9931ba5af, S_DEN_TieflingCorpse_037_6fe49745-9b23-4dcd-adb6-f2fa9bfed568);
DB_FOR_SlaughteredTieflingTriggers(S_GLO_GruntingKid_0f8ef61e-cb63-49e1-a242-677173bff5e0, S_DEN_TieflingCorpse_038_8da94198-aecb-4610-a995-8378b88eadbd);
DB_FOR_SlaughteredTieflingTriggers(S_DEN_RobberKid_94e865e9-790d-4633-a378-8fb50832b5e9, S_DEN_TieflingCorpse_039_d4b3e3d3-2e12-40df-9fa7-fa63e9b2ae69);
DB_DEN_ProtectedChildren(S_DEN_ThiefHideoutLeader_c8ab1ca6-96bb-467e-91c9-af87bc4d3925);
DB_DEN_ProtectedChildren(S_DEN_SnakeKid_02257c1c-bbec-4ae3-9bcb-31c75a0a982f);
DB_DEN_ProtectedChildren(S_DEN_PickpocketTrader_e1fda08b-45d4-41db-84b5-20e9931ba5af);
DB_DEN_ProtectedChildren(S_GLO_GruntingKid_0f8ef61e-cb63-49e1-a242-677173bff5e0);
DB_DEN_ProtectedChildren(S_DEN_RobberKid_94e865e9-790d-4633-a378-8fb50832b5e9);
DB_TopicalGreeting(TG_DEN_Entered_aed4b025-f290-4ec5-b8f1-34b0b9b56576);
DB_TopicalGreetingEndCondition_FlagSet(TG_DEN_Entered_aed4b025-f290-4ec5-b8f1-34b0b9b56576, DEN_General_Event_AllPlayersLeftGroveOnce_57e4753f-ce94-4592-b877-4a64c9914008);

KBSECTION
IF
EnteredTrigger((GUIDSTRING)_Var1, S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(DEN_General_State_Entered_26b2dc6a-e5eb-4d99-a4bd-3ecaa3b86a9e, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(DEN_General_State_Entered_26b2dc6a-e5eb-4d99-a4bd-3ecaa3b86a9e, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
EnteredTrigger((GUIDSTRING)_Var1, S_DEN_Cave_SUB_adecafa4-27c6-4b2f-bf9e-6ffd7c81a766, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(DEN_General_State_EnteredCave_186c7091-f2ad-4c76-98f2-898202afc0d3, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(DEN_General_State_EnteredCave_186c7091-f2ad-4c76-98f2-898202afc0d3, NULL_00000000-0000-0000-0000-000000000000, 0);

QRY
QRY_DEN_IsInDen((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_DEN_IsInDen(_Var1, 1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_DEN_IsInDen((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_DEN_IsInDen(_Var1, 0, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_DEN_IsInDen((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_DEN_IsInDen(_Var1, _Var2, NULL_00000000-0000-0000-0000-000000000000, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_DEN_IsInDen((GUIDSTRING)_Var1, 1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DEN_InDenTriggers(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 != _Var2
AND
DB_InRegion(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_DEN_IsInDen((GUIDSTRING)_Var1, 0, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DEN_InDenTriggers(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 != _Var2
AND
IsInTrigger(_Var1, _Var3, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_DEN_IsInDen((CHARACTER)_Var1, 1, (TRIGGER)_Var2, (TRIGGER)_Var3, (CHARACTER)_Var1)
AND
DB_DEN_InDenTriggers(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
_Var4 != _Var2
AND
_Var4 != _Var3
AND
DB_InRegion(_Var1, _Var4, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_DEN_IsInDen((CHARACTER)_Var1, 0, (TRIGGER)_Var2, (TRIGGER)_Var3, (CHARACTER)_Var1)
AND
DB_DEN_InDenTriggers(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
_Var4 != _Var2
AND
_Var4 != _Var3
AND
IsInTrigger(_Var1, _Var4, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_DEN_AnyPlayerInDen()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_DEN_IsInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
EnteredTrigger((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DEN_InDenTriggers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsPlayer(_Var1, 1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_DEN_PlayerInDen(_Var1);
SetFlag(DEN_General_State_PlayerInDen_392262e7-4918-475e-9a13-65627400859d, _Var1);

IF
LeftTrigger((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DEN_InDenTriggers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsPlayer(_Var1, 1, _Var1, _Var1, _Var1)
AND NOT
QRY_DEN_IsInDen(_Var1, 0, _Var2, _Var1, _Var1)
THEN
NOT DB_DEN_PlayerInDen(_Var1);
PROC_DEN_PlayerLeftDen(_Var1);

IF
CharacterJoinedParty((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_DEN_IsInDen(_Var1, 1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_DEN_PlayerInDen(_Var1);

IF
CharacterLeftParty((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_DEN_IsInDen(_Var1, 1, _Var1, _Var1, _Var1)
AND
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_DEN_PlayerInDen(_Var1);
PROC_DEN_PlayerLeftDen(_Var1);

PROC
PROC_DEN_PlayerLeftDen((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_DEN_PlayerInDen(_, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DEN_AllPlayersLeftDen();

PROC
PROC_DEN_PlayerLeftDen((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
ClearFlag(DEN_General_State_PlayerInDen_392262e7-4918-475e-9a13-65627400859d, _Var1);

IF
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_DEN_PlayerInDen(_Var1);

IF
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
AND
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_DEN_OngoingGroveCombat(_Var1);

IF
DB_DEN_OngoingGroveCombat(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
THEN
NOT DB_DEN_OngoingGroveCombat(_Var1);

IF
DB_DEN_OngoingGroveCombat(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_DEN_OngoingGroveCombat(_Var1);

IF
DB_DEN_InDenTriggers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WorldGossip_RegionTrigger(_Var1, BANTERREGION_Den_b89a1ac0-6800-48a3-ba35-0b607efe914e, _Var1, _Var1, _Var1)
THEN
DB_WorldGossip_RegionTrigger(_Var1, BANTERREGION_Den_b89a1ac0-6800-48a3-ba35-0b607efe914e);

IF
DB_DEN_NPC(_Var1, _, _, _Var1, _Var1)
THEN
DB_DEN_NPCIsOrWasInDen(_Var1);

PROC
PROC_DEN_GroveRefugeesEmptied()
AND
QRY_OnlyOnce("DEN_GroveEmptiedPartyBanterTrigger", _, _, _, _)
THEN
PROC_RegisterWorldGossipTrigger(S_PartyBanterTrigger_DEN_CaveCleared_6e769be6-3a1c-48c6-9bec-ccfe48d6facb);
PROC_RegisterWorldGossipTrigger(S_PartyBanterTrigger_DEN_VistaCleared_1f8b62d5-ee43-4003-bfc6-38087d2b1b92);
PROC_RegisterWorldGossipTrigger(S_PartyBanterTrigger_DEN_HillsCleared_f356dcf1-3c03-43af-b17b-07b9275e47f1);

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_DEN_FinalStates(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_Final");

QRY
QRY_DEN_CheckPeaceState()
AND
DB_State_Current(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", _Var1, _Var1, _Var1)
AND
DB_DEN_DefaultStates(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_DEN_CheckBeforeState((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", _Var1, _Var2, _Var1)
AND
DB_State_Current(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", _Var3, _Var1, _Var1)
AND
DB_State_Priority(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", _Var3, _Var4, _Var1)
AND
_Var4 < _Var2
THEN
DB_NOOP(1);

PROC
PROC_DEN_ForceStopDialogAllDenPlayers()
AND
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_ForceStopDialog(_Var1);

IF
FlagSet(DEN_General_Squirrel_PCPunchedSquirrel_00e726da-7014-4b80-8a70-364172442fe8, _, _, _, _)
AND
DB_DialogNPCs(_Var3, S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, _, _, _)
AND
DialogRemoveActorFromDialog(_Var3, S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, _, _, _)
THEN
Die(S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1);

IF
DB_GlobalFlag(DEN_TieflingRefugees_State_LeftDen_003b304b-f058-4f8a-b9fa-a097e1b6b395, _, _, _, _)
AND NOT
DB_Sees(_, S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, _, _, _)
AND NOT
DB_Defeated(S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, _, _, _, _)
THEN
SetOnStage(S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, 1);
TeleportTo(S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, S_DEN_SafeEntryPos_3612bd97-71ea-4a3d-bdad-b10cb05f12e7);

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND NOT
DB_DEN_DefaultStates(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DisappearOutOfSight(S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, "Run", 0, "");

IF
FlagSet(DEN_General_Squirrel_MadeFriends_d229cc26-22bc-d9ff-09fc-0554b2975699, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_PermaDefeated(S_DEN_Squirrel_35ed8eab-1e0b-4ec8-92f2-1b8510cb3ad8, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "HIDDEN_WLD_Rewards", "DEN_Squirrel_Reward");

IF
DB_GlobalFlag(DEN_RaidingParty_Quest_ConfrontationResolved_dc97da68-5ed9-ffe2-7582-2533be0efbcd, _, _, _, _)
AND NOT
DB_GlobalFlag(GLO_AttackOnDen_State_RaidReady_eb361773-da88-dee4-f4c8-a22acae60948, _, _, _, _)
AND NOT
QRY_DEN_GreetingReactorsCheck()
AND
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_GreetingReaction_Player(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DEN_GreetingReaction_Register(_Var1);

QRY
QRY_DEN_GreetingReactorsCheck()
AND NOT
DB_DEN_GreetingReaction(_, _, _, _, _)
THEN
DB_NOOP(1);

IF
DB_DEN_GreetingReaction_Player(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DEN_GreetingReaction_Stop(_Var1);

IF
DB_DEN_GreetingReaction_Player(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DEN_GreetingReaction_Stop(_Var1);

PROC
PROC_DEN_GreetingReaction_Register((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_GreetingReaction_Player(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_DEN_PlayerInDen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_DEN_GreetingReaction_Player(_Var1);
PROC_CharacterRegisterCrime(_Var1, "DEN_GreetingAD", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, 0);

PROC
PROC_DEN_GreetingReaction_Stop((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
NOT DB_DEN_GreetingReaction_Player(_Var1);
CharacterStopCrime(_Var1, "DEN_GreetingAD", NULL_00000000-0000-0000-0000-000000000000);

IF
CharacterOnCrimeSensibleActionNotification((GUIDSTRING)_Var1, (STRING)_Var2, (INTEGER)_Var3, (STRING)_Var4, (GUIDSTRING)_Var5, (GUIDSTRING)_Var6, (GUIDSTRING)_Var7, (GUIDSTRING)_Var8, (GUIDSTRING)_Var9, 1)
AND
DB_DEN_GreetingReaction(_Var1, _, _Var1, _Var1, _Var1)
AND
CrimeGetType(_Var3, "DEN_GreetingAD", _Var1, _Var1, _Var1)
THEN
PROC_CharacterDisableCrime(_Var1, "DEN_GreetingAD");

QRY
QRY_CrimeGetCustomWarning((GUIDSTRING)_Var1, "DEN_GreetingAD", (GUIDSTRING)_Var2, _, (GUIDSTRING)_Var1)
THEN
DB_CrimeWarning_Block(_Var1, "DEN_GreetingAD", _Var2, 1);

QRY
QRY_CrimeGetCustomWarning((GUIDSTRING)_Var1, "DEN_GreetingAD", (GUIDSTRING)_Var2, _, (GUIDSTRING)_Var1)
AND
DB_DEN_GreetingReaction(_Var1, _Var4, _Var1, _Var1, _Var1)
AND NOT
DB_DialogNPCs(_, _Var1, _, _Var1, _Var1)
AND
QRY_DEN_CheckPeaceState()
AND
QRY_StartDialog(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_CrimeSelectWarning(S_GLO_Volo_2af25a85-5b9a-4794-85d3-0bd4c4d262fa, _, _, "DEN_GreetingAD", _, (CHARACTER)_Var4, _, _, _, (STRING)_)
THEN
SetDualEntityEvent(S_GLO_Volo_2af25a85-5b9a-4794-85d3-0bd4c4d262fa, _Var4, "DEN_GreetPlayer");

IF
DialogStarted(_, (INTEGER)_Var2, _, _, _)
AND
DB_DialogNPCs(_Var2, _Var3, _, _, _)
AND
DB_DEN_GreetingReaction(_Var3, _Var5, _, _, _)
AND NOT
DB_CharacterCrimeDisabled(_Var3, "DEN_GreetingAD", _, _, _)
THEN
NOT DB_DEN_GreetingReaction(_Var3, _Var5);

IF
FlagSet(DEN_Thieflings_Event_TookGruel_e9166e18-05a7-16da-0b43-dd1ff8674e0a, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
_Var2 != 0
THEN
TemplateAddTo(f91f8f13-44d0-4fd0-8cc1-1ec08356f98a, _Var1, 1);

IF
FlagSet(DEN_Thieflings_Event_TookGruel2_cbf45767-7dac-0bdc-1f0f-8203b44798d9, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
_Var2 != 0
THEN
TemplateAddTo(f91f8f13-44d0-4fd0-8cc1-1ec08356f98a, _Var1, 1);

QRY
QRY_CrimeGetCustomWarning(S_DEN_Tiefling_FoodTrader_001_1b35671b-e5d7-4943-bbd0-4c816b69b7cb, (STRING)_Var1, _, (INTEGER)_Var3, (STRING)_Var1)
AND
QRY_CRIME_IsCrimeFamilyMember(_Var1, "BuyFromTrader", _Var1, _Var1, _Var1)
AND
CrimeGetCriminal(_Var3, 1, _Var4, _Var1, _Var1)
AND
GetFlag(DEN_Thieflings_HasMet_Chef_04aa838b-08ce-66e4-9daa-c451b2ab5857, _Var4, 1, _Var1, _Var1)
THEN
DB_CrimeWarning_CustomDialog(S_DEN_Tiefling_FoodTrader_001_1b35671b-e5d7-4943-bbd0-4c816b69b7cb, _Var3, DEN_General_RefugeeChef_2a4f00f2-fbfe-93cd-119e-13a6e72582c8);

IF
MovedFromTo((GUIDSTRING)_Var1, S_DEN_Tiefling_FoodTrader_001_1b35671b-e5d7-4943-bbd0-4c816b69b7cb, (GUIDSTRING)_Var2, 1, (GUIDSTRING)_Var1)
THEN
SetFlag(DEN_Thieflings_HasMet_Chef_04aa838b-08ce-66e4-9daa-c451b2ab5857, _Var2);
DB_ManualTradeNPC(S_DEN_Tiefling_FoodTrader_001_1b35671b-e5d7-4943-bbd0-4c816b69b7cb);
DB_PreventTradeBetween(S_DEN_Tiefling_FoodTrader_001_1b35671b-e5d7-4943-bbd0-4c816b69b7cb, _Var2);

IF
MovedFromTo((GUIDSTRING)_Var1, S_DEN_Tiefling_FoodTrader_001_1b35671b-e5d7-4943-bbd0-4c816b69b7cb, (GUIDSTRING)_Var2, 1, (GUIDSTRING)_Var1)
AND
IsTagged(_Var1, FOOD_c86e0114-a5ab-48f6-b497-de321ebff577, _Var3, _Var1, _Var1)
THEN
SetFlag(DEN_Thieflings_Event_TookGruel_e9166e18-05a7-16da-0b43-dd1ff8674e0a, _Var2);

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND NOT
DB_DEN_DefaultStates(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("DEN_General_Rat_ShackMove", _Var1, _Var1, _Var1, _Var1)
THEN
SetOnStage(S_DEN_Rat_b61c2b37-da0d-47ad-ba9f-a4f8230f3b53, 0);

IF
DialogEnded(DEN_General_Rat_1e8b2638-5cbe-d1f1-83f6-3c345067368c, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
THEN
PROC_DEN_General_Rat_Movement();

PROC
PROC_DEN_General_Rat_Movement()
AND
DB_GlobalFlag(DEN_Rat_Event_MoveToShack_47c82d69-904d-c4be-3977-bead6659cfd0, _, _, _, _)
AND
QRY_OnlyOnce("DEN_General_Rat_ShackMove", _, _, _, _)
THEN
SetHasDialog(S_DEN_Rat_b61c2b37-da0d-47ad-ba9f-a4f8230f3b53, 0);
PROC_CharacterMoveTo(S_DEN_Rat_b61c2b37-da0d-47ad-ba9f-a4f8230f3b53, S_DEN_Rat_TeleOutShack_408715a4-a94d-4453-8554-82a07a3de380, "Run", "DEN_General_Rat_EnteredShack");

PROC
PROC_DEN_General_Rat_Movement()
AND
DB_GlobalFlag(DEN_Rat_Event_EnteredPotatoCrate_0c7fa837-6030-06b8-3744-760e2660ce3b, _, _, _, _)
AND
IsInTrigger(S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, S_DEN_Storage_SUB_28361464-314c-474e-96f2-cf56a9eb8afd, 1, _, _)
AND
QRY_OnlyOnce("DEN_General_Rat_PotatoMove", _, _, _, _)
THEN
PROC_CharacterMoveTo(S_DEN_Rat_b61c2b37-da0d-47ad-ba9f-a4f8230f3b53, S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, "Run", "DEN_General_Rat_EnteredPotatoes");

IF
EntityEvent((CHARACTER)_Var1, "DEN_General_Rat_EnteredShack", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
TeleportTo(_Var1, S_DEN_Rat_TeleInShack_258dae73-20a7-430d-afeb-add848b7f71f, "", 0, 0, 0);
SetHasDialog(S_DEN_Rat_b61c2b37-da0d-47ad-ba9f-a4f8230f3b53, 1);

IF
EntityEvent(_, "DEN_General_Rat_EnteredPotatoes", (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
SetOnStage(S_DEN_Rat_b61c2b37-da0d-47ad-ba9f-a4f8230f3b53, 0);

IF
RemovedFrom(S_DEN_DruidLairKey_002_24648a3d-fc5b-4b92-86c1-4b22353e1064, S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, _, _, _)
AND
IsInTrigger(S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, S_DEN_Storage_SUB_28361464-314c-474e-96f2-cf56a9eb8afd, 1, _, _)
AND
IsInInventory(S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, 0, _, _, _)
THEN
SetFlag(DEN_Rat_Event_RemovedKey_15ec04be-720c-7390-0884-ff80aa0a167c, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
AddedTo(S_DEN_DruidLairKey_002_24648a3d-fc5b-4b92-86c1-4b22353e1064, S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, _, (STRING)_, (STRING)_)
THEN
ClearFlag(DEN_Rat_Event_RemovedKey_15ec04be-720c-7390-0884-ff80aa0a167c, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
ItemLeftTrigger(S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, S_DEN_Storage_SUB_28361464-314c-474e-96f2-cf56a9eb8afd, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(DEN_Rat_Event_RemovedKey_15ec04be-720c-7390-0884-ff80aa0a167c, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
ItemEnteredTrigger(S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, S_DEN_Storage_SUB_28361464-314c-474e-96f2-cf56a9eb8afd, _, _, _)
AND
IsInInventoryOf(S_DEN_DruidLairKey_002_24648a3d-fc5b-4b92-86c1-4b22353e1064, S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, 0, _, _)
AND
IsInInventory(S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, 0, _, _, _)
THEN
SetFlag(DEN_Rat_Event_RemovedKey_15ec04be-720c-7390-0884-ff80aa0a167c, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
RemovedFrom(S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
IsInTrigger(S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, S_DEN_Storage_SUB_28361464-314c-474e-96f2-cf56a9eb8afd, 1, _Var1, _Var1)
AND
IsInInventoryOf(S_DEN_DruidLairKey_002_24648a3d-fc5b-4b92-86c1-4b22353e1064, S_DEN_PotatoDispenser_fb5b898f-6f7b-424c-8dd0-09fb353688f2, 0, _Var1, _Var1)
THEN
SetFlag(DEN_Rat_Event_RemovedKey_15ec04be-720c-7390-0884-ff80aa0a167c, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
EnteredCombat(S_DEN_ElevatorBear_04b7ef23-1002-4682-b962-33a2328bcd5c, _, _, _, _)
AND
HasActiveStatus(S_DEN_ElevatorBear_04b7ef23-1002-4682-b962-33a2328bcd5c, "SLEEPING", 1, _, _)
THEN
RemoveStatus(S_DEN_ElevatorBear_04b7ef23-1002-4682-b962-33a2328bcd5c, "SLEEPING");

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DEN_General_ElevatorLevers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_General_ElevatorIsMoving(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(S_DEN_ElevatorBear_04b7ef23-1002-4682-b962-33a2328bcd5c, DEN_BearElevatorArea_5b6e4f15-6005-41fd-80ac-6cdbb6a7ed40, _Var1, _Var1, _Var1)
AND
IsInTrigger(S_PLT_DEN_ElevatorLever_66e3c440-2f6b-8cd3-4860-e24e0548298d, DEN_BearElevatorArea_5b6e4f15-6005-41fd-80ac-6cdbb6a7ed40, 1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, _Var2, 0);
PROC_DEN_General_ElevatorPAD(_Var1);

PROC
PROC_DEN_General_ElevatorPAD((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_DEN_General_ElevatorPAD(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(DEN_General_PAD_ElevatorUnusable_1966a3d8-2e07-24fb-e7af-f0446efb7df6, _Var1, _Var1, _Var1, _Var1)
THEN
DB_DEN_General_ElevatorPAD(1);

IF
AutomatedDialogEnded(DEN_General_PAD_ElevatorUnusable_1966a3d8-2e07-24fb-e7af-f0446efb7df6, _, _, _, _)
AND
DB_DEN_General_ElevatorPAD(1, _, _, _, _)
THEN
NOT DB_DEN_General_ElevatorPAD(1);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DEN_General_ElevatorLevers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_DEN_General_ElevatorIsMoving(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, _Var2, 0);
PROC_PlayCantUseItemAD(_Var1);

IF
UseStarted((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DEN_General_ElevatorLevers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_DEN_ElevatorPosition(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_DEN_ElevatorPoints(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
GetPosition(_Var4, _Var5, _Var6, _Var7, _Var1)
THEN
DB_DEN_General_ElevatorIsMoving(1);
PlatformMoveTo(S_DEN_ElevatorPLT_dbd2352b-90fc-4d73-9aab-445a58840ee0, _Var5, _Var6, _Var7, 3, "DEN_Elevation_Moved", 0);

IF
PlatformMovementFinished(S_DEN_ElevatorPLT_dbd2352b-90fc-4d73-9aab-445a58840ee0, "DEN_Elevation_Moved", (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DEN_ElevatorPosition(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Negate(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_DEN_ElevatorPosition(_Var1);
DB_DEN_ElevatorPosition(_Var2);
NOT DB_DEN_General_ElevatorIsMoving(1);

IF
FlagSet(DEN_General_Event_ElevatorBearMoves_1c1694b8-c0b9-edad-9fdc-cdeedff0512e, _, _, _, _)
AND
DB_State_Current(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", _Var3, _, _)
AND
DB_DEN_DefaultStates(_Var4, _, _, _, _)
AND
DB_Players(_Var5, _, _, _, _)
THEN
QuestUpdate(_Var5, "HIDDEN_WLD_Boosters", "DEN_ElevatorBear_Moved");

IF
FlagSet(DEN_General_Event_GaveBearFish_aae6d263-f9fe-7b81-cea5-20164d1daf78, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
IterateInventoryByTag(_Var1, "FISH_ec16c2d2-2943-41cf-9796-0439ef65b2cf", "DEN_General_BearFishIterate", "DEN_General_BearFishIterateComplete");

IF
EntityEvent((GUIDSTRING)_Var1, "DEN_General_BearFishIterate", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_DEN_General_BearFishes(_Var1);

IF
EntityEvent(_, "DEN_General_BearFishIterateComplete", _, _, _)
AND
SysCount("DB_DEN_General_BearFishes", 1, _Var2, _, _)
AND
_Var2 > 0
AND
Random(_Var2, _Var3, _, _, _)
AND
IntegerSum(_Var3, 1, _Var4, _, _)
AND
SysFactAtIndex("DB_DEN_General_BearFishes", 1, _Var4, "DB_DEN_General_ChosenFish", _)
AND
DB_DEN_General_ChosenFish(_Var5, _, _, _, _)
THEN
ToInventory(_Var5, S_DEN_ElevatorBear_04b7ef23-1002-4682-b962-33a2328bcd5c, 1, 1, 1);

PROC
PROC_SceneOver("DEN_RaidingParty_PleaAtGate", _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, _, _, _, _)
THEN
SetOnStage(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, 1);

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND NOT
DB_DEN_DefaultStates(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_SceneManager(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, "DEN_BugbearScout_Ambush", _Var1, _Var1, _Var1)
THEN
PROC_DEN_BugbearAmbushOver();

PROC
PROC_DEN_BugbearAmbushOver()
AND NOT
DB_DEN_PlayerInDen(_, _, _, _, _)
THEN
Die(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, 0, S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, 1, 1);

PROC
PROC_DEN_BugbearAmbushOver()
THEN
PROC_SceneOver("DEN_BugbearScout_Ambush");
DB_OnlyOnce("DEN_BugbearNinja_Activate");
SetOnStage(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, 0);

IF
EnteredTrigger((GUIDSTRING)_Var1, S_DEN_BugbearNinjaActivateArea_3112588e-833d-4f11-82e5-e2ac4547560d, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_SceneManager(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, "DEN_BugbearScout_Ambush", _Var1, _Var1, _Var1)
AND
IsOnStage(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, 1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("DEN_BugbearNinja_Activate", _Var1, _Var1, _Var1, _Var1)
THEN
SetEntityEvent(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, "DEN_BugbearNinja_Activate");

IF
DB_Defeated(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, _, _, _, _)
THEN
SetFlag(DEN_BugbearNinja_Dead_cc673032-ad3b-484e-b2cb-57f67c901b3d, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_SceneInterrupted((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, "DEN_BugbearScout_Ambush", (STRING)_Var3, (GUIDSTRING)_Var1)
THEN
SetEntityEvent(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, "DEN_BugbearNinja_TurnHostile", 1);

PROC
PROC_SceneInterrupted((GUIDSTRING)_Var1, (CHARACTER)_Var2, "DEN_BugbearScout_Ambush", (STRING)_Var3, (GUIDSTRING)_Var1)
AND
DB_DialogNPCs(_, S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, _, _Var1, _Var1)
THEN
PROC_ForceStopDialog(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e);

IF
FlagSet(DEN_BugbearNinja_Dead_cc673032-ad3b-484e-b2cb-57f67c901b3d, NULL_00000000-0000-0000-0000-000000000000, _, (INTEGER)_, (INTEGER)_)
THEN
PROC_SceneOver("DEN_BugbearScout_Ambush");

PROC
PROC_LongRest()
AND
DB_KnockedOut(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, _, _, _, _)
THEN
Die(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, 0, NULL_00000000-0000-0000-0000-000000000000, 1, 1);
SetOnStage(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, 0);

IF
EntityEvent(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, "DEN_BugbearNinja_TurnHostile", _, _, _)
AND
GetRelation(ACT1_DEN_BugbearNinja_90ca2daa-c81b-4eb5-bdf0-e0480f9ae5fa, ACT1_DEN_Tieflings_ca9de2d9-9022-9215-6d9b-676d916dcb5a, 50, _, _)
THEN
PROC_MakeNPCHostile(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e);
PROC_ForceStopDialog(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e);

IF
AttackedBy(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, (GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (STRING)_Var3, (INTEGER)_Var4, (STRING)_Var5, (INTEGER)_Var6, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
_Var4 > 0
AND
GetRelation(ACT1_DEN_BugbearNinja_90ca2daa-c81b-4eb5-bdf0-e0480f9ae5fa, ACT1_DEN_Tieflings_ca9de2d9-9022-9215-6d9b-676d916dcb5a, 50, _Var1, _Var1)
THEN
PROC_MakeNPCHostile(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, _Var1);
PROC_MakeNPCHostile(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e);
PROC_ForceStopDialog(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e);

QRY
QRY_CRIME_BlockRegisterCrime((CHARACTER)_Var1, (STRING)_Var2, (GUIDSTRING)_Var3, S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, _)
AND
DB_DEN_NPC(_Var1, _, _, _Var1, _Var1)
AND
_Var1 != S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523
THEN
DB_NOOP(1);

IF
EntityEvent(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, "DEN_BugbearNinja_Escape", _, _, _)
THEN
PROC_DisappearOutOfSightTo(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, S_DEN_BugbearNinja_DisappearTarget_81a2dd3a-ab5a-45ce-b8df-56777126ce9f, "Run", 1, "");

IF
EntityEvent(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, "DEN_BugbearNinja_Activate", (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
GetEquippedWeapon(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, _, _Var1, _Var1, _Var1)
AND
TemplateIsInInventory(GRN_Poison_vial_C_4678c044-06b2-4ec9-9ae3-126983c95b91, S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, _Var3, _Var1, _Var1)
AND
_Var3 != 0
AND
HasAppliedStatus(_Var1, "DIPPED_POISON", 0, _Var1, _Var1)
AND
HasActiveStatus(_Var1, "DIPPED_POISON", 0, _Var1, _Var1)
THEN
LookAtEntity(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523);
SetFlag(GLO_StatusOverrides_NoFleeMove_ec2e86bc-fcb9-4e1c-871b-f7a696a717e1, S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e);
SetTag(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, AI_PREFERRED_TARGET_64bc9da1-9262-475a-a397-157600b7debd);
ApplyStatus(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, "DIPPED_POISON", -1, 1);
ApplyStatus(_Var1, "DIPPED_POISON", -1, 1);
TemplateRemoveFrom(GRN_Poison_vial_C_4678c044-06b2-4ec9-9ae3-126983c95b91, S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, 1);

IF
FlagSet(DEN_BugbearNinja_Dead_cc673032-ad3b-484e-b2cb-57f67c901b3d, NULL_00000000-0000-0000-0000-000000000000, _, (INTEGER)_, (INTEGER)_)
THEN
ClearFlag(GLO_StatusOverrides_NoFleeMove_ec2e86bc-fcb9-4e1c-871b-f7a696a717e1, S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e);
ClearTag(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, AI_PREFERRED_TARGET_64bc9da1-9262-475a-a397-157600b7debd);

IF
DB_Is_InCombat(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, _Var1, _Var1, _Var1, _Var1)
AND
DB_Is_InCombat(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, _Var2, _Var1, _Var1, _Var1)
AND
_Var1 == _Var2
AND
QRY_OnlyOnce("GLO_Stargazer_EnteredCombatWithBugbear", _Var1, _Var1, _Var1, _Var1)
THEN
ApplyStatus(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, "FEARED", -1, 1, S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523);

IF
DB_PermaDefeated(S_DEN_BugbearNinja_4cb29070-a33c-4253-9f57-18d1c9a88523, _, _, _, _)
AND
HasActiveStatus(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, "FEARED", 1, _, _)
THEN
RemoveStatus(S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e, "FEARED", S_GLO_Stargazer_cd442e20-a6de-4497-ac51-8466433a758e);

PROC
PROC_StateSet_PermaDefeated((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DEN_AdventurerOwnership(_Var1, 1, _Var1, _Var1, _Var1)
THEN
NOT DB_DEN_AdventurerOwnership(_Var1, 1);
PROC_DEN_SwapAdventurerCampOwnership(_Var1);

PROC
PROC_DEN_SwapAdventurerCampOwnership((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DEN_AdventurerOwnership(_Var2, 0, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_AdventurerOwnership(_, 1, _Var1, _Var1, _Var1)
THEN
NOT DB_DEN_AdventurerOwnership(_Var2, 0);
DB_DEN_AdventurerOwnership(_Var2, 1);
DB_ItemOwnerShipTriggers("WLD_Main_A", TRIGGERGUID_S_DEN_AdventurersOwnership_cae8006a-7681-40a9-a30f-226a98222f11, _Var2);

PROC
PROC_DEN_SwapAdventurerCampOwnership((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_DEN_AdventurerOwnership(_, _, _Var1, _Var1, _Var1)
THEN
TriggerClearItemsOwner(TRIGGERGUID_S_DEN_AdventurersOwnership_cae8006a-7681-40a9-a30f-226a98222f11);

PROC
PROC_DEN_RaidingParty_AdventurersLeaveDen()
THEN
TriggerClearItemsOwner(TRIGGERGUID_S_DEN_AdventurersOwnership_cae8006a-7681-40a9-a30f-226a98222f11);

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND NOT
DB_DEN_DefaultStates(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TriggerClearItemsOwner(TRIGGERGUID_S_DEN_AdventurersOwnership_cae8006a-7681-40a9-a30f-226a98222f11);

QRY
QRY_SelectCustomDialog_AfterGenerics(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_SpeakerIsAvailableAndInDialogRange(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, _Var1, _Var1, _Var1, _Var1)
AND
DB_Dialogs(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, DEN_General_YoungLover_1_e9c0afe0-919f-e0c4-63e6-0f2dbb25da99, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(DEN_General_YoungLover1_2_89296c28-6d0a-d639-43d8-0d63bb7a868c, S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, _Var1);

QRY
QRY_SelectCustomDialog_AfterGenerics(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
QRY_SpeakerIsAvailableAndInDialogRange(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, _Var1, _Var1, _Var1, _Var1)
AND
DB_Dialogs(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, DEN_General_YoungLover_1_e9c0afe0-919f-e0c4-63e6-0f2dbb25da99, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(DEN_General_YoungLover_1_e9c0afe0-919f-e0c4-63e6-0f2dbb25da99, S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, _Var1);

QRY
QRY_SelectCustomDialog_AfterGenerics(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_SpeakerIsAvailableAndInDialogRange(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, _Var1, _Var1, _Var1, _Var1)
AND
DB_Dialogs(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, DEN_General_YoungLover_2_5749ab40-51da-b8c0-6105-2f5f89d55f12, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(DEN_General_YoungLover1_2_89296c28-6d0a-d639-43d8-0d63bb7a868c, S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, _Var1);

QRY
QRY_SelectCustomDialog_AfterGenerics(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
QRY_SpeakerIsAvailableAndInDialogRange(S_GLO_YoungLover_01_dd9178e7-1e3f-43bc-8a38-666dfcac7d0c, _Var1, _Var1, _Var1, _Var1)
AND
DB_Dialogs(S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, DEN_General_YoungLover_2_5749ab40-51da-b8c0-6105-2f5f89d55f12, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(DEN_General_YoungLover_2_5749ab40-51da-b8c0-6105-2f5f89d55f12, S_GLO_YoungLover_02_dcf597c0-36c5-4c81-957a-6fe9fca50a68, _Var1);

IF
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_DEN_YoungLovers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_State_IsBeforeState(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_Final", _Var1, _Var1)
AND
DB_DEN_YoungLovers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 != _Var1
THEN
ObjectTimerLaunch(_Var2, "DEN_LoverStartsLeaving", 1000, 1);

IF
ObjectTimerFinished((CHARACTER)_Var1, "DEN_LoverStartsLeaving", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_DEN_LeaveDen(_Var1);

IF
DialogEnded(DEN_IrritatedTiefling_5b0bd225-2326-0794-7a25-ef56cb3c26f0, _, _, _, _)
AND
DB_GlobalFlag(DEN_IrritatedTiefling_State_Improved_279efec5-2bfe-4272-c0cd-e53ef228341b, _, _, _, _)
THEN
NOT DB_HasItemEvent(S_DEN_IrritatedReward_c79f5527-afd4-4a2b-9b73-0867c832e5ef, DEN_IrritatedTiefling_State_HasReward_4fa6bc00-978e-b1f5-cfaf-dcb7e0cf0529);
NOT DB_GiveItemToEvent(S_DEN_IrritatedReward_c79f5527-afd4-4a2b-9b73-0867c832e5ef, DEN_IrritatedTiefling_Event_GiveReward_6f11ac41-9b28-2ab9-e4c1-7b03aaa4f026);

IF
DialogEnded(DEN_IrritatedTiefling_5b0bd225-2326-0794-7a25-ef56cb3c26f0, _, _, _, _)
AND
DB_GlobalFlag(DEN_IrritatedTiefling_State_NoImprovement_d6dba26c-fd6b-ab13-960d-7bb4df49e193, _, _, _, _)
THEN
NOT DB_HasItemEvent(S_DEN_IrritatedReward_c79f5527-afd4-4a2b-9b73-0867c832e5ef, DEN_IrritatedTiefling_State_HasReward_4fa6bc00-978e-b1f5-cfaf-dcb7e0cf0529);
NOT DB_GiveItemToEvent(S_DEN_IrritatedReward_c79f5527-afd4-4a2b-9b73-0867c832e5ef, DEN_IrritatedTiefling_Event_GiveReward_6f11ac41-9b28-2ab9-e4c1-7b03aaa4f026);

IF
FlagSet(DEN_General_Knows_HayChest_2e45e632-290b-5561-7f51-af5400a93dbc, _, _, _, _)
AND
QRY_OnlyOnce("DEN_General_HayReveal", _, _, _, _)
THEN
SetEntityEvent(S_DEN_TieflingRefugee004_Hay_a7c96f0a-dfc0-4c4f-a762-af09ae2bff24, "StoryReveal");

IF
UseStarted((CHARACTER)_Var1, S_DEN_TieflingRefugee004_Hay_a7c96f0a-dfc0-4c4f-a762-af09ae2bff24, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_OnlyOnce("DEN_General_HayReveal", _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(DEN_General_Knows_HayChest_2e45e632-290b-5561-7f51-af5400a93dbc, NULL_00000000-0000-0000-0000-000000000000);

IF
UseStarted((CHARACTER)_Var1, S_DEN_TieflingRefugee004_Hay_a7c96f0a-dfc0-4c4f-a762-af09ae2bff24, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("DEN_General_HayReward", _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "HIDDEN_WLD_Boosters", "DEN_OxHayStack_Looted");

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_DEN_OnlyDruidStates(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_DEN_TieflingsGone_GroveNPCs(_Var2, _Var3, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 != NULL_00000000-0000-0000-0000-000000000000
THEN
PurgeOsirisQueue(_Var2);
TeleportTo(_Var2, _Var3);

PROC
PROC_CounterIncreased("DEN_MissingTieflings", (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DEN_Misc_TieflingCountTreshold(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 >= _Var2
AND
QRY_DEN_CheckBeforeState("DEN_State_GoblinHuntVictory", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_RemoveCounter("DEN_MissingTieflings");
PROC_GlobalSetFlagAndCache(DEN_GroveConflict_State_TooLowTieflings_ed9fe6c4-5037-4f74-968c-a166aeb29d9c);

PROC
PROC_DEN_AllPlayersLeftDen()
AND
DB_GlobalFlag(DEN_GroveConflict_State_TooLowTieflings_ed9fe6c4-5037-4f74-968c-a166aeb29d9c, _, _, _, _)
AND
QRY_DEN_CheckBeforeState("DEN_State_GoblinHuntVictory", _, _, _, _)
THEN
PROC_DEN_Misc_TryChangeTooLowTieflingsState();

PROC
PROC_DEN_Misc_TryChangeTooLowTieflingsState()
AND
QRY_DEN_Lockdown_CanDoRitual()
THEN
PROC_State_Progress(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_Lockdown");

PROC
PROC_DEN_Misc_TryChangeTooLowTieflingsState()
THEN
PROC_State_IfCurrentProgress(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_RitualStopped", "DEN_State_RitualStoppedNoTieflings");

PROC
PROC_DEN_Misc_TryChangeTooLowTieflingsState()
THEN
PROC_State_IfCurrentProgress(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_PostDruidAttack", "DEN_State_RitualStoppedNoTieflings");

PROC
PROC_DEN_Misc_TryChangeTooLowTieflingsState()
AND
DB_DEN_NPC(S_DEN_CapturedGoblin_783d7572-a846-455f-b686-247a95263ebb, _, _, _, _)
THEN
Die(S_DEN_CapturedGoblin_783d7572-a846-455f-b686-247a95263ebb, 0, NULL_00000000-0000-0000-0000-000000000000, 1, 1);

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_RitualStoppedNoTieflings", _, _)
THEN
SetFlag(DEN_General_State_RitualStoppedNoTieflings_f4712c06-ae76-4ba3-87e8-a3f71d9b621c, NULL_00000000-0000-0000-0000-000000000000, 0);

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_RitualStoppedNoTieflings", (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DEN_NPC(_Var1, _, _, _Var1, _Var1)
AND NOT
DB_DEN_TieflingsGone_GroveNPCs(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetOnStage(_Var1, 0);
SetEntityEvent(_Var1, "DEN_NPC_LeftDen");

PROC
PROC_State_Changed(S_DEN_RangerDen_SUB_50062397-bf9c-4765-9cbc-e40b5148f211, "DEN", "DEN_State_RitualStoppedNoTieflings", _, _)
THEN
PROC_RemoveAllDialogEntriesForSpeaker(S_DEN_ServantIntolerant_002_6f36c7a1-edfd-4e99-bd90-6d874f68c9b8);
DB_Dialogs(S_DEN_ServantIntolerant_002_6f36c7a1-edfd-4e99-bd90-6d874f68c9b8, DEN_AttackOnDen_Servant002_a26efdf1-4eba-d7dc-f335-b585a530c2da);

IF
FlagSet(DEN_GroveConflict_State_TooLowTieflings_ed9fe6c4-5037-4f74-968c-a166aeb29d9c, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_DEN_Misc_NoTieflings_JournalHook();

PROC
PROC_DEN_RemoveFromDenNPCs((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsTagged(_Var1, TIEFLING_aaef5d43-c6f3-434d-b11e-c763290dbe0c, 1, _Var1, _Var1)
THEN
PROC_IncreaseCounter("DEN_MissingTieflings");

PROC
PROC_StateSet_PermaDefeated((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DEN_NPC(_Var1, _, _, _Var1, _Var1)
AND
IsTagged(_Var1, TIEFLING_aaef5d43-c6f3-434d-b11e-c763290dbe0c, 1, _Var1, _Var1)
THEN
PROC_IncreaseCounter("DEN_MissingTieflings");

IF
FlagSet(DEN_GroveConflict_State_TooLowTieflings_ed9fe6c4-5037-4f74-968c-a166aeb29d9c, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_DEN_Misc_AdjustRemainingTieflings();

PROC
PROC_DEN_Misc_AdjustRemainingTieflings()
THEN
PROC_SetRelationToPlayers(ACT1_DEN_Tieflings_ca9de2d9-9022-9215-6d9b-676d916dcb5a, 0);

PROC
PROC_DEN_Misc_AdjustRemainingTieflings()
AND
DB_DEN_NPC(_Var1, "Hideout", _, _Var1, _Var1)
AND
DB_Children(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_ForceStopDialog(_Var1);
PROC_DisappearOutOfSight(_Var1, "Run", 1, "DEN_NPC_LeftDen");

IF
DB_DEN_NPC(_Var1, _, _, _Var1, _Var1)
THEN
DB_DEN_WasInDen(_Var1);

IF
EntityEvent((GUIDSTRING)_Var1, "DEN_NPC_LeftDen", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DEN_RemoveFromDenNPCs(_Var1);

PROC
PROC_DEN_AddOrUpdateDenNPC((CHARACTER)_Var1, (STRING)_Var2, (DIALOGRESOURCE)_Var3, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DEN_NPC(_Var1, _Var4, _Var5, _Var1, _Var1)
THEN
NOT DB_DEN_NPC(_Var1, _Var4, _Var5);
DB_DEN_NPC(_Var1, _Var2, _Var3);

PROC
PROC_DEN_AddOrUpdateDenNPC((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_DEN_NPC(_Var1, _, _, _Var1, _Var1)
THEN
DB_DEN_NPC(_Var1, "", NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_DEN_AddOrUpdateDenNPC((CHARACTER)_Var1, (STRING)_Var2, (DIALOGRESOURCE)_Var3, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_DEN_NPC(_Var1, _, _, _Var1, _Var1)
THEN
DB_DEN_NPC(_Var1, _Var2, _Var3);

PROC
PROC_DEN_RemoveFromDenNPCs((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DEN_NPC(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
NOT DB_DEN_WasInDen(_Var1);
NOT DB_DEN_NPC(_Var1, _Var2, _Var3);

PROC
PROC_DEN_RemoveFromDenNPCs((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DEN_LeaveEvents(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_DEN_LeaveEvents(_Var1, _Var2);
SetEntityEvent(_Var1, _Var2);

PROC
PROC_StateSet_PermaDefeated((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
_Var1 != S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d
AND
DB_DEN_NPC(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
NOT DB_DEN_NPC(_Var1, _Var2, _Var3);

IF
WentOnStage(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, 0, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_DEN_NPC(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, _Var1, _Var2, _Var1, _Var1)
THEN
NOT DB_DEN_NPC(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, _Var1, _Var2);

PROC
PROC_DEN_AllPlayersLeftDen()
AND
DB_GlobalFlag(DEN_General_State_Entered_26b2dc6a-e5eb-4d99-a4bd-3ecaa3b86a9e, _, _, _, _)
THEN
SetFlag(DEN_General_Event_AllPlayersLeftGroveOnce_57e4753f-ce94-4592-b877-4a64c9914008, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
FlagSet(DEN_General_State_Entered_26b2dc6a-e5eb-4d99-a4bd-3ecaa3b86a9e, _, _, _, _)
AND
DB_Avatars(_Var3, _, _, _, _)
AND
QRY_OnlyOnce("TG_DEN_Entered", _, _, _, _)
THEN
SetFlag(TG_DEN_Entered_aed4b025-f290-4ec5-b8f1-34b0b9b56576, _Var3, 0);

IF
LevelLoaded("WLD_Main_A", _, _, _, _)
AND NOT
DB_DEN_UnhelpedTieflingsSlaughtered(1, _, _, _, _)
AND NOT
DB_GlobalFlag(DEN_AttackOnDen_State_DenVictory_71c7f23e-3ff1-c9b8-3ef5-d75fa1b42c8d, _, _, _, _)
AND
QRY_DEN_LeftWilderness()
THEN
PROC_DEN_DechildTielfingKids();
PROC_DEN_KillTieflings();
DB_DEN_UnhelpedTieflingsSlaughtered(1);

QRY
QRY_DEN_LeftWilderness()
AND
DB_GlobalFlag(VISITEDREGION_CRE_Main_A_c22062f9-2a42-4e19-8c72-34a2d9ff9c0a, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_DEN_LeftWilderness()
AND
DB_GlobalFlag(VISITEDREGION_SCL_Main_A_f6e72539-9bc6-42e1-a20f-390f3a17ad8d, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_DEN_DechildTielfingKids()
AND
DB_PermaDefeated(ACT1_DEN_DenLeader_f6180e06-d284-b07f-a22e-080b39e9fcdc, _, _, _, _)
AND
DB_Children(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, TIEFLING_aaef5d43-c6f3-434d-b11e-c763290dbe0c, 1, _Var1, _Var1)
THEN
PROC_Children_RemoveNPC(_Var1);

PROC
PROC_DEN_DechildTielfingKids()
AND NOT
DB_PermaDefeated(ACT1_DEN_DenLeader_f6180e06-d284-b07f-a22e-080b39e9fcdc, _, _, _, _)
AND
DB_Children(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_ProtectedChildren(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, TIEFLING_aaef5d43-c6f3-434d-b11e-c763290dbe0c, 1, _Var1, _Var1)
THEN
PROC_Children_RemoveNPC(_Var1);

PROC
PROC_DEN_KillTieflings()
AND
DB_PermaDefeated(ACT1_DEN_DenLeader_f6180e06-d284-b07f-a22e-080b39e9fcdc, _, _, _, _)
AND
DB_FOR_SlaughteredTieflingTriggers(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, TIEFLING_aaef5d43-c6f3-434d-b11e-c763290dbe0c, 1, _Var1, _Var1)
THEN
SetOnStage(_Var1, 1);
TeleportTo(_Var1, _Var2);
Die(_Var1, 0, 1);

PROC
PROC_DEN_KillTieflings()
AND NOT
DB_PermaDefeated(ACT1_DEN_DenLeader_f6180e06-d284-b07f-a22e-080b39e9fcdc, _, _, _, _)
AND
DB_FOR_SlaughteredTieflingTriggers(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DEN_ProtectedChildren(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, TIEFLING_aaef5d43-c6f3-434d-b11e-c763290dbe0c, 1, _Var1, _Var1)
THEN
TeleportTo(_Var1, _Var2);
Die(_Var1, 0, 1);

PROC
PROC_DEN_KillTieflings()
AND
QRY_DEN_CheckBeforeState("DEN_State_GoblinHuntVictory", _, _, _, _)
THEN
PROC_DEN_Misc_TryChangeTooLowTieflingsState();


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act1"
