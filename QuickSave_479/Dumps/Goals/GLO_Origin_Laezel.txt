Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_OriginNPCAlignment(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, Origin_Laezel_bee8449b-d682-93c8-e7da-9e4bad369476);
DB_OriginCampFlags(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, LAEZEL_488052ab-da0d-4463-9158-ab01eb89df86, LAEZELAVATAR_cea30880-6e09-4daa-ad17-5411885097f3, LAEZELCOMPANION_9c5bc0ce-cb2e-4685-b597-89a290837535, LAEZELPARTY_9359b6a5-5579-4c54-acf7-2e8b35726195, LAEZELCAMP_3a157c66-db4a-48ad-95e5-9659c42c4aa0);
DB_OriginInPartyGlobal(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, ORI_Laezel_State_IsInParty_3ee6b1f2-24f4-4e85-b7dc-49060e6d2699);
DB_OriginPartOfTheTeamFlag(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, GLO_Origin_PartOfTheTeam_Laezel_57d93a1d-4400-4307-845f-25d9a250d332, GLO_Origin_Avatar_Laezel_ecbab7a6-0a96-4c30-81d1-f70cc960b749, ORI_Laezel_ControlledByUser_8fe9c9e8-0885-4e69-ac41-e3f3d29d4349);
DB_OriginKickFromPartyFlags(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, ORI_Laezel_Event_KickCompanion_e032a76b-4966-4fd8-a290-90c76ff1e30a, ORI_Laezel_State_CanBeKicked_b28fa32b-a878-49ba-860b-e44774908595);
DB_OriginRecruitmentDialog(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, Laezel_Recruitment_InCage_131cf573-180d-5307-6d6e-6a369319e161);
DB_OriginInPartyDialog(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, TUT_Start_Laezel_c62d7e26-beb5-0afe-becd-68a25c7f4314);
DB_OriginWarning1Dialog(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, Laezel_Warning1_2cc7736e-4af6-4235-870f-6b53cf04ae8e);
DB_OriginWarning2Dialog(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, Laezel_Warning2_78bc67a3-2fa8-a019-eb08-50c56a8f7757);
DB_OriginLeavingDialog(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, Laezel_Leaving_70e20de2-7314-a9ae-e5a2-be50225f97b1);
DB_Inclusion_Object(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, ORI_Inclusion_Laezel_49c3c048-b5f7-466c-a996-d87cef44dde9, ORI_Inclusion_End_Laezel_dcf82fba-01b2-44f1-acf6-64254ad40007);
DB_Debug_CharacterAddFlags(Debug_AddGith_39ecbda9-cb44-becf-57b9-c3b631a5517b, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, Debug_GithIsPlayer_35795c8f-0daa-5972-e4a0-85f35af25026);
DB_Debug_CharacterRemoveHideFlags(Debug_RemoveHideGith_7953fece-dcf5-658b-38b5-58d5d2900824, S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
DB_CompanionCanPartner(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, ORI_State_DatingLaezel_86eaa84a-350b-401b-8b43-b53eeb534579, ORI_State_PartneredWithLaezel_d169a786-6e56-4f0d-a2eb-33c48d8d1160, ORI_State_WasPartneredWithLaezel_6d402d9b-7af9-43ea-b0eb-98e9612dde27, ORI_State_HandledBreakupWithLaezel_76f44c15-bcc3-4232-9dde-ae522a3db82d, ORI_State_ChosePartnerOverLaezel_35c95a6d-4145-4903-ad73-a773df0e6892, "datelaezel");
DB_PermaDefeatedEvent(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, GLO_Laezel_State_PermaDefeated_43c2fc09-a064-42a9-a722-444b53a768fd);
DB_ORI_OriginCampData(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "WLDMAIN", S_CAMP_Laezel_A_8d410b28-5270-80e3-1cb8-c9036fc8383b);
DB_ORI_OriginCampData(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "WLDCAVGRN", S_CAMP_Laezel_A_d2e138b5-935e-8b25-060a-9797da87754b);
DB_ORI_OriginCampData(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "WLDCAVSND", S_CAMP_Laezel_A_349fdec8-b9c4-8f22-34dd-522f050a0bfb);
DB_ORI_OriginCampData(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "WLDDUNABB", S_CAMP_Laezel_A_aff47ac4-9013-8a57-1348-9d840d699685);
DB_ORI_OriginCampData(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "WLDDUNSHA", S_CAMP_Laezel_A_e67329ac-dac5-896b-0704-ac15d952e24c);
DB_ORI_OriginCampData(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "WLDBAS", S_CAMP_Laezel_A_155372b6-4adf-8c59-025a-6aeebb22b76f);
DB_ORI_OriginCampData(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "WLDUND", S_CAMP_Laezel_A_175b52c4-efc4-879a-0e96-7d0d1f250fa2);
DB_GLO_CompoundFlag(PLA_GithChokepoint_State_VossRevealedLocation_8e527ca3-eb01-4fe3-acb3-231c8ad18fcb, GLO_GithCreche_Knows_Location_ff285172-c1a0-698d-981f-1b0530e72464);
DB_GLO_CompoundFlag(GLO_GithChokepoint_Knows_DecipheredMap_604768b9-c983-414d-8c3b-ba1dee3da387, GLO_GithCreche_Knows_Location_ff285172-c1a0-698d-981f-1b0530e72464);
DB_GLO_CompoundFlag(GLO_GithCreche_State_EverEnteredBefore_3ebdfeaa-4e83-4878-90db-01adb9fdf629, GLO_GithCreche_Knows_Location_ff285172-c1a0-698d-981f-1b0530e72464);

KBSECTION
IF
TextEvent("detachlz", _, _, _, _)
THEN
DetachFromPartyGroup(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);

IF
TextEvent("laezel2camp", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(ORI_LaezelRecruitment_Event_InvitedToCamp_5ac352a5-58c2-a8ed-1957-199d8bc284da, NULL_00000000-0000-0000-0000-000000000000, 0);
SetOnStage(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);
PROC_CheckFirstTimeRecruited(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
RegisterAsCompanion(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Var1);
PROC_ORI_SetupCamp(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);

IF
EntityEvent(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "DebugTeleportedToCamp", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(ORI_LaezelRecruitment_Event_InvitedToCamp_5ac352a5-58c2-a8ed-1957-199d8bc284da, NULL_00000000-0000-0000-0000-000000000000, 0);
PROC_CheckFirstTimeRecruited(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12);
RegisterAsCompanion(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Var1);
PROC_ORI_SetupCamp(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);

IF
FlagSet(ORI_LaezelRecruitment_Event_InvitedToCamp_5ac352a5-58c2-a8ed-1957-199d8bc284da, NULL_00000000-0000-0000-0000-000000000000, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
_Var1 != 0
THEN
DB_ORI_ToCampAfterDialog(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Var1, "Run");

PROC
PROC_ORI_SendToCampAfterDialog(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, (INTEGER)_)
THEN
SetCanJoinCombat(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0);

IF
EntityEvent(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, "ORI_ToCamp", _, _, _)
THEN
SetCanJoinCombat(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 1);

PROC
PROC_GLO_PartyMembers_AddHook(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("RecruitedFirstTime_Laezel", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_ORI_SetupCamp(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, 0);
SetFlag(ORI_Laezel_HasMet_2e085b0e-8e64-fbad-a009-7ce8e5da8a11, NULL_00000000-0000-0000-0000-000000000000, 0);

QRY
QRY_ORI_Laezel_COM_InCampOrParty()
AND
DB_InCamp(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND NOT
DB_PermaDefeated(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_ORI_Laezel_COM_InCampOrParty()
AND
DB_Players(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
AND NOT
DB_Avatars(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _, _, _, _)
THEN
DB_NOOP(1);

IF
FlagSet(ORI_Laezel_Knows_SeekingCreche_8c71d8b1-0b3d-74ee-2907-67b052538212, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
SetFlag(ORI_Banter_State_AllowLaezelCreche_19a5ebc9-0c4c-4e6c-b654-d23a89ddf156, NULL_00000000-0000-0000-0000-000000000000);

IF
FlagSet(GLO_GithCreche_State_EverEnteredBefore_3ebdfeaa-4e83-4878-90db-01adb9fdf629, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearFlag(ORI_Banter_State_AllowLaezelCreche_19a5ebc9-0c4c-4e6c-b654-d23a89ddf156, NULL_00000000-0000-0000-0000-000000000000);

IF
DB_Is_InCombat(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(ORI_Laezel_Event_FirstCombat_def8ed0f-1bdf-4134-9412-d71ce2e33f75, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(ORI_Laezel_Event_FirstCombat_def8ed0f-1bdf-4134-9412-d71ce2e33f75, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_LevelLoadedOnce("WLD_Main_A", _, _, _, _)
THEN
NOT DB_OriginInPartyDialog(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, TUT_Start_Laezel_c62d7e26-beb5-0afe-becd-68a25c7f4314);
DB_OriginInPartyDialog(S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, Laezel_InParty_93bf58f5-5111-9730-1ee2-62dfb0b00c96);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "ModWrapper_Gustav"
