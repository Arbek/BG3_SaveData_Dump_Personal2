Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_Dialogs(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, DIALOGRESOURCEGUID_GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256);
DB_GOB_ChickenChase_Ball(S_GOB_Festivities_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785);
DB_GOB_ChickenChase_FieldPart(S_GOB_Commentator_LeftOut_1f261b58-0623-427b-8b4f-82119b0ca1be, GOB_ChickenChase_State_LeftOut_3992d361-b602-7b2a-ba55-ff4c5189f901);
DB_GOB_ChickenChase_FieldPart(S_GOB_Commentator_NearExit_9d3205a2-a7d0-418e-a0fa-bf1a746e5c11, GOB_ChickenChase_State_NearExit_732b9d4e-d858-9613-742f-b0715fdee612);
DB_GOB_ChickenChase_FieldPart(S_GOB_Commentator_NearGates_b06ce4cb-0596-4e15-bec3-a4e8de8cc797, GOB_ChickenChase_State_NearGates_5c88c20d-016f-6cfb-7b12-807fd4bbf1a3);
DB_GOB_ChickenChase_FieldPart(S_GOB_Commentator_RightOut_20d21013-9b2b-4352-a365-323eb32936ca, GOB_ChickenChase_State_RightOut_ef8488d5-89aa-566e-060f-fc9ae7f2f559);
DB_GOB_ChickenChase_LastAD(NULL_00000000-0000-0000-0000-000000000000);
PROC_TriggerRegisterForPlayers(S_GOB_ChickenChase_StartArea_37352f92-b862-47f8-ae3a-9c0a3f4a31d1);
PROC_TriggerRegisterForPlayers(S_GOB_ChickenChase_GameRing_feb54bd2-75dd-43cd-a7b1-bdc8a12026e5);
PROC_TriggerRegisterForPlayers(S_GOB_ChickenChase_LeftRingTrigger_c9cdf63a-b1bf-431d-9d09-3c76e9ae12a1);
TriggerRegisterForCharacter(S_GOB_ChickenChase_CommentatorArea_4aeac57c-d4e8-4a20-882c-231b2b039299, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);
TriggerRegisterForCharacter(S_GOB_ChickenChase_ChickenShovePoint_2e97f1e8-123c-4dde-be45-67ad8b49453c, S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785);
TriggerRegisterForCharacter(S_GOB_ChickenChase_OwlbearStartPoint_6c2de754-b12a-4b2a-8d7c-66c8aa6d3be7, S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09);
DB_GOB_ChickenChase_OwlbearDiscussion(S_GOB_Festivities_Goblin_000_031e9fb7-136a-46c7-91d7-77ce3e20236a, S_GOB_OwlbearDiscussionPoint_000_11b4e93a-2f05-46ba-99c8-81f1ab2ea9dd);
DB_GOB_ChickenChase_OwlbearDiscussion(S_GOB_Festivities_Goblin_001_774c78ed-1227-48f9-812e-aac0021c71bf, S_GOB_OwlbearDiscussionPoint_001_359097c2-31c3-47ef-bbc0-c6fdefaba37f);
DB_GOB_ChickenChase_OwlbearDiscussion(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, S_GOB_Festivities_TableTrigger_Commentator_e5775bee-7cce-47d5-a894-74fad0931867);
DB_GOB_ChickenChase_OwlbearDiscussion(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, NULL_00000000-0000-0000-0000-000000000000);
DB_GlobalFlagReactionAfterDialog(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256);
DB_GlobalFlagReactionAfterDialog(GOB_Festivities_ChickenAttack_19172c12-41db-7409-03ca-2933747c0561, GOB_ChickenChase_Ball_1c9415de-3317-9b39-5639-87429bb8c777);
DB_FlagReactionAfterDialog(GOB_ChickenChase_Event_OwlbearAttack_9eb04a84-4c3e-6d20-2a19-f3ff09f3047d, GOB_ChickenChase_Owlbear_b617a785-1b83-f772-8e86-a1aebe05a707);
DB_FlagReactionAfterDialog(GOB_Festivities_BallToldAboutGates_67c96492-3a87-8278-e2ee-2b0a8bd7aeb7, GOB_ChickenChase_Ball_1c9415de-3317-9b39-5639-87429bb8c777);
DB_FlagReactionAfterDialog(GOB_Festivities_BallToldAboutGates_67c96492-3a87-8278-e2ee-2b0a8bd7aeb7, GOB_ChickenChase_Owlbear_b617a785-1b83-f772-8e86-a1aebe05a707);
DB_GOB_ChickenChase_OwlbearAcquisitionDialogs(GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256);
DB_GOB_ChickenChase_OwlbearAcquisitionDialogs(GOB_ChickenChase_Owlbear_b617a785-1b83-f772-8e86-a1aebe05a707);
AddGold(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, 300);
DB_DialogMoneyTransfer(1, GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, 30, 2, 1);
DB_DialogMoneyTransfer(2, GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, 300, 2, 1);
DB_DialogMoneyTransfer(3, GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, 60, 1, 1);
DB_DialogMoneyTransfer(4, GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, 600, 1, 1);
DB_DialogMoneyTransfer(5, GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, 500, 2, 1);
DB_DialogMoneyTransfer(6, GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, 10, 2, 1);
DB_DialogMoneyTransfer(7, GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, 100, 2, 1);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_GOB_ChickenChase_OwnershipTigger_7148555f-dc54-4ddd-8467-ab08db4ecfdd, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);
ClearOwnership(S_GOB_BuriedMound_02_051d672e-3f83-4216-8b01-467e4d247f84);
ClearOwnership(S_GOB_BuriedChest_02_a276d029-79fe-405a-8687-ae04841c0acb);
DB_GOB_ChickenChase_GreaseBottles(S_GOB_ChickenChase_OilBarrelTrigger_000_a951079c-e987-4f0c-9f70-ad584e7428e5, S_GOB_Festivities_Goblin_005_a955aea9-9040-4d4c-9264-e46e385dea94);
SetFlag(Debug_GOB_ChickenChase_State_FireDisabled_14182872-d77d-4f5d-9ff7-cea5a0533c53, NULL_00000000-0000-0000-0000-000000000000);

KBSECTION
IF
TextEvent("debug_fireworks", _, _, _, _)
THEN
PROC_GOB_ChickenChase_Fireworks();

IF
FlagSet(Debug_Quest_OwlbearToCamp_a1279bc2-6ad8-b2d8-08bd-6c6626f65c94, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_FOR_OwlBear_LastCubResolution(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09);

IF
FlagSet(Debug_Quest_ScoreChickenChase_8dc7b04a-2f3a-d5fe-cdb0-3e4ce1eb52b1, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GOB_ChickenChase_Ball(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CharacterMoveTo(_Var3, S_GOB_ChickenChase_FootballGatesBox_8cdc4a7f-9972-4578-b545-2383faf65c60, "Run", "");

IF
EntityEvent((GUIDSTRING)_Var1, "FOR_Owlbear_LastCubResolution_ToGoblinCamp", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_GOB_ChickenChase_OwlbearDiscussionNPC_PermaDefeated(1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GOB_Festivities_TeleportNPCToFestivities(_Var1, "GOB_ChickenChase_Event_OwlbearCubTeleported", S_GOB_ChickenChase_OwlbearAppearPosition_10a6b193-be30-4094-84ac-c968d2a0e810);

IF
EntityEvent((GUIDSTRING)_Var1, "FOR_Owlbear_LastCubResolution_ToGoblinCamp", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GOB_ChickenChase_OwlbearDiscussionNPC_PermaDefeated(1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GOB_ChickenChase_State_OwlbearAcquired_da704027-02ea-717c-4390-f538e5e5cd7a);
PROC_RemoveAllDialogEntriesForSpeaker(_Var1);

IF
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_OwlbearDiscussion(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_GOB_ChickenChase_OwlbearDiscussionNPC_PermaDefeated(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GOB_ChickenChase_OwlbearDiscussionNPC_PermaDefeated(1);

IF
EntityEvent((GUIDSTRING)_Var1, "GOB_ChickenChase_Event_OwlbearCubTeleported", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_GOB_ChickenChase_ReplaceChickenWithOwlbear();
SetEntityEvent(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, "GOB_ChickenChase_OwlbearInGoblinCamp");
SetFaction(_Var1, ACT1_GOB_OwlbearCub_449efa78-d66d-a301-7944-f08f233fb5e7);
PROC_RemoveAllDialogEntriesForSpeaker(_Var1);
DB_Dialogs(_Var1, GOB_ChickenChase_Owlbear_b617a785-1b83-f772-8e86-a1aebe05a707);
SetFlag(GOB_ChickenChase_Event_OwlbearDiscussion_b0364ea7-a813-4d71-aebb-13bea72c812a, NULL_00000000-0000-0000-0000-000000000000);
SetFlag(GOB_ChickenChase_State_OwlbearReplacedChicken_aabd6c48-57e4-12bb-8123-912f747f1f07, NULL_00000000-0000-0000-0000-000000000000);

IF
FlagSet(GOB_ChickenChase_Event_OwlbearDiscussion_b0364ea7-a813-4d71-aebb-13bea72c812a, NULL_00000000-0000-0000-0000-000000000000, _, _, _)
AND
DB_GOB_ChickenChase_OwlbearDiscussion(_Var2, _Var3, _, _, _)
AND
_Var3 != NULL_00000000-0000-0000-0000-000000000000
THEN
PROC_TryStopDialogFor(_Var2);
TeleportTo(_Var2, _Var3);
LookFromTrigger(_Var2, _Var3, 0);

IF
FlagSet(GOB_ChickenChase_Event_OwlbearDiscussion_b0364ea7-a813-4d71-aebb-13bea72c812a, NULL_00000000-0000-0000-0000-000000000000, _, (INTEGER)_, (INTEGER)_)
THEN
DB_GOB_ChickenChase_OwlbearIntro(1);

QRY
QRY_SelectCustomDialog((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GOB_ChickenChase_OwlbearIntro(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_OwlbearDiscussion(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
QRY_GOB_ChickenChase_IsWildShapedPlayerTalkingToOwlbearCub(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(DIALOGRESOURCEGUID_GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _Var2);

QRY
QRY_SelectCustomDialog((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GOB_ChickenChase_OwlbearIntro(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_OwlbearDiscussion(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_GOB_ChickenChase_IsWildShapedPlayerTalkingToOwlbearCub(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(GOB_ChickenChase_Owlbear_b617a785-1b83-f772-8e86-a1aebe05a707, _Var1, _Var2);

QRY
QRY_GOB_ChickenChase_IsWildShapedPlayerTalkingToOwlbearCub((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Is_WildShaped(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 == S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09
THEN
DB_NOOP(1);

IF
DialogEnded(GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
GetFlag(GOB_ChickenChase_Event_OwlbearAcquired_775e6984-4640-41d3-97e5-b1f96c572ddd, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
AND
GetFlag(GOB_OwlbearCub_Event_InvitedToCamp_2b4acc5e-fe2f-0f0b-8945-043403b50e2f, NULL_00000000-0000-0000-0000-000000000000, 0, _Var1, _Var1)
AND
DialogGetInvolvedPlayer(_Var1, 1, _Var2, _Var1, _Var1)
AND
QRY_SpeakerIsAvailableAndInDialogRange(_Var2, S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_OwlbearIntro(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(GOB_ChickenChase_Owlbear_b617a785-1b83-f772-8e86-a1aebe05a707, S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, _Var2, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DialogEnded(GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, _, _, _, _)
AND
DB_GOB_ChickenChase_OwlbearIntro(1, _, _, _, _)
AND NOT
DB_GlobalFlag(GOB_VoloBallad_State_OnStage_0bc1d7d7-9129-4c6e-188d-054640cea3b9, _, _, _, _)
THEN
NOT DB_GOB_ChickenChase_OwlbearIntro(1);
PROC_GOB_ChickenChase_OwlbearIntroEnded();

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_GOB_ChickenChase_OwlbearAcquisitionDialogs(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_Event_OwlbearAcquired_775e6984-4640-41d3-97e5-b1f96c572ddd, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
AND
GetFlag(GOB_OwlbearCub_Event_InvitedToCamp_2b4acc5e-fe2f-0f0b-8945-043403b50e2f, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
AND
DialogGetInvolvedPlayer(_Var2, 1, _Var3, _Var1, _Var1)
THEN
PROC_GOB_ChickenChase_OwlbearAcquired(_Var3);

PROC
PROC_GOB_ChickenChase_OwlbearAcquired((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_OnlyOnce("GOB_ChickenChase_PlayerAcquiredOwlbearCub", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GOB_ChickenChase_OwlbearAcquired_Internal();
DB_GOB_ChickenChase_Acquirer(_Var1);
PROC_CharacterMoveTo(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, _Var1, "Run", "GOB_ChickenChase_CubMovedToPlayerThenCamp");

PROC
PROC_GOB_ChickenChase_OwlbearAcquired()
AND
QRY_OnlyOnce("GOB_ChickenChase_PlayerAcquiredOwlbearCub", _, _, _, _)
THEN
PROC_GOB_ChickenChase_OwlbearAcquired_Internal();

PROC
PROC_GOB_ChickenChase_OwlbearAcquired_Internal()
THEN
SetFlag(GOB_ChickenChase_State_OwlbearAcquired_da704027-02ea-717c-4390-f538e5e5cd7a, NULL_00000000-0000-0000-0000-000000000000);
SetFlag(GOB_ChickenChase_State_BallIsDead_4d3be956-dcdf-3199-0e53-d76cf6f66051, NULL_00000000-0000-0000-0000-000000000000);
PROC_GOB_ChickenChase_OwlbearIntroEnded();

IF
EntityEvent(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, "GOB_ChickenChase_CubMovedToPlayerThenCamp", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GOB_ChickenChase_Acquirer(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GOB_ChickenChase_Acquirer(_Var1);
StartVoiceBark(GOB_ChickenChase_VB_AcquiredOwlbear_2397f90d-eaf5-a3bb-785b-d57d3e41a83a, _Var1);
PROC_GOB_ChickenChase_MoveOwlbearToCamp(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09);

PROC
PROC_GOB_ChickenChase_OwlbearIntroEnded()
THEN
ClearFlag(GOB_ChickenChase_Event_OwlbearDiscussion_b0364ea7-a813-4d71-aebb-13bea72c812a, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_GOB_ChickenChase_OwlbearIntroEnded()
AND
DB_GOB_ChickenChase_OwlbearDiscussion(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_ForceStopDialog(_Var1);

PROC
PROC_FlagReactionAfterDialog(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, GOB_ChickenChase_Event_OwlbearAttack_9eb04a84-4c3e-6d20-2a19-f3ff09f3047d, _, _, _)
THEN
PROC_CharacterMoveTo(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "Run", "GOB_ChickenChase_OwlbearAttack");

IF
EntityEvent(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, "GOB_ChickenChase_OwlbearAttack", _, _, _)
THEN
Attack(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, 1);

IF
AttackedBy(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, _, _, _, _, _, (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_MakeNPCHostile(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);

IF
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_OwlbearDiscussion(_Var1, _, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_OwlbearIntro(1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GOB_ChickenChase_OwlbearIntro(1);
PROC_GOB_ChickenChase_OwlbearIntroEnded();

PROC
PROC_GOB_ChickenChase_ReplaceChickenWithOwlbear()
AND
GetFlag(GOB_ChickenChase_State_BallIsDead_4d3be956-dcdf-3199-0e53-d76cf6f66051, NULL_00000000-0000-0000-0000-000000000000, 1, _, _)
THEN
ClearFlag(GOB_ChickenChase_State_BallIsDead_4d3be956-dcdf-3199-0e53-d76cf6f66051, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_GOB_ChickenChase_ReplaceChickenWithOwlbear()
AND NOT
DB_PermaDefeated(S_GOB_Festivities_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, _, _, _, _)
THEN
Die(S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 0);
TeleportTo(S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, S_GOB_ChickenChase_DeadChickenPosition_b123645f-bfcb-4d49-95ce-fa106834a14e, "", 0, 0, 0);
SetOnStage(S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, 0);

PROC
PROC_GOB_ChickenChase_ReplaceChickenWithOwlbear()
THEN
PROC_GOB_ChickenChase_UnregisterTriggersFor(S_GOB_Festivities_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785);
NOT DB_GOB_ChickenChase_Ball(S_GOB_Festivities_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785);
DB_GOB_ChickenChase_Ball(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09);

IF
EnteredTrigger((CHARACTER)_Var1, S_GOB_Festivities_BingeArea_f4a4031d-7e0c-45b8-970b-47c62d4908d8, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_OnlyOnce("GOB_ChickenChase_IntroEvent", _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(GOB_VoloBallad_State_OnStage_0bc1d7d7-9129-4c6e-188d-054640cea3b9, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GOB_ChickenChase_Quest_Intro_88253a4f-d618-8945-1473-5362d63c1829, NULL_00000000-0000-0000-0000-000000000000);

IF
FlagCleared(GOB_VoloBallad_State_OnStage_0bc1d7d7-9129-4c6e-188d-054640cea3b9, _, _, _, _)
AND NOT
DB_GlobalFlag(GOB_ChickenChase_State_ChaseIntroduced_79cb96c2-8d50-40c1-8bce-4d4e12d2d484, _, _, _, _)
AND NOT
DB_GOB_ChickenChase_OwlbearIntro(1, _, _, _, _)
THEN
SetFlag(GOB_ChickenChase_Quest_Intro_88253a4f-d618-8945-1473-5362d63c1829, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_GlobalFlagReactionAfterDialog(GOB_Festivities_ChickenAttack_19172c12-41db-7409-03ca-2933747c0561, _, _, _, _)
THEN
PROC_CharacterMoveTo(S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "Run", "GOB_ChickenChase_ChickenAttack");

IF
EntityEvent(S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, "GOB_ChickenChase_ChickenAttack", _, _, _)
THEN
PROC_SetCanFight(S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, 1);
PROC_MakeNPCHostile(S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);

IF
DialogEnded(DIALOGRESOURCEGUID_GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DialogGetInvolvedPlayer(_Var1, 1, _Var2, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
THEN
DetachFromPartyGroup(_Var2);

PROC
PROC_GlobalFlagReactionAfterDialog(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, _, _, _, _)
THEN
PROC_GOB_ChickenChase_StartChase();

PROC
PROC_GOB_ChickenChase_StartChase()
THEN
SetFlag(GOB_ChickenChase_State_ChaseIntroduced_79cb96c2-8d50-40c1-8bce-4d4e12d2d484, NULL_00000000-0000-0000-0000-000000000000);
SetFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, NULL_00000000-0000-0000-0000-000000000000);

IF
FlagSet(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
SetFlag(GOB_ChickenChase_State_PlayedOnce_ccfb238d-915d-422d-b63a-b627b0417fcd, NULL_00000000-0000-0000-0000-000000000000);
ClearFlag(GOB_ChickenChase_Quest_Intro_88253a4f-d618-8945-1473-5362d63c1829, NULL_00000000-0000-0000-0000-000000000000);
ClearFlag(GOB_ChickenChase_State_LeftRing_e95c9b62-8b8a-4f31-bdb8-3777d5a11a0a, NULL_00000000-0000-0000-0000-000000000000);
ClearFlag(GOB_ChickenChase_State_TimeIsOut_76a6939e-b3f1-4687-ae9a-971a57c1c523, NULL_00000000-0000-0000-0000-000000000000);
ClearFlag(GOB_ChickenChase_State_ExtraPlayer_ddb5220c-4fc8-451e-bb65-80087f3ffa88, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_GOB_ChickenChase_StartChase()
AND
DB_GOB_ChickenChase_Winner(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GOB_ChickenChase_Winner(_Var1);
ClearFlag(GOB_ChickenChase_Quest_Winner_8cc28e29-0b10-0496-04c1-69db3397722c, _Var1);

PROC
PROC_GOB_ChickenChase_StartChase()
THEN
SetHasDialog(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, 0);
ObjectTimerLaunch(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase_DialogDelay", 1000);
LookAtEntity(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, S_GOB_Commentator_CallLookAt_3a075c87-8747-46e6-a7d6-b60808674140);

IF
ObjectTimerFinished(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase_DialogDelay", _, _, _)
THEN
PROC_TryStartAD(GOB_ChickenChase_AD_GameStarts_44ff6ccd-fe78-16e7-6bfc-390b03eaba79, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);
ObjectTimerLaunch(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase_ForceStart", 1000);

IF
ObjectTimerFinished(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase_ForceStart", _, _, _)
AND
DB_GOB_ChickenChase_StartedGame(1, _, _, _, _)
THEN
NOT DB_GOB_ChickenChase_StartedGame(1);

IF
ObjectTimerFinished(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase_ForceStart", _, _, _)
AND NOT
DB_GOB_ChickenChase_StartedGame(1, _, _, _, _)
THEN
PROC_GOB_ChickenChase_MoveCommentatorToGame();
PROC_GOB_ChickenChase_MoveBallToGame();

IF
AutomatedDialogStarted(GOB_ChickenChase_AD_GameStarts_44ff6ccd-fe78-16e7-6bfc-390b03eaba79, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
THEN
DB_GOB_ChickenChase_StartedGame(1);
PROC_GOB_ChickenChase_MoveCommentatorToGame();
PROC_GOB_ChickenChase_MoveBallToGame();

IF
AutomatedDialogRequestFailed(GOB_ChickenChase_AD_GameStarts_44ff6ccd-fe78-16e7-6bfc-390b03eaba79, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
THEN
DB_GOB_ChickenChase_StartedGame(1);
PROC_GOB_ChickenChase_MoveCommentatorToGame();
PROC_GOB_ChickenChase_MoveBallToGame();

PROC
PROC_GOB_ChickenChase_MoveBallToGame()
AND
DB_GOB_ChickenChase_Ball(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, _, _, _, _)
THEN
PROC_CharacterMoveTo(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, S_GOB_ChickenChase_OwlbearStartPoint_6c2de754-b12a-4b2a-8d7c-66c8aa6d3be7, "Run", "");

PROC
PROC_GOB_ChickenChase_MoveCommentatorToGame()
AND
IsInTrigger(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, S_GOB_ChickenChase_CommentatorArea_4aeac57c-d4e8-4a20-882c-231b2b039299, 0, _, _)
THEN
PROC_CharacterMoveTo(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, S_GOB_ChickenChase_CommentatorPoint_0408bdfe-5b6e-4cec-8bd0-661b8c68968e, "Walk", "GOB_ChickenChase_CommentatorOnBench");

PROC
PROC_GOB_ChickenChase_MoveCommentatorToGame()
AND
IsInTrigger(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, S_GOB_ChickenChase_CommentatorArea_4aeac57c-d4e8-4a20-882c-231b2b039299, 1, _, _)
THEN
SetEntityEvent(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase_CommentatorOnBench");

IF
EntityEvent((CHARACTER)_Var1, "GOB_ChickenChase_CommentatorOnBench", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
SetHasDialog(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, 1);

IF
EnteredTrigger(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, S_GOB_ChickenChase_CommentatorArea_4aeac57c-d4e8-4a20-882c-231b2b039299, _, _, _)
THEN
DB_GOB_ChickenChase_CommentatorIsReady(1);

IF
LeftTrigger(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, S_GOB_ChickenChase_CommentatorArea_4aeac57c-d4e8-4a20-882c-231b2b039299, _, _, _)
THEN
NOT DB_GOB_ChickenChase_CommentatorIsReady(1);

IF
EnteredTrigger((CHARACTER)_Var1, S_GOB_ChickenChase_StartArea_37352f92-b862-47f8-ae3a-9c0a3f4a31d1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_GameInProgress_ccbbaaf5-1f56-f106-42f9-d5b415e1abf9, _Var1, 1, _Var1, _Var1)
THEN
DB_GOB_ChickenChase_PlayerIsReady(_Var1);

IF
LeftTrigger((CHARACTER)_Var1, S_GOB_ChickenChase_StartArea_37352f92-b862-47f8-ae3a-9c0a3f4a31d1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_GameInProgress_ccbbaaf5-1f56-f106-42f9-d5b415e1abf9, _Var1, 1, _Var1, _Var1)
THEN
NOT DB_GOB_ChickenChase_PlayerIsReady(_Var1);

IF
EnteredTrigger(S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, S_GOB_ChickenChase_ChickenShovePoint_2e97f1e8-123c-4dde-be45-67ad8b49453c, _, _, _)
THEN
DB_GOB_ChickenChase_BallIsReady(1);

IF
LeftTrigger(S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785, S_GOB_ChickenChase_ChickenShovePoint_2e97f1e8-123c-4dde-be45-67ad8b49453c, _, _, _)
THEN
NOT DB_GOB_ChickenChase_BallIsReady(1);

IF
EnteredTrigger(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, S_GOB_ChickenChase_OwlbearStartPoint_6c2de754-b12a-4b2a-8d7c-66c8aa6d3be7, _, _, _)
THEN
DB_GOB_ChickenChase_BallIsReady(1);

IF
LeftTrigger(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, S_GOB_ChickenChase_OwlbearStartPoint_6c2de754-b12a-4b2a-8d7c-66c8aa6d3be7, _, _, _)
THEN
NOT DB_GOB_ChickenChase_BallIsReady(1);

IF
EnteredTrigger((CHARACTER)_Var1, S_GOB_ChickenChase_GameRing_feb54bd2-75dd-43cd-a7b1-bdc8a12026e5, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GOB_CheckIllegalPlayers();

IF
LeftTrigger((CHARACTER)_Var1, S_GOB_ChickenChase_GameRing_feb54bd2-75dd-43cd-a7b1-bdc8a12026e5, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GOB_CheckIllegalPlayers();

PROC
PROC_GOB_CheckIllegalPlayers()
AND
QRY_GOB_ChickenChase_IllegalPlayersOnField()
THEN
SetFlag(GOB_ChickenChase_State_IllegalPlayer_10cce241-f9f4-378d-5374-565f66194b95, NULL_00000000-0000-0000-0000-000000000000);
DB_GOB_ChickenChase_IllegalPlayers(1);

PROC
PROC_GOB_CheckIllegalPlayers()
AND NOT
QRY_GOB_ChickenChase_IllegalPlayersOnField()
THEN
ClearFlag(GOB_ChickenChase_State_IllegalPlayer_10cce241-f9f4-378d-5374-565f66194b95, NULL_00000000-0000-0000-0000-000000000000);
NOT DB_GOB_ChickenChase_IllegalPlayers(1);

QRY
QRY_GOB_ChickenChase_IllegalPlayersOnField()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var1, S_GOB_ChickenChase_GameRing_feb54bd2-75dd-43cd-a7b1-bdc8a12026e5, 1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_GameInProgress_ccbbaaf5-1f56-f106-42f9-d5b415e1abf9, _Var1, 0, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DB_GOB_ChickenChase_CommentatorIsReady(1, _, _, _, _)
AND
DB_GOB_ChickenChase_BallIsReady(1, _, _, _, _)
AND
DB_GOB_ChickenChase_PlayerIsReady(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GOB_ChickenChase_IllegalPlayers(1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GOB_ChickenChase_CheckIfReady(_Var1);

PROC
PROC_GOB_ChickenChase_CheckIfReady((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GOB_ChickenChase_Ball(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000, 0, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
AND NOT
QRY_GOB_ChickenChase_TooManyPlayers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GOB_ChickenChase_StartingGame(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GOB_ChickenChase_StartingGame(1);
SetHasDialog(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, 0);
PROC_ForceStopDialog(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);
TriggerClearItemsOwner(S_GOB_ChickenChase_OwnershipTigger_7148555f-dc54-4ddd-8467-ab08db4ecfdd);
PROC_GOB_ChickenChase_DisableCrimes(_Var2);
PROC_GOB_ChickenChase_ThrowBallIfCan();
PlaySound(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "SE_Chicken_Chase_Start");
PROC_TryStartAD(GOB_ChickenChase_AD_StartChase_a3173f52-4ead-ebd7-5b9c-159967611962, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);
DB_GOB_ChickenChase_IsCommenting(1);
ObjectTimerLaunch(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase_StartChaseComment", 6000);
SetHasDialog(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, 1);

IF
ObjectTimerFinished(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase_StartChaseComment", _, _, _)
THEN
NOT DB_GOB_ChickenChase_IsCommenting(1);

PROC
PROC_GOB_ChickenChase_DisableCrimes((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_CharacterDisableAllCrimes(_Var1, 1);

PROC
PROC_GOB_ChickenChase_ThrowBallIfCan()
AND
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 == S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785
THEN
RealtimeObjectTimerLaunch(_Var1, "GOB_ChickenChase_ThrowFallback", 6000);
SetFlag(GOB_ChickenChase_State_WaitingForBallToLand_3ecdcf8e-c5eb-4fe7-93fd-daf9a6da1c1d, NULL_00000000-0000-0000-0000-000000000000);
UseSpell(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "Target_GOB_ChickenChase_CommentatorShove", S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785);
SetTag(_Var1, IGNORE_DANGEROUS_SURFACES_bbf62461-4af4-4631-807a-eb0bd988d9a6);

IF
CastedSpell(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "Target_GOB_ChickenChase_CommentatorShove", _, _, _)
THEN
SetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000);
ClearFlag(GOB_ChickenChase_State_WaitingForBallToLand_3ecdcf8e-c5eb-4fe7-93fd-daf9a6da1c1d, NULL_00000000-0000-0000-0000-000000000000);

IF
CastSpellFailed(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "Target_GOB_ChickenChase_CommentatorShove", _, _, _)
AND
GetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000, 0, _, _)
AND
DB_GOB_ChickenChase_Ball(_Var4, _, _, _, _)
THEN
SetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000);
ClearFlag(GOB_ChickenChase_State_WaitingForBallToLand_3ecdcf8e-c5eb-4fe7-93fd-daf9a6da1c1d, NULL_00000000-0000-0000-0000-000000000000);
PROC_CharacterMoveTo(_Var4, S_GOB_ChickenChase_OwlbearStartPoint_6c2de754-b12a-4b2a-8d7c-66c8aa6d3be7, "Run", "");

IF
ObjectTimerFinished((CHARACTER)_Var1, "GOB_ChickenChase_ThrowFallback", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000, 0, _Var1, _Var1)
THEN
SetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000);
ClearFlag(GOB_ChickenChase_State_WaitingForBallToLand_3ecdcf8e-c5eb-4fe7-93fd-daf9a6da1c1d, NULL_00000000-0000-0000-0000-000000000000);
PROC_CharacterMoveTo(_Var1, S_GOB_ChickenChase_OwlbearStartPoint_6c2de754-b12a-4b2a-8d7c-66c8aa6d3be7, "Run", "");

PROC
PROC_GOB_ChickenChase_ThrowBallIfCan()
AND
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != S_GOB_ChickenBall_d17d3d8e-cf4a-48cd-a5ab-de0083110785
THEN
SetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000);
SetTag(_Var1, IGNORE_DANGEROUS_SURFACES_bbf62461-4af4-4631-807a-eb0bd988d9a6);

IF
AutomatedDialogStarted(GOB_ChickenChase_AD_StartChase_a3173f52-4ead-ebd7-5b9c-159967611962, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
GetFlag(GOB_ChickenChase_State_GameInProgress_ccbbaaf5-1f56-f106-42f9-d5b415e1abf9, _Var2, 1, _, _)
THEN
ObjectTimerLaunch(_Var2, "GOB_ChickenChase_LostChaseOnTime", 60000);
ApplyStatus(_Var2, "GOB_CHICKENCHASE", 60, 1, NULL_00000000-0000-0000-0000-000000000000);
ObjectQuestTimerLaunch(_Var2, "GOB_ChickenChase_Game", "GOB_ChickenChase_GameTimer", 60000, 0);

IF
AutomatedDialogRequestFailed(GOB_ChickenChase_AD_StartChase_a3173f52-4ead-ebd7-5b9c-159967611962, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
GetFlag(GOB_ChickenChase_State_GameInProgress_ccbbaaf5-1f56-f106-42f9-d5b415e1abf9, _Var2, 1, _, _)
THEN
ObjectTimerLaunch(_Var2, "GOB_ChickenChase_LostChaseOnTime", 60000);
ApplyStatus(_Var2, "GOB_CHICKENCHASE", 60, 1, NULL_00000000-0000-0000-0000-000000000000);
ObjectQuestTimerLaunch(_Var2, "GOB_ChickenChase_Game", "GOB_ChickenChase_GameTimer", 60000, 0);

IF
DB_GOB_ChickenChase_FieldPart(_, _Var2, _, _, _)
THEN
DB_GOB_ChickenChase_ADFlags(_Var2);

IF
EnteredTrigger((CHARACTER)_Var1, (TRIGGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_FieldPart(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
SetFlag(_Var3, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);

IF
LeftTrigger((CHARACTER)_Var1, (TRIGGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_FieldPart(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
ClearFlag(_Var3, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);

IF
AutomatedDialogStarted(DIALOGRESOURCEGUID_GOB_ChickenChase_AD_Comments_8ec0b010-5d5c-e31a-4c54-be6dd909c64f, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
DB_GOB_ChickenChase_IsCommenting(1);

IF
AutomatedDialogEnded(DIALOGRESOURCEGUID_GOB_ChickenChase_AD_Comments_8ec0b010-5d5c-e31a-4c54-be6dd909c64f, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
NOT DB_GOB_ChickenChase_IsCommenting(1);

IF
FlagSet((FLAG)_Var1, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_GlobalFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_ADFlags(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GOB_ChickenChase_IsCommenting(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_LastAD(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var3
AND NOT
DB_DialogNPCs(_, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _, _Var1, _Var1)
AND NOT
DB_MovingTo(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _, _, _, _Var1)
THEN
PROC_TryStartAD(DIALOGRESOURCEGUID_GOB_ChickenChase_AD_Comments_8ec0b010-5d5c-e31a-4c54-be6dd909c64f, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);
NOT DB_GOB_ChickenChase_LastAD(_Var3);
DB_GOB_ChickenChase_LastAD(_Var1);

IF
FlagSet((FLAG)_Var1, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_GlobalFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_ADFlags(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_IsCommenting(1, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(_Var1, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);

IF
EnteredTrigger((CHARACTER)_Var1, S_GOB_ChickenChase_FootballGatesBox_8cdc4a7f-9972-4578-b545-2383faf65c60, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_GoalScored_79b6eef1-c8b6-d471-f7ca-811c5abf564f, NULL_00000000-0000-0000-0000-000000000000, 0, _Var1, _Var1)
THEN
SetFlag(GOB_ChickenChase_State_GoalScored_79b6eef1-c8b6-d471-f7ca-811c5abf564f, NULL_00000000-0000-0000-0000-000000000000);
PROC_GOB_ChickenChase_SetupWinner();

PROC
PROC_GOB_ChickenChase_SetupWinner()
AND
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetClosestAlivePlayer(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
DB_GOB_ChickenChase_Winner(_Var2);
SetFlag(GOB_ChickenChase_Quest_Winner_8cc28e29-0b10-0496-04c1-69db3397722c, _Var2);

PROC
PROC_FlagReactionAfterDialog((CHARACTER)_Var1, GOB_Festivities_BallToldAboutGates_67c96492-3a87-8278-e2ee-2b0a8bd7aeb7, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_CharacterMoveTo(_Var1, S_GOB_ChickenChase_FootballGatesBox_8cdc4a7f-9972-4578-b545-2383faf65c60, "Run", "");

IF
LeftTrigger((CHARACTER)_Var1, S_GOB_ChickenChase_LeftRingTrigger_c9cdf63a-b1bf-431d-9d09-3c76e9ae12a1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
THEN
SetFlag(GOB_ChickenChase_State_LeftRing_e95c9b62-8b8a-4f31-bdb8-3777d5a11a0a, NULL_00000000-0000-0000-0000-000000000000);
PROC_GOB_ChickenChase_EndChase();

IF
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GOB_ChickenChase_State_BallIsDead_4d3be956-dcdf-3199-0e53-d76cf6f66051, NULL_00000000-0000-0000-0000-000000000000);

IF
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GOB_ChickenChase_EndChase();

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "GOB_ChickenChase_LostChaseOnTime", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
SetFlag(GOB_ChickenChase_State_TimeIsOut_76a6939e-b3f1-4687-ae9a-971a57c1c523, NULL_00000000-0000-0000-0000-000000000000);
PROC_GOB_ChickenChase_EndChase();

IF
FlagSet(GOB_ChickenChase_State_GoalScored_79b6eef1-c8b6-d471-f7ca-811c5abf564f, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_GOB_ChickenChase_Fireworks();
PROC_GOB_ChickenChase_EndChase();

IF
FlagSet(GOB_ChickenChase_State_GoalScored_79b6eef1-c8b6-d471-f7ca-811c5abf564f, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
GetFlag(GOB_ChickenChase_State_GameInProgress_ccbbaaf5-1f56-f106-42f9-d5b415e1abf9, _Var3, 1, _, _)
THEN
QuestUpdate(_Var3, "HIDDEN_WLD_Boosters", "GOB_ChickenChase_Won");

IF
EnteredTrigger((CHARACTER)_Var1, S_GOB_ChickenChase_GameRing_feb54bd2-75dd-43cd-a7b1-bdc8a12026e5, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
AND
QRY_GOB_ChickenChase_IllegalPlayersOnField()
THEN
SetFlag(GOB_ChickenChase_State_ExtraPlayer_ddb5220c-4fc8-451e-bb65-80087f3ffa88, NULL_00000000-0000-0000-0000-000000000000);
PROC_GOB_ChickenChase_EndChase();

QRY
QRY_GOB_ChickenChase_TooManyPlayers((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 != _Var1
AND
IsInTrigger(_Var2, S_GOB_ChickenChase_GameRing_feb54bd2-75dd-43cd-a7b1-bdc8a12026e5, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DB_PermaDefeated(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _, _, _, _)
THEN
SetFlag(GOB_ChickenChase_State_CommentatorIsDead_1ad6f5ec-09d7-f7b7-b79a-5c32b40ec1a5, NULL_00000000-0000-0000-0000-000000000000);
PROC_GOB_ChickenChase_EndChase();

PROC
PROC_GOB_ChickenChase_EndChase()
THEN
PROC_GOB_ChickenChase_PlaySoundIfGameInProgress();
PROC_GOB_ChickenChase_ChaseEnded_CancelTimer();
PROC_GOB_ChickenChase_ChaseEnded_UpdateFlags();
PROC_GOB_ChickenChase_ChaseEnded_StartSpottingThePlayer_Internal();
PROC_GOB_ChickenChase_ChaseEnded_RestoreBallSettings();
TimerLaunch("GOB_ChickenChase_RestoreOwnership", 3000);
NOT DB_GOB_ChickenChase_StartingGame(1);

PROC
PROC_GOB_ChickenChase_PlaySoundIfGameInProgress()
AND
DB_GlobalFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, _, _, _, _)
THEN
PlaySound(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "SE_Chicken_Chase_End");

IF
TimerFinished("GOB_ChickenChase_RestoreOwnership", _, _, _, _)
THEN
PROC_GOB_ChickenChase_ChaseEnded_RestoreFieldOwner();

PROC
PROC_GOB_ChickenChase_ChaseEnded_CancelTimer()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ObjectTimerCancel(_Var1, "GOB_ChickenChase_LostChaseOnTime");
RemoveStatus(_Var1, "GOB_CHICKENCHASE");

IF
StatusRemoved((GUIDSTRING)_Var1, "GOB_CHICKENCHASE", _, _, (GUIDSTRING)_Var1)
THEN
ObjectTimerCancel(_Var1, "GOB_ChickenChase_Game");

PROC
PROC_GOB_ChickenChase_ChaseEnded_UpdateFlags()
THEN
ClearFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, NULL_00000000-0000-0000-0000-000000000000);
ClearFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_GOB_ChickenChase_ChaseEnded_UpdateFlags()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_GameInProgress_ccbbaaf5-1f56-f106-42f9-d5b415e1abf9, _Var1, 1, _Var1, _Var1)
THEN
SetFlag(GOB_ChickenChase_State_ChaseEnded_ba1fc19f-ef95-c08e-91f8-2ab7879db77e, _Var1);
SetFlag(GOB_ChickenChase_State_WaitingAfterGame_041b8b86-c92d-4b34-be67-a035257a1cec, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_GOB_ChickenChase_ChaseEnded_StartSpottingThePlayer_Internal()
THEN
TimerLaunch("GOB_ChickenChase_StartSpottingWithDelay", 2000);

IF
TimerFinished("GOB_ChickenChase_StartSpottingWithDelay", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_GameInProgress_ccbbaaf5-1f56-f106-42f9-d5b415e1abf9, _Var1, 1, _Var1, _Var1)
AND NOT
QRY_StartDialog(GOB_ChickenChase_GameOver_ef1f7bc6-8a65-15aa-085b-f4c181d95d16, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _Var1, _Var1, _Var1)
THEN
PROC_GOB_ChickenChase_ChaseEnded_StartSpottingThePlayer();

PROC
PROC_GOB_ChickenChase_ChaseEnded_StartSpottingThePlayer()
AND NOT
DB_SpotPlayers(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase", _, _, _)
THEN
DB_SpotPlayers_HasObjectFlag(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase", GOB_ChickenChase_State_GameInProgress_ccbbaaf5-1f56-f106-42f9-d5b415e1abf9, 1);
DB_SpotPlayers_HasObjectFlag(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase", GOB_ChickenChase_State_ChaseEnded_ba1fc19f-ef95-c08e-91f8-2ab7879db77e, 1);
DB_SpotPlayers_CustomRadius(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase", 12);
DB_SpotPlayers(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_GOB_ChickenChase_ChaseEnded_StartSpottingThePlayer()
AND
DB_SpotPlayers(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, _)
THEN
PROC_SpotPlayers_RestartSpotting(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase");

PROC
PROC_SpotPlayers_Spotted(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, "GOB_ChickenChase", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_StartDialog(GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_GOB_ChickenChase_ChaseEnded_RestoreFieldOwner()
THEN
TriggerSetItemsOwner(S_GOB_ChickenChase_OwnershipTigger_7148555f-dc54-4ddd-8467-ab08db4ecfdd, S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b);

PROC
PROC_GOB_ChickenChase_ChaseEnded_RestoreBallSettings()
AND
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
CharacterEnableAllCrimes(_Var1);
ClearTag(_Var1, IGNORE_DANGEROUS_SURFACES_bbf62461-4af4-4631-807a-eb0bd988d9a6);

PROC
PROC_GOB_ChickenChase_Fireworks()
THEN
PROC_LoopEffect(VFX_Environment_Fireworks_Emitter_01_2562430f-b79b-8440-dae8-017ac7587fa7, S_GOB_ChickenChase_FireworksPosition_735b35fd-6e60-4c6a-b75d-245808fb4b2d, "GOB_ChickenChase_Fireworks", "WLD_Main_A", "");
TimerLaunch("GOB_ChickenChase_Fireworks", 6000);

IF
TimerFinished("GOB_ChickenChase_Fireworks", _, _, _, _)
THEN
PROC_StopLoopEffect(S_GOB_ChickenChase_FireworksPosition_735b35fd-6e60-4c6a-b75d-245808fb4b2d, "GOB_ChickenChase_Fireworks");

IF
FlagCleared(GOB_ChickenChase_State_ChaseEnded_ba1fc19f-ef95-c08e-91f8-2ab7879db77e, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
ClearFlag(GOB_ChickenChase_State_WaitingAfterGame_041b8b86-c92d-4b34-be67-a035257a1cec, NULL_00000000-0000-0000-0000-000000000000);

IF
DB_GOB_ChickenChase_GreaseBottles(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
TemplateAddTo(GRN_GreaseBottle_A_e2968a2e-bc83-4d50-99ef-39ce78d2d630, _Var2, 1, 0);
PROC_TriggerRegisterForPlayers(_Var1);

IF
EnteredTrigger((CHARACTER)_Var1, (TRIGGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_GreaseBottles(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_PlayingChase_34de58e6-ca4a-d171-c1ac-32821bb036ed, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
AND
GetFlag(GOB_ChickenChase_State_BallOnField_afefbe32-abfc-4bd0-b0f7-d11206a2c7cc, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
GetItemByTemplateInInventory(GRN_GreaseBottle_A_e2968a2e-bc83-4d50-99ef-39ce78d2d630, _Var3, _Var4, _Var1, _Var1)
THEN
PROC_TryStartAD(GOB_ChickenChase_AD_ShootingBarrel_c51593a6-e719-3199-4ebf-c20c9d82a703, S_GOB_Festivities_Goblin_005_Ranger_02_a955aea9-9040-4d4c-9264-e46e385dea94);
UseSpell(_Var3, "Throw_Throw", _Var2, _Var4);
PROC_GOB_ChickenChase_HandleCommentOnThrowing(_Var2, _Var3);

PROC
PROC_GOB_ChickenChase_HandleCommentOnThrowing((TRIGGER)_Var1, (CHARACTER)_Var2, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
THEN
DB_GOB_ChickenChase_GreaseBottleWasThrown(_Var1, _Var2);

IF
AttackedBy((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var2, _, _, "InventoryThrow", _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_GreaseBottleWasThrown(_, _Var2, _Var1, _Var1, _Var1)
THEN
DB_GOB_ChickenChase_GreaseBottleHitPlayer(1);

IF
OnThrown(_, GRN_GreaseBottle_A_e2968a2e-bc83-4d50-99ef-39ce78d2d630, (CHARACTER)_Var2, _, (REAL)_Var4, (REAL)_Var5, (REAL)_Var6, _, _, _)
AND
DB_GOB_ChickenChase_GreaseBottleWasThrown(_Var7, _Var2, _, _, _)
AND
DB_GOB_ChickenChase_GreaseBottleHitPlayer(1, _, _, _, _)
THEN
SysClear("DB_GOB_ChickenChase_GreaseBottleWasThrown", 2);
SysClear("DB_GOB_ChickenChase_GreaseBottleHitPlayer", 1);

IF
OnThrown(_, GRN_GreaseBottle_A_e2968a2e-bc83-4d50-99ef-39ce78d2d630, (CHARACTER)_Var2, _, (REAL)_Var4, (REAL)_Var5, (REAL)_Var6, _, _, _)
AND
DB_GOB_ChickenChase_GreaseBottleWasThrown(_Var7, _Var2, _, _, _)
AND NOT
DB_GOB_ChickenChase_GreaseBottleHitPlayer(1, _, _, _, _)
THEN
PROC_TryStartAD(GOB_ChickenChase_AD_BarrelShotHit_d0dff7d3-39a6-97f7-a3fc-0a72c998bba3, S_GOB_Festivities_Goblin_006_Ranger_04_f3f416d1-b946-4019-95ba-7053f63dd776);
SysClear("DB_GOB_ChickenChase_GreaseBottleWasThrown", 2);
SysClear("DB_GOB_ChickenChase_GreaseBottleHitPlayer", 1);

IF
FlagSet(GOB_ChickenChase_Event_GetAllCommentatorMoney_6cef7559-5e39-4b15-889c-e1a486371b02, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetGold(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _Var3, _Var1, _Var1, _Var1)
AND
IntegerSubtract(0, _Var3, _Var4, _Var1, _Var1)
THEN
PROC_AddGoldToMagicPockets(_Var1, _Var3);
AddGold(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _Var4);

PROC
PROC_GOB_ChickenChase_MoveOwlbearToCamp((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_DisappearOutOfSightTo(_Var1, S_GOB_ChickenChase_OwlbearEscapePoint_f465c3e3-6abe-4234-98e4-b366058e33ca, "Run", 1, "GOB_ChickenChase_CubDisappeared");

IF
EntityEvent((GUIDSTRING)_Var1, "GOB_ChickenChase_CubDisappeared", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_GOB_ChickenChase_OwlbearTeleported(1);
PROC_RemoveAllDialogEntriesForSpeaker(_Var1);

IF
DB_GOB_ChickenChase_Ball(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TriggerRegisterForCharacter(S_GOB_ChickenChase_FootballGatesBox_8cdc4a7f-9972-4578-b545-2383faf65c60, _Var1);
TriggerRegisterForCharacter(S_GOB_ChickenChase_GameRing_feb54bd2-75dd-43cd-a7b1-bdc8a12026e5, _Var1);
TriggerRegisterForCharacter(S_GOB_ChickenChase_StartArea_37352f92-b862-47f8-ae3a-9c0a3f4a31d1, _Var1);

IF
DB_GOB_ChickenChase_FieldPart(_Var1, _, _Var1, _Var1, _Var1)
AND
DB_GOB_ChickenChase_Ball(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
TriggerRegisterForCharacter(_Var1, _Var3);

PROC
PROC_GOB_ChickenChase_UnregisterTriggersFor((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
TriggerUnregisterForCharacter(S_GOB_ChickenChase_FootballGatesBox_8cdc4a7f-9972-4578-b545-2383faf65c60, _Var1);

PROC
PROC_GOB_ChickenChase_UnregisterTriggersFor((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GOB_ChickenChase_FieldPart(_Var2, _, _Var1, _Var1, _Var1)
THEN
TriggerUnregisterForCharacter(_Var2, _Var1);

IF
TextEvent("debug_preparechase", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetTag(_Var1, PETPAL_dc860a81-f3c2-4c1a-ab90-e7583324845c);
AddGold(_Var1, 10);

IF
TextEvent("cub2camp", _, _, _, _)
AND NOT
DB_PermaDefeated(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, _, _, _, _)
AND NOT
DB_GOB_ChickenChase_OwlbearTeleported(1, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(GOB_ChickenChase_State_OwlbearAcquired_da704027-02ea-717c-4390-f538e5e5cd7a);
PROC_GOB_ChickenChase_MoveOwlbearToCamp(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09);

IF
FlagSet(GOB_GoblinToast_State_RealizedPoison_0e867c08-b2b9-4f43-8260-168026663e2c, NULL_00000000-0000-0000-0000-000000000000, _, (INTEGER)_, (INTEGER)_)
THEN
SetFlag(GOB_ChickenChase_State_BallIsDead_4d3be956-dcdf-3199-0e53-d76cf6f66051, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_GOB_ChickenChase_StartChase()
THEN
PROC_StopLoopEffect(S_GOB_ChickenChase_FireworksPosition_735b35fd-6e60-4c6a-b75d-245808fb4b2d, "GOB_ChickenChase_Fireworks");
PROC_ShowMarker(NULL_00000000-0000-0000-0000-000000000000, "GOB_ChickenChase");

IF
DB_GOB_ChickenChase_PlayerIsReady(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_HideMarker(NULL_00000000-0000-0000-0000-000000000000, "GOB_ChickenChase");

PROC
PROC_DialogFlagSetup(GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, _, _, _, _)
AND
DB_DialogMoneyTransfer(1, GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, _Var3, 2, 1)
AND
GetGold(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _Var4, _, _, _)
AND
_Var4 < _Var3
THEN
SetFlag(GOB_ChickenChase_State_NoMoneyLeft_b88f1359-78b8-4adc-bf8a-7c92d3814bbf, NULL_00000000-0000-0000-0000-000000000000);

IF
DialogEnded(GOB_ChickenChase_Commentator_32841789-f270-c37c-8454-e50ca6ada256, _, _, _, _)
AND
DB_GlobalFlag(GOB_ChickenChase_State_NoMoneyLeft_b88f1359-78b8-4adc-bf8a-7c92d3814bbf, _, _, _, _)
THEN
ClearFlag(GOB_ChickenChase_State_NoMoneyLeft_b88f1359-78b8-4adc-bf8a-7c92d3814bbf, NULL_00000000-0000-0000-0000-000000000000);

IF
DB_PermaDefeated(S_GOB_Festivities_Goblin_000_031e9fb7-136a-46c7-91d7-77ce3e20236a, _, _, _, _)
AND
DB_PermaDefeated(S_GOB_ChickenChase_Commentator_eb2c434d-1833-485e-bca2-f181eed6010b, _, _, _, _)
AND
DB_GlobalFlag(GOB_ChickenChase_State_OwlbearReplacedChicken_aabd6c48-57e4-12bb-8123-912f747f1f07, _, _, _, _)
THEN
PROC_GOB_AcquiredOwlbearToInitialPosition();

IF
FlagSet(GOB_GoblinToast_Event_ToStations_0b555ee8-2b8e-3881-b35e-9811f6baf77a, _, _, _, _)
AND
DB_GlobalFlag(GOB_ChickenChase_State_OwlbearReplacedChicken_aabd6c48-57e4-12bb-8123-912f747f1f07, _, _, _, _)
THEN
PROC_GOB_AcquiredOwlbearToInitialPosition();

PROC
PROC_GOB_AcquiredOwlbearToInitialPosition()
AND NOT
DB_GlobalFlag(GOB_ChickenChase_Event_OwlbearAcquired_775e6984-4640-41d3-97e5-b1f96c572ddd, _, _, _, _)
AND NOT
DB_GlobalFlag(GOB_OwlbearCub_Event_InvitedToCamp_2b4acc5e-fe2f-0f0b-8945-043403b50e2f, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(GOB_ChickenChase_Event_OwlbearAcquired_775e6984-4640-41d3-97e5-b1f96c572ddd);
PROC_CharacterMoveTo(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09, S_GOB_ChickenChase_OwlbearAppearPosition_10a6b193-be30-4094-84ac-c968d2a0e810, "Run", "");

PROC
PROC_GOB_AcquiredOwlbearToInitialPosition()
AND NOT
DB_GlobalFlag(GOB_ChickenChase_Event_OwlbearAcquired_775e6984-4640-41d3-97e5-b1f96c572ddd, _, _, _, _)
AND
DB_GlobalFlag(GOB_OwlbearCub_Event_InvitedToCamp_2b4acc5e-fe2f-0f0b-8945-043403b50e2f, _, _, _, _)
THEN
PROC_GOB_ChickenChase_OwlbearAcquired();
PROC_GOB_ChickenChase_MoveOwlbearToCamp(S_FOR_OwlBear_Cub_001_c66b2865-6613-4372-b97a-e330c1d75d09);

PROC
PROC_LevelLoadedOnce("BGO_Main_A", _, _, _, _)
THEN
GoalCompleted;


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act1"
