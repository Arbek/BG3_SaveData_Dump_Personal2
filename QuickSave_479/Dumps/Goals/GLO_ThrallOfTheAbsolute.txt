Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_GLO_LevelTraveler(S_GLO_ThrallOfTheAbsolute_AbsoluteHelper_15d4bd12-855b-4483-a2e5-661bfeb96d1f, "INT_Main_A", "Dummy");
DB_DialogBlockTradeButton(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202);
DB_DropMutingStatussesDialog(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202);
DB_IgnoreMutingStatussesDialog(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202);
DB_DialogStarted_IgnoreStopConditions(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202);
DB_GLO_SetupForAct_Character("INT_Main_A", S_GLO_ThrallOfTheAbsolute_AbsoluteHelper_15d4bd12-855b-4483-a2e5-661bfeb96d1f);
DB_GLO_SetupForAct_Character("BGO_Main_A", S_GLO_ThrallOfTheAbsolute_AbsoluteHelper_15d4bd12-855b-4483-a2e5-661bfeb96d1f);
DB_GLO_SetupForAct_Character("CTY_Main_A", S_GLO_ThrallOfTheAbsolute_AbsoluteHelper_15d4bd12-855b-4483-a2e5-661bfeb96d1f);
DB_GLO_SetupForAct_Character("END_Main", S_GLO_ThrallOfTheAbsolute_AbsoluteHelper_15d4bd12-855b-4483-a2e5-661bfeb96d1f);
DB_GLO_ThrallOfTheAbsolute_LoadedLevelPoints("INT_Main_A", S_INT_ThrallOfTheAbsolute_AbsoluteSpeakerPoint_ade7947b-bc32-42d2-9c88-4c3f8fa0bdd0);
DB_GLO_ThrallOfTheAbsolute_LoadedLevelPoints("BGO_Main_A", S_BGO_ThrallOfTheAbsolute_AbsoluteSpeakerPoint_dfe3a4dc-51de-46be-8f9e-d66a05a15bfd);
DB_GLO_ThrallOfTheAbsolute_LoadedLevelPoints("CTY_Main_A", S_CTY_ThrallOfTheAbsolute_AbsoluteSpeakerPoint_6d20f510-8aa7-4d1c-85ed-e72357a26f13);
DB_GLO_ThrallOfTheAbsolute_LoadedLevelPoints("END_Main", S_END_ThrallOfTheAbsolute_AbsoluteSpeakerPoint_1d436b0b-4a85-444a-8bce-f260a412d583);
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(GLO_ThrallOfTheAbsolute_Event_Generic_bc7239fc-216b-4c48-9d07-5e01fc548b7f, NULL_00000000-0000-0000-0000-000000000000, "GLO_ThrallOfTheAbsolute_Generic");
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(GLO_ThrallOfTheAbsolute_Event_AstralPrism_4d658c40-92a9-4c2b-9828-acc604789025, GLO_ThrallOfTheAbsolute_State_AstralPrism_3db9e462-7eef-45cc-af7b-51b129361d5e, "GLO_ThrallOfTheAbsolute_AstralPrism");
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(GLO_ThrallOfTheAbsolute_Event_AttemptedToEnterUppercity_9b2c04eb-81fb-4a64-8e38-87483610e4c7, GLO_ThrallOfTheAbsolute_State_AttemptedToEnterUppercity_09636c4c-5d7f-4233-9939-f898815e3f84, "GLO_ThrallOfTheAbsolute_Uppercity");
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(GLO_ThrallOfTheAbsolute_Event_DestroyedStone_7814f813-2b4f-4acd-8331-8c80d49a5ea1, GLO_ThrallOfTheAbsolute_State_DestroyedStone_5fd5cb4b-2388-418f-8e8d-8d0eebe54f08, "GLO_ThrallOfTheAbsolute_DestroyedStone");
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(GLO_ThrallOfTheAbsolute_Event_EmperorsDeath_97c0d6bc-0b6c-4d83-b6f5-ee3308d2919b, GLO_ThrallOfTheAbsolute_State_EmperorsDeath_3a190dfe-41aa-4976-8d66-fee2e64d3886, "GLO_ThrallOfTheAbsolute_EmperorDeath");
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(GLO_ThrallOfTheAbsolute_Event_DaisyDistrust_0b23432d-70cb-4edb-959c-f36d0098a2f5, GLO_ThrallOfTheAbsolute_State_DaisyDistrust_ebea58c1-1aaf-4216-8cba-6c4645c290ec, "GLO_ThrallOfTheAbsolute_DaisyDistrust");
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(GLO_ThrallOfTheAbsolute_Event_EndingLost_56da89f9-916b-076f-d6c1-035a9ac39cb8, GLO_ThrallOfTheAbsolute_State_EndingLost_989e6114-0912-af38-da9b-b7d5f65b36d2, "GLO_ThrallOfTheAbsolute_EndingLost");
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("SCL_Main_A", S_SCL_ThrallOfTheAbsolutePlayerPoint_001_1cd61899-105d-4ca9-a22d-7dcffb0955b8);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("SCL_Main_A", S_SCL_ThrallOfTheAbsolutePlayerPoint_002_16f75776-ff49-4a2a-8c03-90cc44b0a0a7);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("SCL_Main_A", S_SCL_ThrallOfTheAbsolutePlayerPoint_003_0d0a3b9a-e7a3-43c3-987f-3803ca4e6506);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("SCL_Main_A", S_SCL_ThrallOfTheAbsolutePlayerPoint_004_1af2573d-734d-42ec-896c-8a14032fee32);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("INT_Main_A", S_INT_ThrallOfTheAbsolutePlayerPoint_001_0a85b286-a1e4-40b1-902c-d061d40227ff);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("INT_Main_A", S_INT_ThrallOfTheAbsolutePlayerPoint_002_ededdd78-b999-4c1f-9a1b-335860624163);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("INT_Main_A", S_INT_ThrallOfTheAbsolutePlayerPoint_003_465d91ad-a3e4-4eaf-af75-9262553dcbaf);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("INT_Main_A", S_INT_ThrallOfTheAbsolutePlayerPoint_004_6ce9025f-2969-402f-86d9-3d1299a4af43);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("BGO_Main_A", S_BGO_ThrallOfTheAbsolutePlayerPoint_001_495de0ec-e5a5-41b7-afb5-f6d0b514e770);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("BGO_Main_A", S_BGO_ThrallOfTheAbsolutePlayerPoint_002_e8433bd1-4816-436e-ac16-884bd92a08c6);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("BGO_Main_A", S_BGO_ThrallOfTheAbsolutePlayerPoint_003_8762ee93-30ca-472b-ab71-06f2f60c4da4);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("BGO_Main_A", S_BGO_ThrallOfTheAbsolutePlayerPoint_004_06976dcf-73b6-4bb4-bed9-57711f7c9278);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("CTY_Main_A", S_CTY_ThrallOfTheAbsolutePlayerPoint_001_75b9d0c1-2ee0-4a66-a4c2-033aab35a257);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("CTY_Main_A", S_CTY_ThrallOfTheAbsolutePlayerPoint_002_cc7e5724-fa34-4824-ba5e-99b487675f81);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("CTY_Main_A", S_CTY_ThrallOfTheAbsolutePlayerPoint_003_61762511-6920-4fc2-a54b-084b1e72d365);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("CTY_Main_A", S_CTY_ThrallOfTheAbsolutePlayerPoint_004_b7f2024b-9035-45be-b791-904c45337213);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("END_Main", S_END_ThrallOfTheAbsolutePlayerPoint_001_38ac402e-01ff-49f0-bc65-9286ff8c9b2c);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("END_Main", S_END_ThrallOfTheAbsolutePlayerPoint_002_4607a30f-5ae9-47b4-97a4-b0b0921be3e8);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("END_Main", S_END_ThrallOfTheAbsolutePlayerPoint_003_8293e266-625c-4f5b-a490-80c681a03419);
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers("END_Main", S_END_ThrallOfTheAbsolutePlayerPoint_004_37b103a0-fd14-4731-9f85-9ae8ec91f21c);
NOT DB_GLO_ThrallOfTheAbsolute_TeleportedPlayer(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_GLO_ThrallOfTheAbsolute_FailedToStartDialog(0);
DB_FlagReactionAfterDialog(GLO_Debug_ThrallOfTheAbsolute_StartDebugDialog_7d238448-ae4c-462c-a310-46bcd394dd66, DebugBook_3af7dec4-4c08-9e44-9064-ec038ebad0ea);
DB_GLO_ThrallOfTheAbsolute_ConditionalFadeDialogs(END_General_TadpoleOrNetherstoneAbsent_24763045-86d0-69a7-83f2-5f531a3e589f);
DB_GLO_ThrallOfTheAbsolute_ConditionalFadeDialogs(END_IllithidOptions_Assimilation_f909fcc9-a3dc-b91d-e91c-33f0479c55bb);
DB_GLO_ThrallOfTheAbsolute_ConditionalFadeDialogs(END_IllithidOptions_RaphaelLastChance_e8b41315-b35c-5c7a-e3be-e921cd0c8741);
DB_GLO_ThrallOfTheAbsolute_ConditionalFadeDialogs(LOW_BaldursGate_DoorDialog_0d7628e0-b800-a7e0-fbd5-966e42edab98);
DB_GLO_ThrallOfTheAbsolute_ConditionalFadeDialogs(GLO_ThrallOfTheAbsolute_Act1ReturnAttempt_459d5b1a-4e14-d3be-5d56-d8ea0cbfdce9);
DB_GLO_ThrallOfTheAbsolute_ConditionalFadeDialogs(GLO_ThrallOfTheAbsolute_AttemptLeaveAct2_0bc75b6b-86a4-dd78-7f2d-160aa6d70f7d);
DB_GLO_ThrallOfTheAbsolute_ConditionalFadeDialogs(GLO_ThrallOfTheAbsolute_BoatWithoutAllStones_a342693d-1208-df7d-051a-ef0c14305679);
DB_GLO_ThrallOfTheAbsolute_ConditionalFadeDialogs(GLO_ThrallOfTheAbsolute_LeaveWithoutKethericStone_e89ef423-ba39-2243-4383-dd28eef77c74);

KBSECTION
IF
DB_GLO_ThrallOfTheAbsolute_FailedToStartDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_FlagReactionAfterDialog((CHARACTER)_Var1, GLO_Debug_ThrallOfTheAbsolute_StartDebugDialog_7d238448-ae4c-462c-a310-46bcd394dd66, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
ClearFlag(GLO_Debug_ThrallOfTheAbsolute_StartDebugDialog_7d238448-ae4c-462c-a310-46bcd394dd66, _Var1);
PROC_DEBUG_GLO_StartThrallOfTheAbsoluteDebugDialog(_Var1);

IF
TextEvent("thralloftheabsolute", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DEBUG_GLO_StartThrallOfTheAbsoluteDebugDialog(_Var1);

PROC
PROC_DEBUG_GLO_StartThrallOfTheAbsoluteDebugDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_StartDialogCustom(DEBUG_ThrallOfTheAbsolute_ce779558-d3f3-7074-c3e8-2bc77ebdd13d, _Var1, 0, 0, 0, 0, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_ThrallOfTheAbsolute_DialogStarted(1);
DB_GLO_DEBUG_ThrallOfTheAbsolute_DebugCalled(1);

IF
TextEvent("thralloftheabsolute_reset", _, _, _, _)
THEN
PROC_GLO_DEBUG_ThrallOfTheAbsolute_Reset();

IF
DialogEnded(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202, _, _, _, _)
AND
DB_GLO_DEBUG_ThrallOfTheAbsolute_DebugCalled(1, _, _, _, _)
THEN
PROC_GLO_DEBUG_ThrallOfTheAbsolute_Reset();

PROC
PROC_GLO_DEBUG_ThrallOfTheAbsolute_Reset()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(_Var2, _Var3, _, _Var1, _Var1)
AND
GetFlag(_Var2, _Var1, 1, _Var1, _Var1)
THEN
ClearFlag(_Var2, _Var1, 0);
ClearFlag(_Var3);

PROC
PROC_GLO_DEBUG_ThrallOfTheAbsolute_Reset()
AND
DB_GLO_ThrallOfTheAbsolute_WaitingForAvailability(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_ThrallOfTheAbsolute_WaitingForAvailability(_Var1);

PROC
PROC_GLO_DEBUG_ThrallOfTheAbsolute_Reset()
AND
DB_GLO_ThrallOfTheAbsolute_RecoveredPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_ThrallOfTheAbsolute_RecoveredPlayer(_Var1);

IF
TextEvent("netherstone_ketheric", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ToInventory(S_COL_CrownController_Ketheric_06b8891b-e71c-423b-8482-2680c3c16a4d, _Var1, 1, 1, 1);

PROC
PROC_GLO_SetupForAct((STRING)_Var1, S_GLO_ThrallOfTheAbsolute_AbsoluteHelper_15d4bd12-855b-4483-a2e5-661bfeb96d1f, 1, (STRING)_Var1, (STRING)_Var1)
AND
DB_GLO_ThrallOfTheAbsolute_LoadedLevelPoints(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_GLO_SetupForAct_Place(S_GLO_ThrallOfTheAbsolute_AbsoluteHelper_15d4bd12-855b-4483-a2e5-661bfeb96d1f, _Var2);

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_GLO_ThrallOfTheAbsolute_ConditionalFadeDialogs(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_GLO_ThrallOfTheAbsolute_InProgress()
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_ClearScreenFadeTimeline(_Var3, 0.5);

IF
FlagSet((FLAG)_Var1, (CHARACTER)_Var2, (INTEGER)_Var3, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(_Var1, _Var4, _, _Var1, _Var1)
AND
QRY_OnlyOnce("GLO_ThrallOfTheAbsolute_EndStarted", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_ThrallOfTheAbsolute_CheckForValidGameOver(_Var2, _Var1, _Var4, _Var3);

PROC
PROC_GLO_ThrallOfTheAbsolute_CheckForValidGameOver((CHARACTER)_Var1, (FLAG)_Var2, (FLAG)_Var3, (INTEGER)_Var4, (CHARACTER)_Var1)
AND
DB_DialogName(_Var5, _Var4, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(_Var3);
DB_FlagReactionAfterDialog_Prepare(_Var1, _Var2, _Var5, _Var4);

PROC
PROC_FlagReactionAfterDialog((CHARACTER)_Var1, (FLAG)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(_Var2, _, _Var4, _Var1, _Var1)
THEN
PROC_GLO_ThrallOfTheAbsolute_PrepareGameOverDialog(_Var1);

PROC
PROC_GLO_ThrallOfTheAbsolute_CheckForValidGameOver((CHARACTER)_Var1, _, (FLAG)_Var3, (INTEGER)_Var4, (CHARACTER)_Var1)
AND NOT
DB_DialogName(_, _Var4, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(_Var3);
PROC_GLO_ThrallOfTheAbsolute_PrepareGameOverDialog(_Var1);

PROC
PROC_StateSet_PermaDefeated(S_GLO_Emperor_73d49dc5-8b8b-45dc-a98c-927bb4e3169b, _, _, _, _)
AND NOT
QRY_GLO_ThrallOfTheAbsolute_IgnoreEmperorGameplayDeath()
AND
QRY_GLO_ThrallOfTheAbsolute_GetNearestTadpoledPlayer(S_GLO_Emperor_73d49dc5-8b8b-45dc-a98c-927bb4e3169b, _, _, _, _)
AND
DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_ThrallOfTheAbsolute_Event_EmperorsDeathGameplay_97c0d6bc-0b6c-4d83-b6f5-ee3308d2919b, _Var1);

QRY
QRY_GLO_ThrallOfTheAbsolute_IgnoreEmperorGameplayDeath()
AND
DB_CurrentLevel("END_Main", _, _, _, _)
THEN
DB_NOOP(1);

IF
DestroyedBy((ITEM)_Var1, _, (CHARACTER)_Var3, _, (ITEM)_Var1)
AND
DB_GLO_EmperorPrelude_NetherStoneTrackers(_Var1, _, _, _, _, _, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_ThrallOfTheAbsolute_Event_DestroyedStone_7814f813-2b4f-4acd-8331-8c80d49a5ea1, _Var3);

IF
EnteredChasm((ITEM)_Var1, _, _, _, _, _, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_GLO_EmperorPrelude_NetherStoneTrackers(_Var1, _, _, _, _, _, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GLO_ThrallOfTheAbsolute_GetNearestTadpoledPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var12, _, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_ThrallOfTheAbsolute_Event_DestroyedStone_7814f813-2b4f-4acd-8331-8c80d49a5ea1, _Var12);

QRY
QRY_GLO_ThrallOfTheAbsolute_InProgress()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(_Var2, _Var3, _, _Var1, _Var1)
AND
GetFlag(_Var2, _Var1, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_GLO_ThrallOfTheAbsolute_StartGenericGameOverDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_ThrallOfTheAbsolute_Event_Generic_bc7239fc-216b-4c48-9d07-5e01fc548b7f, _Var1);

PROC
PROC_GLO_ThrallOfTheAbsolute_PrepareGameOverDialog(_, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
THEN
RemoveHarmfulStatuses(_Var2);
PROC_ForceStopDialog(_Var2);

PROC
PROC_GLO_ThrallOfTheAbsolute_PrepareGameOverDialog(_, (CHARACTER)_, (CHARACTER)_, (CHARACTER)_, (CHARACTER)_)
THEN
PROC_ForceStopDialog(S_GLO_Emperor_73d49dc5-8b8b-45dc-a98c-927bb4e3169b);

PROC
PROC_GLO_ThrallOfTheAbsolute_PrepareGameOverDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
QRY_GLO_ThrallOfTheAbsolute_AnyDownedPlayers()
THEN
PROC_GLO_ThrallOfTheAbsolute_GameOverDialog(_Var1);

PROC
PROC_GLO_ThrallOfTheAbsolute_PrepareGameOverDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_GLO_ThrallOfTheAbsolute_AnyDownedPlayers()
THEN
DB_GLO_ThrallOfTheAbsolute_WaitingForAvailability(_Var1);

QRY
QRY_GLO_ThrallOfTheAbsolute_AnyDownedPlayers()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
HasAppliedStatus(_Var1, "DOWNED", 1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DB_GLO_ThrallOfTheAbsolute_WaitingForAvailability(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
HasAppliedStatus(_Var2, "DOWNED", 1, _Var1, _Var1)
THEN
RemoveStatus(_Var2, "DOWNED", NULL_00000000-0000-0000-0000-000000000000);

IF
DB_GLO_ThrallOfTheAbsolute_RecoveredPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_GLO_ThrallOfTheAbsolute_AnyDownedPlayers()
AND
DB_GLO_ThrallOfTheAbsolute_WaitingForAvailability(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_ThrallOfTheAbsolute_GameOverDialog(_Var2);

IF
StatusRemoved((CHARACTER)_Var1, "DOWNED", _, _, (CHARACTER)_Var1)
AND
DB_GLO_ThrallOfTheAbsolute_WaitingForAvailability(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GLO_ThrallOfTheAbsolute_RecoveredPlayer(_Var1);

PROC
PROC_GLO_ThrallOfTheAbsolute_GameOverDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GLO_ThrallOfTheAbsolute_ValidPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_ThrallOfTheAbsolute_TryStartGameOverDialog(_Var1);

PROC
PROC_GLO_ThrallOfTheAbsolute_GameOverDialog(_, _, _, _, _)
AND
DB_Avatars(_Var2, _, _, _, _)
AND NOT
DB_Defeated(_Var2, _, _, _, _)
THEN
PROC_GLO_ThrallOfTheAbsolute_TryStartGameOverDialog(_Var2);

PROC
PROC_GLO_ThrallOfTheAbsolute_GameOverDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_GLO_ThrallOfTheAbsolute_ValidPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_ThrallOfTheAbsolute_TryStartGameOverDialog(_Var1);

PROC
PROC_GLO_ThrallOfTheAbsolute_GameOverDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
QRY_GLO_ThrallOfTheAbsolute_ValidPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GLO_ThrallOfTheAbsolute_GetNearestTadpoledPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
PROC_GLO_ThrallOfTheAbsolute_TryStartGameOverDialog(_Var2);

PROC
PROC_GLO_ThrallOfTheAbsolute_GameOverDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_ThrallOfTheAbsolute_TryStartGameOverDialog(_Var1);

PROC
PROC_GLO_ThrallOfTheAbsolute_GameOverDialog(_, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND NOT
DB_Avatars(_Var2, _, _, _, _)
AND NOT
DB_Defeated(_Var2, _, _, _, _)
THEN
PROC_GLO_ThrallOfTheAbsolute_TryStartGameOverDialog(_Var2);

PROC
PROC_GLO_ThrallOfTheAbsolute_GameOverDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GLO_ThrallOfTheAbsolute_DialogStarted(1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_ThrallOfTheAbsolute_Event_TransformPlayers_fe6b74e7-fe16-4ec0-bdf1-101abf00e79d);
PROC_GLO_ThrallOfTheAbsolute_ShowGameOverMenu();

PROC
PROC_GLO_ThrallOfTheAbsolute_TryStartGameOverDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GLO_ThrallOfTheAbsolute_DialogStarted(1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_GLO_ThrallOfTheAbsolute_OverrideGlobalGameOverDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialogCustom(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202, S_GLO_ThrallOfTheAbsolute_AbsoluteHelper_15d4bd12-855b-4483-a2e5-661bfeb96d1f, _Var1, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, 0, 0, 0, 0, _Var1)
THEN
DB_GLO_ThrallOfTheAbsolute_DialogStarted(1);

PROC
PROC_StartDialog_AddExtraSpeakers(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
THEN
DialogAddActorAtReservedSlot(_Var1, _Var2, 0, 0, 1);

PROC
PROC_StartDialog_AddExtraSpeakers(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
THEN
PROC_DialogAddListeningActor(_Var1, _Var2);

PROC
PROC_StartDialog_AddExtraSpeakers(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
THEN
PROC_DialogAddListeningActor(_Var1, _Var2);

PROC
PROC_StartDialog_AddExtraSpeakers(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_CurrentLevel("END_Main", _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_GLO_Emperor_73d49dc5-8b8b-45dc-a98c-927bb4e3169b, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, S_GLO_Emperor_73d49dc5-8b8b-45dc-a98c-927bb4e3169b, 0, 1);

IF
DialogEnded(GLO_ThrallOfTheAbsolute_GameOver_d736e2e2-5ee8-8b12-4680-3906c1265202, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_GLO_ThrallOfTheAbsolute_ShowGameOverMenu();

PROC
PROC_GLO_ThrallOfTheAbsolute_ShowGameOverMenu()
AND
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(_, _Var2, _Var3, _, _)
AND
DB_GlobalFlag(_Var2, _, _, _, _)
THEN
DB_GLO_ThrallOfTheAbsolute_GameOverMenuReady(1);
ShowGameOverMenu(_Var3);

PROC
PROC_GLO_ThrallOfTheAbsolute_ShowGameOverMenu()
AND NOT
DB_GLO_ThrallOfTheAbsolute_GameOverMenuReady(1, _, _, _, _)
AND
DB_GLO_ThrallOfTheAbsolute_ActivationFlags(_, NULL_00000000-0000-0000-0000-000000000000, _Var2, _, _)
THEN
ShowGameOverMenu(_Var2);

IF
FlagSet(GLO_ThrallOfTheAbsolute_Event_TransformPlayers_fe6b74e7-fe16-4ec0-bdf1-101abf00e79d, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_GLO_ThrallOfTheAbsolute_TransformAndMovePlayers();

PROC
PROC_GLO_ThrallOfTheAbsolute_TransformAndMovePlayers()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
HasActiveStatus(_Var1, "MIND_FLAYER_FORM", 0, _Var1, _Var1)
AND
IsTagged(_Var1, ILLITHID_1eec74e8-3673-4500-abec-57b7ed8469ed, 1, _Var1, _Var1)
THEN
ApplyStatus(_Var1, "MIND_FLAYER_FORM", -1, 1, S_GLO_ThrallOfTheAbsolute_AbsoluteHelper_15d4bd12-855b-4483-a2e5-661bfeb96d1f);

PROC
PROC_GLO_ThrallOfTheAbsolute_TransformAndMovePlayers()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GLO_ThrallOfTheAbsolute_TeleportedPlayer(_Var1);
DetachFromPartyGroup(_Var1);

PROC
PROC_GLO_ThrallOfTheAbsolute_TransformAndMovePlayers()
AND
DB_CurrentLevel("END_Main", _, _, _, _)
THEN
SetOnStage(S_END_MindBrain_f8bb04a3-22e5-41b0-aed7-5dcf852343d1, 0);

PROC
PROC_GLO_ThrallOfTheAbsolute_TransformAndMovePlayers()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DetachFromPartyGroup(_Var1);

IF
DetachedFromPartyGroup((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(GLO_ThrallOfTheAbsolute_Event_TransformPlayers_fe6b74e7-fe16-4ec0-bdf1-101abf00e79d, _Var1, _Var1, _Var1, _Var1)
AND
DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
DB_GLO_ThrallOfTheAbsolute_TeleportedPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_CurrentLevel(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_ThrallOfTheAbsolute_TeleportedPlayer(_Var1);
NOT DB_GLO_ThrallOfTheAbsolute_MindArenaTriggers(_Var2, _Var3);
PROC_GLO_ThrallOfTheAbsolute_TeleportMindFlayeredPlayer(_Var1, _Var3);

PROC
PROC_GLO_ThrallOfTheAbsolute_TeleportMindFlayeredPlayer((CHARACTER)_Var1, (TRIGGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(END_General_State_CurrentlyInBrainBattle_0d7205b2-0d55-4540-8737-543253873cd6, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, _Var2);

PROC
PROC_GLO_ThrallOfTheAbsolute_TeleportMindFlayeredPlayer((CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(END_General_State_CurrentlyInBrainBattle_0d7205b2-0d55-4540-8737-543253873cd6, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_BrainBattle_UsedMindTeleporter(_Var1);

QRY
QRY_GLO_ThrallOfTheAbsolute_GetNearestTadpoledPlayer(_, _, _, _, _)
AND
DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var2, _Var3, _, _, _)
THEN
NOT DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var2, _Var3);

QRY
QRY_GLO_ThrallOfTheAbsolute_GetNearestTadpoledPlayer((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GLO_ThrallOfTheAbsolute_ValidPlayer(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetDistanceTo(_Var2, _Var1, _Var3, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var2, _Var3);

QRY
QRY_GLO_ThrallOfTheAbsolute_GetNearestTadpoledPlayer((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_, _, _Var1, _Var1, _Var1)
AND
DB_Players(_Var4, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
GetDistanceTo(_Var4, _Var1, _Var5, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var4, _Var5);

IF
DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
_Var3 != _Var1
AND
_Var4 >= _Var2
THEN
NOT DB_QRYRTN_GLO_ThrallOfTheAbsolute_NearestPlayer(_Var3, _Var4);

QRY
QRY_GLO_ThrallOfTheAbsolute_ValidPlayer((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, ILLITHID_1eec74e8-3673-4500-abec-57b7ed8469ed, 1, _Var1, _Var1)
THEN
DB_NOOP(1);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Start"
