Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_KnowledgeCheckTrigger_AD("UND_ThullaHint", S_UND_ThullaHint_DialogTrigger_d4996c8d-53fb-42b2-b8b0-24a3891acb0c, "Perception", DC_Legacy_10_625be976-7a67-4394-97c8-14c69715ae4b, UND_ThullaHint_PAD_b6725cbb-42bd-c9da-ace5-afeee899c2a9, UND_ThullaHint_State_PerceptionCheckSuccess_c4f1238e-722e-45b9-bb8b-2c1044db3c69);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_Arrow003_7b4b1b0b-4628-4efe-aa6e-2241b8a704e9);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_Arrow002_92a9cba9-2cb5-4b2b-993c-be439aef0f5d);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_Arrow001_6ffab0b5-c21a-421f-9d09-ce4a1577ebd8);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_Arrow000_c9d82b86-a5c0-4946-bfba-184e1ad9e1e5);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_BloodyFootrpint001_2c63ae46-242a-42c3-bff1-95f83a5577cf);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_BloodyFootrpint002_ef793279-db14-429e-b73e-8d68310b5620);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_BloodyFootrpint003_bfb430c8-84fa-4c16-a98b-a3df6c224f43);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_BloodyFootrpint004_1bd935f4-f528-496a-b5a3-2748be610132);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_BloodyFootrpint005_2f0fed82-02b4-4609-8d4b-e14b126fbc47);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_BloodyFootrpint006_f474de7a-8d53-4dcd-8b68-7d5af6bff920);
DB_UND_ThullaHint_Hints(S_UND_ThullaHint_DiscardedShackles_412d1b10-a6f3-4663-8342-e2fa79ef33b1);
DB_KnowledgeCheckTrigger("UND_NightfallBanquet", S_UND_NightFall_DialogTriggers_f10d731f-2dda-4343-af0e-8abd319cb224, "Religion", DC_Legacy_10_625be976-7a67-4394-97c8-14c69715ae4b);
DB_KnowledgeCheckTrigger_AD("UND_HiddenStash", S_UND_HiddenStash_PerceptionTrigger_21041096-0ec6-4b97-839d-b6de14a3b2ba, "Perception", DC_Legacy_10_625be976-7a67-4394-97c8-14c69715ae4b, UND_HiddenStash_PAD_a39497ee-0ca7-163d-da29-899f573b7fc2, UND_HiddenStash_PerceptionPassed_14bf0301-5c86-4cdc-9de5-7ccf1f152453);
SetCanInteract(S_UND_HiddenStash_LooseStone_121a4fd7-d1f0-4e11-b250-71f4ea1e6679, 0);
PROC_TriggerRegisterForPlayers(S_UND_MoonhavenMap_Trigger_f42e79d8-645b-467d-9f75-3b33a2042511);
DB_UND_JusticiarWeaponRack_Objects(S_UND_JusticiarWeaponRack000_f6e1bd85-5b3e-4fe4-9e96-5cfc5dd80100);
DB_UND_JusticiarWeaponRack_Objects(S_UND_JusticiarWeaponRack001_3586fdca-c814-43f9-ae5a-907d926bcebb);
DB_AmbushTrigger(S_UND_MephitAmbush_Start_662c6eae-ab99-4806-a334-4d6f6f3cc062, NULL_00000000-0000-0000-0000-000000000000, DC_Legacy_0_98d69b07-f551-4d77-af31-41d074748dc0);
DB_AmbushTrigger_AmbusherDelay(S_UND_MephitAmbush_Start_662c6eae-ab99-4806-a334-4d6f6f3cc062, 300);
DB_AmbushTrigger_Ambusher_Appear(S_UND_MephitAmbush_Start_662c6eae-ab99-4806-a334-4d6f6f3cc062, S_UND_MephitAmbush_Mephit_000_fd14c0a6-2f9c-4983-857d-c8f5f85a8087, S_UND_MephitAmbush_AppearAt_000_9f261b33-374f-4e0e-803f-a4004b431e5e, 1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "UND_MephitAmbush_MephitAppear");
DB_AmbushTrigger_Ambusher_Appear(S_UND_MephitAmbush_Start_662c6eae-ab99-4806-a334-4d6f6f3cc062, S_UND_MephitAmbush_Mephit_001_af183ce5-9a9b-44eb-814e-42fa3350b2c1, S_UND_MephitAmbush_AppearAt_001_419e2c47-5c94-42f1-8195-50e929728ec0, 1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "UND_MephitAmbush_MephitAppear");
DB_AmbushTrigger_Ambusher_Appear(S_UND_MephitAmbush_Start_662c6eae-ab99-4806-a334-4d6f6f3cc062, S_UND_MephitAmbush_Mephit_002_184b9dcd-3b1f-430a-9a71-bb54d986fcff, S_UND_MephitAmbush_AppearAt_002_ed2297f5-6761-4a68-88ad-157bec80ca05, 1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "UND_MephitAmbush_MephitAppear");
DB_AmbushTrigger_Ambusher_Appear(S_UND_MephitAmbush_Start_662c6eae-ab99-4806-a334-4d6f6f3cc062, S_UND_MephitAmbush_Mephit_003_8f6d43d2-6c18-4d77-811c-cd44cb233a9f, S_UND_MephitAmbush_AppearAt_003_30b04624-b2a4-4615-b896-30954334c5ff, 1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "UND_MephitAmbush_MephitAppear");
DB_AmbushTrigger_Ambusher_Appear(S_UND_MephitAmbush_Start_662c6eae-ab99-4806-a334-4d6f6f3cc062, S_UND_MephitAmbush_Mephit_004_a58fe622-860e-45a1-902b-51cd71df2350, S_UND_MephitAmbush_AppearAt_004_994e3e69-0e92-4707-9c5b-99a915a6b444, 1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "UND_MephitAmbush_MephitAppear");
DB_GLO_DefeatCounter(S_UND_MephitAmbush_Mephit_000_fd14c0a6-2f9c-4983-857d-c8f5f85a8087, "UND_MephitAmbush_MephitAppear");
DB_GLO_DefeatCounter(S_UND_MephitAmbush_Mephit_001_af183ce5-9a9b-44eb-814e-42fa3350b2c1, "UND_MephitAmbush_MephitAppear");
DB_GLO_DefeatCounter(S_UND_MephitAmbush_Mephit_002_184b9dcd-3b1f-430a-9a71-bb54d986fcff, "UND_MephitAmbush_MephitAppear");
DB_GLO_DefeatCounter(S_UND_MephitAmbush_Mephit_003_8f6d43d2-6c18-4d77-811c-cd44cb233a9f, "UND_MephitAmbush_MephitAppear");
DB_GLO_DefeatCounter(S_UND_MephitAmbush_Mephit_004_a58fe622-860e-45a1-902b-51cd71df2350, "UND_MephitAmbush_MephitAppear");
DB_GLO_DefeatCounter_Target("UND_MephitAmbush_MephitAppear", 2);
DB_UND_MephitAmbush_SecondWave(S_UND_MephitAmbush_Mephit_005_be85453e-867a-4f08-a959-c6551869ee1d, S_UND_MephitAmbush_AppearAt_005_8b4d9e4c-fcaa-4653-87fc-f5a1a80e95a9);
DB_UND_MephitAmbush_SecondWave(S_UND_MephitAmbush_Mephit_006_a5182eef-582d-44d2-ba5a-a2e0ace5af94, S_UND_MephitAmbush_AppearAt_006_17cc8962-c9a8-49bd-8254-4f2122a30044);
DB_UND_MephitAmbush_SecondWave(S_UND_MephitAmbush_Mephit_007_63a4aa4d-0211-4d02-8666-2b95281790e1, S_UND_MephitAmbush_AppearAt_007_8880250a-24c1-488e-bcf8-2b1aa5c4859b);
DB_UND_MephitAmbush_SecondWave(S_UND_MephitAmbush_Mephit_008_83b9db14-ff7d-41c2-aa48-29e823468a97, S_UND_MephitAmbush_AppearAt_008_cbc2b209-7446-40bd-9738-8d754d9a0c9c);
PROC_RegisterWorldGossipTrigger(S_PartyBanterTrigger_UND_CrumblingPlatform_999ae31c-c13e-4a48-8ebf-3111e2f8f1e1);
DB_AmbushTrigger(S_UND_KethericCity_OozesAmbushTrigger_bc8ced20-f0ed-431f-a527-df90b486d408, S_UND_KethericCity_OozesDetectAmbushTrigger_ad0c0599-d2d4-4422-be3e-5c395f87a315, DC_Legacy_10_625be976-7a67-4394-97c8-14c69715ae4b);
DB_AmbushTrigger_AmbusherDelay(S_UND_KethericCity_OozesAmbushTrigger_bc8ced20-f0ed-431f-a527-df90b486d408, 500);
DB_AmbushTrigger_Ambusher_Appear(S_UND_KethericCity_OozesAmbushTrigger_bc8ced20-f0ed-431f-a527-df90b486d408, S_UND_KethericCity_PanicRoomEnemy_001_ea7c2c48-da44-4d0b-99d8-c1e6574e9810, S_UND_KethericCity_PanicRoomEnemy_AppearAt_001_1f9d4a9a-1c40-4f37-9b08-c35c29cc10d3, 1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "");
DB_AmbushTrigger_Ambusher_Appear(S_UND_KethericCity_OozesAmbushTrigger_bc8ced20-f0ed-431f-a527-df90b486d408, S_UND_KethericCity_PanicRoomEnemy_002_d736d483-64ee-4166-92f3-d6f544126b8a, S_UND_KethericCity_PanicRoomEnemy_AppearAt_002_9d0b4c40-7902-4ffd-a251-d68c6857d16d, 1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "");
DB_AmbushTrigger_Ambusher_Appear(S_UND_KethericCity_OozesAmbushTrigger_bc8ced20-f0ed-431f-a527-df90b486d408, S_UND_KethericCity_PanicRoomEnemy_003_b568549c-7b9d-451f-b862-ff26d2085bbe, S_UND_KethericCity_PanicRoomEnemy_AppearAt_003_e877268a-1bf0-44df-addf-a85815215413, 1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "");
DB_GLO_DefeatCounter(S_UND_KethericCity_PanicRoomEnemy_001_ea7c2c48-da44-4d0b-99d8-c1e6574e9810, "UND_KethericCity_OozeAmbush");
DB_GLO_DefeatCounter(S_UND_KethericCity_PanicRoomEnemy_002_d736d483-64ee-4166-92f3-d6f544126b8a, "UND_KethericCity_OozeAmbush");
DB_GLO_DefeatCounter(S_UND_KethericCity_PanicRoomEnemy_003_b568549c-7b9d-451f-b862-ff26d2085bbe, "UND_KethericCity_OozeAmbush");
DB_UND_DuergarCamp_RustyWeapons(S_UND_DuergarCamp_RustyWeaponArea_000_f1572813-d12f-4ad6-80cc-165edd7346c3);
DB_UND_DuergarCamp_RustyWeapons(S_UND_DuergarCamp_RustyWeaponArea_001_e6ceb277-0a82-4e4f-b442-0d5b60f32e8f);
DB_UND_DuergarCamp_RustyWeapons(S_UND_DuergarCamp_RustyWeaponArea_002_b6d89765-2930-4311-a272-4187acfec7c1);
DB_Dialogs(S_UND_DuergarMason_01_d09aecce-fad1-4aa8-9c40-c370a0ac8835, UND_DuergarMason_01_9d3d6ad2-856d-f1b2-1faa-f6fc663f8eef);
DB_Dialogs(S_UND_DuergarMason_02_6b07558b-09ef-449c-8dd2-b0c2cbe809f1, UND_DuergarMason_02_6c40c364-df62-9550-db36-68f277f84c24);
DB_Dialogs(S_UND_DuergarGuard_03_cc942779-3d2d-4327-9704-c6c385c12c82, UND_DuergarGuard_03_7ac7bdeb-141c-820a-9db2-a4cb4ab5f443);
DB_Dialogs(S_UND_DuergarPatroller_01_0c7758f9-ed35-49cb-926c-8b24195ee978, UND_DuergarPatroller_01_40726544-7610-3d66-b52a-c336c8144990);
DB_Dialogs(S_UND_DuergarPatroller_02_407307ff-6adb-488c-9576-534e2c158e29, UND_DuergarPatroller_02_c6233fa3-25db-aeec-d12a-b73131fe2279);
DB_Dialogs(S_UND_DuergarPatroller_03_a38319cb-c9ed-460a-bba2-1788d1cad20c, UND_DuergarPatroller_03_d62348d5-458e-1cd6-488b-ec9fcca29b03);
DB_Dialogs(S_UND_DuergarGuard_AtPier_01_5ff28d97-e070-4805-a856-3112df670e1f, UND_DuergarGuard_AtPier_01_506218e9-c414-a1dc-3b37-6c541cf8521b);
DB_Dialogs(S_UND_DuergarGuard_AtPier_02_2dd2a840-35ff-4ed6-bf43-f9aae0e69c32, UND_DuergarGuard_AtPier_02_67976786-bb26-8c25-8e84-b2c3c73ed090);
DB_Dialogs(S_UND_DuergarCamp_Rothe_01_bc34c553-e236-4fd9-bd6f-2e18a56bcef0, S_UND_DuergarCamp_Rothe_02_e8c50208-b414-42cc-b49a-48003b13c762, UND_DuergarCamp_RotheDiscussion_1c5a5fbf-0161-2c49-72bf-326ee314ab05);
DB_Dialogs(S_UND_DuergarCamp_Rothe_03_2cd6c5c8-cf67-4114-a4c1-b72d6705646e, UND_DuergarCamp_Rothe_03_f78937ca-491c-4c0e-2e58-e2c6fa9f9bdf);
DB_GLO_SleepingDialog(UND_DuergarCamp_Rothe_03_f78937ca-491c-4c0e-2e58-e2c6fa9f9bdf);
DB_UND_DuergarCamp_Rothes(S_UND_DuergarCamp_Rothe_01_bc34c553-e236-4fd9-bd6f-2e18a56bcef0);
DB_UND_DuergarCamp_Rothes(S_UND_DuergarCamp_Rothe_02_e8c50208-b414-42cc-b49a-48003b13c762);
DB_UND_DuergarCamp_Rothes(S_UND_DuergarCamp_Rothe_03_2cd6c5c8-cf67-4114-a4c1-b72d6705646e);
DB_DoNotFace(S_UND_DuergarCamp_Rothe_01_bc34c553-e236-4fd9-bd6f-2e18a56bcef0);
DB_DoNotFace(S_UND_DuergarCamp_Rothe_02_e8c50208-b414-42cc-b49a-48003b13c762);
DB_UND_DuergarCamp_RotheDiscussion(S_UND_DuergarCamp_Rothe_01_bc34c553-e236-4fd9-bd6f-2e18a56bcef0);
DB_UND_DuergarCamp_RotheDiscussion(S_UND_DuergarCamp_Rothe_02_e8c50208-b414-42cc-b49a-48003b13c762);
DB_GlobalFlagReactionAfterDialog(UND_DuergarCamp_DeepRothe_Event_Leave_67e1d8e2-142c-45b1-b1a2-c17431053162, UND_DuergarCamp_RotheDiscussion_1c5a5fbf-0161-2c49-72bf-326ee314ab05);
DB_UND_DuergarGuards_City(S_UND_DuergarGuard_AtPier_01_5ff28d97-e070-4805-a856-3112df670e1f, S_UND_DuergarGuard_AtPier_01_CaveInTrigger_dff73552-7fd5-4827-a196-b9070f78b3a6);
DB_UND_DuergarGuards_City(S_UND_DuergarGuard_AtPier_02_2dd2a840-35ff-4ed6-bf43-f9aae0e69c32, S_UND_DuergarGuard_AtPier_02_CaveInTrigger_779d1493-9934-419e-b31c-d2c70c4d9551);
DB_UND_DuergarGuards_City(S_UND_DuergarPatroller_01_0c7758f9-ed35-49cb-926c-8b24195ee978, S_UND_DuergarPatroller_01_CaveInTrigger_e0720674-8b17-4c54-9631-c845f9eeae9e);
DB_UND_DuergarGuards_City(S_UND_DuergarPatroller_02_407307ff-6adb-488c-9576-534e2c158e29, S_UND_DuergarPatroller_02_CaveInTrigger_5a6d3f6a-d01e-4c28-acf9-0d7225df8209);
DB_UND_DuergarGuards_City(S_UND_DuergarPatroller_03_a38319cb-c9ed-460a-bba2-1788d1cad20c, S_UND_DuergarPatroller_03_CaveInTrigger_a9396391-e90d-4621-9276-31b08109c577);
DB_UND_DuergarGuards_City(S_UND_DuergarMason_01_d09aecce-fad1-4aa8-9c40-c370a0ac8835, S_UND_DuergarMason_01_CaveInTrigger_698c583e-9d06-4535-837a-95b48bf5f1e5);
DB_UND_DuergarGuards_City(S_UND_DuergarMason_02_6b07558b-09ef-449c-8dd2-b0c2cbe809f1, S_UND_DuergarMason_02_CaveInTrigger_cf8fc8ff-6d95-44be-986d-809f206fa0f1);
DB_OneShot_VoiceBarkTrigger(S_UND_HangingBridge_VB_Trigger_5682969b-6e99-48b6-847e-3cf7aca874ea, UND_DuergarCamp_VB_TheHangingBridge_e1d3277c-740e-892d-cfdd-e73b50f8949b);
DB_UND_DarkJusticiarCorpse(S_UND_DarkJusticiar_Dead_01_4c3ede9d-7c2f-44da-bc9a-892ca2c0b00b);
DB_UND_DarkJusticiarCorpse(S_UND_DarkJusticiar_Dead_02_9c5c5c4a-68f5-4eb9-b601-85d791a78af1);
DB_UND_DarkJusticiarCorpse(S_UND_DarkJusticiar_Dead_03_79f9ba12-3451-4b4b-8922-45de950b5b9c);
DB_UND_DarkJusticiarCorpse(S_UND_DarkJusticiar_Dead_04_74dfd8c3-78eb-40d7-9377-a3c17bc1cb9c);
DB_UND_DarkJusticiarCorpse(S_UND_DarkJusticiar_Dead_05_85683ca6-3a5c-4dfa-b758-690dd722dfa2);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_000_b08db52b-5760-4793-a1e0-fbfd2ee9e896);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_001_e566c174-a688-4327-a152-965969e89aeb);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_002_54df129f-7a19-43e4-9ff5-7246bf5a32d3);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_003_2c1c98fa-21c0-421d-9e92-3a936538f856);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_004_e40d9b2f-3aba-49db-87df-3f7ac54189e6);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_005_b1222c74-84a2-4403-be62-a64048652cd5);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_006_3231df47-59cd-44f4-ba2a-501a897fb868);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_007_66fdace2-0525-4750-8e73-4005af1e4f14);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_008_1b755641-562f-4139-b469-382f7ff7e197);
DB_UND_DarkJusticiarCorpse(S_UND_KethericCity_DeadJusticiar_009_b7490f8a-a54f-4896-a7d2-ff881223ecd1);
PROC_DeclareCounter("UND_DarkJusticiarCorpse_LootedCounter");
DB_HasItemEvent(S_UND_InfernalPlate_Reward_28722ffc-9261-4f8b-ad7b-3f7bcd1ad54a, UND_InfernalPlate_HasPlate_defed9c5-46a4-4216-8f23-0821ab4c1ee0);
DB_GiveItemToEvent(S_UND_InfernalPlate_Reward_28722ffc-9261-4f8b-ad7b-3f7bcd1ad54a, UND_InfernalPlate_GivePlate_5655311b-da78-4ef7-bd05-c296e4327c07);
ToInventory(S_UND_Nere_Moonlantern_Broken_5a76ae0a-d013-42e9-98b5-fa427a1cddbe, S_UND_TheDrowNere_06bf05c5-216b-4eaf-91f5-8f1dd3d57f30);
DB_HasItemEvent(S_UND_Nere_Moonlantern_Broken_5a76ae0a-d013-42e9-98b5-fa427a1cddbe, UND_Has_Moonlantern_Broken_e762d1c1-0f16-4c36-bcc9-806c29601b1f);
DB_UND_MerregonMask(S_UND_MerregonMask_000_20c9e7bb-06a6-482a-aa0d-1c0164c484de);
DB_UND_MerregonMask(S_UND_MerregonMask_001_21a065e1-87a8-4e4a-95a5-0037215aa012);
DB_UND_MerregonMask(S_UND_KethericCity_LostMerregon_GruntMask_2997fa95-789a-4d5d-94d1-04ca0a658250);
DB_UND_MerregonMask(S_UND_KethericCity_LostMerregon_OfficerMask_7010450b-24d6-4c0c-a592-e6e2701a4e88);
PROC_DeclareCounter("UND_MerregonMasksCollected_Counter");
DB_ItemDialog_NarratorAD(S_UND_KethericCity_Plaque_01_927ff909-5a8e-41ce-a4f7-ab66125e5c28, UND_DuergarCamp_PAD_Plaque_01_f1191e1b-a898-18d8-c931-2e7a41ca5656);
DB_ItemDialog_NarratorAD(S_UND_KethericCity_Plaque_02_8202f851-694e-4ced-83f4-0e534942ae0d, UND_DuergarCamp_PAD_Plaque_02_c28b908e-89b5-8b9b-3189-9274486d0a8c);
DB_OneShot_VoiceBarkTrigger(S_UND_DuergarCamp_SharLift_VBTrigger_ac757422-f732-4dc6-adfc-1e58c50ce0ce, UND_DuergarCamp_VB_SharLift_b7a77e15-53ef-9b60-65a1-0f44582dd916);
PROC_TriggerRegisterForPlayers(S_UND_DuergarCamp_NoticedPlayersOnRails_3f7fdfa3-2d31-4598-bcb5-e06d7824f557);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_UND_DuergarCamp_Pier_OwnershipTrigger_9400cb26-ad99-4c55-9e2e-c7ea084c4eea, S_UND_DuergarRebel_AtPier_01_5ff28d97-e070-4805-a856-3112df670e1f);
DB_ItemOwnerShipTriggersFallback(S_UND_DuergarCamp_Pier_OwnershipTrigger_9400cb26-ad99-4c55-9e2e-c7ea084c4eea, S_UND_DuergarRebel_AtPier_02_2dd2a840-35ff-4ed6-bf43-f9aae0e69c32);
ClearOwnership(BOOK_UND_Grymforge_MyconidMap_d1065ae1-bac8-4130-a852-18f34b716264);
ClearOwnership(S_UND_SlaveGrub_Paper_257b83b3-ebd5-4d7e-968b-9b0fff340b97);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_UND_DuergarCamp_Masons_OwnershipTrigger_b6ae894d-5213-4a25-bc90-e5e76e6fd78e, S_UND_DuergarRebelMason_01_d09aecce-fad1-4aa8-9c40-c370a0ac8835);
DB_ItemOwnerShipTriggersFallback(S_UND_DuergarCamp_Masons_OwnershipTrigger_b6ae894d-5213-4a25-bc90-e5e76e6fd78e, S_UND_DuergarRebelMason_02_6b07558b-09ef-449c-8dd2-b0c2cbe809f1);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_UND_DuergarLoyalPatroller_OwnershipTrigger_96b76420-919f-4c3d-9711-48f2e59f6dfa, S_UND_DuergarLoyalPatroller_01_a38319cb-c9ed-460a-bba2-1788d1cad20c);
ClearOwnership(S_UND_DuergarCamp_Boat002_8206ab2e-3a61-4412-916d-53487698f7f6);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_UND_ElevatorGuards_OwnershipTrigger_e072496e-7619-4e38-ad1d-edaca66df3dc, S_UND_ElevatorGuard_001_986cb3be-bb31-4aa8-85c0-1f9a315760af);
DB_ItemOwnerShipTriggersFallback(S_UND_ElevatorGuards_OwnershipTrigger_e072496e-7619-4e38-ad1d-edaca66df3dc, S_UND_ElevatorGuard_002_472eba90-f5e8-48cb-ad55-2397e0013a2d);
DB_ItemOwnerShipTriggers("WLD_Main_A", S_UND_DuergarCamp_Excavation_OwnershipTrigger_fcaf241e-642e-4040-99c5-cadd62b6b5f2, S_UND_DuergarLoyalSergeant_0aeb5411-5f13-4263-acb0-87f0689de2e5);
DB_ItemOwnerShipTriggersFallback(S_UND_DuergarCamp_Excavation_OwnershipTrigger_fcaf241e-642e-4040-99c5-cadd62b6b5f2, S_UND_DuergarRebelGreedy_379fd131-79ab-4588-a8f0-28cdb51546e3);
TriggerClearItemsOwner(S_UND_DuergarCamp_Excavation_ClearOwnershipTrigger_0f7f6c46-4f40-4810-b144-70e263e15a54);
ClearOwnership(S_UND_DefacedStatue_Statue_0308bca9-4008-4049-aa57-9097a1623270);
DB_AutoSaveTrigger(S_UND_DuergarCamp_Railings_Autosave_110e71a9-a987-4105-8e41-c65aac7cace3);
DB_AutoSaveTrigger(S_UND_DuergarCamp_MainRoom_Autosave_3ff3c53c-e3de-4db7-836a-3ed67acfa9e8);
DB_AutoSaveTrigger(S_UND_DuergarCamp_SideRoom_Autosave_903b43c2-8c1d-4074-b2ce-905042c27053);
DB_AutoSaveTrigger(S_UND_AdamantineForge_SUB_5fd81ed1-b91b-413e-91de-360715aba962);
DB_UND_DarkJusticiarDialogs(UND_DarkJusticiarCorpse_Looted_Solo_7c665336-cefb-d32f-f0b8-3e89dda70d07);
DB_UND_DarkJusticiarDialogs(UND_DarkJusticiarCorpse_Looted_8cf0f15d-f13b-6071-0774-f630e0ede684);

KBSECTION
IF
FlagSet(Debug_UND_CampWipe_4b370563-0b4a-8642-2f5a-bc040a0b85b1, _, _, _, _)
AND
DB_UND_DuergarGuards_Excavation(_Var3, _, _, _, _)
AND
DB_UND_DuergarGuards_City(_Var5, _, _, _, _)
AND
DB_UND_DeadInTheWater_CorpseDisposers(_Var7, _, _, _, _)
AND
DB_UND_FearfulRothe_Guards(_Var9, _, _, _, _)
THEN
Die(_Var3, 0, 1);
Die(_Var5, 0, 1);
Die(_Var7, 0, 1);
Die(_Var9, 0, 1);

IF
DB_InRegion(_Var1, S_UND_DuergarCamp_SUB_05c3bf1f-29a6-437c-9a98-c1ff0ec53a53, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(GLO_DuergarCamp_EverEnteredBefore_ac0bae57-7006-4676-88b8-7498dde79c41, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(GLO_DuergarCamp_EverEnteredBefore_ac0bae57-7006-4676-88b8-7498dde79c41);

IF
DB_UND_DuergarGuards_City(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_GLO_DefeatCounter(_Var1, "UND_PermaDefeatedDuergarCityGuards");

PROC
PROC_GLO_DefeatCounter_AllPermaDefeated("UND_PermaDefeatedDuergarCityGuards", _, _, _, _)
THEN
SetFlag(UND_DuergarGuards_City_State_PermaDefeated_4624085c-cc07-4671-af4f-c8983b66ad17, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
DB_GlobalFlag(UND_DuergarGuards_City_State_PermaDefeated_4624085c-cc07-4671-af4f-c8983b66ad17, _, _, _, _)
AND
DB_GlobalFlag(UND_DuergarGuards_Excavation_State_PermaDefeated_3f30c825-10f1-4fa5-84b8-073f293e6650, _, _, _, _)
AND
DB_GlobalFlag(UND_FearfulRothe_State_GuardsArePermaDefeated_60c74db1-dd75-96b6-5c9e-fa1d9a83bf58, _, _, _, _)
AND
DB_GlobalFlag(UND_DeadInTheWater_State_DuergarsDefeated_d3b422e2-134d-44db-8dbd-77cdfa67191b, _, _, _, _)
THEN
SetFlag(UND_DuergarGuards_State_PermaDefeated_b2211d1b-3dea-9b74-b19c-71938ac4b218, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
EnteredTrigger((GUIDSTRING)_Var1, S_UND_DuergarCamp_NoticedPlayersOnRails_3f7fdfa3-2d31-4598-bcb5-e06d7824f557, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_HiddenCharacters(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_DuergarCamp_NoticedPlayersOnRails", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(UND_DuergarRebelFrantic_AD_PlayersOnRails_9f7df45b-7226-5bbb-fa7e-412c346949df, S_UND_DuergarRebelGuard_03_baac0ae3-7b2e-47e6-85e4-579f70d4b4fa);
TriggerUnregisterForPlayers(S_UND_DuergarCamp_NoticedPlayersOnRails_3f7fdfa3-2d31-4598-bcb5-e06d7824f557);

IF
DialogEnded(UND_DuergarRebelMason_01_9d3d6ad2-856d-f1b2-1faa-f6fc663f8eef, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GlobalFlag(UND_DuergarRebelMason_State_LearnedHistory_a615b1b0-3e61-3f5e-5593-c8dbb6b12390, _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_AncientCity_VB", _Var1, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(UND_AncientCity_VB_b433ae94-4a8e-e89b-c25f-539e93aa4d34, _Var2);

IF
UseStarted((GUIDSTRING)_Var1, S_UND_DefacedStatue_Statue_0308bca9-4008-4049-aa57-9097a1623270, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_DefacedStatue_SawStatue", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(UND_DefacedStatue_PAD_0a040ffd-a85c-a747-b75c-033fa7dc9506, _Var1);

IF
UseStarted((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_UND_ThullaHint_Hints(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OnlyOnce("UND_ThullaHint_AttemptedSurvivalCheck", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(UND_ThullaHint_SurvivalCheck_PAD_8c96d9db-f22d-3a68-bcb5-8fe8be03f26e, _Var1);

IF
UseStarted((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_UND_ThullaHint_Hints(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_ThullaHint_AttemptedSurvivalCheck", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_KnowledgeCheck(_Var1, "UND_ThullaHint_SurvivalCheckOnHint", _Var2, "Survival", DC_Legacy_10_625be976-7a67-4394-97c8-14c69715ae4b, UND_ThullaHint_SurvivalCheck_PAD_8c96d9db-f22d-3a68-bcb5-8fe8be03f26e, UND_ThullaHint_State_SurvivalCheckSuccess_cd8d838f-e151-4544-b8ba-d7b355e05291);

IF
AddedTo(S_UND_DuergarCamp_HarperPin_4f3aed89-617b-487f-823a-a580606957e1, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(CRA_HarperBooster_State_ReadDocs_716e547e-ab9f-438f-8b18-61776310cdf9, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_DuergarCamp_GotHarperPin", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(UND_DuergarCamp_PAD_HarperPin_c07e1414-5dff-ed66-5b1a-2a5d7edad471, _Var1);

IF
AddedTo(S_UND_DuergarCamp_HarperPin_4f3aed89-617b-487f-823a-a580606957e1, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(CRA_HarperBooster_State_ReadDocs_716e547e-ab9f-438f-8b18-61776310cdf9, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_UND_DuergarCamp_HarperPin_HistoryCheck_InProgress(_Var3, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_UND_DuergarCamp_HarperPin_TriedHistoryCheck(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsAvailableAndInDialogRange(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DB_UND_DuergarCamp_HarperPin_HistoryCheck_InProgress(_Var3);
PROC_TrySkillCheck(_Var3, S_UND_DuergarCamp_HarperPin_4f3aed89-617b-487f-823a-a580606957e1, "History", DC_Legacy_10_625be976-7a67-4394-97c8-14c69715ae4b, "UND_DuergarCamp_HarperPin_HistoryCheck");

PROC
PROC_RollResult("UND_DuergarCamp_HarperPin_HistoryCheck", (CHARACTER)_Var1, S_UND_DuergarCamp_HarperPin_4f3aed89-617b-487f-823a-a580606957e1, (INTEGER)_Var2, (CHARACTER)_Var1)
AND
_Var2 != 2
AND
DB_UND_DuergarCamp_HarperPin_HistoryCheck_InProgress(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_UND_DuergarCamp_HarperPin_TriedHistoryCheck(_Var1);

PROC
PROC_RollResult("UND_DuergarCamp_HarperPin_HistoryCheck", (CHARACTER)_Var1, S_UND_DuergarCamp_HarperPin_4f3aed89-617b-487f-823a-a580606957e1, _, (CHARACTER)_Var1)
AND
DB_UND_DuergarCamp_HarperPin_HistoryCheck_InProgress(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_UND_DuergarCamp_HarperPin_HistoryCheck_InProgress(_Var1);

PROC
PROC_RollResult("UND_DuergarCamp_HarperPin_HistoryCheck", (CHARACTER)_Var1, S_UND_DuergarCamp_HarperPin_4f3aed89-617b-487f-823a-a580606957e1, 1, (CHARACTER)_Var1)
AND
QRY_OnlyOnce("UND_DuergarCamp_HarperPin_History", _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(UND_DuergarCamp_HarperPin_HistoryPassed_f4a3fc9b-e00d-7b76-6518-0b5270f6c9d3, _Var1, 0);
PROC_TryStartAD(UND_DuergarCamp_PAD_HarperPin_c07e1414-5dff-ed66-5b1a-2a5d7edad471, _Var1);

PROC
PROC_RollResult("UND_DuergarCamp_HarperPin_HistoryCheck", (CHARACTER)_Var1, S_UND_DuergarCamp_HarperPin_4f3aed89-617b-487f-823a-a580606957e1, 0, (CHARACTER)_Var1)
AND
QRY_OnlyOnce("UND_DuergarCamp_HarperPin_History", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(UND_DuergarCamp_PAD_HarperPin_c07e1414-5dff-ed66-5b1a-2a5d7edad471, _Var1);

QRY
QRY_GLO_SkillCheck_CheckAdvantage((CHARACTER)_Var1, S_UND_NightFall_DialogTriggers_f10d731f-2dda-4343-af0e-8abd319cb224, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsTagged(_Var1, SHAR_486e4a27-e6f9-40a5-9dd1-108a1d0f60eb, 1, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_Skillcheck_CheckAdvantage(2);

IF
DB_GlobalFlag(UND_HiddenStash_PerceptionPassed_14bf0301-5c86-4cdc-9de5-7ccf1f152453, _, _, _, _)
THEN
SetCanInteract(S_UND_HiddenStash_LooseStone_121a4fd7-d1f0-4e11-b250-71f4ea1e6679, 1);
TimerLaunch("UND_HiddenStash_StoneMovable", 3000);

IF
TimerFinished("UND_HiddenStash_StoneMovable", _, _, _, _)
THEN
PROC_LoopEffect(EFFECTRESOURCEGUID_VFX_Script_Perception_Default_01_46bd169e-bbb5-a6fe-0fe7-97c64f620d5d, S_UND_HiddenStash_LooseStone_121a4fd7-d1f0-4e11-b250-71f4ea1e6679, "UND_Hiddenstash_StoneFlashing", "WLD_Main_A", "");

IF
Moved(S_UND_HiddenStash_LooseStone_121a4fd7-d1f0-4e11-b250-71f4ea1e6679, _, _, _, _)
AND
QRY_OnlyOnce("UND_HiddenStash_StoneMoved", _, _, _, _)
THEN
PROC_StopLoopEffect(S_UND_HiddenStash_LooseStone_121a4fd7-d1f0-4e11-b250-71f4ea1e6679, "UND_Hiddenstash_StoneFlashing");
TimerCancel("UND_HiddenStash_StoneMovable");
TimerLaunch("UND_HiddenStash_Revealed", 1500);

IF
TimerFinished("UND_HiddenStash_Revealed", _, _, _, _)
THEN
PROC_LoopEffect(EFFECTRESOURCEGUID_VFX_Script_Perception_Default_01_46bd169e-bbb5-a6fe-0fe7-97c64f620d5d, S_UND_HiddenStash_Bag_fec2dad1-307e-4923-ba03-bef084116767, "UND_Hiddenstash_BagFlashing", "WLD_Main_A", "");

IF
UseStarted((GUIDSTRING)_Var1, S_UND_HiddenStash_Bag_fec2dad1-307e-4923-ba03-bef084116767, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_Stopped_HiddenStashHighlight", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_StopLoopEffect(S_UND_HiddenStash_Bag_fec2dad1-307e-4923-ba03-bef084116767, "UND_Hiddenstash_BagFlashing");
TimerCancel("UND_HiddenStash_Revealed");

IF
Moved(S_UND_HiddenStash_Bag_fec2dad1-307e-4923-ba03-bef084116767, _, _, _, _)
AND
QRY_OnlyOnce("UND_Stopped_HiddenStashHighlight", _, _, _, _)
THEN
PROC_StopLoopEffect(S_UND_HiddenStash_Bag_fec2dad1-307e-4923-ba03-bef084116767, "UND_Hiddenstash_BagFlashing");
TimerCancel("UND_HiddenStash_Revealed");

IF
AddedTo(S_UND_HiddenStash_Bag_fec2dad1-307e-4923-ba03-bef084116767, _, _, _, _)
AND
QRY_OnlyOnce("UND_Stopped_HiddenStashHighlight", _, _, _, _)
THEN
PROC_StopLoopEffect(S_UND_HiddenStash_Bag_fec2dad1-307e-4923-ba03-bef084116767, "UND_Hiddenstash_BagFlashing");
TimerCancel("UND_HiddenStash_Revealed");

IF
AddedTo(S_UND_SharranTargetPractice_Crossbow_7189447e-3897-48ec-b1e8-4c443192b52d, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_KnowledgeCheck(_Var1, "UND_SharranTargetPracticeCrossbowPickup", S_UND_SharranTargetPractice_Crossbow_7189447e-3897-48ec-b1e8-4c443192b52d, "History", DC_Legacy_10_625be976-7a67-4394-97c8-14c69715ae4b, UND_SharranTargetPractice_PAD_3615d820-9f27-8dca-8859-d3f71ec00a88, UND_SharranTargetPractice_HistoryCheckPassed_18ff2df8-e5b9-400a-be85-3f17580d144c);

QRY
QRY_GLO_SkillCheck_CheckAdvantage((CHARACTER)_Var1, S_UND_SharranTargetPractice_Crossbow_7189447e-3897-48ec-b1e8-4c443192b52d, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsTagged(_Var1, SHAR_486e4a27-e6f9-40a5-9dd1-108a1d0f60eb, 1, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_Skillcheck_CheckAdvantage(2);

IF
DB_GlobalFlag(UND_SharranTargetPractice_HistoryCheckPassed_18ff2df8-e5b9-400a-be85-3f17580d144c, _, _, _, _)
AND
QRY_OnlyOnce("UND_SharranTargetPractice_CrossbowNameChanged", _, _, _, _)
THEN
SetStoryDisplayName(S_UND_SharranTargetPractice_Crossbow_7189447e-3897-48ec-b1e8-4c443192b52d, "UND_DuergarCamp_CrossbowRealName");

IF
UseStarted((GUIDSTRING)_Var1, S_UND_OrbOfDarkvision_TheOrb_55b586df-bd6a-40d3-b824-d214ac550ba0, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ApplyStatus(_Var1, "DARKVISION", 60, 1, S_UND_OrbOfDarkvision_TheOrb_55b586df-bd6a-40d3-b824-d214ac550ba0);

IF
UseStarted((GUIDSTRING)_Var1, S_UND_OrbOfDarkvision_TheOrb_55b586df-bd6a-40d3-b824-d214ac550ba0, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_OrbOfDarkvision_TriggeredAD", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(UND_OrbOfDarkvision_PAD_InteractingWithOrb_25b9647b-9899-c863-376b-1c1ff5926b03, _Var1);

IF
UseStarted((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_UND_JusticiarWeaponRack_Objects(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_DarkJusticiarWeaponRack_Examined", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_KnowledgeCheck(_Var1, "UND_DarkJusticiarWeapons_ReligionCheck", _Var2, "Religion", DC_Legacy_10_625be976-7a67-4394-97c8-14c69715ae4b, UND_JusticiarEquipment_PAD_a65faa80-2d1f-6a7c-690a-e159e8ab7209, UND_JusticiarWeaponRack_ReligionCheckSuccess_4efec57c-ce1a-4173-ae10-356784d2744f);

QRY
QRY_GLO_SkillCheck_CheckAdvantage((CHARACTER)_Var1, (ITEM)_Var2, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_UND_JusticiarWeaponRack_Objects(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, SHAR_486e4a27-e6f9-40a5-9dd1-108a1d0f60eb, 1, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_Skillcheck_CheckAdvantage(2);

IF
CharacterLootedCharacter((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_UND_DarkJusticiarCorpse(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_UND_DarkJusticiarLootedCorpse(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_IncreaseCounter("UND_DarkJusticiarCorpse_LootedCounter");
DB_UND_DarkJusticiarLootedCorpse(_Var2);

IF
CharacterLootedCharacter((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_UND_DarkJusticiarCorpse(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalCounter("UND_DarkJusticiarCorpse_LootedCounter", 2, _Var1, _Var1, _Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 != _Var1
AND
QRY_SpeakerIsAvailableAndInDialogRange(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_DarkJusticiar_PlayInteractiveVB", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(UND_DarkJusticiarCorpse_Looted_8cf0f15d-f13b-6071-0774-f630e0ede684, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
CharacterLootedCharacter((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_UND_DarkJusticiarCorpse(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalCounter("UND_DarkJusticiarCorpse_LootedCounter", 2, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_DarkJusticiar_PlayInteractiveVB", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(UND_DarkJusticiarCorpse_Looted_Solo_7c665336-cefb-d32f-f0b8-3e89dda70d07, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DialogEnded((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_UND_DarkJusticiarDialogs(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_DialogPlayers(_Var2, _Var3, _, _Var1, _Var1)
AND
DB_GlobalFlag(GLO_Halsin_Knows_DarkJusticiars_b63deb41-4b72-7c74-3e00-b60e4acf5d42, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(UND_DarkJusticiarsCorpses_Recognized_6926ad12-4a89-35c9-3d70-2ec613b25c8d, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_DarkJusticiar_VBAfterDialog", _Var1, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(UND_DarkJusticiarCorpse_VB_Recognized_3ac2e0c1-f43f-55d9-7e06-d9ad80ebd2d0, _Var3);

IF
AddedTo(S_UND_Nere_Moonlantern_Broken_5a76ae0a-d013-42e9-98b5-fa427a1cddbe, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_BrokenMoonlantern_Looted", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(UND_BrokenMoonlantern_26dfd5df-1d47-67f1-d8a3-8f5268e85d8d, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
UseFinished((GUIDSTRING)_Var1, S_UND_Nere_Moonlantern_Broken_5a76ae0a-d013-42e9-98b5-fa427a1cddbe, 1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(UND_BrokenMoonlantern_26dfd5df-1d47-67f1-d8a3-8f5268e85d8d, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
LeftCombat((CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_UND_DuergarCamp_Rothes(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(UND_DuergarCamp_DeepRothe_State_RunningAway_a15445f0-e0cd-43c7-88ae-ffbcc28d97a0, _Var1, _Var1, _Var1, _Var1)
THEN
SetEntityEvent(_Var1, "ClearPeaceReturn", 1);

PROC
PROC_StateSet_Defeated((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_UND_DuergarCamp_RotheDiscussion(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_RemoveDialog(S_UND_DuergarCamp_Rothe_01_bc34c553-e236-4fd9-bd6f-2e18a56bcef0);
PROC_RemoveDialog(S_UND_DuergarCamp_Rothe_02_e8c50208-b414-42cc-b49a-48003b13c762);
DB_Dialogs(S_UND_DuergarCamp_Rothe_01_bc34c553-e236-4fd9-bd6f-2e18a56bcef0, UND_DuergarCamp_Rothe_01_62f21dd8-f1a4-703d-7277-8b1beefb331b);
DB_Dialogs(S_UND_DuergarCamp_Rothe_02_e8c50208-b414-42cc-b49a-48003b13c762, UND_DuergarCamp_Rothe_02_dd7fb611-b759-484a-821b-e99e0fba1960);

PROC
PROC_GlobalFlagReactionAfterDialog(UND_DuergarCamp_DeepRothe_Event_Leave_67e1d8e2-142c-45b1-b1a2-c17431053162, _, _, _, _)
THEN
PROC_SetRelationMutual(ACT1_UND_DeepRothe_f291b19a-8ede-405a-9432-95648f741bbe, ACT1_UND_DuergarGuards_ec33d1c9-262d-05e5-5c15-05bcb84cc6a5, 0);
SetFlag(UND_DuergarCamp_DeepRothe_State_RunningAway_a15445f0-e0cd-43c7-88ae-ffbcc28d97a0, NULL_00000000-0000-0000-0000-000000000000);

IF
DB_GlobalFlag(UND_DuergarGuards_Excavation_State_Defeated_3f30c825-10f1-4fa5-84b8-073f293e6650, _, _, _, _)
AND
DB_GlobalFlag(UND_TheDrowNere_State_PermaDefeated_53f1e115-adf8-4608-b85c-08e0dc7d67ad, _, _, _, _)
AND NOT
DB_DuergarCamp_SafeForBanter(1, _, _, _, _)
THEN
DB_DuergarCamp_SafeForBanter(1);

PROC
PROC_UND_DuergarMutineers_Leave()
AND NOT
DB_DuergarCamp_SafeForBanter(1, _, _, _, _)
THEN
DB_DuergarCamp_SafeForBanter(1);

PROC
PROC_UND_TheDrowNere_Leave()
AND NOT
DB_DuergarCamp_SafeForBanter(1, _, _, _, _)
THEN
DB_DuergarCamp_SafeForBanter(1);

PROC
PROC_UND_DuergarCamp_Deserted()
AND NOT
DB_DuergarCamp_SafeForBanter(1, _, _, _, _)
THEN
DB_DuergarCamp_SafeForBanter(1);

IF
DB_DuergarCamp_SafeForBanter(1, _, _, _, _)
THEN
TimerLaunch("UND_DuergarCamp_Banters", 10000);

IF
TimerFinished("UND_DuergarCamp_Banters", _, _, _, _)
THEN
PROC_RegisterWorldGossipTrigger(S_PartyBanterTrigger_UND_DuergarInCleared_b5dbac59-3f23-4ed2-b448-83014d61f5ef);
PROC_RegisterWorldGossipTrigger(S_PartyBanterTrigger_UND_DuergarBalcony_afd31d8b-a002-499a-8a73-f21c2052bfad);

PROC
PROC_GLO_DefeatCounter_AllDefeated("UND_KethericCity_OozeAmbush", _, _, _, _)
THEN
DB_UND_KethericCity_OozeAmbushOver(1);

IF
DialogEnded(UND_PanicRoom_HiddenGnome_d0c4d689-b98f-2450-bc02-4b006b6e8cab, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
DB_UND_KethericCity_CheckedPanicRoom(1);

IF
DB_UND_KethericCity_OozeAmbushOver(1, _, _, _, _)
AND
DB_UND_KethericCity_CheckedPanicRoom(1, _, _, _, _)
THEN
PROC_RegisterWorldGossipTrigger(S_PartyBanterTrigger_UND_OozeStairs_f918c9b7-b45c-4ff1-8b56-aac6678979bc);

IF
AddedTo((ITEM)_Var1, (CHARACTER)_Var2, _, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_UND_MerregonMask(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_UND_MerregonMask(_Var1);
PROC_IncreaseCounter("UND_MerregonMasksCollected_Counter");
PROC_UND_MerregonMask_StartADReaction(_Var2, _Var1);

PROC
PROC_CounterIncreased("UND_MerregonMasksCollected_Counter", 4, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "HIDDEN_WLD_Boosters", "UND_MerregonMask_FoundAll", 0, _Var1)
THEN
QuestUpdate(_Var1, "HIDDEN_WLD_Boosters", "UND_MerregonMask_FoundAll");

PROC
PROC_UND_MerregonMask_StartADReaction((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_OnlyOnce("UND_MerregonMask_AttemptedArcana", _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(UND_MerregonMask_State_FinishedAllComments_a0f1285a-32a5-8cc5-d79a-0c1a4826fa66, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(UND_MerregonMask_PAD_0a1a4729-23ef-0dac-bd03-3500c78399f1, _Var1);

PROC
PROC_UND_MerregonMask_StartADReaction((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_OnlyOnce("UND_MerregonMask_AttemptedArcana", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_KnowledgeCheck(_Var1, "UND_DuergarCamp_FoundMerregonMask", _Var2, "Arcana", DC_Legacy_10_625be976-7a67-4394-97c8-14c69715ae4b, UND_MerregonMask_PAD_0a1a4729-23ef-0dac-bd03-3500c78399f1, UND_MerregonMask_Event_ArcanaSuccess_b51a3710-de8f-34d8-fdc0-d0acefce5d76);

QRY
QRY_GLO_SkillCheck_CheckAdvantage(S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_UND_MerregonMask(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_Skillcheck_CheckAdvantage(2);

QRY
QRY_GLO_SkillCheck_CheckAdvantage((CHARACTER)_Var1, (GUIDSTRING)_Var2, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsTagged(_Var1, REALLY_PLANAR_4cb02915-7ad7-4141-907e-93253c6a8644, 1, _Var1, _Var1)
AND
DB_UND_MerregonMask(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_Skillcheck_CheckAdvantage(2);

IF
GameBookInterfaceClosed(S_UND_PanicJournal_fdd6f488-7598-4bb8-a533-55c8ff9ecb00, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(UND_PanicRoom_Knows_Journal_4a2f67b8-21dc-3d04-bc99-9425b8f12f40, _Var1, _Var1, _Var1, _Var1)
AND
QRY_SetConditionalGlobalFlag(UND_PanicRoom_Knows_Journal_4a2f67b8-21dc-3d04-bc99-9425b8f12f40, 1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(UND_MerregonMask_Knows_Merregon_4cc68d90-721d-2655-d552-d5afe826b3b1, _Var1, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(UND_PanicRoom_VB_99420472-a2c4-1318-0a5b-a6ce00be619e, _Var1);

IF
AddedTo((GUIDSTRING)_Var1, (CHARACTER)_Var2, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetTemplate(_Var1, LOOT_GEN_AdamantineScrap_8705b906-316d-4457-bc15-15a8ff568f67, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("UND_DuergarCamp_FoundAdamantine", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_KnowledgeCheck(_Var2, "UND_DuergarCamp_RecogniseAdamantine", _Var1, "Intelligence", DC_Legacy_15_bddbb9b8-a242-4c3e-a2eb-3fd274c0c539, UND_DuergarCamp_PAD_FoundAdamantine_30faab84-c4e1-0314-0239-2b54dba4f387, UND_DuergarCamp_State_AdamantineKnowledge_555bf26f-84fd-e988-e437-11f83628cce6);

QRY
QRY_GLO_SkillCheck_CheckAdvantage((CHARACTER)_Var1, (GUIDSTRING)_Var2, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetTemplate(_Var2, LOOT_GEN_AdamantineScrap_8705b906-316d-4457-bc15-15a8ff568f67, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, REALLY_DWARF_ad129444-0f41-4114-9ee5-2b9902d7ca8d, 1, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_Skillcheck_CheckAdvantage(1);

QRY
QRY_GLO_SkillCheck_CheckAdvantage((CHARACTER)_Var1, (GUIDSTRING)_Var2, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetTemplate(_Var2, LOOT_GEN_AdamantineScrap_8705b906-316d-4457-bc15-15a8ff568f67, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, GUILD_ARTISAN_baf9fb0e-f535-40a0-bb78-3ec289d84e66, 1, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_Skillcheck_CheckAdvantage(1);

PROC
PROC_GLO_KnowledgeCheckSuccess((GUIDSTRING)_Var1, "UND_NightfallBanquet", S_UND_NightFall_DialogTriggers_f10d731f-2dda-4343-af0e-8abd319cb224, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
SetFlag(UND_NightfallBanquet_ReligionCheckSuccessful_b9e5d7cd-7175-4129-9b48-ab9326d75c85, NULL_00000000-0000-0000-0000-000000000000, 0);
StartVoiceBark(UND_RottenBanquet_VB_0abdba1d-dbe7-22bd-f14d-4c719cb94bc8, _Var1);

PROC
PROC_GLO_KnowledgeCheckFailure((CHARACTER)_Var1, "UND_NightfallBanquet", S_UND_NightFall_DialogTriggers_f10d731f-2dda-4343-af0e-8abd319cb224, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
StartVoiceBark(UND_RottenBanquet_VB_0abdba1d-dbe7-22bd-f14d-4c719cb94bc8, _Var1);

IF
DB_UND_DuergarCamp_RustyWeapons(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TriggerRegisterForPlayers(_Var1);

IF
DB_InRegion(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_UND_DuergarCamp_RustyWeapons(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(UND_DuergarCamp_VB_SawRustyWeapons_0d54ca96-01ad-5719-79c1-9c769387b6a9, _Var1);

IF
VoiceBarkStarted(UND_DuergarCamp_VB_SawRustyWeapons_0d54ca96-01ad-5719-79c1-9c769387b6a9, _, _, _, _)
AND
DB_UND_DuergarCamp_RustyWeapons(_Var2, _, _, _, _)
THEN
PROC_TriggerUnregisterForPlayers(_Var2);

IF
DB_UND_MephitAmbush_SecondWave(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_GLO_DefeatCounter_Notify("UND_MephitAmbush_MephitAppear", _, _, 2, _)
AND
QRY_OnlyOnce("UND_MephitAmbush_MephitAppear", _, _, _, _)
AND
DB_UND_MephitAmbush_SecondWave(_Var3, _Var4, _, _, _)
THEN
AppearAt(_Var3, _Var4, 1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "");

IF
DB_GlobalFlag(GLO_DuergarCamp_EverEnteredBefore_ac0bae57-7006-4676-88b8-7498dde79c41, _Var1, _Var1, _Var1, _Var1)
AND
DB_AmbushTrigger_Ambusher_Appear(S_UND_KethericCity_OozesAmbushTrigger_bc8ced20-f0ed-431f-a527-df90b486d408, _Var1, _Var2, _, _, _, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var2, _Var6, _Var1, _Var1, _Var1)
AND NOT
DB_UND_KethericCity_AmbushingOoze_DrippingEffectRunning(_Var1, _Var2, _Var6, _Var1, _Var1)
THEN
CreateSurface(_Var2, "SurfaceAcid", 1, -1);
DB_UND_KethericCity_AmbushingOoze_DrippingEffectRunning(_Var1, _Var2, _Var6);
PROC_LoopEffect(VFX_Characters_OOZE_Ochre_Jelly_Dripping_01_d3379af8-b2d2-cb80-2bd9-53ad0cad9f15, _Var2, _Var6, "WLD_Main_A", "");

IF
WentOnStage((GUIDSTRING)_Var1, 1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_UND_KethericCity_AmbushingOoze_DrippingEffectRunning(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
NOT DB_UND_KethericCity_AmbushingOoze_DrippingEffectRunning(_Var1, _Var2, _Var3);
PROC_StopLoopEffect(_Var2, _Var3);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act1"
