Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_DropMutingStatussesDialog(IRN_IronThrone_Return_09c71cbf-c72c-d810-3bba-c1b9fc81770e);
DB_DropMutingStatussesDialog(IRN_IronThrone_ReturnRavengard_OM_Wyll_AOM_OOM_098efda3-4db1-0643-a8dd-2138ffc2f9ff);
DB_DropMutingStatussesDialog(IRN_IronThrone_ReturnRavengard_OM_Wyll_COM_7a6ef705-6264-d7d9-b461-b4366e7df226);
DB_State_Current(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "Arrival");
DB_State_Priority(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "Arrival", 0);
DB_State_Priority(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "CountdownOngoing", 1000);
DB_State_Priority(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "CountdownFinished", 2000);
DB_State_Priority(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "BackAtDocks", 3000);
DB_State_Priority(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "WaveservantsAttack", 3500);
DB_State_Priority(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "BackInBasement", 3800);
DB_State_Priority(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "Finished", 4000);
DB_State_Priority(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "DestroyedInSteelwatch", 10000);
DB_IRN_PrisonerGroup(1, S_GLO_IronThrone_Group1_Prisoner1_18991627-0e38-44d0-a8ac-31e1105d5392);
DB_IRN_PrisonerGroup(1, S_GLO_IronThrone_Group1_Prisoner2_ced0a558-b5ed-4493-a499-1890ec48fbfb);
DB_IRN_PrisonerGroup(1, S_GLO_IronThrone_Group1_Prisoner3_c8b6ebf5-e505-4dbd-bd85-dbf82684cbfb);
DB_IRN_PrisonerGroup(2, S_GLO_IronThrone_Group2_Prisoner1_aede3e82-f02b-4d6c-a92f-e9418b1b0e37);
DB_IRN_PrisonerGroup(2, S_GLO_IronThrone_Group2_Prisoner2_ec0de12d-4a2f-4683-bb11-91473ec3577c);
DB_IRN_PrisonerGroup(2, S_GLO_IronThrone_Group2_Prisoner3_d4f52268-f641-406e-b725-0ebf31193693);
DB_IRN_PrisonerGroup(3, S_GLO_IronThrone_Group3_Prisoner1_bbf324dd-8840-4d7d-a097-1937016ae4b8);
DB_IRN_PrisonerGroup(3, S_GLO_IronThrone_Group3_Prisoner2_926d2515-b22a-4b51-8737-42a6c1ebd4f4);
DB_IRN_PrisonerGroup(4, S_GLO_IronThrone_Group4_Prisoner1_a1831c84-e443-4ba9-95b2-49758d576bf5);
DB_IRN_PrisonerGroup(5, S_GLO_IronThrone_Group5_Prisoner1_08ed18ea-c679-4845-93ab-a88fe73a2e55);
DB_IRN_PrisonerGroup(6, S_GLO_IronThrone_Group6_Prisoner1_5377cb38-731d-4582-9396-98529856cdbf);
DB_IRN_PrisonerGroup(7, S_GLO_IronThrone_Group7_Prisoner1_06d864d4-924a-4595-8155-d96df5b5f97e);
DB_IRN_PrisonerGroup(8, S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group1_Prisoner1_18991627-0e38-44d0-a8ac-31e1105d5392, IRN_IronThrone_ZumboPumbo_379d519d-ca24-8973-611a-e60706516590);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group1_Prisoner2_ced0a558-b5ed-4493-a499-1890ec48fbfb, IRN_IronThrone_CeresOlsin_02abfcb5-594a-33c1-5c32-66d845c0cba0);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group1_Prisoner3_c8b6ebf5-e505-4dbd-bd85-dbf82684cbfb, IRN_IronThrone_OgroNiggles_548d63d8-0d5d-1b78-c9b9-bcaf44ff2c68);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group2_Prisoner1_aede3e82-f02b-4d6c-a92f-e9418b1b0e37, IRN_IronThrone_PhoenixLubbins_3644bd97-1c31-eee4-1b4e-16224d3684f2);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group2_Prisoner2_ec0de12d-4a2f-4683-bb11-91473ec3577c, IRN_IronThrone_HastarBiggs_f5e1494d-e0cf-5458-074d-8943e0cdd7b5);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group2_Prisoner3_d4f52268-f641-406e-b725-0ebf31193693, IRN_IronThrone_FeatherweightFalson_0cf6b7f8-d136-0723-4a3c-3c84c49f128b);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group3_Prisoner1_bbf324dd-8840-4d7d-a097-1937016ae4b8, IRN_IronThrone_DeedleOfran_a5e0ceba-ebf0-bb87-e61a-17e79cdb7ed6);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group3_Prisoner2_926d2515-b22a-4b51-8737-42a6c1ebd4f4, IRN_IronThrone_MarlonoRhandle_cfc13831-0235-6198-4f31-4c64a43bc062);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group4_Prisoner1_a1831c84-e443-4ba9-95b2-49758d576bf5, IRN_IronThrone_Santoria_ceb6f4e3-111f-b8ee-89e0-68ce74fc089a);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group5_Prisoner1_08ed18ea-c679-4845-93ab-a88fe73a2e55, IRN_IronThrone_ThindoVintervur_02e36793-107d-d76c-bd66-09ce11c5252f);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group6_Prisoner1_5377cb38-731d-4582-9396-98529856cdbf, IRN_IronThrone_FlansyThornwhist_01bb805b-942c-d7bc-982a-13c800a86c01);
DB_LOW_IronThrone_HostageReturnDialogs(S_GLO_IronThrone_Group7_Prisoner1_06d864d4-924a-4595-8155-d96df5b5f97e, IRN_IronThrone_CaraleeGrollo_f94048ed-9e82-0ed2-a898-1e6d05bfa17a);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group1_Prisoner1_18991627-0e38-44d0-a8ac-31e1105d5392, S_LOW_HostageReturn_Hostage1_1f913b51-1bd9-4255-8b7a-9bf320039ffa, S_LOW_SubmersibleInteriorBench01_a4ed43ac-f7c0-473a-8c4f-112a3a9c364d);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group1_Prisoner2_ced0a558-b5ed-4493-a499-1890ec48fbfb, S_LOW_HostageReturn_Hostage2_63997902-2032-43b1-82c2-47dd01aeef0e, S_LOW_SubmersibleInteriorBench02_7ea9b278-f935-49a7-b2de-58127d3ce3af);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group1_Prisoner3_c8b6ebf5-e505-4dbd-bd85-dbf82684cbfb, S_LOW_HostageReturn_Hostage3_c661b0d0-f874-4824-a2e8-47142920260e, S_LOW_SubmersibleInteriorBench03_fde1f081-16af-4aad-b91b-a1bef2574d5f);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group2_Prisoner1_aede3e82-f02b-4d6c-a92f-e9418b1b0e37, S_LOW_HostageReturn_Hostage4_ffd574b0-89b9-44f5-a46b-7803e6ac1e06, S_LOW_SubmersibleInteriorBench04_ed509a43-1bfc-4654-88a0-a44cd46adfc1);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group2_Prisoner2_ec0de12d-4a2f-4683-bb11-91473ec3577c, S_LOW_HostageReturn_Hostage10_a75d9591-8047-4cb1-af3e-8c600f1353a2, S_LOW_SubmersibleInteriorBench10_c99eb9ea-e8d7-432e-945c-cd6fb00a6deb);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group2_Prisoner3_d4f52268-f641-406e-b725-0ebf31193693, S_LOW_HostageReturn_Hostage6_d7b3d97e-39a0-4a41-99fa-c06dcff60f16, S_LOW_SubmersibleInteriorBench06_a65d7207-e63a-46ba-b960-9b73caf8ef05);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group3_Prisoner1_bbf324dd-8840-4d7d-a097-1937016ae4b8, S_LOW_HostageReturn_Hostage7_4c760b84-339d-4adb-8f1c-4e044f712fe7, S_LOW_SubmersibleInteriorBench07_23eb1a33-deb7-4940-bdfd-cafdfc80527f);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group3_Prisoner2_926d2515-b22a-4b51-8737-42a6c1ebd4f4, S_LOW_HostageReturn_Hostage8_0c22bb86-413c-4142-8545-0c2b0a2e1636, S_LOW_SubmersibleInteriorBench08_7553025a-3b5b-4a72-ac48-1e3f1fc8695b);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group4_Prisoner1_a1831c84-e443-4ba9-95b2-49758d576bf5, S_LOW_HostageReturn_Hostage13_35527d0a-7054-490f-9b92-6da4bc9820f2, S_LOW_SubmersibleInteriorBench13_9f92a4b2-c152-4bb8-845d-0137c3c5f5b9);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group5_Prisoner1_08ed18ea-c679-4845-93ab-a88fe73a2e55, S_LOW_HostageReturn_Hostage14_36052ee0-1938-4be6-a72b-fd1cb0095da0, S_LOW_SubmersibleInteriorBench14_e8963965-497b-4c83-8b0f-e82b4a52e7ab);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group6_Prisoner1_5377cb38-731d-4582-9396-98529856cdbf, S_LOW_HostageReturn_Hostage9_33e3ef1a-51d5-49e3-86b7-d6efa136c130, S_LOW_SubmersibleInteriorBench09_a5ef0212-495a-4108-a6f5-226d5891f26b);
DB_LOW_IronThrone_PrisonerReturnPositions(S_GLO_IronThrone_Group7_Prisoner1_06d864d4-924a-4595-8155-d96df5b5f97e, S_LOW_HostageReturn_Hostage5_ed8b49cb-795a-4ea2-86c0-ec2ed893ff3a, S_LOW_SubmersibleInteriorBench05_3fdf0c1b-a5d3-410c-810e-cdbab8dc2101);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group1_Prisoner1_18991627-0e38-44d0-a8ac-31e1105d5392);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group1_Prisoner2_ced0a558-b5ed-4493-a499-1890ec48fbfb);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group1_Prisoner3_c8b6ebf5-e505-4dbd-bd85-dbf82684cbfb);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group2_Prisoner1_aede3e82-f02b-4d6c-a92f-e9418b1b0e37);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group2_Prisoner2_ec0de12d-4a2f-4683-bb11-91473ec3577c);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group2_Prisoner3_d4f52268-f641-406e-b725-0ebf31193693);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group3_Prisoner1_bbf324dd-8840-4d7d-a097-1937016ae4b8);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group3_Prisoner2_926d2515-b22a-4b51-8737-42a6c1ebd4f4);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group4_Prisoner1_a1831c84-e443-4ba9-95b2-49758d576bf5);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group5_Prisoner1_08ed18ea-c679-4845-93ab-a88fe73a2e55);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group6_Prisoner1_5377cb38-731d-4582-9396-98529856cdbf);
DB_LOW_IronThrone_PrisonerLeaveOrder(S_GLO_IronThrone_Group7_Prisoner1_06d864d4-924a-4595-8155-d96df5b5f97e);
PROC_TriggerRegisterForPlayers(S_LOW_WarehouseBasementArea_cc61966e-79f4-411b-a6cc-da6b153bb84f);
PROC_TriggerRegisterForPlayers(S_LOW_SubmersibleInteriorArea_79fedabd-52a5-4d81-9169-ec7d5d43e8c4);
DB_AddCharactersInTriggerToDialog(IRN_IronThrone_Return_09c71cbf-c72c-d810-3bba-c1b9fc81770e, S_LOW_WarehouseBasementArea_cc61966e-79f4-411b-a6cc-da6b153bb84f, 1);
DB_AddCharactersInTriggerToDialog(IRN_IronThrone_ReturnRavengard_OM_Wyll_AOM_OOM_098efda3-4db1-0643-a8dd-2138ffc2f9ff, S_LOW_WarehouseBasementArea_cc61966e-79f4-411b-a6cc-da6b153bb84f, 1);
DB_AddCharactersInTriggerToDialog(IRN_IronThrone_ReturnRavengard_OM_Wyll_COM_7a6ef705-6264-d7d9-b461-b4366e7df226, S_LOW_WarehouseBasementArea_cc61966e-79f4-411b-a6cc-da6b153bb84f, 1);
DB_LOW_IronThrone_ReturnDialogs(IRN_IronThrone_Return_09c71cbf-c72c-d810-3bba-c1b9fc81770e);
DB_LOW_IronThrone_ReturnDialogs(IRN_IronThrone_ReturnRavengard_OM_Wyll_AOM_OOM_098efda3-4db1-0643-a8dd-2138ffc2f9ff);
DB_LOW_IronThrone_ReturnDialogs(IRN_IronThrone_ReturnRavengard_OM_Wyll_COM_7a6ef705-6264-d7d9-b461-b4366e7df226);
PROC_SetOnStage(S_LOW_BeastmasterUnfinishedNote_375c253e-567e-459e-b80b-13745ca0bf66, 0);
DB_AddCharactersInTriggerToDialog(LOW_BellyOfTheBeast_WaveservantsConfrontation_f00cc5c0-68ef-9825-425e-5169af57ca3d, S_LOW_WarehouseBasementArea_cc61966e-79f4-411b-a6cc-da6b153bb84f, 1);
DB_LOW_IronThrone_DeadCharacterBeachPos(S_LOW_IronThroneDeadCharacterPos01_3a04cce8-e5c7-4d08-97dc-018a22b99d7b);
DB_LOW_IronThrone_DeadCharacterBeachPos(S_LOW_IronThroneDeadCharacterPos02_73e937ca-506b-4eca-9038-8af9299d6800);
DB_LOW_IronThrone_DeadCharacterBeachPos(S_LOW_IronThroneDeadCharacterPos03_82697ac3-8959-42b4-a99a-c306157b0bbb);
DB_LOW_IronThrone_DeadCharacterBeachPos(S_LOW_IronThroneDeadCharacterPos04_5af549a3-98b3-414b-b939-8bce9026eb5b);
DB_LOW_IronThrone_DeadCharacterBeachPos(S_LOW_IronThroneDeadCharacterPos05_06b90677-52ac-4c5a-a615-49b224be47a3);
DB_LOW_IronThrone_DeadCharactersPriorityHostages(S_GLO_IronThrone_Group2_Prisoner1_aede3e82-f02b-4d6c-a92f-e9418b1b0e37);
DB_LOW_IronThrone_DeadCharactersPriorityHostages(S_GLO_IronThrone_Group3_Prisoner2_926d2515-b22a-4b51-8737-42a6c1ebd4f4);
DB_LOW_IronThrone_DeadCharactersPriorityHostages(S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);

KBSECTION
PROC
PROC_DEBUG_IRN_ChangeState(Debug_IRN_IronThrone_StateChange_CountdownOngoing_03ea8ea9-c7da-4dd4-b2f2-8d2c504b9bc4, _, _, _, _)
AND
QRY_OnlyOnce_Reset("DEBUG_IronThrone_Teleported_CountdownOngoing", _, _, _, _)
THEN
PROC_TeleportPartiesTo(S_IRN_Debug_StartCountdownPos_66dd9741-ba35-4e0f-bc97-b0e2f0f301c0, "DEBUG_IronThrone_Teleported_CountdownOngoing");

IF
EntityEvent((GUIDSTRING)_Var1, "DEBUG_IronThrone_Teleported_CountdownOngoing", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("DEBUG_IronThrone_Teleported_CountdownOngoing", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "CountdownOngoing");
ClearFlag(Debug_IRN_IronThrone_StateChange_CountdownOngoing_03ea8ea9-c7da-4dd4-b2f2-8d2c504b9bc4);

PROC
PROC_DEBUG_IRN_ChangeState(Debug_IRN_IronThrone_StateChange_CountdownFinished_d448c691-e09e-4e8e-9403-10a5c7200d63, _, _, _, _)
AND
QRY_OnlyOnce_Reset("DEBUG_IronThrone_Teleported_CountdownFinished", _, _, _, _)
THEN
PROC_TeleportPartiesTo(S_IRN_Debug_StartCountdownPos_66dd9741-ba35-4e0f-bc97-b0e2f0f301c0, "DEBUG_IronThrone_Teleported_CountdownFinished");

IF
EntityEvent((GUIDSTRING)_Var1, "DEBUG_IronThrone_Teleported_CountdownFinished", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("DEBUG_IronThrone_Teleported_CountdownFinished", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "CountdownFinished");
ClearFlag(Debug_IRN_IronThrone_StateChange_CountdownFinished_d448c691-e09e-4e8e-9403-10a5c7200d63);

PROC
PROC_DEBUG_IRN_ChangeState(Debug_IRN_IronThrone_StateChange_BackAtDocks_MajoritySaved_1a52a283-3e07-4d8f-acb6-5b963d8c99fe, _, _, _, _)
AND
QRY_OnlyOnce_Reset("DEBUG_IronThrone_Teleported_BackAtDocks_MajoritySaved", _, _, _, _)
THEN
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group1_Prisoner1_18991627-0e38-44d0-a8ac-31e1105d5392);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group1_Prisoner2_ced0a558-b5ed-4493-a499-1890ec48fbfb);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group1_Prisoner3_c8b6ebf5-e505-4dbd-bd85-dbf82684cbfb);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group2_Prisoner1_aede3e82-f02b-4d6c-a92f-e9418b1b0e37);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group2_Prisoner2_ec0de12d-4a2f-4683-bb11-91473ec3577c);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group2_Prisoner3_d4f52268-f641-406e-b725-0ebf31193693);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group3_Prisoner1_bbf324dd-8840-4d7d-a097-1937016ae4b8);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group3_Prisoner2_926d2515-b22a-4b51-8737-42a6c1ebd4f4);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group7_Prisoner1_06d864d4-924a-4595-8155-d96df5b5f97e);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group4_Prisoner1_a1831c84-e443-4ba9-95b2-49758d576bf5);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group5_Prisoner1_08ed18ea-c679-4845-93ab-a88fe73a2e55);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group6_Prisoner1_5377cb38-731d-4582-9396-98529856cdbf);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53);
SetFlag(IRN_IronThrone_State_Visited_5b3fb5a7-61e8-44a9-a0a1-b6b45b59a23c);
PROC_TeleportPartiesTo(S_LOW_IronThrone_SubmersibleInteriorReturnPos_6fc62c85-7c7f-4651-ba4c-1105ce2c86d3, "DEBUG_IronThrone_Teleported_BackAtDocks_MajoritySaved");

IF
EntityEvent((GUIDSTRING)_Var1, "DEBUG_IronThrone_Teleported_BackAtDocks_MajoritySaved", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("DEBUG_IronThrone_Teleported_BackAtDocks_MajoritySaved", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "BackAtDocks");
ClearFlag(Debug_IRN_IronThrone_StateChange_BackAtDocks_1a52a283-3e07-4d8f-acb6-5b963d8c99fe);

PROC
PROC_DEBUG_IRN_ChangeState(Debug_IRN_IronThrone_StateChange_BackAtDocks_MajorityDead_38c21a66-a63a-4df8-9db2-623768674798, _, _, _, _)
AND
QRY_OnlyOnce_Reset("DEBUG_IronThrone_Teleported_BackAtDocks_MajorityDead", _, _, _, _)
THEN
Die(S_GLO_IronThrone_Group1_Prisoner1_18991627-0e38-44d0-a8ac-31e1105d5392, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
Die(S_GLO_IronThrone_Group1_Prisoner2_ced0a558-b5ed-4493-a499-1890ec48fbfb, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
Die(S_GLO_IronThrone_Group1_Prisoner3_c8b6ebf5-e505-4dbd-bd85-dbf82684cbfb, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
Die(S_GLO_IronThrone_Group2_Prisoner1_aede3e82-f02b-4d6c-a92f-e9418b1b0e37, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
Die(S_GLO_IronThrone_Group2_Prisoner2_ec0de12d-4a2f-4683-bb11-91473ec3577c, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
Die(S_GLO_IronThrone_Group2_Prisoner3_d4f52268-f641-406e-b725-0ebf31193693, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
Die(S_GLO_IronThrone_Group3_Prisoner1_bbf324dd-8840-4d7d-a097-1937016ae4b8, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
Die(S_GLO_IronThrone_Group3_Prisoner2_926d2515-b22a-4b51-8737-42a6c1ebd4f4, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
Die(S_GLO_IronThrone_Group7_Prisoner1_06d864d4-924a-4595-8155-d96df5b5f97e, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group4_Prisoner1_a1831c84-e443-4ba9-95b2-49758d576bf5);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group5_Prisoner1_08ed18ea-c679-4845-93ab-a88fe73a2e55);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group6_Prisoner1_5377cb38-731d-4582-9396-98529856cdbf);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53);
SetFlag(LOW_SteelWatchFoundry_State_MajorityIronThronePrisonersDead_6c40a75d-32ae-4402-a54c-062805f7ee7d);
SetFlag(IRN_IronThrone_State_Visited_5b3fb5a7-61e8-44a9-a0a1-b6b45b59a23c);
PROC_TeleportPartiesTo(S_LOW_IronThrone_SubmersibleInteriorReturnPos_6fc62c85-7c7f-4651-ba4c-1105ce2c86d3, "DEBUG_IronThrone_Teleported_BackAtDocks_MajorityDead");

IF
EntityEvent((GUIDSTRING)_Var1, "DEBUG_IronThrone_Teleported_BackAtDocks_MajorityDead", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("DEBUG_IronThrone_Teleported_BackAtDocks_MajorityDead", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "BackAtDocks");
ClearFlag(Debug_IRN_IronThrone_StateChange_BackAtDocks_1a52a283-3e07-4d8f-acb6-5b963d8c99fe);

PROC
PROC_DEBUG_IRN_ChangeState(Debug_IRN_IronThrone_StateChange_BackAtDocks_AllButOne_8dd3929c-0c53-41c2-b795-879a1bef3240, _, _, _, _)
AND
QRY_OnlyOnce_Reset("DEBUG_IronThrone_Teleported_BackAtDocks_AllButOne", _, _, _, _)
THEN
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53);
SetFlag(LOW_SteelWatchFoundry_State_AllButOneIronThronePrisonersDead_d41e3f87-aeed-4b23-8649-261d1e6a063b);
SetFlag(IRN_IronThrone_State_Visited_5b3fb5a7-61e8-44a9-a0a1-b6b45b59a23c);
PROC_TeleportPartiesTo(S_LOW_IronThrone_SubmersibleInteriorReturnPos_6fc62c85-7c7f-4651-ba4c-1105ce2c86d3, "DEBUG_IronThrone_Teleported_BackAtDocks_AllButOne");

IF
EntityEvent((GUIDSTRING)_Var1, "DEBUG_IronThrone_Teleported_BackAtDocks_AllButOne", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("DEBUG_IronThrone_Teleported_BackAtDocks_AllButOne", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "BackAtDocks");
ClearFlag(Debug_IRN_IronThrone_StateChange_BackAtDocks_1a52a283-3e07-4d8f-acb6-5b963d8c99fe);

PROC
PROC_DEBUG_IRN_ChangeState(Debug_IRN_IronThrone_StateChange_BackAtDocks_AllDead_1edf6e8d-64da-443d-b762-750c28bc5e9d, _, _, _, _)
AND
QRY_OnlyOnce_Reset("DEBUG_IronThrone_Teleported_BackAtDocks_AllDead", _, _, _, _)
THEN
SetFlag(LOW_SteelWatchFoundry_State_AllIronThronePrisonersDead_4fefe27f-7cd6-44b1-9322-a57b22246271);
Die(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
Die(S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
SetFlag(IRN_IronThrone_State_Visited_5b3fb5a7-61e8-44a9-a0a1-b6b45b59a23c);
PROC_TeleportPartiesTo(S_LOW_IronThrone_SubmersibleInteriorReturnPos_6fc62c85-7c7f-4651-ba4c-1105ce2c86d3, "DEBUG_IronThrone_Teleported_BackAtDocks_AllDead");

IF
EntityEvent((GUIDSTRING)_Var1, "DEBUG_IronThrone_Teleported_BackAtDocks_AllDead", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("DEBUG_IronThrone_Teleported_BackAtDocks_AllDead", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "BackAtDocks");
ClearFlag(Debug_IRN_IronThrone_StateChange_BackAtDocks_1a52a283-3e07-4d8f-acb6-5b963d8c99fe);

PROC
PROC_DEBUG_IRN_ChangeState(Debug_IRN_IronThrone_StateChange_BackAtDocks_SpokespersonDead_107bdd2a-d5ff-4aee-8638-268876cff74e, _, _, _, _)
AND
QRY_OnlyOnce_Reset("DEBUG_IronThrone_Teleported_BackAtDocks_SpokespersonDead", _, _, _, _)
THEN
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group1_Prisoner1_18991627-0e38-44d0-a8ac-31e1105d5392);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group1_Prisoner2_ced0a558-b5ed-4493-a499-1890ec48fbfb);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group1_Prisoner3_c8b6ebf5-e505-4dbd-bd85-dbf82684cbfb);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group2_Prisoner1_aede3e82-f02b-4d6c-a92f-e9418b1b0e37);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group2_Prisoner2_ec0de12d-4a2f-4683-bb11-91473ec3577c);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group2_Prisoner3_d4f52268-f641-406e-b725-0ebf31193693);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group3_Prisoner1_bbf324dd-8840-4d7d-a097-1937016ae4b8);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group3_Prisoner2_926d2515-b22a-4b51-8737-42a6c1ebd4f4);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group7_Prisoner1_06d864d4-924a-4595-8155-d96df5b5f97e);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group4_Prisoner1_a1831c84-e443-4ba9-95b2-49758d576bf5);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group5_Prisoner1_08ed18ea-c679-4845-93ab-a88fe73a2e55);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_Group6_Prisoner1_5377cb38-731d-4582-9396-98529856cdbf);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);
SetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53);
Die(S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
SetFlag(LOW_SteelWatchFoundry_State_AnyIronThronePrisonersDead_5d6c4329-ee56-4084-8220-d627b716ac87);
SetFlag(IRN_IronThrone_State_Visited_5b3fb5a7-61e8-44a9-a0a1-b6b45b59a23c);
PROC_TeleportPartiesTo(S_LOW_IronThrone_SubmersibleInteriorReturnPos_6fc62c85-7c7f-4651-ba4c-1105ce2c86d3, "DEBUG_IronThrone_Teleported_BackAtDocks_SpokespersonDead");

IF
EntityEvent((GUIDSTRING)_Var1, "DEBUG_IronThrone_Teleported_BackAtDocks_SpokespersonDead", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce("DEBUG_IronThrone_Teleported_BackAtDocks_SpokespersonDead", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "BackAtDocks");
ClearFlag(Debug_IRN_IronThrone_StateChange_BackAtDocks_1a52a283-3e07-4d8f-acb6-5b963d8c99fe);

IF
EntityEvent((GUIDSTRING)_Var1, "IRN_IronThrone_LeftWithoutEntering", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_SetOnStage(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, 1);

IF
FlagSet(IRN_IronThrone_State_LeftWithoutEntering_9530d1e4-8740-423b-a989-d7912a5de9bc, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BellyOfTheBeast_State_SubmersibleReadyToDepart_a2ae474a-de65-4fde-b019-b1fdb6306acb, _, _, _, _)
THEN
PROC_SetRelationToPlayers(ACT3_LOW_BellyOfTheBeast_Beastmaster_df47ddde-7444-42e9-a50f-3371a7b21cb8, 0);

IF
DB_InRegion(_Var1, S_LOW_SubmersibleInteriorArea_79fedabd-52a5-4d81-9169-ec7d5d43e8c4, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(IRN_IronThrone_State_Visited_5b3fb5a7-61e8-44a9-a0a1-b6b45b59a23c, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("IRN_IronThrone_ReturnedToSubmersibleInterior", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TriggerUnregisterForPlayers(S_LOW_SubmersibleInteriorArea_79fedabd-52a5-4d81-9169-ec7d5d43e8c4);
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "BackAtDocks");

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", (GUIDSTRING)_, (GUIDSTRING)_)
THEN
AutoSave();

IF
TextEvent("irn_deadbodies", _, _, _, _)
THEN
PROC_LOW_IronThrone_TeleportDeadBodiesToShore();

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_LOW_IronThrone_TeleportDeadBodiesToShore();

PROC
PROC_LOW_IronThrone_TeleportDeadBodiesToShore()
AND
DB_IRN_PlayerDead(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce_Reset("LOW_IronThrone_TeleportedDeadPlayerToBeach", _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_IronThrone_DeadCharacterBeachPos(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_IronThrone_TeleportedDeadPlayerToBeach", _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_LOW_IronThrone_DeadCharacterBeachPos(_Var2);
NOT DB_IRN_PlayerDead(_Var1);
TeleportTo(_Var1, _Var2, "", 0, 0, 0, 1, 1);

PROC
PROC_LOW_IronThrone_TeleportDeadBodiesToShore()
AND
DB_LOW_IronThrone_DeadCharactersPriorityHostages(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, _Var1, 0, _Var1, _Var1)
AND
QRY_OnlyOnce_Reset("LOW_IronThrone_TeleportedDeadHostageToBeach", _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_IronThrone_DeadCharacterBeachPos(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_IronThrone_TeleportedDeadHostageToBeach", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DieImmediate(_Var1, 0, 1);
DB_CorpseCleanup_Ignore(_Var1);
NOT DB_LOW_IronThrone_DeadCharacterBeachPos(_Var2);
TeleportTo(_Var1, _Var2, "", 0, 0, 0, 1, 1);

PROC
PROC_LOW_IronThrone_TeleportDeadBodiesToShore()
AND
DB_IRN_PrisonerGroup(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
_Var1 <= 8
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, _Var2, 0, _Var1, _Var1)
AND
QRY_OnlyOnce_Reset("LOW_IronThrone_TeleportedDeadHostageToBeach", _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_IronThrone_DeadCharacterBeachPos(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_IronThrone_TeleportedDeadHostageToBeach", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DieImmediate(_Var2, 0, 0);
DB_CorpseCleanup_Ignore(_Var2);
NOT DB_LOW_IronThrone_DeadCharacterBeachPos(_Var3);
TeleportTo(_Var2, _Var3, "", 0, 0, 0, 1, 1);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", (GUIDSTRING)_, (GUIDSTRING)_)
THEN
DB_TriggerEvents_AllPartyMembersLeft(S_LOW_BellyOfTheBeast_WarehouseBasement_SUB_6c9b1262-8097-45a1-b989-8f56dd4d38e4, "LOW_IronThrone_AllPlayersLeftBasement");
DB_BlockedWaypointZone(S_LOW_SubmersibleInteriorArea_79fedabd-52a5-4d81-9169-ec7d5d43e8c4);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND
DB_LOW_DockWarehouse_Beasts(_Var2, _, _, _, _)
AND NOT
DB_Defeated(_Var2, _, _, _, _)
THEN
PROC_SetOnStage(_Var2, 0);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND
DB_GlobalFlag(LOW_BellyOfTheBeast_State_PlayersWentToIronThroneWithBeastmaster_61dd108a-9a51-4edc-b070-3da42574d0d9, _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, _, _, _, _)
THEN
TeleportTo(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, S_LOW_HostageReturn_Beastmaster_501d9a0b-2c5c-43ca-ab17-ebfd7335ec85);
PROC_SetOnStage(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, 1);
PROC_RemoveAllDialogEntriesForSpeaker(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1);
SetHasDialog(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, 0);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND NOT
DB_GlobalFlag(LOW_BellyOfTheBeast_State_PlayersWentToIronThroneWithBeastmaster_61dd108a-9a51-4edc-b070-3da42574d0d9, _, _, _, _)
AND NOT
QRY_LOW_BellyOfTheBeast_WaveservantAmbushHappening()
AND NOT
DB_PermaDefeated(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, _, _, _, _)
THEN
PROC_SetOnStage(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, 0);
PROC_SetOnStage(S_LOW_BeastmasterUnfinishedNote_375c253e-567e-459e-b80b-13745ca0bf66, 1);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND NOT
DB_GlobalFlag(LOW_BellyOfTheBeast_State_PlayersWentToIronThroneWithBeastmaster_61dd108a-9a51-4edc-b070-3da42574d0d9, _, _, _, _)
AND
QRY_LOW_BellyOfTheBeast_WaveservantAmbushHappening()
AND NOT
DB_PermaDefeated(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, _, _, _, _)
THEN
TeleportTo(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, S_LOW_WarehouseBasementBeastmasterNearSubPos_4d077950-4e58-47d8-9eff-e6df2d978bd8, "", 0, 0, 0, 0, 1);
PROC_SetOnStage(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, 1);
Die(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, 0, NULL_00000000-0000-0000-0000-000000000000, 1, 1, 0);
SetFlag(LOW_BellyOfTheBeast_State_WaveservantsKilledBeastmasterWhilePlayerIsInIronThrone_30add9ad-0e3d-41d3-a784-24e7efbb2acc);

QRY
QRY_LOW_BellyOfTheBeast_WaveservantAmbushHappening()
AND NOT
DB_Defeated(S_LOW_AllandraGrey_32d78583-07c6-4160-9ec7-3a24b15149c8, _, _, _, _)
AND
DB_GlobalFlag(LOW_BellyOfTheBeast_Knows_WaveservantsWantBeastmasterDead_2bed3d0c-d9b1-471b-ac24-ec1a6d24819e, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, 1, _, _)
THEN
TeleportTo(S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, S_LOW_HostageReturn_Omeluum_ca492f8e-774a-4e41-99c9-b817ecbd06cc);
PROC_RemoveAllDialogEntriesForSpeaker(S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53);
DB_Dialogs(S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, IRN_IronThrone_Omeluum_26f2208c-177d-b640-fb5a-0594b84f305a);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 1, _, _)
THEN
TeleportTo(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, S_LOW_HostageReturn_Ravengard_934888a1-7ec8-429e-b282-1d86f6381789);
PROC_RemoveAllDialogEntriesForSpeaker(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);
DB_Dialogs(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, IRN_IronThrone_Ravengard_5f8aa534-4bfc-cfd1-0c6d-f2c0a40fe96a);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158, 1, _, _)
THEN
TeleportTo(S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158, S_LOW_HostageReturn_Spokesperson_8c2ff3f7-09a3-498e-b504-37aaf26396cf);
PROC_SetOnStage(S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158, 1);
PROC_RemoveAllDialogEntriesForSpeaker(S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);
DB_Dialogs(S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158, IRN_IronThrone_ReturnHostages_ef782bd3-1403-ce1c-f6c9-e431971f0f4c);
PROC_TriggerRegisterForPlayers(S_IRN_IronThrone_ObeliaADArea_ca3ee282-4a4a-4861-9401-d6c69ca93781);
DB_LOW_IronThrone_HostagesInSubmersible(S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158, 0, _, _)
THEN
DB_LOW_IronThrone_SpokespersonDead(1);

QRY
QRY_SelectCustomDialog((CHARACTER)_Var1, (GUIDSTRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_IRN_PrisonerGroup(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 <= 8
AND
DB_LOW_IronThrone_SpokespersonDead(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_IronThrone_AlternativeDialogStarted", _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(IRN_IronThrone_ReturnHostagesAlt_1a432fee-b7e4-64ee-8b83-b5a658672196, _Var1, _Var2);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND
DB_LOW_IronThrone_PrisonerReturnPositions(_Var2, _Var3, _, _, _)
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, _Var2, 1, _, _)
AND
DB_LOW_IronThrone_HostageReturnDialogs(_Var2, _Var5, _, _, _)
THEN
TeleportTo(_Var2, _Var3, "LOW_IronThrone_PrisonerReturnedToSubmersible", 0, 1, 1, 0, 1);
PROC_SetOnStage(_Var2, 1);
DB_Dialogs(_Var2, _Var5);
DB_LOW_IronThrone_HostagesInSubmersible(_Var2);

IF
EntityEvent((CHARACTER)_Var1, "LOW_IronThrone_PrisonerReturnedToSubmersible", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_LOW_IronThrone_PrisonerReturnPositions(_Var1, _, _Var3, _Var1, _Var1)
THEN
Use(_Var1, _Var3, 1, 1, "");

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND NOT
QRY_SpeakerIsAvailableAndInDialogRange(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, _Var2, _, _, _)
AND NOT
DB_OnlyOnce("IRN_ReturnFromIronThrone", _, _, _, _)
AND
QRY_StartDialog(IRN_IronThrone_Return_09c71cbf-c72c-d810-3bba-c1b9fc81770e, NULL_00000000-0000-0000-0000-000000000000, _Var2, _, _)
THEN
DB_OnlyOnce("IRN_ReturnFromIronThrone");

PROC
PROC_StartDialog_AddExtraSpeakers(IRN_IronThrone_Return_09c71cbf-c72c-d810-3bba-c1b9fc81770e, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddListeningActor(_Var1, _Var2);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackAtDocks", _, _)
AND
DB_Players(_Var2, _, _, _, _)
AND
QRY_SpeakerIsAvailableAndInDialogRange(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, _Var2, _, _, _)
AND NOT
DB_OnlyOnce("IRN_ReturnFromIronThrone", _, _, _, _)
AND
QRY_StartDialog(IRN_IronThrone_Return_09c71cbf-c72c-d810-3bba-c1b9fc81770e, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, _Var2, _, _)
THEN
DB_OnlyOnce("IRN_ReturnFromIronThrone");

PROC
PROC_StartDialog_AddExtraSpeakers(IRN_IronThrone_Return_09c71cbf-c72c-d810-3bba-c1b9fc81770e, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
THEN
SetLevelStartingDialog(_Var1, 1);

IF
DialogEnded((DIALOGRESOURCE)_Var1, _, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_LOW_IronThrone_ReturnDialogs(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_IRN_PrisonerGroup(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
_Var3 <= 8
AND NOT
DB_OnlyOnce("LOW_IronThrone_HostagesCheerADCalled", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(IRN_IronThrone_AD_HostageCheerAfterIronThrone_10e29849-2f08-f137-d387-33e57ee3f772, _Var4, _Var1, _Var1, _Var1)
THEN
DB_OnlyOnce("LOW_IronThrone_HostagesCheerADCalled");

IF
DialogEnded((DIALOGRESOURCE)_Var1, _, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_LOW_IronThrone_ReturnDialogs(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TimerLaunch("IRN_IronThrone_ReturnFromIronThrone_LowerLadderDelay", 3000);

IF
TimerFinished("IRN_IronThrone_ReturnFromIronThrone_LowerLadderDelay", _, _, _, _)
THEN
PROC_LOW_IronThrone_LadderLowered();

PROC
PROC_LOW_IronThrone_LadderLowered()
THEN
ItemMoveTo(S_LOW_SubmersibleInteriorLadder_8b3d25e5-4fb6-4207-8f67-82b7f6de1db9, S_LOW_SubmersibleLadderLowerPos_551435e8-2760-47fb-b2d4-9c0845ff73de, 1, 0, 0, "LOW_IronThrone_SubmersibleLadderLowered", 0);
PROC_TryStartAD(LOW_BellyOfTheBeast_AD_BeastmasterExitsSubmersible_211e1bd1-b89e-72f7-007a-af6472d9c4a6, S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1);

IF
EntityEvent((ITEM)_Var1, "LOW_IronThrone_SubmersibleLadderLowered", (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
THEN
SetCanInteract(_Var1, 1);

IF
AutomatedDialogEnded(LOW_BellyOfTheBeast_AD_BeastmasterExitsSubmersible_211e1bd1-b89e-72f7-007a-af6472d9c4a6, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
SetHasDialog(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, 1);
DB_Dialogs(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, LOW_BellyOfTheBeast_BeastmasterAfterIronThrone_ec46a7ed-f330-9695-cdf8-b392bfec62f3);
PROC_CharacterMoveTo(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, S_LOW_SubmersibleLadderPos_4c27ebd9-5a52-4bb6-8edd-8f2bf4c38bc7, "Walk", "LOW_IronThrone_BeastmasterLeftSubmersible");

IF
EntityEvent((GUIDSTRING)_Var1, "LOW_IronThrone_BeastmasterLeftSubmersible", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
TeleportTo(_Var1, S_LOW_WarehouseBasementBeastmasterNearSubPos_4d077950-4e58-47d8-9eff-e6df2d978bd8, "", 0, 0, 0, 0, 1);
SetFlag(LOW_BellyOfTheBeast_Event_BeastmasterExitedSubmersible_ce7ebb28-57cf-42d2-a4ed-bf0138b29c15);
DB_LOW_BellyOfTheBeast_BeastmasterReturnedToBasement(1);

IF
DB_InRegion(_Var1, S_IRN_IronThrone_ObeliaADArea_ca3ee282-4a4a-4861-9401-d6c69ca93781, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("IRN_IronThrone_ObeliaAD_Played", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(IRN_IronThrone_AD_EscapingHostageAtDockBasement_f4151404-7492-6396-70a6-5ae80782e110, S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);

IF
UseStarted((CHARACTER)_Var1, S_LOW_SubmersibleInteriorLadder_8b3d25e5-4fb6-4207-8f67-82b7f6de1db9, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_LOW_DockWarehouse_ReturnFromIronThronePos_d1a59a82-8b4b-4f0a-a382-14a997888333, "LOW_IronTrone_ReturnedToBasement", 1, 1, 1, 0, 1);

IF
EntityEvent(_, "LOW_IronTrone_ReturnedToBasement", _, _, _)
AND NOT
DB_LOW_BellyOfTheBeast_BeastmasterReturnedToBasement(1, _, _, _, _)
AND
DB_GlobalFlag(LOW_BellyOfTheBeast_State_PlayersWentToIronThroneWithBeastmaster_61dd108a-9a51-4edc-b070-3da42574d0d9, _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, _, _, _, _)
THEN
DB_LOW_BellyOfTheBeast_BeastmasterReturnedToBasement(1);
TeleportTo(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, S_LOW_WarehouseBasementBeastmasterNearSubPos_4d077950-4e58-47d8-9eff-e6df2d978bd8, "", 0, 0, 0, 0, 1);

IF
DB_InRegion(_Var1, S_LOW_WarehouseBasementArea_cc61966e-79f4-411b-a6cc-da6b153bb84f, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(IRN_IronThrone_State_Visited_5b3fb5a7-61e8-44a9-a0a1-b6b45b59a23c, _Var1, _Var1, _Var1, _Var1)
AND
QRY_LOW_BellyOfTheBeast_ShouldWaveservantsAmbush()
AND
QRY_OnlyOnce("LOW_BellyOfTheBeast_PlayerInRegion", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "WaveservantsAttack");

IF
DB_InRegion(_Var1, S_LOW_WarehouseBasementArea_cc61966e-79f4-411b-a6cc-da6b153bb84f, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(IRN_IronThrone_State_Visited_5b3fb5a7-61e8-44a9-a0a1-b6b45b59a23c, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_LOW_BellyOfTheBeast_ShouldWaveservantsAmbush()
AND
QRY_OnlyOnce("LOW_BellyOfTheBeast_PlayerInRegion", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "BackInBasement");

QRY
QRY_LOW_BellyOfTheBeast_ShouldWaveservantsAmbush()
AND NOT
DB_GlobalFlag(LOW_BellyOfTheBest_State_ReportedBeastmasterDead_43dd5530-e74f-48fa-aeb1-43cbb8bbb7d6, _, _, _, _)
AND
DB_GlobalFlag(LOW_Allandra_State_EulogyFinished_e05a20ae-7793-5919-e119-e9e29cddce64, _, _, _, _)
AND NOT
DB_Defeated(S_LOW_AllandraGrey_32d78583-07c6-4160-9ec7-3a24b15149c8, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackInBasement", (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_LOW_IronThrone_HostagesLeave();
NOT DB_BlockedWaypointZone(S_LOW_SubmersibleInteriorArea_79fedabd-52a5-4d81-9169-ec7d5d43e8c4);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackInBasement", _, _)
AND NOT
DB_LOW_IronThrone_HostagesInSubmersible(_, _, _, _, _)
THEN
PROC_LOW_IronThrone_AllHostagesLeftSubmersible();

PROC
PROC_LOW_IronThrone_HostagesLeave()
AND
Random(1000, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSum(1500, _Var1, _Var2, _Var1, _Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_IronThrone_HostagesStartToDisembark", _Var1, _Var1, _Var1, _Var1)
THEN
ObjectTimerLaunch(_Var3, "LOW_IronThrone_HostageStartsLeave", _Var2, 1);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "LOW_IronThrone_HostageStartsLeave", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_OnlyOnce_Reset("LOW_IronThrone_HostageLeftSubmersible", _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_IronThrone_PrisonerLeaveOrder(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_IronThrone_HostagesInSubmersible(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_IronThrone_HostageLeftSubmersible", _Var1, _Var1, _Var1, _Var1)
AND
Random(1000, _Var3, _Var1, _Var1, _Var1)
AND
IntegerSum(1500, _Var3, _Var4, _Var1, _Var1)
THEN
NOT DB_LOW_IronThrone_PrisonerLeaveOrder(_Var2);
PROC_LOW_IronThrone_HostageStartsLeave(_Var2);
ObjectTimerLaunch(_Var1, "LOW_IronThrone_HostageStartsLeave", _Var4, 1);

PROC
PROC_LOW_IronThrone_HostageStartsLeave((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_CharacterMoveTo(_Var1, S_LOW_SubmersibleLadderPos_4c27ebd9-5a52-4bb6-8edd-8f2bf4c38bc7, "Walk", "LOW_IronThrone_HostageReachedSubmersibleExitPos");

IF
EntityEvent((CHARACTER)_Var1, "LOW_IronThrone_HostageReachedSubmersibleExitPos", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
NOT DB_LOW_IronThrone_HostagesInSubmersible(_Var1);
PROC_LOW_IronThrone_CheckRemainingHostages();
TeleportTo(_Var1, S_LOW_DockWarehouse_ReturnFromIronThronePos_d1a59a82-8b4b-4f0a-a382-14a997888333, "LOW_IronThrone_HostageBackInBasement_Teleported", 0, 0, 0, 0, 1);

IF
EntityEvent((GUIDSTRING)_Var1, "LOW_IronThrone_HostageBackInBasement_Teleported", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
SetFlag(IRN_IronThrone_State_IndividualPrisonerReachedBasement_7afcb442-1ae5-440c-89fe-7205c27f18c6, _Var1);

IF
EntityEvent(S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158, "LOW_IronThrone_HostageBackInBasement_Teleported", _, _, _)
AND
DB_LOW_IronThrone_HostagesInSubmersible(_, _, _, _, _)
AND
QRY_OnlyOnce("LOW_IronThrone_ObeliaCallsOthersOut", _, _, _, _)
THEN
PROC_TryStartAD(IRN_IronThrone_AD_EscapingHostageCallsOthersOut_c70d9442-e7d1-05a2-3657-c59eb403aa3b, S_GLO_IronThrone_EscapingHostage_614ceeec-24a5-4491-98b3-a83ab235f158);

PROC
PROC_State_Changed(_, "IRN_IronThrone", "BackInBasement", (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_LOW_IronThrone_CleanUpAfterIRN();

PROC
PROC_LOW_IronThrone_CleanUpAfterIRN()
AND
DB_IRN_PrisonerGroup(_, _Var2, _, _, _)
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, _Var2, 1, _, _)
THEN
ClearTag(_Var2, IGNORE_COMBAT_LATE_JOIN_PENALTY_6d60bed7-10cc-4b52-8fb7-baa75181cd49);
ClearTag(_Var2, NO_LEVELTEMPLATE_TRANSFER_577229d7-a806-40c9-81fc-3e843d1955c0);
PROC_SelfHealing_Enable(_Var2);

PROC
PROC_LOW_IronThrone_CleanUpAfterIRN()
AND
QRY_IRN_MizoraShouldAppear()
THEN
ClearTag(S_GLO_Wyll_Cambion_491a7686-3081-405b-983c-289ec8781e0a, NO_LEVELTEMPLATE_TRANSFER_577229d7-a806-40c9-81fc-3e843d1955c0);

PROC
PROC_LOW_IronThrone_CleanUpAfterIRN()
AND
DB_GlobalFlag(LOW_BellyOfTheBeast_State_PlayersWentToIronThroneWithBeastmaster_61dd108a-9a51-4edc-b070-3da42574d0d9, _, _, _, _)
THEN
ClearTag(S_GLO_Beastmaster_d999308c-8a20-4c31-b9e2-f89ff3ee1cd1, NO_LEVELTEMPLATE_TRANSFER_577229d7-a806-40c9-81fc-3e843d1955c0);

IF
DB_Sees(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_IRN_PrisonerGroup(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 <= 8
AND
DB_LOW_BellyOfTheBeast_WaveservantAttackers(_Var2, _, _Var1, _Var1, _Var1)
AND
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("LOW_IronThrone_PrisonerCommentOnDeadWaveservant", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(LOW_BellyOfTheBeast_AD_HostageReactsToWaveservantsBattle_028e9511-22d1-20d4-0c2b-800cb0cd0a82, _Var1);

PROC
PROC_LOW_IronThrone_CheckRemainingHostages()
AND NOT
DB_LOW_IronThrone_HostagesInSubmersible(_, _, _, _, _)
THEN
PROC_LOW_IronThrone_AllHostagesLeftSubmersible();

IF
EntityEvent(_, "LOW_IronThrone_AllPlayersLeftBasement", _, _, _)
AND
QRY_OnlyOnce("LOW_IronThrone_HostagesRescued", _, _, _, _)
THEN
SetFlag(IRN_IronThrone_State_BasementFinished_febdf850-3d7a-45f7-b822-d713232d166d);
PROC_State_Progress(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "Finished");

PROC
PROC_State_Changed(S_GLO_IronThrone_StateProgressHelper_954459bd-8fc3-4c16-8224-0343cacb1a01, "IRN_IronThrone", "Finished", (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_IRN_PrisonerGroup(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
_Var1 < 9
AND NOT
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var2, 0);
SetFlag(IRN_IronThrone_State_IndividualPrisonerLeftBasement_32a71388-a09f-4624-9764-7cb05a8cf96a, _Var2);

PROC
PROC_LOW_IronThrone_AllHostagesLeftSubmersible()
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ObjectTimerLaunch(_Var1, "LOW_IronThrone_SpecialHostageLeave", 2000, 1);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "LOW_IronThrone_SpecialHostageLeave", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 1, _Var1, _Var1)
AND NOT
DB_Defeated(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, S_LOW_DockWarehouse_ReturnFromIronThronePos_d1a59a82-8b4b-4f0a-a382-14a997888333, "", 0, 0, 0, 0, 1);
PROC_CharacterMoveTo(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, TeleportTrigger_ToWarehouse_001_785189c1-e595-402c-aac7-22a07ed157f4, "Walk", "IRN_RavengardLeft");

IF
EntityEvent((GUIDSTRING)_Var1, "IRN_RavengardLeft", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
RemoveStatus(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, "IRN_PRISONER_RAVENGARD", NULL_00000000-0000-0000-0000-000000000000);
CharacterGiveEquipmentSet(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, "EQP_GLO_Longsword_Shield_Plate_Ravengard");
PROC_LOW_IronThrone_MoveRavengardToCamp();

IF
FlagSet(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, _, (INTEGER)_, (INTEGER)_)
THEN
QuestUpdate("LOW_SaveOmeluum", "OmeluumEscapedIRN");

IF
DialogEnded(IRN_IronThrone_Omeluum_26f2208c-177d-b640-fb5a-0594b84f305a, _, _, _, _)
AND
QRY_OnlyOnce("IRN_IronThrone_OmeluumLeftForLodge", _, _, _, _)
THEN
UseSpell(S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, "Shout_UND_SocietyOfBrilliance_Teleportation", S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53);

IF
EntityEvent(_, "LOW_IronTrone_ReturnedToBasement", _, _, _)
AND
GetFlag(IRN_IronThrone_State_IndividualPrisonerEscaped_a09945e7-6436-40e7-908e-22a699ef296e, S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, 1, _, _)
AND NOT
DB_Defeated(S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, _, _, _, _)
AND
QRY_OnlyOnce("IRN_IronThrone_OmeluumLeftForLodge", _, _, _, _)
THEN
UseSpell(S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, "Shout_UND_SocietyOfBrilliance_Teleportation", S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53);

IF
CastedSpell(S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, "Shout_UND_SocietyOfBrilliance_Teleportation", _, _, _)
AND
DB_GlobalFlag(VISITEDREGION_BGO_Main_A_40f06537-814f-4796-b012-5ffaa648a8d9, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_TheLodge_State_OmeluumLeftForLodge_edd32708-619c-4528-9a3a-e695f67f6186, _, _, _, _)
THEN
DB_LOW_OmeluumIsTeleportingAwayFromSubmarine(1);

IF
CastedSpell((GUIDSTRING)_Var1, "Shout_UND_SocietyOfBrilliance_Teleportation", _, _, _)
AND
DB_GlobalFlag(VISITEDREGION_BGO_Main_A_40f06537-814f-4796-b012-5ffaa648a8d9, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_LOW_OmeluumIsTeleportingAwayFromSubmarine(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_LOW_Act1_SocietyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(LOW_TheLodge_State_BlurgOrOmeluumTeleportedAway_77f1763f-2aa5-44be-a108-f2ad59a12873);

IF
WentOnStage(S_GLO_SocietyOfBrilliance_MindFlayer_1f9937ef-9207-4db6-a833-e4083d571f53, 0, _, _, _)
AND
DB_LOW_OmeluumIsTeleportingAwayFromSubmarine(1, _, _, _, _)
THEN
NOT DB_LOW_OmeluumIsTeleportingAwayFromSubmarine(1);
SetFlag(LOW_TheLodge_State_OmeluumLeftForLodge_edd32708-619c-4528-9a3a-e695f67f6186);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act3b"
