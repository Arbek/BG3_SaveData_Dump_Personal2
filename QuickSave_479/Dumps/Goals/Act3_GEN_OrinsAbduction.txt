Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_CampNight(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, 3990);
DB_CampNight_Camp(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, "SLUMS");
DB_CampNight_Camp(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, "ELFSONG");
DB_CampNight_Camp(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, "FARM");
DB_CampNight_Requirement(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75);
DB_CampNight_ExclusiveMoment(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92);
DB_CampNight_CFM(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, NULL_00000000-0000-0000-0000-000000000000);
DB_CampfireMoment_FixedSpeakers(NULL_00000000-0000-0000-0000-000000000000, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec);
DB_GEN_OrinsAbduction_CFM_Orin(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_GEN_OrinsAbduction_CFM_Orin(NULL_00000000-0000-0000-0000-000000000000);
DB_GEN_OrinsAbduction_ChosenCharFlag(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_GEN_OrinsAbduction_ChosenCharFlag(NULL_00000000-0000-0000-0000-000000000000);
DB_GEN_OrinsAbduction_AbducteeList("Laezel", S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, CAMP_OrinAbduction_CFM_Laezel_23ce00ef-2178-950c-42bf-30f4e6cba0d9);
DB_GEN_OrinsAbduction_AbducteeList("Halsin", S_GLO_Halsin_7628bc0e-52b8-42a7-856a-13a6fd413323, CAMP_OrinAbduction_CFM_Halsin_35d0f127-5932-65a5-241c-d97b2d6a7ebc);
DB_GEN_OrinsAbduction_AbducteeList("Gale", S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, CAMP_OrinAbduction_CFM_Gale_9b6d59ec-165e-5bf1-7219-0ef7b02e3c63);
DB_GEN_OrinsAbduction_AbducteeList("Minthara", S_GOB_DrowCommander_25721313-0c15-4935-8176-9f134385451b, CAMP_OrinAbduction_CFM_Minthara_c5574476-5235-147f-d7e7-b021abfd0891);
DB_GEN_OrinsAbduction_AbducteeList("Yenna", S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, CAMP_OrinAbduction_CFM_Yenna_eee61c9f-3d9c-86bf-06bf-d0eec00df54d);
DB_GEN_OrinsAbduction_OrinAbductionPosList("SLUMS", S_LOW_BhaalTemple_OrinAbduction_TriggerPos_8443fa4f-37b7-43ea-b99d-331d85ede8c5);
DB_GEN_OrinsAbduction_OrinAbductionPosList("ELFSONG", S_LOW_BhaalTemple_OrinAbduction_Elfsong_TriggerPos_332e7105-d4e3-40ed-a45f-32f223d40d34);
DB_GEN_OrinsAbduction_OrinAbductionPosList("FARM", S_WYR_OrinsImpersonation_OrinAbduction_PosTrigger_5547f7f9-860f-4d5f-a523-e75553c2a5b4);
DB_GEN_OrinsAbduction_AbductionCamp("SLUMS", GLO_OrinsAbduction_State_AbductionOccured_Slums_b63ceee7-ac3f-4d8e-a696-88a1996d5d69);
DB_GEN_OrinsAbduction_AbductionCamp("ELFSONG", GLO_OrinsAbduction_State_AbductionOccured_Elfsong_f815b894-0a28-40a9-aba7-b59418311eaa);
DB_GEN_OrinsAbduction_AbductionCamp("FARM", GLO_OrinsAbduction_State_AbductionOccured_Farm_2a32cb87-e14b-49d3-ad6b-88016d8bc137);
DB_GEN_OrinsAbduction_MintharaAbduction("Wyll", S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Wyll_15dc3800-05ec-45e6-897e-ee66aca70b1f);
DB_GEN_OrinsAbduction_MintharaAbduction("Karlach", S_Player_Karlach_2c76687d-93a2-477b-8b18-8a14b549304c, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Karlach_f278e183-10af-45cf-958c-f24200138f5c);
DB_GEN_OrinsAbduction_MintharaAbduction("Jaheira", S_Player_Jaheira_91b6b200-7d00-4d62-8dc9-99e8339dfa1a, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Jaheira_9e4847ab-966f-4d07-8398-1ec886ee53d0);
DB_GEN_OrinsAbduction_MintharaAbduction("Isobel", S_GLO_Isobel_263bfbfc-6160-46f4-a9e1-1089cdb5c211, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Isobel_80ae2d20-30de-46ae-a5f6-cc22f7dd55c3);
DB_GEN_OrinsAbduction_MintharaAbduction("Gale", S_Player_Gale_ad9af97d-75da-406a-ae13-7071c563f604, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Gale_a7e0ca7b-473c-453c-a4a8-234fdcbf07d0);
DB_GEN_OrinsAbduction_MintharaAbduction("Astarion", S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Astarion_88ca535b-adc4-436d-89f1-8beb1e8295ef);
DB_GEN_OrinsAbduction_MintharaAbduction("Shadowheart", S_Player_ShadowHeart_3ed74f06-3c60-42dc-83f6-f034cb47c679, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Shadowheart_8a6f7e4d-3641-475a-b6ad-d4d7a746633f);
DB_GEN_OrinsAbduction_MintharaAbduction("Laezel", S_Player_Laezel_58a69333-40bf-8358-1d17-fff240d7fb12, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Laezel_d01891a9-d41b-4822-9a6a-272c3aedbaa1);
DB_GEN_OrinsAbduction_MintharaAbduction("Nightsong", S_GLO_Nightsong_6c55edb0-901b-4ba4-b9e8-3475a8392d9b, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Nightsong_44d09961-71ed-47d7-938b-d2c6c6608146);
DB_GEN_OrinsAbduction_MintharaAbduction("Minsc", S_Player_Minsc_0de603c5-42e2-4811-9dad-f652de080eba, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Minsc_d7821983-3c6e-4c1a-90ac-bb0109d62162);
DB_GEN_OrinsAbduction_MintharaAbduction("Ravengard", S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Ravengard_7207cf7d-85cf-43ed-85af-f4177d8dfea5);
DB_GEN_OrinsAbduction_MintharaAbduction("Yenna", S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, LOW_BhaalTemple_MintharaAbduction_IsAvailable_Yenna_0f3da579-792b-4df1-b9e7-8653726a0090);
DB_GEN_OrinsAbduction_DummyAsylumPos("BGO_Main_A", S_GLO_OrinsImpersonation_OrinDummy_HomePos_2eb2b9f8-45ab-47f9-9472-a80e13a7b87c);
DB_GEN_OrinsAbduction_DummyAsylumPos("CTY_Main_A", S_GLO_BhaalTemple_OrinDummy_HomePos_2e6a713a-19f4-45cf-aaa1-422d4e7d51d5);
DB_GEN_OrinsAbduction_ChosenCharRelationship(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_GEN_OrinsAbduction_ChosenCharRelationship(NULL_00000000-0000-0000-0000-000000000000);
DB_GEN_OrinsAbduction_ChosenChar(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_GEN_OrinsAbduction_ChosenChar(NULL_00000000-0000-0000-0000-000000000000);
DB_GEN_OrinsAbduction_PartneredList("Laezel", ORI_State_PartneredWithLaezel_d169a786-6e56-4f0d-a2eb-33c48d8d1160);
DB_GEN_OrinsAbduction_PartneredList("Halsin", ORI_State_PartneredWithHalsin_7b53fe60-bb16-48a9-ae5c-9bce1dfac1a9);
DB_GEN_OrinsAbduction_PartneredList("Halsin", ORI_State_PartneredWithHalsinSecondary_6af0be74-d032-4a20-876a-11bab5f86db2);
DB_GEN_OrinsAbduction_PartneredList("Gale", ORI_State_PartneredWithGale_e008e20d-d642-42ed-9008-297b6273aa21);
DB_GEN_OrinsAbduction_PartneredList("Minthara", ORI_State_PartneredWithMinthara_39ac48fa-b440-47e6-a436-6dc9b10058d8);
DB_GEN_OrinsAbduction_AbducteeFlagList("Laezel", LOW_BhaalTemple_State_WasAbductedLaezel_2f0ad86d-e4c7-47f9-bb8b-bb7b8f3ebc40);
DB_GEN_OrinsAbduction_AbducteeFlagList("Halsin", LOW_BhaalTemple_State_WasAbductedHalsin_0265b4a7-cf01-4543-ac34-2a76da85d674);
DB_GEN_OrinsAbduction_AbducteeFlagList("Gale", LOW_BhaalTemple_State_WasAbductedGale_74d236e1-eff9-4b73-a6e7-4e6402d5c84c);
DB_GEN_OrinsAbduction_AbducteeFlagList("Minthara", LOW_BhaalTemple_State_WasAbductedMinthara_d1e51161-8462-4333-8676-74b4d0384054);
DB_GEN_OrinsAbduction_AbducteeFlagList("Yenna", LOW_BhaalTemple_State_WasAbductedYenna_ff8e1e49-dcb0-4671-a747-dce5c704207b);
DB_GEN_OrinsAbduction_AbducteeGender("Laezel", LOW_BhaalTemple_State_AbducteeIsFemale_844c25f6-51f5-a806-8e41-9a97942a6e0a);
DB_GEN_OrinsAbduction_AbducteeGender("Halsin", LOW_BhaalTemple_State_AbducteeIsMale_2adc8613-1948-93da-82eb-e31f440275e2);
DB_GEN_OrinsAbduction_AbducteeGender("Gale", LOW_BhaalTemple_State_AbducteeIsMale_2adc8613-1948-93da-82eb-e31f440275e2);
DB_GEN_OrinsAbduction_AbducteeGender("Minthara", LOW_BhaalTemple_State_AbducteeIsFemale_844c25f6-51f5-a806-8e41-9a97942a6e0a);
DB_GEN_OrinsAbduction_AbducteeGender("Yenna", LOW_BhaalTemple_State_AbducteeIsFemale_844c25f6-51f5-a806-8e41-9a97942a6e0a);
DB_Origin_TemporaryLeaveReason("LOW_BhaalTemple_Abducted");
DB_GEN_OrinsAbduction_OrinTransformRule_Common(WYR_OrinsImpersonation_79876d09-46c3-4025-96ce-db6969f249f0);
DB_GEN_OrinsAbduction_OrinTransformRule_DarkUrge(LOW_Orin_DarkUrge_e952d634-682a-4c12-b8da-e8a8fad39048);
DB_GEN_OrinsAbduction_OrinTransformRule_Gortash(DISGUISE_ceccc4eb-d774-4cd5-9147-12322b81b763);
DB_GLO_CharacterCorpseDialog(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, LOW_BhaalTemple_PostLaezelAbduction_Yenna_Dead_3cf0d490-7e9d-6cb5-2943-a6a6b5f4b837);
DB_GLO_Orin_KnowsLocationFlags(LOW_BhaalTemple_Knows_TempleIsBhaalTemple_b1525a1c-829e-4c05-bc39-c161e30ac235);
DB_GLO_Orin_KnowsLocationFlags(LOW_MurderTribunal_Knows_BhaalTempleLocation_0a45cd29-8ae1-43bb-9ef6-b95af1dc6e55);
DB_GLO_Orin_KnowsLocationFlags(LOW_BhaalTemple_State_SeenBhaalAltar_9a6db3ce-ddb0-4288-b419-a521b6a63004);
PROC_GEN_OrinsAbduction_Orin_Init();
PROC_GEN_OrinsAbduction_InCampAbductions_Disable();
PROC_GEN_OrinsAbduction_InWorldAbductions_Init();
PROC_GEN_OrinsAbduction_InWorldImpersonations_Init();

KBSECTION
PROC
PROC_GEN_OrinsAbduction_Orin_SaveTitle()
AND
ObjectGetTitle(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
AND
ResolveTranslatedString(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_Orin_SavedTitle(_Var1, _Var2);

PROC
PROC_GEN_OrinsAbduction_Orin_RestoreTitle()
AND
DB_GEN_OrinsAbduction_Orin_SavedTitle(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
ObjectSetTitle(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2);

PROC
PROC_GEN_OrinsAbduction_Orin_ClearTitle()
THEN
TimerCancel("GEN_OrinsAbduction_Delay_ClearTitle_Hack");
TimerLaunch("GEN_OrinsAbduction_Delay_ClearTitle_Hack", 500);

IF
TimerFinished("GEN_OrinsAbduction_Delay_ClearTitle_Hack", _, _, _, _)
THEN
ObjectSetTitle(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "");

IF
EntityEvent(_, "GEN_OrinsAbduction_OrinTeleported", (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_GEN_OrinsAbduction_Orin_ClearTitle();

IF
SavegameLoaded()
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_Orin_ClearTitle();

IF
FlagSet((FLAG)_Var1, _, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_GLO_Orin_KnowsLocationFlags(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(GLO_Orin_Knows_OrinLocation_72767edb-8b64-4337-5159-7535315cee0f, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(GLO_Orin_Knows_OrinLocation_72767edb-8b64-4337-5159-7535315cee0f);

PROC
PROC_GEN_OrinsAbduction_Orin_Init()
THEN
DB_PermaDefeatedEvent(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, GLO_Orin_State_PermaDefeated_c716e4d9-e6ed-445c-a710-ee4d91c67298);
SetOnStage(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 1);
CopyCharacterEquipment(S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
SetImmortal(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 1);
DB_IgnoreMutingStatussesDialog(WYR_OrinsImpersonation_LINE_OrinAttacked_54169b5d-e726-4f5f-6211-f583081f26ff);
DB_DialogBlockAttackButton(WYR_OrinsImpersonation_LINE_OrinAttacked_54169b5d-e726-4f5f-6211-f583081f26ff);
DB_DialogBlockTradeButton(WYR_OrinsImpersonation_LINE_OrinAttacked_54169b5d-e726-4f5f-6211-f583081f26ff);
DB_GLO_DefeatCounter(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "LOW_BhaalTemple_CombatWin_Counter");
SetFaction(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, ACT3_LOW_BhaalTemple_Cultists_d0c6137f-2da9-480a-80ae-8325ea8ebd0e);
PROC_GEN_OrinsAbduction_Orin_SaveTitle();

QRY
QRY_GEN_OrinsAbduction_HasDarkUrgeChar()
AND
DB_GlobalFlag(GLO_Origin_PartOfTheTeam_DarkUrge_fbf4c4a8-99bb-4e62-a78c-cc9c115bd938, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_GEN_OrinsAbduction_GiveOrinRing()
AND
IsInInventoryOf(S_GLO_Orin_TeleportRing_b9ed80b2-cedd-4008-a0d9-7ccf016a7bbf, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0, _, _)
THEN
Equip(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_Orin_TeleportRing_b9ed80b2-cedd-4008-a0d9-7ccf016a7bbf);

PROC
PROC_GEN_OrinsAbduction_GiveDagger_WithoutNetherstone((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsInInventoryOf(S_GLO_Orin_Bhaalist_Dagger_51c312d5-ce5e-4f8c-a5ad-edc2beced3e6, _Var1, 0, _Var1, _Var1)
THEN
ToInventory(S_GLO_Orin_Bhaalist_Dagger_51c312d5-ce5e-4f8c-a5ad-edc2beced3e6, _Var1, 1, 0, 1);

PROC
PROC_GEN_OrinsAbduction_GiveDagger_WithNetherstone((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsInInventoryOf(S_GLO_Orin_Bhaalist_Dagger_Netherstone_7051fd5c-d777-457e-9aaf-e007b4cbbb55, _Var1, 0, _Var1, _Var1)
AND NOT
DB_GEN_OrinsAbduction_GaveDagger(1, _Var1, _Var1, _Var1, _Var1)
THEN
ToInventory(S_GLO_Orin_Bhaalist_Dagger_Netherstone_7051fd5c-d777-457e-9aaf-e007b4cbbb55, _Var1, 1, 0, 0);
DB_GEN_OrinsAbduction_GaveDagger(1);

PROC
PROC_GEN_OrinsAbduction_GiveStone((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsInInventoryOf(S_LOW_CrownController_Orin_360b0dfd-8e0b-48d2-a079-fcf68c104d6b, _Var1, 0, _Var1, _Var1)
THEN
ToInventory(S_LOW_CrownController_Orin_360b0dfd-8e0b-48d2-a079-fcf68c104d6b, _Var1, 1, 1, 1);

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "GEN_OrinsAbduction_Scene", "Attacked", _)
AND
QRY_GEN_OrinsAbduction_PlayerTeam(_Var2, _, _, _, _)
AND
DB_ActiveLevel("BGO_Main_A", _, _, _, _)
THEN
DB_GEN_OrinsAbduction_OrinAttacker(_Var2);
PROC_GEN_OrinsAbduction_OrinTransformsBack();
PROC_GEN_OrinsAbduction_OrinAttacked_Setup();
PROC_WYR_OrinsImpersonation_Remove_DyingEffect();
PROC_WYR_OrinsImpersonation_Remove_FlamingFistFaction();

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "GEN_OrinsAbduction_Scene", (STRING)_Var3, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _, _, _, _)
AND
QRY_GEN_OrinsAbduction_PlayerTeam(_Var2, _, _, _, _)
AND
DB_ActiveLevel("CTY_Main_A", _, _, _, _)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InWorld", _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_ClearDB_OrinAttacker();
DB_GEN_OrinsAbduction_OrinAttacker(_Var2);
PROC_GEN_OrinsAbduction_OrinTransformsBack();
PROC_GEN_OrinsAbduction_OrinAttacked_Setup();
PROC_GlobalSetFlagAndCache(WYR_OrinsImpersonation_State_OrinAttacked_Undercity_0f699205-494c-41b4-a1cc-8af69b168672);

IF
DialogEnded(WYR_OrinsImpersonation_LINE_OrinAttacked_54169b5d-e726-4f5f-6211-f583081f26ff, _, _, _, _)
AND
DB_ActiveLevel("BGO_Main_A", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinInAttackedDialog(1, _, _, _, _)
THEN
NOT DB_GEN_OrinsAbduction_OrinInAttackedDialog(1);
PROC_WYR_OrinsImpersonation_EndImpersonationByAttack();

IF
DialogEnded(WYR_OrinsImpersonation_LINE_OrinAttacked_54169b5d-e726-4f5f-6211-f583081f26ff, _, _, _, _)
AND
DB_ActiveLevel("CTY_Main_A", _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _, _, _, _)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InWorld", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinInAttackedDialog(1, _, _, _, _)
THEN
NOT DB_GEN_OrinsAbduction_OrinInAttackedDialog(1);
PROC_LOW_BhaalTemple_InWorldAbduction_Completed();

QRY
QRY_CRIME_KeepingAnEyeOut_Block(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_CurrentLevel("BGO_Main_A", _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_CRIME_KeepingAnEyeOut_Block(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_CurrentLevel("CTY_Main_A", _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InWorld", _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "GEN_OrinsAbduction_CampScene", (STRING)_Var3, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _, _, _, _)
AND
QRY_GEN_OrinsAbduction_PlayerTeam(_Var2, _, _, _, _)
AND
DB_ActiveLevel("CTY_Main_A", _, _, _, _)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InCamp", _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_InCampAbduction_Completed();
PROC_SceneOver("GEN_OrinsAbduction_CampScene");

QRY
QRY_CRIME_KeepingAnEyeOut_Block(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_CurrentLevel("CTY_Main_A", _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InCamp", _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_GEN_OrinsAbduction_OrinAttacked_Setup()
AND
DB_ActiveLevel("BGO_Main_A", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinInAttackedDialog(1, _, _, _, _)
THEN
PROC_ForceStopDialog(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

PROC
PROC_GEN_OrinsAbduction_OrinAttacked_Setup()
AND
DB_ActiveLevel("BGO_Main_A", _, _, _, _)
AND NOT
DB_GEN_OrinsAbduction_OrinInAttackedDialog(1, _, _, _, _)
THEN
PROC_ForceStopDialog(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
DB_GEN_OrinsAbduction_WaitForOrinAttackedDialog(1);

IF
DB_GEN_OrinsAbduction_WaitForOrinAttackedDialog(1, _, _, _, _)
AND NOT
DB_CantTalk(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinAttacker(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GEN_OrinsAbduction_WaitForOrinAttackedDialog(1);
PROC_GEN_OrinsAbduction_OrinAttacked_StartDialog(_Var1);

PROC
PROC_GEN_OrinsAbduction_OrinAttacked_StartDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ActiveLevel("BGO_Main_A", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialogCustom(WYR_OrinsImpersonation_LINE_OrinAttacked_54169b5d-e726-4f5f-6211-f583081f26ff, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, 1, 1, 0, 0, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_OrinInAttackedDialog(1);

PROC
PROC_GEN_OrinsAbduction_OrinAttacked_Setup()
AND
DB_ActiveLevel("CTY_Main_A", _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _, _, _, _)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InWorld", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinInAttackedDialog(1, _, _, _, _)
THEN
PROC_ForceStopDialog(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

PROC
PROC_GEN_OrinsAbduction_OrinAttacked_Setup()
AND
DB_ActiveLevel("CTY_Main_A", _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _, _, _, _)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InWorld", _, _, _, _)
AND NOT
DB_GEN_OrinsAbduction_OrinInAttackedDialog(1, _, _, _, _)
THEN
PROC_ForceStopDialog(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
DB_GEN_OrinsAbduction_WaitForOrinAttackedDialog(1);

PROC
PROC_GEN_OrinsAbduction_OrinAttacked_StartDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ActiveLevel("CTY_Main_A", _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(WYR_OrinsImpersonation_LINE_OrinAttacked_54169b5d-e726-4f5f-6211-f583081f26ff, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_OrinInAttackedDialog(1);

QRY
QRY_GEN_OrinsAbduction_PlayerTeam((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartyFollowers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_GEN_OrinsAbduction_PlayerTeam((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
LevelLoaded("BGO_Main_A", _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_SetupDummies();

IF
LevelLoaded("CTY_Main_A", _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_SetupDummies();
PROC_GEN_OrinsAbduction_InCampAbductions_Init();

PROC
PROC_GEN_OrinsAbduction_SetupDummies()
AND NOT
DB_GlobalFlag(GLO_Orin_State_PermaDefeated_c716e4d9-e6ed-445c-a710-ee4d91c67298, _, _, _, _)
AND
DB_CurrentLevel(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_DummyAsylumPos(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
TeleportTo(S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec, _Var2, "", 0, 0, 0, 0, 0);
TeleportTo(S_GLO_BhaalTemple_OrinGortashDummy_9fcd1601-fb36-4435-b6da-a80cee4edb10, _Var2, "", 0, 0, 0, 0, 0);

IF
DB_GlobalFlag(WYR_KillDirectorGortash_Knows_CampCompromised_62f279b8-9f36-4f4a-92d3-edc16cb4d760, _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_InCampAbductions_Init();
PROC_GEN_OrinsAbduction_InWorldAbductions_Init();

IF
DB_GlobalFlag(GLO_Gortash_State_PermaDefeated_74dd56ff-7e00-42a6-a0f3-0d122f364769, _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_InCampAbductions_Init();
PROC_GEN_OrinsAbduction_InWorldAbductions_Init();

PROC
PROC_GEN_OrinsAbduction_InWorldImpersonations_Init()
THEN
PROC_GlobalSetFlagAndCache(WYR_OrinsImpersonation_State_InWorldImpersonationsEnabled_4f3afc61-a52f-44ec-8308-3f81a17854d9);

PROC
PROC_GEN_OrinsAbduction_InWorldImpersonations_Disable()
THEN
PROC_GlobalClearFlagAndCache(WYR_OrinsImpersonation_State_InWorldImpersonationsEnabled_4f3afc61-a52f-44ec-8308-3f81a17854d9);

PROC
PROC_GEN_OrinsAbduction_InWorldAbductions_Init()
AND NOT
DB_GlobalFlag(GLO_OrinsAbduction_State_AbductionOccured_98dda46d-871c-4807-aced-5dc3ff5f4c2d, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_InWorldAbductionEnabled_efddef72-84c2-4a44-b5a4-5d82ce887010);
PROC_LOW_BhaalTemple_InWorldAbductionTriggers_Init();

PROC
PROC_GEN_OrinsAbduction_InWorldAbductions_Disable()
THEN
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_InWorldAbductionEnabled_efddef72-84c2-4a44-b5a4-5d82ce887010);

PROC
PROC_GEN_OrinsAbduction_InCampAbductions_Init()
AND NOT
DB_GlobalFlag(GLO_OrinsAbduction_State_AbductionOccured_98dda46d-871c-4807-aced-5dc3ff5f4c2d, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75);

PROC
PROC_GEN_OrinsAbduction_InCampAbductions_Disable()
THEN
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75);

QRY
QRY_CampNight_HasEveningReservedSpeakerProblem((FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_Camp_QueuedNight(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, _Var1, _Var1, _Var1, _Var1)
AND
DB_CampNight_CRD(_Var1, _Var2, _, _, _Var1)
AND
DB_GEN_OrinsAbduction_AbducteeList(_, _Var2, _, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_CampNight_HasSleepReservedSpeakerProblem((FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1)
AND NOT
DB_CampNight_OnlyAllowSleepOrMorningMoments(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Camp_QueuedNight(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, _Var1, _Var1, _Var1, _Var1)
AND
DB_CampNight_SleepIndividualDialogs(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_AbducteeList(_, _Var2, _, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_CampNight_StartSelected()
AND
DB_Camp_QueuedNight(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, _, _, _, _)
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75, _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_ClearDB_ChosenName();
PROC_GEN_OrinsAbduction_FindBestAbductee();
PROC_GEN_OrinsAbduction_ClearDBs();
PROC_GEN_OrinsAbduction_SetupBestAbductee();
PROC_GEN_OrinsAbduction_SetupCampReq();
PROC_GEN_OrinsAbduction_OrinAbductionSetup();
PROC_GEN_OrinsAbduction_AbductCompanion();

PROC
PROC_GEN_OrinsAbduction_FindBestAbductee()
AND
DB_GEN_OrinsAbduction_AbducteeList(_Var1, _Var2, _, _Var1, _Var1)
AND NOT
DB_GEN_OrinsAbduction_ChosenName(_, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GEN_OrinsAbduction_CheckBasicReq(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GEN_OrinsAbduction_CheckValidFriend()
THEN
DB_NOOP(1);

QRY
QRY_GEN_OrinsAbduction_CheckRomance((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
_Var1 != "Minthara"
AND
DB_GEN_OrinsAbduction_PartneredList(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(_Var2, _Var3, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_GEN_OrinsAbduction_CheckValidFriend()
AND
DB_GEN_OrinsAbduction_AbducteeList(_Var1, _Var2, _, _Var1, _Var1)
AND NOT
DB_GEN_OrinsAbduction_ChosenName(_, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GEN_OrinsAbduction_CheckFriendConditions(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_ChosenName(_Var1);

QRY
QRY_GEN_OrinsAbduction_CheckFriendConditions((STRING)_Var1, (GUIDSTRING)_Var2, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
_Var1 != "Yenna"
AND
QRY_GEN_OrinsAbduction_CheckBasicReq(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_GEN_OrinsAbduction_CheckRomance(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship();
DB_GEN_OrinsAbduction_ChosenCharRelationship(LOW_BhaalTemple_State_AbducteeIsFriend_dd552cb0-4429-4bc9-849c-85fb611124bd);

QRY
QRY_GEN_OrinsAbduction_CheckFriendConditions("Yenna", _, (CHARACTER)_, (CHARACTER)_, (CHARACTER)_)
THEN
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship();
DB_GEN_OrinsAbduction_ChosenCharRelationship(LOW_BhaalTemple_State_AbducteeIsYenna_fa8d1e59-26d5-4ad6-9706-1cb15a5cdb0a);

QRY
QRY_GEN_OrinsAbduction_CheckBasicReq((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_GEN_OrinsAbduction_CheckBasicReq(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _, _, _, _)
AND NOT
DB_GEN_OrinsAbduction_CheckingMintharaVictim(1, _, _, _, _)
THEN
DB_InCamp(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);

QRY
QRY_GEN_OrinsAbduction_CheckBasicReq(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _, _, _, _)
AND
DB_GEN_OrinsAbduction_CheckingMintharaVictim(1, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_GEN_OrinsAbduction_SetupBestAbductee()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GEN_OrinsAbduction_SetAbducteeDBs(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_GEN_OrinsAbduction_SetupBestAbductee()
AND
DB_GEN_OrinsAbduction_ChosenName("Yenna", _, _, _, _)
THEN
PROC_ORI_SetupCamp(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, 1);
NOT DB_YennaDismissedFromCamp(1);

QRY
QRY_GEN_OrinsAbduction_SetAbducteeDBs((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_GEN_OrinsAbduction_AbducteeList(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_AbducteeFlagList(_Var1, _Var4, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_AbducteeGender(_Var1, _Var5, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_ChosenChar(_Var2);
DB_GEN_OrinsAbduction_CFM_Orin(_Var3);
DB_GEN_OrinsAbduction_ChosenCharFlag(_Var4);
PROC_GlobalSetFlagAndCache(_Var4);
PROC_GlobalSetFlagAndCache(_Var5);

PROC
PROC_GEN_OrinsAbduction_SetupCampReq()
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_InCamp(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_RemoveAllDialogEntriesForSpeaker(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
NOT DB_CampNight_CFM(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, NULL_00000000-0000-0000-0000-000000000000);
DB_CampNight_CFM(NIGHT_BhaalTemple_Abduction_3b3655ad-e3a2-45da-9030-ffe34d28ea92, _Var1);
PROC_GEN_OrinsAbduction_Setup_CampTriggerPos();

PROC
PROC_GEN_OrinsAbduction_SetupCampReq()
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Origins(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_GetBestAvatarForCompanion(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
DB_CampfireMoment_FixedPlayer(_Var1, _Var3);

PROC
PROC_GEN_OrinsAbduction_SetupCampReq()
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName("Laezel", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_Temple_KnockedOut_Remove(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);
DB_InCamp(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);

PROC
PROC_StartDialog_AddExtraSpeakers((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName("Laezel", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var2, S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, 4);

PROC
PROC_GEN_OrinsAbduction_SetupCampReq()
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName("Halsin", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_ChooseHalsinVictim();

PROC
PROC_StartDialog_AddExtraSpeakers((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim("Yenna", _Var3, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var2, _Var3, 5);

PROC
PROC_StartDialog_AddExtraSpeakers((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim("Scratch", _Var3, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActorAt(_Var2, _Var3, 4);

PROC
PROC_GEN_OrinsAbduction_SetupCampReq()
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName("Minthara", _Var1, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_CheckingMintharaVictim(1);
PROC_GEN_OrinsAbduction_SetAvailableMintharaVictim();
NOT DB_GEN_OrinsAbduction_CheckingMintharaVictim(1);

PROC
PROC_GEN_OrinsAbduction_SetupCampReq()
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_CampfireMoment_FixedSpeakers(NULL_00000000-0000-0000-0000-000000000000, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec);
DB_CampfireMoment_FixedSpeakers(_Var1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec);

PROC
PROC_GEN_OrinsAbduction_Setup_CampTriggerPos()
AND
DB_ActiveCamp("SLUMS", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinAbductionPosList("SLUMS", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_ClearDB_CurCampTrigPos();
DB_GEN_OrinsAbduction_CurCampTrigPos(_Var1);

PROC
PROC_GEN_OrinsAbduction_Setup_CampTriggerPos()
AND
DB_ActiveCamp("ELFSONG", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinAbductionPosList("ELFSONG", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_ClearDB_CurCampTrigPos();
DB_GEN_OrinsAbduction_CurCampTrigPos(_Var1);

PROC
PROC_GEN_OrinsAbduction_Setup_CampTriggerPos()
AND
DB_ActiveCamp("FARM", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinAbductionPosList("FARM", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_ClearDB_CurCampTrigPos();
DB_GEN_OrinsAbduction_CurCampTrigPos(_Var1);

PROC
PROC_GEN_OrinsAbduction_OrinAbductionSetup()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_CurCampTrigPos(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_OrinTransformRule_Common(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LOW_BhaalTemple_OrinSpotting_Stopped();
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_Event_TransformToOrin_9280b884-9f8e-41f4-bd49-dbfcb2827fe5);
DB_PreventPermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
DB_GEN_OrinsAbduction_IsTransformed(1);
Transform(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2, _Var4);
CopyCharacterEquipment(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2);
TeleportTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var3, "GEN_OrinsAbduction_OrinTeleported", 0, 0, 0, 0, 0);
DB_SceneManager(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "GEN_OrinsAbduction_CampScene");

PROC
PROC_GEN_OrinsAbduction_OrinAbductionSetup()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName("Laezel", _, _, _, _)
AND
DB_GEN_OrinsAbduction_CurCampTrigPos(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _Var1, "", 0, 0, 0, 0, 0);
PROC_GEN_OrinsAbduction_PostCampHostage_Yenna_DialogSetup();

PROC
PROC_GEN_OrinsAbduction_OrinAbductionSetup()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName("Halsin", _, _, _, _)
AND
DB_GEN_OrinsAbduction_CurCampTrigPos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_KnockedOut_Apply(_Var3);
TeleportTo(_Var3, _Var1, "GEN_OrinsAbduction_OrinTeleported", 0, 0, 0, 0, 0);

PROC
PROC_GEN_OrinsAbduction_OrinAbductionSetup()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName("Halsin", _, _, _, _)
AND
DB_GEN_OrinsAbduction_CurCampTrigPos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim("Scratch", _Var2, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(GLO_CourierDog_State_UnavailableForSummon_0fef1fa5-9216-4833-94c1-5fe1da7da7c7);

PROC
PROC_GEN_OrinsAbduction_OrinAbductionSetup()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName("Yenna", _, _, _, _)
AND
DB_GEN_OrinsAbduction_CurCampTrigPos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim("Yenna", _Var2, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_PostCampHostage_Yenna_DialogSetup();

PROC
PROC_GEN_OrinsAbduction_OrinAbductionSetup()
AND
DB_GlobalFlag(LOW_BhaalTemple_State_InCampAbductionEnabled_531257fe-eb47-4058-9992-b1c55e42ad75, _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName("Minthara", _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_BloodiedChar_Apply(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

PROC
PROC_GEN_OrinsAbduction_AbductCompanion()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenCharRelationship(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_ActiveCamp(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_AbductionCamp(_Var4, _Var5, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_SetupVictimInTemple(_Var1, _Var3);
PROC_GlobalSetFlagAndCache(GLO_OrinsAbduction_State_AbductionOccured_98dda46d-871c-4807-aced-5dc3ff5f4c2d);
DB_GEN_OrinsAbduction_AbductionPlace("InCamp");
PROC_GlobalSetFlagAndCache(_Var5);

PROC
PROC_GEN_OrinsAbduction_AbductCompanion()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != "Laezel"
AND
_Var1 != "Halsin"
THEN
PROC_LOW_BhaalTemple_RemoveDefaultVictim();

PROC
PROC_GEN_OrinsAbduction_AbductCompanion()
AND
DB_GEN_OrinsAbduction_ChosenName("Laezel", _, _, _, _)
THEN
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_AbducteeIsYenna_fa8d1e59-26d5-4ad6-9706-1cb15a5cdb0a);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_WasAbductedYenna_ff8e1e49-dcb0-4671-a747-dce5c704207b);
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship();
PROC_GEN_OrinsAbduction_PostCampHostage_Yenna_DialogSetup();
DB_DialogDeath(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);
PROC_GEN_OrinsAbduction_YennaImmortality_Remove();

PROC
PROC_GEN_OrinsAbduction_AbductCompanion()
AND
DB_GEN_OrinsAbduction_ChosenName("Halsin", _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim("Yenna", _, _, _, _)
THEN
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_AbducteeIsYenna_fa8d1e59-26d5-4ad6-9706-1cb15a5cdb0a);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_WasAbductedYenna_ff8e1e49-dcb0-4671-a747-dce5c704207b);
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship();
PROC_GEN_OrinsAbduction_PostCampHostage_Yenna_DialogSetup();

PROC
PROC_GEN_OrinsAbduction_AbductCompanion()
AND
DB_GEN_OrinsAbduction_ChosenName("Halsin", _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim("Scratch", _, _, _, _)
THEN
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_AbducteeIsYenna_fa8d1e59-26d5-4ad6-9706-1cb15a5cdb0a);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_WasAbductedYenna_ff8e1e49-dcb0-4671-a747-dce5c704207b);
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship();
PROC_GEN_OrinsAbduction_PostCampHostage_Scratch_DialogSetup();

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_InCamp(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_Event_TransformToGortash_aca677a0-c532-44df-ac77-3156f0c06925);
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_Event_TransformToOrin_9280b884-9f8e-41f4-bd49-dbfcb2827fe5);
PROC_GEN_OrinsAbduction_SetupOrinGortash();
DB_DialogBlockAttackButton(LOW_BhaalTemple_InWorldAbduction_Nested_a1504daf-2fb7-7cc7-9165-b749c2bcd115);
PROC_GEN_OrinsAbduction_NestedDialog_Start(_Var2);

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName("Laezel", _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_YennaImmortality_Reset();

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenName("Halsin", _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim("Scratch", _Var3, _Var1, _Var1, _Var1)
THEN
PROC_GlobalClearFlagAndCache(GLO_CourierDog_State_UnavailableForSummon_0fef1fa5-9216-4833-94c1-5fe1da7da7c7);

PROC
PROC_GEN_OrinsAbduction_NestedDialog_Start((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DialogPlayers(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
_Var3 != 1
THEN
DB_GEN_OrinsAbduction_NestedParentListeners(_Var2);

PROC
PROC_GEN_OrinsAbduction_NestedDialog_Start((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DialogPlayers(_Var1, _Var2, 1, _Var1, _Var1)
AND NOT
QRY_StartDialog(LOW_BhaalTemple_InWorldAbduction_Nested_a1504daf-2fb7-7cc7-9165-b749c2bcd115, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_BhaalTemple_OrinGortashDummy_9fcd1601-fb36-4435-b6da-a80cee4edb10, _Var2, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_StartDialog_AddExtraSpeakers(LOW_BhaalTemple_InWorldAbduction_Nested_a1504daf-2fb7-7cc7-9165-b749c2bcd115, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_GEN_OrinsAbduction_NestedParentListeners(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddListeningActor(_Var1, _Var2);
NOT DB_GEN_OrinsAbduction_NestedParentListeners(_Var2);

QRY
QRY_Inclusion_BlockCompanionInclusion((GUIDSTRING)_Var1, LOW_BhaalTemple_InWorldAbduction_Nested_a1504daf-2fb7-7cc7-9165-b749c2bcd115, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_NOOP(1);

IF
DialogEnded(LOW_BhaalTemple_InWorldAbduction_Nested_a1504daf-2fb7-7cc7-9165-b749c2bcd115, _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _, _, _, _)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InCamp", _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_InCampAbduction_Completed();

PROC
PROC_GEN_OrinsAbduction_InCampAbduction_Completed()
THEN
PROC_GEN_OrinsAbduction_CompanionLeaves();
PROC_GEN_OrinsAbduction_WakeUpCampAbductee();
PROC_GEN_OrinsAbduction_DisableAllImpersonations();
PROC_GEN_OrinsAbduction_OrinTeleportOut();
PROC_GEN_OrinsMessages_Setup();

PROC
PROC_GEN_OrinsAbduction_WakeUpCampAbductee()
AND
DB_GEN_OrinsAbduction_AbductionPlace("InCamp", _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenName("Halsin", _, _, _, _)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_GEN_OrinsAbduction_KnockedOut_Remove(_Var2);

PROC
PROC_GEN_OrinsAbduction_CompanionLeaves()
AND
DB_GEN_OrinsAbduction_ChosenChar(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _, _, _, _)
THEN
DB_Origins_BlockTransferReasons("LOW_BhaalTemple_Abducted");

PROC
PROC_GEN_OrinsAbduction_CompanionLeaves()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Origins_CompanionLeavePermanently(_Var1, "LOW_BhaalTemple_Abducted");
NOT DB_InCamp(_Var1);
PROC_RemoveAllDialogEntriesForSpeaker(_Var1);
SetHasDialog(_Var1, 0);

PROC
PROC_GEN_OrinsAbduction_SetAvailableMintharaVictim()
AND
DB_GEN_OrinsAbduction_MintharaAbduction(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
QRY_GEN_OrinsAbduction_CheckBasicReq(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(_Var3);

PROC
PROC_GEN_OrinsAbduction_ChooseHalsinVictim()
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_GEN_OrinsAbduction_ChosenHalsinVictim(_Var1, _Var2);

PROC
PROC_GEN_OrinsAbduction_ChooseHalsinVictim()
AND
QRY_GEN_OrinsAbduction_Scratch_IsAvailable()
THEN
DB_GEN_OrinsAbduction_ChosenHalsinVictim("Scratch", S_FOR_Courier_Dog_3059f69c-068d-4e28-8491-55953c027901);
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_HalsinAbduction_IsScratch_7ce47264-9ccc-4874-a2a1-a9faaa11491c);

QRY
QRY_GEN_OrinsAbduction_Scratch_IsAvailable()
AND NOT
DB_PermaDefeated(S_FOR_Courier_Dog_3059f69c-068d-4e28-8491-55953c027901, _, _, _, _)
AND
DB_GlobalFlag(CAMP_Courier_Dog_Moved2Camp_7dcb7732-1c76-463a-bec9-251f30860e6c, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_GEN_OrinsAbduction_ChooseHalsinVictim()
AND NOT
QRY_GEN_OrinsAbduction_Scratch_IsAvailable()
THEN
DB_GEN_OrinsAbduction_ChosenHalsinVictim("Yenna", S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_State_HalsinAbduction_IsYenna_42bbec85-a6a7-4ef7-a006-82ebbd6c58a3);

PROC
PROC_GEN_OrinsAbduction_YennaImmortality_Remove()
THEN
PROC_Children_RemoveNPC(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);

PROC
PROC_GEN_OrinsAbduction_YennaImmortality_Reset()
AND NOT
DB_PermaDefeated(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _, _, _, _)
THEN
DB_Children(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);

PROC
PROC_GEN_OrinsAbduction_SetupVictimInTemple((GUIDSTRING)_Var1, (FLAG)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_SetOnStage(_Var1, 1);
SetVisible(_Var1, 1);
TeleportTo(_Var1, S_GLO_BhaalTemple_AbductionSacrifice_TriggerPos_891c74a5-0ba0-4e09-83d5-f4f4fba200c2, "", 0, 0, 0, 0, 0);
PROC_GEN_OrinsAbduction_Temple_KnockedOut_Apply(_Var1);
PROC_GlobalSetFlagAndCache(_Var2);
DB_GEN_OrinsAbduction_ChosenCharRelationship(_Var2);
DB_DialogDeath(_Var1);

PROC
PROC_GEN_OrinsAbduction_DisableAllImpersonations()
THEN
PROC_GEN_OrinsAbduction_InWorldAbductions_Disable();
PROC_GEN_OrinsAbduction_InCampAbductions_Disable();
PROC_GEN_OrinsAbduction_InWorldImpersonations_Disable();
PROC_WYR_OrinsImpersonation_DisableAllImpersonations();
PROC_LOW_BhaalTemple_InWorldAbductions_Disable();

PROC
PROC_GEN_OrinsAbduction_Temple_KnockedOut_Apply((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_Dialogs(_Var1, LOW_BhaalTemple_ExamineAbductee_7e7974f1-fbaa-a19b-b9bf-73980a0b3503);
DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_ExamineAbductee_7e7974f1-fbaa-a19b-b9bf-73980a0b3503);
DB_GEN_OrinsAbduction_Abductee_ExamineAbducteeDialog("Enabled");
ApplyStatus(_Var1, "WYR_ORINSIMPERSONATION_KNOCKEDOUT", -1, 0, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_SetHasDialogIfChar(_Var1, 1);

PROC
PROC_GEN_OrinsAbduction_Temple_KnockedOut_Remove((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
RemoveStatus(_Var1, "WYR_ORINSIMPERSONATION_KNOCKEDOUT", S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
NOT DB_Dialogs(_Var1, LOW_BhaalTemple_ExamineAbductee_7e7974f1-fbaa-a19b-b9bf-73980a0b3503);
NOT DB_IgnoreMutingStatussesDialog(LOW_BhaalTemple_ExamineAbductee_7e7974f1-fbaa-a19b-b9bf-73980a0b3503);
DB_GEN_OrinsAbduction_Abductee_ExamineAbducteeDialog("Disabled");

PROC
PROC_GEN_OrinsAbduction_KnockedOut_Apply((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
ApplyStatus(_Var1, "WYR_ORINSIMPERSONATION_KNOCKEDOUT", -1, 0, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

PROC
PROC_GEN_OrinsAbduction_KnockedOut_Remove((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
RemoveStatus(_Var1, "WYR_ORINSIMPERSONATION_KNOCKEDOUT", S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

IF
DB_GlobalFlag(LOW_BhaalTemple_State_OrinLaezelKillsYenna_84065b20-4337-4010-87d7-0a62f855298c, _, _, _, _)
THEN
NOT DB_InCamp(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);
NOT DB_DoNotRemoveKnockedOutCharacterOnLongRest(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);
NOT DB_PreventKnockedOutPermaDefeated(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);
PROC_DieImmediate(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, 0, 1);
PROC_GEN_OrinsAbduction_Yenna_Killcat();

PROC
PROC_GEN_OrinsAbduction_Yenna_Killcat()
THEN
PROC_DieImmediate(S_GLO_YennasCat_6583b752-ac47-4ae9-ab9d-d75cebaf9b71, 0, 0);
PROC_SetOnStage(S_GLO_YennasCat_6583b752-ac47-4ae9-ab9d-d75cebaf9b71, 0);

IF
CharacterLootedCharacter((CHARACTER)_Var1, S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("GEN_OrinsAbduction_YennaDeadBody", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(LOW_BhaalTemple_PostLaezelAbduction_PAD_DeadYenna_73203c00-6a82-3542-70d0-9e8d27b565e8, _Var1);

PROC
PROC_GEN_OrinsAbduction_PostCampHostage_Yenna_DialogSetup()
THEN
DB_Dialogs(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, LOW_BhaalTemple_PostLaezelAbduction_Yenna_ffa51503-6973-dd90-ba68-6790def99e6d);
DB_GEN_OrinsAbduction_PostCampHostage_TalkedToYenna("No");

PROC
PROC_GEN_OrinsAbduction_PostCampHostage_Yenna_DialogSetup()
AND
DB_OffStage(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _, _, _, _)
THEN
PROC_SetOnStage(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, 1);

PROC
PROC_LongRest()
AND
DB_GEN_OrinsAbduction_AbductionPlace("InCamp", _, _, _, _)
AND
DB_GEN_OrinsAbduction_PostCampHostage_TalkedToYenna("No", _, _, _, _)
THEN
NOT DB_GEN_OrinsAbduction_AbductionPlace("InCamp");
DB_GEN_OrinsAbduction_PostCampHostage_TalkedToYenna("Yes");
PROC_RemoveAllDialogEntriesForSpeaker(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f);
SetFlag(CAMP_Yenna_State_PostAbductionCampChat_d30c5b6a-eada-4c8c-927d-a50de178ec29);

QRY
QRY_SelectCustomDialog_AfterGenerics(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GEN_OrinsAbduction_AbductionPlace("InCamp", _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_PostCampHostage_TalkedToYenna("No", _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(LOW_BhaalTemple_PostLaezelAbduction_Yenna_ffa51503-6973-dd90-ba68-6790def99e6d, S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _Var1);

PROC
PROC_GEN_OrinsAbduction_PostCampHostage_Scratch_DialogSetup()
THEN
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_HalsinAbduction_TalkedToScratch_3e1b4fcd-23b8-445a-b89d-549324621645);

PROC
PROC_GEN_OrinsAbduction_OrinTeleportOut()
THEN
PROC_GEN_OrinsAbduction_PlayEffect_Teleport();
PROC_GlobalClearFlagAndCache(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2);
SetHitpointsPercentage(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 100);
RemoveHarmfulStatuses(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_RemoveAllDialogEntriesForSpeaker(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
NOT DB_PreventPermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
TeleportTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_BhaalTemple_OrinTemple_TriggerPos_810e97df-6e10-4ff3-94d4-2a466a3ec7c7, "", 0, 0, 0, 0, 0);
PROC_SceneOver("GEN_OrinsAbduction_Scene");
PROC_SceneOver("GEN_OrinsAbduction_CampScene");
PROC_GEN_OrinsAbduction_ClearDB_OrinAttacker();
PROC_WYR_OrinsImpersonation_OrinJournalist_Spotting_Stop(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

PROC
PROC_GEN_OrinsAbduction_Orin_RemoveAllItems()
AND
DB_LOW_BhaalTemple_SavedOrinsInventory(1, _, _, _, _)
THEN
MoveAllItemsTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec, 1, 1, 1);

PROC
PROC_GEN_OrinsAbduction_Orin_RemoveAllItems()
AND NOT
DB_LOW_BhaalTemple_SavedOrinsInventory(1, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_BhaalTemple_State_OrinInTemple_494df8e1-a986-4744-958f-b33880dd5bb2, _, _, _, _)
THEN
MoveAllItemsTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec, 1, 1, 1);

PROC
PROC_GEN_OrinsAbduction_Orin_MoveAllItemsToGore()
THEN
MoveAllItemsTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_LOW_BhaalTemple_OrinCorpse_502e7d05-9f67-4092-a6ad-c349750720c9, 1, 1, 1);

IF
DB_GlobalFlag(LOW_BhaalTemple_Event_TransformToGortash_aca677a0-c532-44df-ac77-3156f0c06925, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_OrinTransformRule_Gortash(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GEN_OrinsAbduction_IsTransformed(1);
PROC_GEN_OrinsAbduction_PlayEffect_Transform();
Transform(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1);

IF
DB_GlobalFlag(LOW_BhaalTemple_Event_TransformToOrin_9280b884-9f8e-41f4-bd49-dbfcb2827fe5, _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_OrinTransformsBack();

PROC
PROC_GEN_OrinsAbduction_OrinTransformsBack()
AND
DB_GEN_OrinsAbduction_IsTransformed(1, _, _, _, _)
THEN
RemoveTransforms(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_GEN_OrinsAbduction_PlayEffect_Transform();
NOT DB_GEN_OrinsAbduction_IsTransformed(1);

PROC
PROC_GEN_OrinsAbduction_OrinTransformsBack()
THEN
PROC_GEN_OrinsAbduction_BloodiedChar_Remove(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
PROC_GEN_OrinsAbduction_Orin_RemoveAllItems();
PROC_LOW_BhaalTemple_Orin_Inventory_Restore();
PROC_GEN_OrinsAbduction_Transformation_PlaySound(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

PROC
PROC_GEN_OrinsAbduction_OrinTransformsBack()
AND
DB_GEN_OrinsAbduction_OrinAttacker(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetAttitude(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, 0);

IF
DB_PermaDefeated(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _, _, _, _)
THEN
TimerLaunch("LOW_BhaalTemple_OrinCorpseTransform", 4000);

IF
TimerFinished("LOW_BhaalTemple_OrinCorpseTransform", _, _, _, _)
THEN
PROC_GEN_OrinsAbduction_OrinCorpseTransform();

PROC
PROC_GEN_OrinsAbduction_OrinCorpseTransform()
THEN
TeleportTo(S_LOW_BhaalTemple_OrinCorpse_502e7d05-9f67-4092-a6ad-c349750720c9, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "GEN_OrinsAbduction_OrinBodySwap", 0, 0, 0, 0, 0);
PROC_GEN_OrinsAbduction_Orin_MoveAllItemsToGore();

IF
EntityEvent(_, "GEN_OrinsAbduction_OrinBodySwap", (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
CreateSurface(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, "SurfaceBlood", 1, -1);
SetOnStage(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0);

IF
DB_GlobalFlag(ORI_DarkUrge_State_BhaalAccepted_904c45e0-bb06-40ed-b5d7-4f1c851b9d86, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
AddSpell(_Var1, "Target_LOW_DarkUrge_PowerWordKill", 1, 0);
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_GivenPowerWordKill_5247a7dd-d3c8-45fa-98b3-be47194e50f0);
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_GivenSlayerForm_14aec5bc-1013-4845-96ca-20722c5219e3);

IF
FlagCleared(ORI_DarkUrge_State_GivenPowerWordKill_5247a7dd-d3c8-45fa-98b3-be47194e50f0, _, _, _, _)
AND
DB_ORI_DarkUrge(_Var3, _, _, _, _)
THEN
RemoveSpell(_Var3, "Target_LOW_DarkUrge_PowerWordKill");

IF
CastedSpell((CHARACTER)_Var1, "Target_LOW_DarkUrge_PowerWordKill", _, _, _)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalClearFlagAndCache(ORI_DarkUrge_State_GivenPowerWordKill_5247a7dd-d3c8-45fa-98b3-be47194e50f0);

PROC
PROC_GEN_OrinsAbduction_SetupOrinGortash()
AND
DB_GEN_OrinsAbduction_OrinTransformRule_Gortash(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
Transform(S_GLO_BhaalTemple_OrinGortashDummy_9fcd1601-fb36-4435-b6da-a80cee4edb10, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1);

IF
DB_GlobalFlag(WYR_OrinsImpersonation_State_MetOrinOnce_5f82392a-6e8f-4c9b-a927-b9d77ee263ec, _, _, _, _)
AND NOT
DB_GlobalFlag(GLO_OrinsAbduction_State_AbductionOccured_98dda46d-871c-4807-aced-5dc3ff5f4c2d, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(WYR_OrinsImpersonation_State_MetOrinOnce_EnableTG_4f3080c7-7324-4326-9daf-a8f8ffa96551);

PROC
PROC_GEN_OrinsAbduction_PlayEffect_Transform()
AND
GetPosition(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var2, _Var3, _Var1)
THEN
PlayEffect(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, EFFECTRESOURCEGUID_VFX_Script_Doppelganger_Poof_01_e78795e5-b5ff-c96c-d6c0-4da52fd527ba, "Dummy_Root");

PROC
PROC_GEN_OrinsAbduction_PlayEffect_Teleport()
AND
GetPosition(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var2, _Var3, _Var1)
THEN
PlayEffectAtPosition(EFFECTRESOURCEGUID_VFX_Script_Orin_Teleportation_96add906-01fb-1af0-239e-72c229b48915, _Var1, _Var2, _Var3);

PROC
PROC_GEN_OrinsAbduction_PlayEffect_TeleportOnChar((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetPosition(_Var1, _Var2, _Var3, _Var4, _Var1)
THEN
PlayEffectAtPosition(EFFECTRESOURCEGUID_VFX_Script_Orin_Teleportation_96add906-01fb-1af0-239e-72c229b48915, _Var2, _Var3, _Var4);

PROC
PROC_GEN_OrinsAbduction_PlayEffect_TeleportOnCharPoof((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetPosition(_Var1, _Var2, _Var3, _Var4, _Var1)
THEN
PlayEffectAtPosition(EFFECTRESOURCEGUID_VFX_Script_Stub_Poof_01_f0cf792a-0f74-d17e-ad0d-6052a6131416, _Var2, _Var3, _Var4);

PROC
PROC_GEN_OrinsAbduction_PlayEffect_GetOrinCorpse()
AND
GetPosition(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, _Var2, _Var3, _Var1)
THEN
PlayEffectAtPosition(VFX_Script_Doppelganger_Poof_01_e78795e5-b5ff-c96c-d6c0-4da52fd527ba, _Var1, _Var2, _Var3);

PROC
PROC_GEN_OrinsAbduction_Altar_PlayEffect_Bloodied()
THEN
PROC_LoopEffect(VFX_Script_LOW_BhaalTemple_TempleAltar_Blood_01_5a488740-246e-9d64-e4f4-0f553101b31b, S_LOW_BhaalTemple_TempleAltar_64b08f01-5e3f-4ca2-9603-4e8c85c80e8e, "LOW_BhaalTemple_Altar_Bloodied", "CTY_Main_A", "");

PROC
PROC_GEN_OrinsAbduction_BloodiedChar_Apply((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
ApplyStatus(_Var1, "BLOOD_COVERED_FULL", -1, 1, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

PROC
PROC_GEN_OrinsAbduction_BloodiedChar_Remove((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
HasActiveStatus(_Var1, "BLOOD_COVERED_SLIGHT", 1, _Var1, _Var1)
THEN
RemoveStatus(_Var1, "BLOOD_COVERED_SLIGHT", S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

PROC
PROC_GEN_OrinsAbduction_Transformation_PlaySound((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PlaySound(_Var1, "Explo_Orin_impersonation");

PROC
PROC_GEN_OrinsAbduction_ClearDBs()
THEN
PROC_GEN_OrinsAbduction_ClearDB_ChosenChar();
PROC_GEN_OrinsAbduction_ClearDB_CFM_Orin();
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharFlag();

PROC
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharRelationship()
AND
DB_GEN_OrinsAbduction_ChosenCharRelationship(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GEN_OrinsAbduction_ChosenCharRelationship(_Var1);

PROC
PROC_GEN_OrinsAbduction_ClearDB_ChosenChar()
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GEN_OrinsAbduction_ChosenChar(_Var1);

PROC
PROC_GEN_OrinsAbduction_ClearDB_CFM_Orin()
AND
DB_GEN_OrinsAbduction_CFM_Orin(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GEN_OrinsAbduction_CFM_Orin(_Var1);

PROC
PROC_GEN_OrinsAbduction_ClearDB_ChosenName()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GEN_OrinsAbduction_ChosenName(_Var1);

PROC
PROC_GEN_OrinsAbduction_ClearDB_CurCampTrigPos()
AND
DB_GEN_OrinsAbduction_CurCampTrigPos(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GEN_OrinsAbduction_CurCampTrigPos(_Var1);

PROC
PROC_GEN_OrinsAbduction_ClearDB_ChosenCharFlag()
AND
DB_GEN_OrinsAbduction_ChosenCharFlag(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GEN_OrinsAbduction_ChosenCharFlag(_Var1);

PROC
PROC_GEN_OrinsAbduction_ClearDB_OrinAttacker()
AND
DB_GEN_OrinsAbduction_OrinAttacker(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GEN_OrinsAbduction_OrinAttacker(_Var1);

IF
DB_GEN_OrinsAbduction_PostCampHostage_TalkedToYenna(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_PostCampHostage_TalkedToYenna(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
THEN
NOT DB_GEN_OrinsAbduction_PostCampHostage_TalkedToYenna(_Var2);

IF
DB_GEN_OrinsAbduction_Abductee_ExamineAbducteeDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_Abductee_ExamineAbducteeDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
THEN
NOT DB_GEN_OrinsAbduction_Abductee_ExamineAbducteeDialog(_Var2);

IF
DB_GEN_OrinsAbduction_OrinInAttackedDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GEN_OrinsAbduction_OrinInAttackedDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
THEN
NOT DB_GEN_OrinsAbduction_OrinInAttackedDialog(_Var2);

IF
TextEvent("BTCheckPartyFollowersDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTCheckPartyFollowersDB");
PROC_GEN_OrinsAbduction_Check_PartyFollowersDB();

PROC
PROC_GEN_OrinsAbduction_Check_PartyFollowersDB()
AND
DB_PartyFollowers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var3, _Var2);

IF
TextEvent("BTCheckCampDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Check Camp DB");
PROC_GEN_OrinsAbduction_CheckCampDB();

PROC
PROC_GEN_OrinsAbduction_CheckCampDB()
AND
DB_InCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var3, _Var2);

IF
TextEvent("BTCheckPlayerDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Check Player DB");
PROC_GEN_OrinsAbduction_CheckPlayerDB();

PROC
PROC_GEN_OrinsAbduction_CheckPlayerDB()
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var3, _Var2);

IF
TextEvent("BTCheckCampLocDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTCheckCampLocDB");
PROC_Debug_CheckCampLoc();

PROC
PROC_Debug_CheckCampLoc()
AND
DB_ActiveCamp("SLUMS", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinAbductionPosList("SLUMS", _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
Concatenate(" Slums_TriggerPos: ", _Var3, _Var4, _Var1, _Var1)
THEN
DebugText(_Var2, _Var4);

PROC
PROC_Debug_CheckCampLoc()
AND
DB_ActiveCamp("ELFSONG", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinAbductionPosList("ELFSONG", _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
Concatenate("Elfsong_TriggerPos: ", _Var3, _Var4, _Var1, _Var1)
THEN
DebugText(_Var2, _Var4);

PROC
PROC_Debug_CheckCampLoc()
AND
DB_ActiveCamp("FARM", _, _, _, _)
AND
DB_GEN_OrinsAbduction_OrinAbductionPosList("FARM", _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
Concatenate("FARM_TriggerPos: ", _Var3, _Var4, _Var1, _Var1)
THEN
DebugText(_Var2, _Var4);

IF
TextEvent("BTCheckActiveCampDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Check Active Camp DB");
PROC_GEN_OrinsAbduction_CheckActiveCampDB();

PROC
PROC_GEN_OrinsAbduction_CheckActiveCampDB()
AND
DB_ActiveCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
Concatenate(": ", _Var1, _Var2, _Var1, _Var1)
AND
GetHostCharacter(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var3, _Var2);

IF
TextEvent("BTCheckChosenCharDB", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenChar(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
Concatenate("ChosenChar: ", _Var2, _Var3, _Var1, _Var1)
AND
GetHostCharacter(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var4, _Var3);

IF
TextEvent("BTCheckChosenNameDB", _, _, _, _)
THEN
PROC_Debug_GEN_OrinsAbduction_DisplayChosenName();

PROC
PROC_Debug_GEN_OrinsAbduction_DisplayChosenName()
AND
DB_GEN_OrinsAbduction_ChosenName(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
Concatenate("ChosenName: ", _Var1, _Var2, _Var1, _Var1)
AND
GetHostCharacter(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var3, _Var2);

IF
TextEvent("BTCheckChosenRelationshipDB", (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenCharRelationship(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
Concatenate("CheckChosenRelationshipDB: ", _Var2, _Var3, _Var1, _Var1)
AND
GetHostCharacter(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var4, _Var3);

IF
TextEvent("BTCheckYennaDBChildren", _, _, _, _)
AND
DB_Children(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _, _, _, _)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTCheckYennaDBChildren: TRUE");

IF
TextEvent("BTCheckPermaDefeated", _, _, _, _)
AND
DB_PermaDefeated(S_GLO_OrinsImpersonation_Smith_2ac966aa-3372-419a-902a-8330925830ef, _, _, _, _)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTCheckPermaDefeated: TRUE");

IF
TextEvent("BTCheckChosenHalsinVictimDB", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_GEN_OrinsAbduction_ChosenHalsinVictim(_Var1, _, _Var1, _Var1, _Var1)
AND
Concatenate("BTCheckChosenHalsinVictimDB: ", _Var1, _Var3, _Var1, _Var1)
AND
GetHostCharacter(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var4, _Var3);

IF
TextEvent("BTWakeHalsinVictim", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTWakeHalsinVictim");
PROC_GEN_OrinsAbduction_WakeUpCampAbductee();

IF
TextEvent("BTDieSmith", _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_OrinsImpersonation_Smith_2ac966aa-3372-419a-902a-8330925830ef, _, _, _, _)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTDieSmith");
Die(S_GLO_OrinsImpersonation_Smith_2ac966aa-3372-419a-902a-8330925830ef, 0, 1);

IF
TextEvent("OAEnableAbduction", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAEnableAbduction");
PROC_GEN_OrinsAbduction_Debug_EnableAbduction();

PROC
PROC_GEN_OrinsAbduction_Debug_EnableAbduction()
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_Knows_CampCompromised_62f279b8-9f36-4f4a-92d3-edc16cb4d760);
PROC_GEN_OrinsAbduction_InCampAbductions_Init();
PROC_GEN_OrinsAbduction_InWorldAbductions_Init();
PROC_GEN_OrinsAbduction_InWorldImpersonations_Disable();

IF
TextEvent("OAGiveKethericNetherstone", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAGiveKethericNetherstone");
ToInventory(S_COL_CrownController_Ketheric_06b8891b-e71c-423b-8482-2680c3c16a4d, _Var1);

IF
TextEvent("OAGiveGortashNetherstone", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAGiveGortashNetherstone");
PROC_GEN_OrinsAbduction_Debug_GiveGortashNetherstone();

PROC
PROC_GEN_OrinsAbduction_Debug_GiveGortashNetherstone()
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ToInventory(S_WYR_CrownController_Gortash_383be300-d328-4152-86df-4927482d1fd7, _Var1);

IF
TextEvent("OASetKilledGortash", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OASetKilledGortash");
PROC_GEN_OrinsAbduction_Debug_SetKilledGortash();

PROC
PROC_GEN_OrinsAbduction_Debug_SetKilledGortash()
THEN
Die(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, 0, 1);
PROC_GlobalSetFlagAndCache(GLO_Gortash_State_PermaDefeated_74dd56ff-7e00-42a6-a0f3-0d122f364769);

IF
TextEvent("OASetTalkedToGortash", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OASetTalkedToGortash");
PROC_GlobalSetFlagAndCache(GLO_Gortash_HasMet_74cffb8f-fc93-4c67-a12e-aa2cc8890291);
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_Knows_CampCompromised_62f279b8-9f36-4f4a-92d3-edc16cb4d760);

IF
TextEvent("OALearnAboutBhaalTemple", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OALearnAboutBhaalTemple");
PROC_GlobalSetFlagAndCache(LOW_MurderTribunal_Knows_BhaalTempleLocation_0a45cd29-8ae1-43bb-9ef6-b95af1dc6e55);

IF
TextEvent("BTForceCampNight", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTForceCampNight");
PROC_CampNight_StartSelected();

IF
TextEvent("BTSetupDummies", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTSetupDummies");
PROC_GEN_OrinsAbduction_SetupDummies();

IF
TextEvent("OATryPlayADAfterTransform_WithSpeakerGroup", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OATryPlayADAfterTransform_WithSpeakerGroup");
TeleportTo(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var1, "", 0, 0, 0, 0, 0);
DB_GEN_OrinsAbduction_IsTransformed(1);
Transform(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, S_WYR_Circus_LoveDryad_a8bce35d-17ee-46e3-8d56-1d0d29c4a01e, WYR_OrinsImpersonation_79876d09-46c3-4025-96ce-db6969f249f0);
PROC_TryStartAD(WYR_Circus_AD_LoveDryad_0a121d28-d4e8-07bb-6a70-404c247e5d48, S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);

IF
TextEvent("OATryPlayADAfterTransform_WithoutSpeakerGroup", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OATryPlayADAfterTransform_WithoutSpeakerGroup");
TeleportTo(S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec, _Var1, "", 0, 0, 0, 0, 0);
DB_GEN_OrinsAbduction_IsTransformed(1);
Transform(S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec, S_WYR_Circus_LoveDryad_a8bce35d-17ee-46e3-8d56-1d0d29c4a01e, WYR_OrinsImpersonation_79876d09-46c3-4025-96ce-db6969f249f0);
PROC_TryStartAD(WYR_Circus_AD_LoveDryad_0a121d28-d4e8-07bb-6a70-404c247e5d48, S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec);

IF
TextEvent("OAKnockoutStatusOnDummyApply", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAKnockoutStatusOnDummyApply");
TeleportTo(S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec, _Var1, "", 0, 0, 0, 0, 0);
PROC_GEN_OrinsAbduction_Temple_KnockedOut_Apply(S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec);

IF
TextEvent("OAKnockoutStatusOnDummyRemove", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAKnockoutStatusOnDummyRemove");
PROC_GEN_OrinsAbduction_Temple_KnockedOut_Remove(S_GLO_BhaalTemple_OrinDummy_879a56ce-1e1c-4b2c-bac7-db7b3c6354ec);

IF
TextEvent("OADUAcceptedBhaal", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OADUAcceptedBhaal");
PROC_GlobalSetFlagAndCache(ORI_DarkUrge_State_BhaalAccepted_904c45e0-bb06-40ed-b5d7-4f1c851b9d86);

IF
TextEvent("OAAltarBloodied", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAAltarBloodied");
PROC_GEN_OrinsAbduction_Altar_PlayEffect_Bloodied();

IF
TextEvent("OALearnOrinMother", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OALearnOrinMother");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Knows_OrinsMother_329be152-2e04-4b9c-85c6-055efad23da8);

IF
TextEvent("OALearnSarevokOrderedOrinDead", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OALearnSarevokOrderedOrinDead");
PROC_GlobalSetFlagAndCache(LOW_BhaalTemple_Knows_SarevokOrderedOrinDead_e13e6f51-977b-f828-ac47-f7cd6f7e03e2);

IF
TextEvent("OAOrinMotherEnable", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinMotherEnable");
PROC_LOW_BhaalTemple_OrinsMother_Enable();

IF
TextEvent("OAOrinMotherUseBed", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinMotherUseBed");
PROC_LOW_BhaalTemple_OrinsMother_UseBed();

IF
TextEvent("OAOrinMotherTeleportBed", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinMotherTeleportBed");
PROC_LOW_BhaalTemple_OrinsMother_TeleportBed();

IF
TextEvent("OAOrinMotherKill", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinMotherKill");
PROC_LOW_BhaalTemple_OrinsMother_Kill();

IF
TextEvent("OAOrinMotherResurrect", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinMotherResurrect");
PROC_LOW_BhaalTemple_OrinsMother_Resurrect();

IF
TextEvent("OAOrinMotherPlayDeadAnim", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinMotherPlayDeadAnim");
PROC_LOW_BhaalTemple_OrinsMother_PlayDeadAnim();

IF
TextEvent("OAOrinMotherApplyStatus", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinMotherApplyStatus");
PROC_LOW_BhaalTemple_OrinsMother_ApplyStatus();

IF
TextEvent("OAPlayerTransformSlayer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAPlayerTransformSlayer");
PROC_LOW_BhaalTemple_PlayerTransformIntoSlayer();

IF
TextEvent("OAForcePlayerTransformSlayer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_DarkUrge(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAForcePlayerTransformSlayer");
UseSpell(_Var2, "Shout_DarkUrge_Slayer", _Var2);

IF
TextEvent("OAForcePlayerTransformSlayer2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DarkUrge(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var2, "OAForcePlayerTransformSlayer2");
SetFlag(ORI_DarkUrge_State_SlayerForm_88b450d5-3815-4f5d-0c6f-0de221513d64, _Var1, 0);

IF
TextEvent("OAOrinGem_Start", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinGem_Start");
QuestUpdate("GLO_OrinContolGem", "LearnedAboutOrin");

IF
TextEvent("OAOrinGem_LearnedAboutTemple1", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinGem_LearnedAboutTemple1");
PROC_GlobalSetFlagAndCache(LOW_SerialKiller_Knows_TargetList_262314d1-43bf-4ea5-ae23-4a77bfab2671);

IF
TextEvent("OAOrinGem_LearnedAboutTemple2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinGem_LearnedAboutTemple2");
PROC_GlobalSetFlagAndCache(LOW_Elfsong_State_AllowHelpDevella_6692d31b-c2a1-4c1f-6471-1a2c701867dd);

IF
TextEvent("OAForceAttackedDialog", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAForceAttackedDialog");
PROC_GEN_OrinsAbduction_OrinAttacked_StartDialog(_Var1);

IF
TextEvent("OACheckVersion", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OrinStoryVersion: 18-05-2023");

IF
TextEvent("OATeleportYennaToMe", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OATeleportYennaToMe");
TeleportTo(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, _Var1, "", 0, 0, 0, 0, 0);

IF
TextEvent("OAUnsheathed", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAUnsheathed");
SetWeaponUnsheathed(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, 1, 1);

IF
TextEvent("OAPlayAnim1", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAPlayAnim1");
PlayAnimation(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, CUST_Idle_Still_Combat_01_590ea7e8-ae43-4307-916b-b1133ef47dfa, "");

IF
TextEvent("OAPlayAnim2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAPlayAnim2");
PlayAnimation(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, CUST_Training_Sword_01_51d4761b-2b2e-41a3-b52b-40b6700d6e39, "");

IF
TextEvent("OAPlayAnim3", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAPlayAnim3");
SetWeaponUnsheathed(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, 1, 1);
PlayAnimation(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, CUST_Training_Sword_01_51d4761b-2b2e-41a3-b52b-40b6700d6e39, "");
TimerLaunch("PlayCombatAnim", 2800);

IF
TimerFinished("PlayCombatAnim", _, _, _, _)
THEN
PlayAnimation(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, CUST_Idle_Still_Combat_01_590ea7e8-ae43-4307-916b-b1133ef47dfa, "");

IF
TextEvent("OAPlayAll", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAPlayAll");
PlayAnimation(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, CUST_Idle_Still_Combat_01_590ea7e8-ae43-4307-916b-b1133ef47dfa, "Anim1");

IF
EntityEvent(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, "Anim1", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "EntityEvent1");
PlayAnimation(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, CUST_Training_Sword_01_51d4761b-2b2e-41a3-b52b-40b6700d6e39, "Anim2");

IF
EntityEvent(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, "Anim2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "EntityEvent2");
PlayAnimation(S_GLO_Yenna_d496d903-d3d6-4314-a324-18542de77b0f, CUST_Idle_Still_Combat_01_590ea7e8-ae43-4307-916b-b1133ef47dfa, "");

IF
TextEvent("BTOrinCorpseTransform", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTOrinCorpseTransform");
PROC_GEN_OrinsAbduction_OrinCorpseTransform();

IF
TextEvent("BTOrinCorpseTransformBack", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "BTOrinCorpseTransformBack");
RemoveTransforms(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101);
SetHitpointsPercentage(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, 0);

IF
TextEvent("OAOrinsTitleGet", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
ObjectGetTitle(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, _Var2, _Var1, _Var1, _Var1)
AND
ResolveTranslatedString(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
Concatenate("OAOrinsTitleGet :", _Var3, _Var4, _Var1, _Var1)
THEN
DebugText(_Var1, _Var4);

IF
TextEvent("OAOrinsTitleSave", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinsTitleSave");
PROC_GEN_OrinsAbduction_Orin_SaveTitle();

IF
TextEvent("OAOrinsTitleClear", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinsTitleClear");
PROC_GEN_OrinsAbduction_Orin_ClearTitle();

IF
TextEvent("OAOrinsTitleRestore", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OAOrinsTitleRestore");
PROC_GEN_OrinsAbduction_Orin_RestoreTitle();

IF
TextEvent("OITransformSFXPlay", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "OITransformSFXPlay");
PROC_GEN_OrinsAbduction_Transformation_PlaySound(_Var1);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act3_GEN"
