Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_AutoSaveTrigger(S_END_HighHallInteriorEntrance_AutoSave_319692f0-b47f-4449-8b5c-5c90b69d77c7);
ApplyStatus(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "INVULNERABLE_NOT_SHOWN", -1, 1);
DB_DialogBlockAttackButton(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23);
DB_DialogBlockTradeButton(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23);
DB_AddCharactersInTriggerToDialog(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, 1, 1, 1, 1);
DB_DropMutingStatussesDialog(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23);
UnloadLevelTemplate(S_END_FallingStatuePlatform_d988f74e-8186-41b2-a096-bf2642411c85);
SetHitpoints(S_END_InteriorBlockingDoor_de05efba-912f-4d1d-ad3b-e8019f2a618b, 26);
SetHitpoints(S_END_FallingStatue_4306e75f-1bf9-4bb7-860d-18dcd3626241, 32);
DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(NULL_00000000-0000-0000-0000-000000000000, 0);
DB_QRYRTN_END_HighHallInterior_FurthestPlayerFromSafeRoom(NULL_00000000-0000-0000-0000-000000000000, 0);
DB_END_HighHallInterior_BrainquakePoints(S_END_InteriorBrainquakePoint_001_2f460e20-232b-41fd-a95c-1888c2c55c09);
DB_END_HighHallInterior_BrainquakePoints(S_END_InteriorBrainquakePoint_002_444fd65a-de9b-4cd2-bb49-7d50d9242f55);
DB_END_HighHallInterior_BrainquakePoints(S_END_InteriorBrainquakePoint_003_1a916df0-6f54-4c72-b9a0-750233251e8e);
DB_END_HighHallInterior_BrainquakePoints(S_END_InteriorBrainquakePoint_004_45ca27fd-459c-4ede-a735-d3d466586449);
NOT DB_END_HighHallInterior_CannonTargets(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, 0, 0, 0);
PROC_TriggerRegisterForParty(S_END_WarningShotPoly_e7b609df-682c-47a3-a6c2-977b0f5e1f81);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_001_6390c9e8-85ca-4327-a4b5-e685ea9e8715);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_002_3a224710-b9d7-477d-a898-16520807e856);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_003_b21bd12f-b61c-4d95-b0ef-b0546accad1d);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_004_6d54aaf3-3d43-4e98-a73f-bcb79e756156);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_005_67ebe80b-5856-4b1c-b0f9-7e105a6a7c41);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_006_48f1d49c-06e9-46f2-8642-7383d2dbb655);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_007_9a723db3-d1b0-4bc7-8c77-df404cc2a57f);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_008_2c6fa539-41fa-4518-9c9b-3273c7ba1089);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_009_4294d12e-2251-4e93-9313-20e577e6faac);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_010_2830bfdc-e905-47c2-a614-762b132e5517);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_011_66486464-7f88-4655-bbce-078b39e6394f);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_012_dae41d2b-fd74-44b2-bbb7-ff588a6eec8b);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_013_998ecd72-52f2-4bc1-a9c7-3f92383b92dd);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_014_0b96257c-daaa-4da8-a4e4-9495d0f8bc5d);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_015_4bb23bb2-4a3d-45d9-afc6-cc449f79f9b5);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_016_ea6f7390-6c88-4db5-88ea-abc2542623c7);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_017_445e9c20-5ca0-4d0f-8ed4-739f1b61e691);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_018_1d721d9a-da62-4b2e-a521-cdf49ad3ea0c);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_019_94db9de9-f965-4a86-b590-ba6cc38bc477);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_020_f2b8983b-94c1-46ce-8447-0c644be2e6fb);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_021_7c960ee1-3655-415e-81b2-4e85a8ba2798);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_022_a48b8267-f6ae-4909-8ce9-085afffafb96);
DB_END_HighHallInterior_WarningShotTargetTriggers(S_END_WarningShotTargetSphere_023_f6dfd5b4-86a6-468c-bb3c-f2f5c84a087b);
DB_END_HighHallInterior_AvailableDropPodCount(6);
DB_END_HighHallInterior_InterceptDistance(2);
DB_OneShotPartyTrigger(S_END_MindFlayerSpawnReadyBox_0b1dae83-b08a-410f-9e31-6f49d04c2448);
DB_CombatReact_AD_OnTurn(S_END_AbsoluteCannonFodder_001_fa170adf-bc09-4143-8aba-e0286231a8b4, END_HighHallInterior_AD_FodderCombat_001_83e456e2-7c47-2170-2c98-b9237f42e105, 1);
DB_CombatReact_AD_OnTurn(S_END_AbsoluteCannonFodder_002_c1605cd8-238e-4589-a4fd-1d9c4edab015, END_HighHallInterior_AD_FodderCombat_002_cff75470-fbb4-017d-dc72-b4f707bc6499, 1);
DB_END_HighHallInterior_FodderADs(S_END_AbsoluteCannonFodder_001_fa170adf-bc09-4143-8aba-e0286231a8b4);
DB_END_HighHallInterior_FodderADs(S_END_AbsoluteCannonFodder_002_c1605cd8-238e-4589-a4fd-1d9c4edab015);
DB_END_HighHallInterior_Guards(S_END_AbsoluteCannonFodder_001_fa170adf-bc09-4143-8aba-e0286231a8b4);
DB_END_HighHallInterior_Guards(S_END_AbsoluteCannonFodder_002_c1605cd8-238e-4589-a4fd-1d9c4edab015);
DB_END_HighHallInterior_Patrollers(S_END_InteriorPatroller_001_c0e413b6-69c7-4c25-b0a5-6ebb07a2bed5);
DB_END_HighHallInterior_Patrollers(S_END_InteriorPatroller_002_37f664bc-e7f7-49b4-a2a3-9f5ee8d65fc3);
DB_END_HighHallInterior_Patrollers(S_END_InteriorPatroller_003_f7418152-e038-4555-a0e5-2e0756633651);
DB_END_HighHallInterior_Patrollers(S_END_InteriorPatroller_004_f92755f0-2022-465a-90be-d5eaace2f62f);
DB_END_HighHallInterior_Patrollers(S_END_InteriorPatroller_005_b22bc8d4-b4ef-434f-8f2c-fe7a7cad4e45);
DB_END_HighHallInterior_Patrollers(S_END_InteriorPatroller_006_c702ba7b-ba34-413d-b25d-b6d96b899c27);
DB_END_HighHallInterior_Patrollers(S_END_InteriorPatroller_007_0556ac68-79d5-4e3a-9e7a-193b3fc1f684);
DB_END_HighHallInterior_Enemies(S_END_AbsoluteCannonFodder_001_fa170adf-bc09-4143-8aba-e0286231a8b4);
DB_END_HighHallInterior_Enemies(S_END_AbsoluteCannonFodder_002_c1605cd8-238e-4589-a4fd-1d9c4edab015);
DB_END_HighHallInterior_Enemies(S_END_InteriorPatroller_001_c0e413b6-69c7-4c25-b0a5-6ebb07a2bed5);
DB_END_HighHallInterior_Enemies(S_END_InteriorPatroller_002_37f664bc-e7f7-49b4-a2a3-9f5ee8d65fc3);
DB_END_HighHallInterior_Enemies(S_END_InteriorPatroller_003_f7418152-e038-4555-a0e5-2e0756633651);
DB_END_HighHallInterior_Enemies(S_END_InteriorPatroller_004_f92755f0-2022-465a-90be-d5eaace2f62f);
DB_END_HighHallInterior_Enemies(S_END_InteriorPatroller_005_b22bc8d4-b4ef-434f-8f2c-fe7a7cad4e45);
DB_END_HighHallInterior_Enemies(S_END_InteriorPatroller_006_c702ba7b-ba34-413d-b25d-b6d96b899c27);
DB_END_HighHallInterior_Enemies(S_END_InteriorPatroller_007_0556ac68-79d5-4e3a-9e7a-193b3fc1f684);
DB_END_HighHallInterior_IntDevSwarmEnemy(S_END_InteriorPatroller_001_c0e413b6-69c7-4c25-b0a5-6ebb07a2bed5);
DB_END_HighHallInterior_IntDevSwarmEnemy(S_END_InteriorPatroller_002_37f664bc-e7f7-49b4-a2a3-9f5ee8d65fc3);
DB_END_HighHallInterior_IntDevSwarmEnemy(S_END_InteriorPatroller_003_f7418152-e038-4555-a0e5-2e0756633651);
DB_END_HighHallInterior_IntDevSwarmEnemy(S_END_InteriorPatroller_004_f92755f0-2022-465a-90be-d5eaace2f62f);
DB_END_HighHallInterior_IntDevSwarmEnemy(S_END_InteriorPatroller_005_b22bc8d4-b4ef-434f-8f2c-fe7a7cad4e45);
DB_END_HighHallInterior_IntDevSwarmEnemy(S_END_InteriorPatroller_006_c702ba7b-ba34-413d-b25d-b6d96b899c27);
DB_END_HighHallInterior_IntDevSwarmEnemy(S_END_InteriorPatroller_007_0556ac68-79d5-4e3a-9e7a-193b3fc1f684);
DB_END_HighHallInterior_FodderReadyTriggers(S_END_AbsoluteCannonFodder_001_fa170adf-bc09-4143-8aba-e0286231a8b4, S_END_Fodder001RunToPoint_Left_51a41092-8d20-4947-8c26-955e3d503682, S_END_EnemyStartSidePoly_Left_2dab35de-1d2e-4b5a-a423-30a2f1e3d256);
DB_END_HighHallInterior_FodderReadyTriggers(S_END_AbsoluteCannonFodder_001_fa170adf-bc09-4143-8aba-e0286231a8b4, S_END_Fodder001RunToPoint_Right_40f0e297-b7c2-4ef7-9712-addc4c6a28d5, S_END_EnemyStartSidePoly_Right_91c94102-6550-4998-9d08-a8f9cfbc6b84);
DB_END_HighHallInterior_FodderReadyTriggers(S_END_AbsoluteCannonFodder_002_c1605cd8-238e-4589-a4fd-1d9c4edab015, S_END_Fodder002RunToPoint_Left_753816f3-bce7-46a7-9740-c74e79f923bd, S_END_EnemyStartSidePoly_Left_2dab35de-1d2e-4b5a-a423-30a2f1e3d256);
DB_END_HighHallInterior_FodderReadyTriggers(S_END_AbsoluteCannonFodder_002_c1605cd8-238e-4589-a4fd-1d9c4edab015, S_END_Fodder002RunToPoint_Right_e8b0d498-8eda-428e-a0f1-e7a74a5cee3d, S_END_EnemyStartSidePoly_Right_91c94102-6550-4998-9d08-a8f9cfbc6b84);
DB_END_HighHallInterior_IntDevSpawnPoints(S_END_IntDevSwarmSpawnBox_4c502fa0-0dda-4e58-b55e-56b363256448);
DB_END_HighHallInterior_IntDevSpawnPoints(S_END_IntDevSwarmSpawnPoint_R1_dcf40887-9cc9-4a86-8b4d-0610336162b8);
DB_END_HighHallInterior_IntDevSpawnPoints(S_END_IntDevSwarmSpawnPoint_L1_b79fffcb-0b27-4d0b-8ebe-8f034a279034);
DB_END_HighHallInterior_IntDevSpawnPoints(S_END_IntDevSwarmSpawnPoint_L2_32624262-58e0-4c71-a44b-d6ff3f93484f);
DB_END_HighHallInterior_IntDevSpawnPoints(S_END_IntDevSwarmSpawnPoint_R2_f2a22886-8cac-4ca9-87d5-39a65cfaaee8);
DB_END_HighHallInterior_IntDevSpawnPoints(S_END_IntDevSwarmSpawnPoint_L3_6e98f720-05db-4e97-975f-a625997233da);
DB_END_HighHallInterior_IntDevSpawnPoints(S_END_IntDevSwarmSpawnPoint_R3_3e017c8e-121e-4cbb-bc42-16fb6b6dfc2c);
DB_QRYRTN_END_HighHallInterior_NearestIntDevSwarmSpawnPoint(NULL_00000000-0000-0000-0000-000000000000, 0);
DB_END_HighHallInterior_CurrentDeadEnemyCount(0);
DB_END_HighHallInterior_MaxDeadEnemyCount(60);
DB_END_HighHallInterior_CurrentDespawnEnemyIndex(1);
NOT DB_END_HighHallInterior_IntDevSwarmEnemy(NULL_00000000-0000-0000-0000-000000000000);
DB_END_HighHallInterior_IntDevSwarmEnemyMaxCount(8);
DB_END_HighHallInterior_PlayerADTurnCount(0);
SetAmbushing(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, 1);
DB_END_HighHallInterior_Cannons(S_END_NautiloidCannon_001_a732c3a0-051d-4cf3-b841-2875aedfea04);
DB_END_HighHallInterior_Cannons(S_END_NautiloidCannon_002_78bff862-02af-4407-83b8-b68f47d74bbe);
DB_END_HighHallInterior_Cannons(S_END_NautiloidCannon_003_cfc4e7c4-bfe8-41f7-a82a-12dd3c9f120e);
DB_END_HighHallInterior_Cannons(S_END_NautiloidCannon_004_5406467b-8c80-4e67-98b4-ca9a82524599);
DB_END_HighHallInterior_Cannons(S_END_NautiloidCannon_005_4033a3bb-dadc-4e23-9676-0c1fc729489e);
DB_END_HighHallInterior_Cannons(S_END_NautiloidCannon_006_b39f3386-35be-4a72-ac9d-e43978ea6d35);
SetOnStage(S_END_NautiloidCannon_001_a732c3a0-051d-4cf3-b841-2875aedfea04, 0);
SetOnStage(S_END_NautiloidCannon_002_78bff862-02af-4407-83b8-b68f47d74bbe, 0);
SetOnStage(S_END_NautiloidCannon_003_cfc4e7c4-bfe8-41f7-a82a-12dd3c9f120e, 0);
SetOnStage(S_END_NautiloidCannon_004_5406467b-8c80-4e67-98b4-ca9a82524599, 0);
SetOnStage(S_END_NautiloidCannon_005_4033a3bb-dadc-4e23-9676-0c1fc729489e, 0);
SetOnStage(S_END_NautiloidCannon_006_b39f3386-35be-4a72-ac9d-e43978ea6d35, 0);
DB_END_HighHallInterior_CannonPlatforms(S_END_CannonPlatform_001_e2494d24-e8fd-4d4b-ae2e-6355c019e2de);
DB_END_HighHallInterior_CannonPlatforms(S_END_CannonPlatform_002_d5134d56-6f57-4528-a672-87c8e8a19add);
DB_END_HighHallInterior_CannonPlatforms(S_END_CannonPlatform_003_e2a93273-268e-44df-8cca-b48484025cc2);
DB_END_HighHallInterior_CannonPlatforms(S_END_CannonPlatform_004_54f07a72-cb64-4a65-8aa6-26b87493dec9);
DB_END_HighHallInterior_CannonPlatforms(S_END_CannonPlatform_005_e0779cc8-afa5-4f37-a534-62db80d55427);
DB_END_HighHallInterior_CannonPlatforms(S_END_CannonPlatform_006_72ca88f8-aa5d-493f-afec-04449903a679);
DB_END_HighHallInterior_NautiloidSpotterHelpers(S_END_NautiloidSpotterHelper_001_85741484-143f-4251-b34a-8840d38e0167);
DB_END_HighHallInterior_NautiloidSpotterHelpers(S_END_NautiloidSpotterHelper_002_d3811118-7a6f-4cba-9898-2266fc62ee65);
DB_END_HighHallInterior_NautiloidSpotterHelpers(S_END_NautiloidSpotterHelper_003_305811dc-c711-4a6a-8a7f-085bfe753f10);
DB_END_HighHallInterior_NautiloidSpotterHelpers(S_END_NautiloidSpotterHelper_004_93dcc83a-c5ee-4b63-ad92-e6d2b238f650);
DB_END_HighHallInterior_NautiloidSpotterHelpers(S_END_NautiloidSpotterHelper_005_c67cfed0-b2ef-409c-a76c-d81290a8e099);
DB_END_HighHallInterior_NautiloidSpotterHelpers(S_END_NautiloidSpotterHelper_006_5776b1ab-8bed-4c35-abcc-64e41a09fbf1);
SetAmbushing(S_END_NautiloidSpotterHelper_001_85741484-143f-4251-b34a-8840d38e0167, 1);
SetAmbushing(S_END_NautiloidSpotterHelper_002_d3811118-7a6f-4cba-9898-2266fc62ee65, 1);
SetAmbushing(S_END_NautiloidSpotterHelper_003_305811dc-c711-4a6a-8a7f-085bfe753f10, 1);
SetAmbushing(S_END_NautiloidSpotterHelper_004_93dcc83a-c5ee-4b63-ad92-e6d2b238f650, 1);
SetAmbushing(S_END_NautiloidSpotterHelper_005_c67cfed0-b2ef-409c-a76c-d81290a8e099, 1);
SetAmbushing(S_END_NautiloidSpotterHelper_006_5776b1ab-8bed-4c35-abcc-64e41a09fbf1, 1);
DB_QRTN_END_HighHallInterior_UnoccupiedTriggerIndexCount(-1);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_A_001_f76da5b6-fcb1-41a8-a2f6-b4d432b4bf47, 1);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_A_002_0c0cc1e4-9606-48a6-8724-eb27f2e35ece, 1);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_A_003_d7916b53-044a-414f-ad9f-c09bec7116c1, 1);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_B_001_6808307c-3df1-4f29-9a11-1912a3de5af4, 2);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_B_002_dfdfa5b8-40ac-4058-9301-d8489fc7c9ea, 2);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_B_003_25184dd0-8af4-4e52-9b35-03d8586807d5, 2);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_C_001_feb3da4d-eb56-4704-9874-4e2c5dfd4a0c, 3);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_C_002_a14e4ef0-3715-44c1-9c1d-cb76e1fe16c8, 3);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_C_003_3951d126-4db5-4ed2-a5a7-139ca48b8875, 3);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_D_001_3be1e432-4643-49b7-8feb-f1569b2d2f00, 4);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_D_002_f70270d4-6ae8-4ee2-8b23-b87be0c9844d, 4);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_E_001_6edb67bc-5ebf-4f4a-aab7-d1b040c0060e, 5);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_E_002_bc5339ea-026b-45e1-8d2f-0a8ae4996118, 5);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave1_E_003_cdf1c0a5-ab7a-4cc6-a4b1-2c9c7651da2e, 5);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave2_A_001_32732b03-15da-4824-9cbd-56f212615a93, 6);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave2_A_002_8ff1c6bb-fded-41d0-a069-2eb6de8a6bce, 6);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave2_B_001_344944b0-073f-4d5a-9b33-3fb6b2de4df3, 7);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave2_B_002_7e77331e-e04c-48a2-9dbc-e5b2a1d341be, 7);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave2_C_001_ab022051-1885-471a-ba0c-e06481b8877e, 8);
DB_END_HighHallInterior_CannonCluster(S_END_CannonClusterSphere_Wave2_C_002_015af17b-abc7-444b-9b07-42c92b2de246, 8);
DB_END_HighHallInterior_WavePushTriggers(S_END_WavePushBox_001_d1cd173e-8d9e-455a-80a6-b788be00e9bc, 2);
DB_END_HighHallInterior_WavePushTriggers(S_END_WavePushBox_002_21828000-4606-4c0d-bbe7-bfe4da2ce7cd, 2);
DB_END_HighHallInterior_TotalWaveCount(2);
DB_END_HighHallInterior_ActiveWave(1);
DB_END_HighHallInterior_WaveClusters(1, 5);
DB_END_HighHallInterior_WaveClusters(2, 8);
DB_END_HighHallInterior_TotalTargetCount(0);
DB_END_HighHallInterior_PrimedCannonCount(0);
DB_END_HighHallInterior_CannonCombatID(NULL_00000000-0000-0000-0000-000000000000);
DB_END_HighHallInterior_PositiveOrNegativeOptions(1, -1);
DB_END_HighHallInterior_PositiveOrNegativeOptions(1, 1);
PROC_TriggerRegisterForParty(S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21);
PROC_TriggerRegisterForParty(S_END_NautiloidSafeZoneBox_fee49087-ff00-4e2f-af26-43f855014c90);
DB_GLO_RapidAD_NonAutoMindMeldRegion("END_HighHallInterior_MindMeldADs", S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21);
DB_GLO_RapidAD_ADHelper("END_HighHallInterior_MindMeldADs", S_END_RapidMindMeldHelper_007_47c212eb-1cfb-4e2b-803f-03aa65e0a178, END_BrainBattle_AD_RapidMindMeld_001_dc1a70c8-dcd2-94ba-835e-90b27b9de561);
DB_GLO_RapidAD_ADHelper("END_HighHallInterior_MindMeldADs", S_END_RapidMindMeldHelper_008_fc7f9f4a-8216-4ef7-b9b4-4e4e214cefe5, END_BrainBattle_AD_RapidMindMeld_002_d6be2dde-cea3-31ad-ca47-408f470cc94c);
DB_GLO_RapidAD_ADHelper("END_HighHallInterior_MindMeldADs", S_END_RapidMindMeldHelper_009_1a6afb45-5adc-43ce-961b-93d0a8e3475e, END_BrainBattle_AD_RapidMindMeld_003_ba5b84be-4290-009b-cd6f-a8d0337a129e);
DB_GLO_RapidAD_ADHelper("END_HighHallInterior_MindMeldADs", S_END_RapidMindMeldHelper_010_d0169cf1-1aa2-40a2-81e9-ab6d0ea133ca, END_BrainBattle_AD_RapidMindMeld_004_fe055f67-495a-37a1-2f6f-783c4317197f);
DB_GLO_RapidAD_ADHelper("END_HighHallInterior_MindMeldADs", S_END_RapidMindMeldHelper_011_c6d06422-0376-4f3a-ba67-58b36f91468d, END_BrainBattle_AD_RapidMindMeld_005_b31c34f4-706a-ebc9-c203-e426d402870e);
DB_GLO_RapidAD_ADHelper("END_HighHallInterior_MindMeldADs", S_END_RapidMindMeldHelper_012_82242af5-2273-4804-9d97-975eeb1d9ec4, END_BrainBattle_AD_RapidMindMeld_006_513e4249-d926-2199-6f55-3ec78a07a9b9);
DB_GLO_RapidAD_ADHelper("END_HighHallInterior_MindMeldADs", S_END_RapidMindMeldHelper_013_3cb8ce5c-1fac-4426-bf23-a7889d020cc8, END_BrainBattle_AD_RapidMindMeld_007_9197e648-79ee-6908-fadd-641848586566);
DB_GLO_RapidAD_ADHelper("END_HighHallInterior_MindMeldADs", S_END_RapidMindMeldHelper_014_7d620a11-1fd8-4a02-b0fb-524da0658f36, END_BrainBattle_AD_RapidMindMeld_008_63b6d9ea-37f2-3886-f704-5a5f4df826b0);
NOT DB_END_HighHallInterior_MindMeldCount(NULL_00000000-0000-0000-0000-000000000000, 0);
DB_OneShotPlayerTrigger(S_END_BrainStemGoalADBox_58bdf614-3d5c-4cb1-a466-a18b6d870f8c);
DB_DropMutingStatussesDialog(END_BrainBattle_Intro_4565e114-0153-0449-ea83-de3b972c7679);
DB_AddCharactersInTriggerToDialog(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23, S_END_HighHall_SUB_e77f25b4-3217-4ed6-8ecc-44deebe77c39, 1, 1, 1);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_001_b303c3b0-7372-4af7-90b7-9c0e739d6fb6);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_002_aac368ae-d0a0-48ad-9da3-37a469d2aaff);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_003_2112366c-8e9b-4d1e-bbd8-6667af7e7ded);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_004_854c7abd-ee8e-462c-9767-257e4a083814);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_005_db297f7b-47a2-4e4b-8e08-dd7004de82b8);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_006_bea5be0a-00f0-4ad5-9f99-60dfb9a010af);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_007_02e2a91f-b10e-443f-bda9-8c64c87bca70);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_008_a36e1712-6619-43cf-bd90-34c4aa195640);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_009_36655b12-e0ea-4943-aaa4-67ca3bd363b8);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_010_ba5e8fc3-75f4-42ea-94aa-6187fae95f18);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_011_caa29e8f-65d1-4f39-82f5-0a8a8721e59f);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_012_9a4ec6e4-3c6b-4f46-8c2a-9edd7ae01434);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_013_e8aaeb82-59bb-4372-8aea-f930b18ec218);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_014_195b0823-a046-47bb-b59b-34c406610d52);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_015_62f3228e-4a6a-4920-a925-f458ccfc8dcf);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_016_5c4a70de-a7f7-45f5-b695-cac365f896bf);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_017_3f93bd02-ec6e-4e22-849a-056129ee4db6);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_018_5f525d6e-cfb4-47f6-9202-0168e56dab20);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_019_e13bccdf-8b63-42a3-bd15-3e38bce8a52a);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_020_e9df6e10-2284-49f3-976c-cb721170a6d8);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_021_a032b5b6-a0c6-4d38-8897-064d27ed8ef4);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_022_1b1ad979-a9dc-4750-bf69-b25e3b82c6ec);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_023_bd646b50-b32d-4b27-8fc1-b911cb3afa57);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_024_ca18f164-e8c6-4fc3-9b70-9ebec76dc0de);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_025_eb354688-0046-4748-a289-c80a30e1120c);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_026_9e1a001f-22c0-4e0e-a49a-ca934cf58008);
DB_END_HighHallInterior_FirePoints(S_MOO_InteriorFirePoint_027_d39e036e-d333-4637-9c47-f34ceeddb059);
PROC_END_HighHallInterior_GetCannonHelperOrigin();
PROC_END_HighHallInterior_GetNautiloidOrigin();

KBSECTION
IF
TextEvent("end_hhinautiloidcamera", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SendArenaCameraEvent(_Var1, NULL_00000000-0000-0000-0000-000000000000, "END_HighHallInterior_NautiloidArrivedCamera");

IF
TextEvent("end_clearcannonvfx", (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
DB_END_HighHallInterior_CannonCluster(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_StopLoopEffect(_Var1, "END_HighHallInterior_CannonTarget");

IF
TextEvent("end_forceprimedcannons", _, _, _, _)
THEN
DB_END_HighHallInterior_AllCannonsPrimedOnTargets(1);

IF
TextEvent("end_mindflayerpod", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
UseSpell(_Var1, "ProjectileStrike_END_HighHallInterior_MindFlayerPodStrike", S_TEST_MindFlayerPodTarget_28b8e726-7994-43bb-95c4-69daf97c9034);

IF
TextEvent("end_mindflayeranim1", _, _, _, _)
THEN
PlayAnimation(S_TEST_MindFlayer_672dee18-d28f-46af-9644-96a6d94f926f, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291, "");

IF
TextEvent("end_mindflayeranim2", _, _, _, _)
THEN
PlayAnimation(S_TEST_MindFlayer_672dee18-d28f-46af-9644-96a6d94f926f, UTIL_Spawn_02_3ed4d2ef-1a38-429f-9648-3f07d9085085, "");

IF
TextEvent("testbombardmentsound", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PlaySound(_Var1, "SE_NB_ProjectileStrike");

IF
TextEvent("testbombardmentpreparesound", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PlaySound(_Var1, "SE_NB_ProjectileStrike_Prepare");

IF
TextEvent("end_killinteriorenemies", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_Enemies(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
Die(_Var1, 0, _Var1, 1, 1, 0);

IF
TextEvent("end_killintdevswarm", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_IntDevSwarmEnemy(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
Die(_Var1, 0, _Var1, 1, 1, 0);

IF
TextEvent("end_killdroppodintdevs", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_DropPodIntDevs(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
Die(_Var1, 0, _Var1, 1, 1, 0);

IF
TextEvent("end_killdroppodmindflayers", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_DropPodMindFlayers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
Die(_Var1, 0, _Var1, 1, 1, 0);

IF
TextEvent("end_cannontest", _, _, _, _)
THEN
PlayAnimation(DEC_MF_Nautiloid_Canon_Turret_000_00049377-ebaa-4be5-bfb3-cb51fa45f350, CUST_Fire_Angled_01_2d493d5e-7220-4644-a120-b0227aa550d0, "test");

IF
GainedControl(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _, _, _, _)
THEN
DebugText(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "Assuming Control");

IF
TurnStarted((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_CurrentActivePartyMember(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_CurrentActivePartyMember(_Var1);

IF
TurnEnded((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CurrentActivePartyMember(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_CurrentActivePartyMember(_Var1);

IF
CombatEnded((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_END_HighHallInterior_CannonCombatID(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CurrentActivePartyMember(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_CurrentActivePartyMember(_Var2);

QRY
QRY_END_HighHallInterior_PlayersIsSharingTurn((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_CurrentActivePartyMember(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
SysCount("DB_END_HighHallInterior_CurrentActivePartyMember", 1, _Var2, _Var1, _Var1)
AND
_Var2 > 1
THEN
DB_NOOP(1);

IF
UseFinished((CHARACTER)_Var1, S_END_BaseBrainStem_932f0f7f-06ec-4867-89ac-db79b2aa9a51, 1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_END_HighHallInterior_BrainquakeActive(1, _Var1, _Var1, _Var1, _Var1)
THEN
SetDisableUse(S_END_BaseBrainStem_932f0f7f-06ec-4867-89ac-db79b2aa9a51, 1);
PROC_END_HighHallInterior_StartBrainquakeShakeAndVFX(1);
DB_END_HighHallInterior_BrainquakeActive(1);
PROC_END_HighHallInterior_BrainADResponse(_Var1);

IF
AttackedBy(S_END_BaseBrainStem_932f0f7f-06ec-4867-89ac-db79b2aa9a51, _, (CHARACTER)_Var2, _, _, _, _, _, _, _)
AND
DB_PartyMembers(_Var2, _, _, _, _)
AND NOT
DB_END_HighHallInterior_BrainquakeActive(1, _, _, _, _)
THEN
PROC_END_HighHallInterior_StartBrainquakeShakeAndVFX(1);
DB_END_HighHallInterior_BrainquakeActive(1);

IF
AttackedBy(S_END_BrainStemClimb_3270ca2c-67ef-40d3-a980-8eeb580ece75, _, (CHARACTER)_Var2, _, _, _, _, _, _, _)
AND
DB_PartyMembers(_Var2, _, _, _, _)
AND NOT
DB_END_HighHallInterior_BrainquakeActive(1, _, _, _, _)
THEN
PROC_END_HighHallInterior_StartBrainquakeShakeAndVFX(1);
DB_END_HighHallInterior_BrainquakeActive(1);

PROC
PROC_END_HighHallInterior_StartBrainquakeShakeAndVFX((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_END_HighHallInterior_BrainquakePoints(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_LoopEffect(VFX_Script_Brainquake_NoOffset_01_0d5c292e-0eca-5117-bdc5-75a56b1e5eb7, _Var2, "END_HighHallInterior_Brainquake", "END_Main", "", 1.5);
RealtimeObjectTimerLaunch(_Var2, "END_HighHallInterior_BrainquakeTimer", 5000);

PROC
PROC_END_HighHallInterior_StartBrainquakeShakeAndVFX(1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_ShakeCameraForTime(_Var1, 5000, VFX_Script_Brainquake_01_07202ba2-fe9c-fc79-46e3-cc421fafc0e8, 1);
PROC_END_HighHallInterior_ApplyBrainquakeSlowAndStun(_Var1, 1000);

PROC
PROC_END_HighHallInterior_StartBrainquakeShakeAndVFX(1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_Enemies(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_HighHallInterior_ApplyBrainquakeSlowAndStun(_Var1, 1000);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "END_HighHallInterior_BrainquakeTimer", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_StopLoopEffect(_Var1, "END_HighHallInterior_Brainquake");

IF
ObjectTimerFinished(_, "END_HighHallInterior_BrainquakeTimer", _, _, _)
AND
DB_END_HighHallInterior_BrainquakeActive(1, _, _, _, _)
THEN
NOT DB_END_HighHallInterior_BrainquakeActive(1);
PROC_END_HighHallInterior_RemoveNetherbrainSlow();

PROC
PROC_END_HighHallInterior_ApplyBrainquakeSlowAndStun((CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
Random(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
IntegerToReal(_Var2, _Var4, _Var1, _Var1, _Var1)
AND
RealProduct(_Var4, 1.5, _Var5, _Var1, _Var1)
AND
RealToInteger(_Var5, _Var6, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var3, _Var6, _Var7, _Var1, _Var1)
THEN
RealtimeObjectTimerLaunch(_Var1, "END_HighHallInterior_NetherSlow_Timer", _Var3);
RealtimeObjectTimerLaunch(_Var1, "END_HighHallInterior_NetherStun_Timer", _Var7);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "END_HighHallInterior_NetherSlow_Timer", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
HasActiveStatus(_Var1, "END_NETHERBRAIN_SLOW", 0, _Var1, _Var1)
THEN
ApplyStatus(_Var1, "END_NETHERBRAIN_SLOW", -1, 1);
DB_END_HighHallInterior_BrainquakeSlowedTargets(_Var1);

PROC
PROC_END_HighHallInterior_RemoveNetherbrainSlow()
AND
DB_END_HighHallInterior_BrainquakeSlowedTargets(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
RemoveStatus(_Var1, "END_NETHERBRAIN_SLOW", NULL_00000000-0000-0000-0000-000000000000);
NOT DB_END_HighHallInterior_BrainquakeSlowedTargets(_Var1);

IF
ObjectTimerFinished((CHARACTER)_Var1, "END_HighHallInterior_NetherStun_Timer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
RequestPassiveRoll(_Var1, S_GLO_Netherbrain_3858e896-d7dd-4699-b37d-d3919ff15ba7, "SavingThrow", "Constitution", Act3_Hard_6298329e-255c-4826-9209-e911873b64e7, 0, "END_HighHallInterior_MindStun");

IF
RollResult("END_HighHallInterior_MindStun", (CHARACTER)_Var1, _, 0, _, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
ApplyStatus(_Var1, "STUNNED", 3, 1);

PROC
PROC_END_HighHallInterior_BrainADResponse((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_BrainStemADOnce", _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(S_END_NetherbrainVoiceHelper_a80db77c-90a6-4baf-a394-383c30bdcb35, _Var1);
PROC_TryStartAD(END_HighHallInterior_AD_Brainquake_349a1c1e-a0af-04b5-ca7d-3142019ad8ae, S_END_NetherbrainVoiceHelper_a80db77c-90a6-4baf-a394-383c30bdcb35);

PROC
PROC_END_HighHallInterior_BrainADResponse((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_BrainStemPlayerVBOnce", _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_BrainStemPlayerVB(_Var1);

IF
AutomatedDialogEnded(END_HighHallInterior_AD_Brainquake_349a1c1e-a0af-04b5-ca7d-3142019ad8ae, _, _, _, _)
AND
DB_END_HighHallInterior_BrainStemPlayerVB(_Var2, _, _, _, _)
THEN
NOT DB_END_HighHallInterior_BrainStemPlayerVB(_Var2);
PROC_TryStartAD(END_HighHallInterior_PAD_BrainStemTouch_95082c6b-dbb4-2240-1beb-ebb9dc799f59, _Var2);

PROC
PROC_OneShotTriggerEntered((CHARACTER)_Var1, S_END_BrainStemGoalADBox_58bdf614-3d5c-4cb1-a466-a18b6d870f8c, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(END_HighHallInterior_VB_BrainStem_8dd91ad0-e824-516d-1063-f51421d10d57, _Var1);

IF
TurnStarted((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CombatActive(1, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, 1, _Var1, _Var1)
THEN
PROC_END_HighHallInterior_StartMindMeldADs(_Var1);

PROC
PROC_END_HighHallInterior_StartMindMeldADs((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_MindMeldCount(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_MindMeldCount(_Var1, _Var2);

PROC
PROC_END_HighHallInterior_StartMindMeldADs((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
Random(3000, _Var2, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_MindMeldCount(_Var1, 2);
RealtimeObjectTimerLaunch(_Var1, "END_HighHallInterior_MindMeldTimer", _Var2);

IF
ObjectTimerFinished((CHARACTER)_Var1, "END_HighHallInterior_MindMeldTimer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_MindMeldCount(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
_Var2 > 0
AND
IntegerSubtract(_Var2, 1, _Var3, _Var1, _Var1)
AND
Random(3000, _Var4, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_MindMeldCount(_Var1, _Var2);
DB_END_HighHallInterior_MindMeldCount(_Var1, _Var3);
PROC_GLO_RapidAD_TryOneRandomMindMeldAD(_Var1, "END_HighHallInterior_MindMeldADs");
RealtimeObjectTimerLaunch(_Var1, "END_HighHallInterior_MindMeldTimer", _Var4);

IF
TurnEnded(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _, _, _, _)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _, _, _, _)
THEN
PROC_END_HighHallInterior_TrySpawnIntDevSwarm();

PROC
PROC_END_HighHallInterior_TrySpawnIntDevSwarm()
AND
DB_END_HighHallInterior_FirstIndDevSwarmWaveSpawned(1, _, _, _, _)
AND
SysCount("DB_END_HighHallInterior_IntDevSwarmEnemy", 1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_IntDevSwarmEnemyMaxCount(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSubtract(_Var2, _Var1, _Var3, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_FoundValidIntDevSwarmPoint(1);
PROC_END_HighHallInterior_ClearFurthestSafeRoomPlayerDB();
PROC_END_HighHallInterior_ClearNearestIntDevSwarmSpawnPointDB();
PROC_END_HighHallInterior_ReplaceIntDevsInSwarm(_Var3);

PROC
PROC_END_HighHallInterior_ReplaceIntDevsInSwarm((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
QRY_END_HighHallInterior_GetFurthestPlayerFromSafeRoom()
AND
DB_QRYRTN_END_HighHallInterior_FurthestPlayerFromSafeRoom(_Var2, _, _Var1, _Var1, _Var1)
AND
QRY_END_HighHallInterior_GetNearestIntDevSwarmSpawnPoint(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_END_HighHallInterior_NearestIntDevSwarmSpawnPoint(_Var4, _, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_FoundValidIntDevSwarmPoint(1);
PROC_END_HighHallInterior_SpawnIntDevsInSwarm(_Var1, _Var4);

PROC
PROC_END_HighHallInterior_ReplaceIntDevsInSwarm((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND NOT
DB_END_HighHallInterior_FoundValidIntDevSwarmPoint(1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_HighHallInterior_SpawnIntDevsInSwarm(_Var1, S_END_IntDevSwarmSpawnBox_4c502fa0-0dda-4e58-b55e-56b363256448);

PROC
PROC_END_HighHallInterior_SpawnIntDevsInSwarm((INTEGER)_Var1, (TRIGGER)_Var2, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
QRY_DoNTimes(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRY_RTN_DoNTimes(_, _Var1, _Var1, _Var1, _Var1)
AND
TriggerGetRandomPosition(_Var2, _Var4, _Var5, _Var6, _Var1)
AND
FindValidPosition(_Var4, _Var5, _Var6, 5, S_END_AbsoluteCannonFodder_001_fa170adf-bc09-4143-8aba-e0286231a8b4, 0, _Var7, _Var8, _Var9, _Var1)
AND
CreateAt(END_Intellect_Devourer_PodStrike_880c04e1-ed67-4233-b10f-163d007c8083, _Var7, _Var8, _Var9, 1, 1, "END_HighHalInterior_IntDevSwarmSpawned", _Var10, _Var1, _Var1)
THEN
DB_END_HighHallInterior_Enemies(_Var10);
DB_END_HighHallInterior_IntDevSwarmEnemy(_Var10);

QRY
QRY_END_HighHallInterior_GetNearestIntDevSwarmSpawnPoint((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_IntDevSpawnPoints(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetPosition(_Var1, _Var3, _, _, _Var1)
AND
GetPosition(_Var2, _Var6, _, _, _Var1)
AND
_Var6 <= _Var3
AND
RealSubtract(_Var3, _Var6, _Var9, _Var1, _Var1)
AND
_Var9 > 8
AND
GetDistanceTo(_Var1, _Var2, _Var10, _Var1, _Var1)
THEN
DB_QRYRTN_END_HighHallInterior_NearestIntDevSwarmSpawnPoint(_Var2, _Var10);

PROC
PROC_END_HighHallInterior_ClearNearestIntDevSwarmSpawnPointDB()
AND
DB_QRYRTN_END_HighHallInterior_NearestIntDevSwarmSpawnPoint(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_QRYRTN_END_HighHallInterior_NearestIntDevSwarmSpawnPoint(_Var1, _Var2);

IF
DB_QRYRTN_END_HighHallInterior_NearestIntDevSwarmSpawnPoint(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_END_HighHallInterior_NearestIntDevSwarmSpawnPoint(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
_Var1 != _Var3
AND
_Var4 >= _Var2
THEN
NOT DB_QRYRTN_END_HighHallInterior_NearestIntDevSwarmSpawnPoint(_Var3, _Var4);

PROC
PROC_END_HighHallInterior_TrySpawnIntDevSwarm()
AND NOT
DB_END_HighHallInterior_FirstIndDevSwarmWaveSpawned(1, _, _, _, _)
AND
DB_END_HighHallInterior_IntDevSwarmEnemyMaxCount(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_FirstIndDevSwarmWaveSpawned(1);
PROC_END_HighHallInterior_SpawnIntDevsInSwarm(_Var1, S_END_IntDevSwarmSpawnBox_4c502fa0-0dda-4e58-b55e-56b363256448);

IF
EntityEvent((GUIDSTRING)_Var1, "END_HighHalInterior_IntDevSwarmSpawned", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetCombatGroupID(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var2, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(_Var1, _Var2);
RequestSetSwarmGroup(_Var1, "END_HighHallInterior_IntDevs");
SetEntityEvent(_Var1, "GLO_BlockCombatFallbackAD", 1);
PlayEffect(_Var1, UTIL_Spawn_01_510ff37e-0618-40e4-8ce0-236e3dc9c291);

IF
Died((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_IntDevSwarmEnemy(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_IntDevSwarmEnemy(_Var1);

QRY
QRY_END_HighHallInterior_GetFurthestPlayerFromSafeRoom()
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Downed(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetDistanceTo(_Var1, S_END_PlayerDistancePoint_7f7cced3-1d3c-4f31-b2b3-040b1ce05d60, _Var2, _Var1, _Var1)
THEN
DB_QRYRTN_END_HighHallInterior_FurthestPlayerFromSafeRoom(_Var1, _Var2);

PROC
PROC_END_HighHallInterior_ClearFurthestSafeRoomPlayerDB()
AND
DB_QRYRTN_END_HighHallInterior_FurthestPlayerFromSafeRoom(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_QRYRTN_END_HighHallInterior_FurthestPlayerFromSafeRoom(_Var1, _Var2);

IF
DB_QRYRTN_END_HighHallInterior_FurthestPlayerFromSafeRoom(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_END_HighHallInterior_FurthestPlayerFromSafeRoom(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
_Var3 != _Var1
AND
_Var4 <= _Var2
THEN
NOT DB_QRYRTN_END_HighHallInterior_FurthestPlayerFromSafeRoom(_Var3, _Var4);

PROC
PROC_END_HighHallInterior_GetCannonHelperOrigin()
AND
GetPosition(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var1, _Var2, _Var3, _Var1)
THEN
DB_END_NautiloidHelper_Position(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var1, _Var2, _Var3);
SetTag(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, CHASM_IMMUNE_1063224a-a5ab-41b1-b309-0ac730e4e8ce);
SetTag(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, IGNORE_CHASMS_a50cb0b1-29a6-4711-a71d-0dc3e3642287);

PROC
PROC_END_HighHallInterior_GetNautiloidOrigin()
AND
GetPosition(S_END_Nautiloid_001_2566e431-2d5a-45b4-9e6c-6cf04e01404d, _Var1, _Var2, _Var3, _Var1)
AND
RealSum(_Var2, 300, _Var4, _Var1, _Var1)
THEN
DB_END_HighHallInterior_NautiloidStartPosition(S_END_Nautiloid_001_2566e431-2d5a-45b4-9e6c-6cf04e01404d, _Var1, _Var2, _Var3);
TeleportToPosition(S_END_Nautiloid_001_2566e431-2d5a-45b4-9e6c-6cf04e01404d, _Var1, _Var4, _Var3, "", 0, 0, 0, 0, 0);

PROC
PROC_END_HighHallInterior_SpawnNautiloid()
AND
QRY_OnlyOnce("END_HighHallInterior_SpawnNautiloidOnce", _, _, _, _)
AND
DB_END_HighHallInterior_NautiloidStartPosition(S_END_Nautiloid_001_2566e431-2d5a-45b4-9e6c-6cf04e01404d, _Var1, _Var2, _Var3, _Var1)
THEN
TeleportToPosition(S_END_Nautiloid_001_2566e431-2d5a-45b4-9e6c-6cf04e01404d, _Var1, _Var2, _Var3, "", 0, 0, 0, 0, 0);
PROC_END_HighHallInterior_ForceUpdateNautiloid();

PROC
PROC_END_HighHallInterior_ForceUpdateNautiloid()
THEN
PROC_END_NautiloidStrike_SetForceUpdate(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, 1);
PROC_END_NautiloidStrike_SetForceUpdate(S_END_Nautiloid_001_2566e431-2d5a-45b4-9e6c-6cf04e01404d, 1);

PROC
PROC_END_HighHallInterior_ForceUpdateNautiloid()
AND
DB_END_HighHallInterior_Cannons(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetOnStage(_Var1, 1);

IF
WentOnStage((CHARACTER)_Var1, 1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_Cannons(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_NautiloidStrike_SetForceUpdate(_Var1, 1);

IF
DB_END_HighHallInterior_NautiloidSpotterHelpers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ApplyStatus(_Var1, "INVULNERABLE_NOT_SHOWN", -1, 1, S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623);

IF
DB_END_HighHallInterior_WarningShotTargetTriggers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TriggerRegisterForParty(_Var1);

IF
DB_END_HighHallInterior_WarningShotTargetTriggers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_Enemies(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
TriggerRegisterForCharacter(_Var1, _Var2);

IF
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_HiddenCharacters(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_WarningShotFired(1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_NautiloidLeavingCombat(1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_CombatActive(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_CombatActive(1);
PROC_END_HighHallInterior_StartNautiloidEncounter(_Var1);

PROC
PROC_END_HighHallInterior_StartNautiloidEncounter((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_OnlyOnce("END_HighHallInterior_ArenaCameraIntroOnce", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_HighHallInterior_NautiloidReadyCombat(_Var1);
PROC_END_HighHallInterior_SelectTargets();
PROC_END_HighHallInterior_TryTargetDropPod();

PROC
PROC_END_HighHallInterior_StartNautiloidEncounter((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_OnlyOnce("END_HighHallInterior_ArenaCameraIntroOnce", _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_WaitAfterJoinCombatCamera(_, _Var1, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_WaitAfterJoinCombatCamera(_Var1);
PROC_END_HighHallInterior_NautiloidReadyCombat(_Var1);

IF
EnteredCombat(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _, _, _, _)
AND
DB_END_HighHallInterior_WaitAfterJoinCombatCamera(_Var2, _, _, _, _)
THEN
PROC_END_HighHallInterior_StartArenaCameraIntro(_Var2, 1);
NOT DB_END_HighHallInterior_WaitAfterJoinCombatCamera(_Var2);

PROC
PROC_END_HighHallInterior_StartArenaCameraIntro(_, _, _, _, _)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidArrived_31c66f5f-9606-42bf-a315-c06430504065, _, _, _, _)
THEN
SetFlag(END_HighHallInterior_State_NautiloidArrived_31c66f5f-9606-42bf-a315-c06430504065);

PROC
PROC_END_HighHallInterior_StartArenaCameraIntro((CHARACTER)_Var1, 1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
RealtimeObjectTimerLaunch(_Var1, "END_HighHallInterior_ArenaCameraIntroCombatStartTimer", 5800);

PROC
PROC_END_HighHallInterior_StartArenaCameraIntro((CHARACTER)_Var1, 1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Is_InCombat(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_PausedCombatPlayer(_Var1, _Var2);
PauseCombat(_Var2);

PROC
PROC_END_HighHallInterior_StartArenaCameraIntro(_, _, _, _, _)
AND
QRY_OnlyOnce("END_HighHallInterior_ArenaCameraIntroOnce", _, _, _, _)
AND
DB_PartyMembers(_Var3, _, _, _, _)
AND
DB_InRegion(_Var3, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _, _, _)
THEN
DB_END_HighHallInterior_WaitingForCamera(_Var3);
SendArenaCameraEvent(_Var3, NULL_00000000-0000-0000-0000-000000000000, "END_HighHallInterior_NautiloidArrivedCamera");

PROC
PROC_END_HighHallInterior_StartArenaCameraIntro(_, _, (CHARACTER)_, (CHARACTER)_, (CHARACTER)_)
THEN
QuestMessageShow("END_HighHallInterior_ReachNetherbrainID", "END_HighHallInterior_ReachNetherbrainQuestMessage");

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "END_HighHallInterior_ArenaCameraIntroCombatStartTimer", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_END_HighHallInterior_SelectTargets();
PROC_END_HighHallInterior_TryTargetDropPod();

IF
ObjectTimerFinished(_, "END_HighHallInterior_ArenaCameraIntroCombatStartTimer", _, _, _)
AND
DB_END_HighHallInterior_PausedCombatPlayer(_Var2, _Var3, _, _, _)
THEN
ResumeCombat(_Var3);
NOT DB_END_HighHallInterior_PausedCombatPlayer(_Var2, _Var3);

PROC
PROC_END_HighHallInterior_StartArenaCameraIntro((CHARACTER)_Var1, 0, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
RealtimeObjectTimerLaunch(_Var1, "END_HighHallInterior_ArenaCameraIntroStealthStartTimer", 5800);

IF
DB_END_HighHallInterior_WaitingForCamera(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
RealtimeObjectTimerLaunch(_Var1, "END_HighHallInterior_FirstKeepGoingADTimer", 7500);

IF
ObjectTimerFinished((CHARACTER)_Var1, "END_HighHallInterior_FirstKeepGoingADTimer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_WaitingForCamera(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_WaitingForCamera(_Var1);
PROC_END_HighHallInterior_TryAfterCameraAD(_Var1);

PROC
PROC_END_HighHallInterior_TryAfterCameraAD((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_END_HighHallInterior_CombatActive(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_BombardmentStartAD", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(END_HighHallInterior_PAD_BombardmentStart_d48f4668-70e9-5684-e1d6-00dc2f3ea616, _Var1);

PROC
PROC_END_HighHallInterior_TryAfterCameraAD((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_CombatActive(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CurrentActivePartyMember(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_BombardmentStartAD", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(END_HighHallInterior_PAD_BombardmentStart_d48f4668-70e9-5684-e1d6-00dc2f3ea616, _Var1);

IF
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_HiddenCharacters(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_WarningShotFired(1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CombatActive(1, _Var1, _Var1, _Var1, _Var1)
AND
GetCombatGroupID(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var3, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(_Var1, _Var3);
PROC_END_HighHallInterior_NautiloidJoinCombat(_Var1, S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623);

PROC
PROC_END_HighHallInterior_NautiloidReadyCombat((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
SetCanJoinCombat(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, 1);
PROC_END_HighHallInterior_SpawnNautiloid();
PROC_END_HighHallInterior_NautiloidJoinCombat(_Var1, S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623);

PROC
PROC_END_HighHallInterior_NautiloidReadyCombat((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_NautiloidSpotterHelpers(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
SetCanJoinCombat(_Var2, 1);
PROC_END_NautiloidStrike_SetForceUpdate(_Var2, 1);
PROC_END_HighHallInterior_NautiloidJoinCombat(_Var1, _Var2);

PROC
PROC_END_HighHallInterior_NautiloidJoinCombat((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_CannonCombatID(_Var3, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
PROC_EnterCombat(_Var2, _Var1);

IF
EnteredCombat(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_END_HighHallInterior_CannonCombatID(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_CannonCombatID(_Var2);
DB_END_HighHallInterior_CannonCombatID(_Var1);

IF
SwitchedCombat(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, (GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_END_HighHallInterior_CannonCombatID(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_CannonCombatID(_Var1);
DB_END_HighHallInterior_CannonCombatID(_Var2);

IF
LeftTrigger((CHARACTER)_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetCombatGroupID(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var2, _Var1, _Var1, _Var1)
AND
GetCombatGroupID(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
_Var2 == _Var3
THEN
SetCombatGroupID(_Var1, "");

IF
CombatRoundStarted((GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CannonCombatID(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_PlayerADTurnCount(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var3, 1, _Var4, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_PlayerADTurnCount(_Var3);
DB_END_HighHallInterior_PlayerADTurnCount(_Var4);

IF
TurnStarted((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Is_InCombat(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk_IgnoreCombat(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CannonCombatID(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_WaitingForCamera(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_HighHallInterior_TryPlayerKeepGoingAD(_Var1);

PROC
PROC_END_HighHallInterior_TryPlayerKeepGoingAD((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_BombardmentStartAD", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(END_HighHallInterior_PAD_BombardmentStart_d48f4668-70e9-5684-e1d6-00dc2f3ea616, _Var1);

PROC
PROC_END_HighHallInterior_TryPlayerKeepGoingAD((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_PlayerADTurnCount(2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_KeepGoingAD1", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(END_HighHallInterior_PAD_KeepGoing_dbbffe8b-a15a-c617-950c-4236350f7fb8, _Var1);

PROC
PROC_END_HighHallInterior_TryPlayerKeepGoingAD((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_PlayerADTurnCount(4, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_KeepGoingAD2", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(END_HighHallInterior_PAD_KeepGoing_dbbffe8b-a15a-c617-950c-4236350f7fb8, _Var1);

IF
TurnStarted(S_GLO_Orpheus_47c90728-af68-4cbc-baaa-6497eebd8d7e, _, _, _, _)
AND
DB_END_IllithidOptionsFollower_Follower(S_GLO_Orpheus_47c90728-af68-4cbc-baaa-6497eebd8d7e, _, _, _, _)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _, _, _, _)
AND
DB_Is_InCombat(S_GLO_Orpheus_47c90728-af68-4cbc-baaa-6497eebd8d7e, _Var4, _, _, _)
AND NOT
DB_CantTalk_IgnoreCombat(S_GLO_Orpheus_47c90728-af68-4cbc-baaa-6497eebd8d7e, _, _, _, _)
AND
DB_END_HighHallInterior_CannonCombatID(_Var4, _, _, _, _)
AND
QRY_OnlyOnce("END_HighHallInterior_OrpheusCombatADOnce", _, _, _, _)
THEN
PROC_TryStartAD(END_HighHallInterior_AD_OrpheusCombatStart_ff44aa46-b473-b9e3-3533-debe8bad747b, S_GLO_Orpheus_47c90728-af68-4cbc-baaa-6497eebd8d7e);

IF
DB_InRegion(_Var1, S_END_WarningShotPoly_e7b609df-682c-47a3-a6c2-977b0f5e1f81, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_HiddenCharacters(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_StealthNautiloidIntro", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_HighHallInterior_StartArenaCameraIntro(_Var1, 0);

PROC
PROC_END_HighHallInterior_NautiloidReadyCombat((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_StealthCheck", _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var2, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_HiddenCharacters(_Var2, _, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var2, _, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
THEN
PROC_END_HighHallInterior_CheckForStealth(_Var2);

PROC
PROC_END_HighHallInterior_CheckForStealth((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
HasActiveStatus(_Var1, "SNEAKING", 1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
THEN
RequestPassiveRoll(_Var1, S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "SkillCheck", "Stealth", Act3_VeryHard_60916b01-ba4c-418e-9f30-19a669704b4d, 0, "END_HighHallInterior_NautiloidStealthCheck");

IF
RollResult("END_HighHallInterior_NautiloidStealthCheck", (CHARACTER)_Var1, _, 0, _, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
RemoveStatus(_Var1, "SNEAKING");

PROC
PROC_END_HighHallInterior_StartArenaCameraIntro((CHARACTER)_Var1, 0, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_InRegion(_Var1, S_END_WarningShotPoly_e7b609df-682c-47a3-a6c2-977b0f5e1f81, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_HiddenCharacters(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
AND
IsInForceTurnBasedMode(_Var1, 0, _Var1, _Var1, _Var1)
THEN
ForceTurnBasedMode(_Var1, 1);

IF
DB_InRegion(_Var1, S_END_WarningShotPoly_e7b609df-682c-47a3-a6c2-977b0f5e1f81, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_HiddenCharacters(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_WarningShotFired(1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_WarningShot", _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(END_HighHallInterior_State_BombardmentStarted_a1c156fb-3ace-46eb-800c-9c452f0a10ea);
PROC_END_HighHallInterior_WarningShot();

IF
DB_Is_InCombat(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_Patrollers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_Is_InCombat(_Var3, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_WarningShotFired(1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_WarningShot", _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(END_HighHallInterior_State_BombardmentStarted_a1c156fb-3ace-46eb-800c-9c452f0a10ea);
PROC_END_HighHallInterior_WarningShot();

PROC
PROC_END_HighHallInterior_WarningShot()
AND
DB_END_HighHallInterior_WarningShotTargetTriggers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
Random(1500, _Var2, _Var1, _Var1, _Var1)
THEN
ObjectTimerLaunch(_Var1, "END_HighHallInterior_WarningShotFire", _Var2, 0);

IF
ObjectTimerFinished((TRIGGER)_Var1, "END_HighHallInterior_WarningShotFire", (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
DB_END_HighHallInterior_WarningShotTargetTriggers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_END_HighHallInterior_CharacterIsInWarningShotTrigger(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
CreateProjectileStrikeAt(_Var1, "ProjectileStrike_END_HighHallInterior_NautiloidWarningStrike");
NOT DB_END_HighHallInterior_WarningShotTargetTriggers(_Var1);
PROC_END_HighHallInterior_CheckForWarningShotComplete();

IF
ObjectTimerFinished((TRIGGER)_Var1, "END_HighHallInterior_WarningShotFire", (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
DB_END_HighHallInterior_WarningShotTargetTriggers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_END_HighHallInterior_CharacterIsInWarningShotTrigger(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_WarningShotTargetTriggers(_Var1);
PROC_END_HighHallInterior_CheckForWarningShotComplete();

QRY
QRY_END_HighHallInterior_CharacterIsInWarningShotTrigger((TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var2, _Var1, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_CharacterIsInWarningShotTrigger((TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
DB_END_HighHallInterior_Enemies(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var2, _Var1, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_END_HighHallInterior_CheckForWarningShotComplete()
AND NOT
DB_END_HighHallInterior_WarningShotTargetTriggers(_, _, _, _, _)
THEN
TimerLaunch("END_HighHallInterior_CannonStartBuffer", 500);

IF
TimerFinished("END_HighHallInterior_CannonStartBuffer", _, _, _, _)
THEN
DB_END_HighHallInterior_WarningShotFired(1);

IF
TurnStarted(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _, _, _, _)
AND
DB_END_HighHallInterior_AllCannonsPrimedOnTargets(1, _, _, _, _)
THEN
NOT DB_OnlyOnce("END_HighHallInterior_PrePositionOncePerTurn");
PROC_END_HighHallInterior_PrePositionNautiloid();

PROC
PROC_END_HighHallInterior_PrePositionNautiloid()
AND
DB_END_NautiloidStrike_PrimedStrikeHelpers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_OnlyOnce("END_HighHallInterior_PrePositionOncePerTurn", _Var1, _Var1, _Var1, _Var1)
THEN
DB_OnlyOnce("END_HighHallInterior_PrePositionOncePerTurn");
TeleportTo(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var1, "END_HighHallInterior_ArrivedAtPrePosition");

IF
EntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_ArrivedAtPrePosition", _, _, _)
THEN
NOT DB_END_HighHallInterior_AllCannonsPrimedOnTargets(1);
PROC_END_HighHallInterior_FiringCamera();
PROC_END_HighHallInterior_AnimateCannons();
SetEntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_Firing");
SetEntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_DropPod");

PROC
PROC_END_HighHallInterior_FiringCamera()
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
THEN
SendArenaCameraEvent(_Var1, NULL_00000000-0000-0000-0000-000000000000, "END_HighHallInterior_CINE_NautiloidFires");

IF
EntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_StartFiring", _, _, _)
THEN
PROC_END_NautiloidStrike_FireSequence();

PROC
PROC_END_HighHallInterior_AnimateCannons()
AND
DB_END_HighHallInterior_Cannons(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
Random(1500, _Var2, _Var1, _Var1, _Var1)
THEN
RealTimeObjectTimerLaunch(_Var1, "END_HighHallInterior_AnimateCannon", _Var2);

IF
ObjectTimerFinished((CHARACTER)_Var1, "END_HighHallInterior_AnimateCannon", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_Cannons(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetEntityEvent(_Var1, "END_NautiloidCannonFire", 1);

IF
EntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_FireDropPod", _, _, _)
THEN
RealtimeObjectTimerLaunch(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_HighHallInterior_ClearDropPodVFX", 1500);
TeleportTo(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_HighHallInterior_ArrivedAtDropPodPosition");

IF
EntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_ArrivedAtDropPodPosition", _, _, _)
THEN
UseSpell(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "ProjectileStrike_END_HighHallInterior_IntDevMindFlayerPodStrike", S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2);

IF
ObjectTimerFinished(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_HighHallInterior_ClearDropPodVFX", _, _, _)
THEN
RemoveStatus(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_HIGHHALLINTERIOR_DROPPODTARGET_VFX");
RemoveStatus(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_BOMBARDMENT_AI_AVOIDAREA");

IF
EntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_DropPodsDone", (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_END_HighHallInterior_AvailableDropPodCount(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSubtract(_Var1, 1, _Var2, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_AvailableDropPodCount(_Var1);
DB_END_HighHallInterior_AvailableDropPodCount(_Var2);

PROC
PROC_END_NautiloidStrike_DropPodCharSet((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetCombatGroupID(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var2, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(_Var1, _Var2);
DB_END_HighHallInterior_Enemies(_Var1);

PROC
PROC_END_NautiloidStrike_MindFlayerPodCharSet((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_END_HighHallInterior_DropPodMindFlayers(_Var1);
SetStayInAiHints(_Var1, 1);
SetAiHint(_Var1, AI_HINT_UNIQUE_1902723d-dd16-4e7a-87d6-7b07f63add79);
SetFaction(_Var1, ACT3_END_HighHallNautiloid_8b226cb2-c089-49b5-b73c-6cca493df263);

PROC
PROC_END_NautiloidStrike_IntDevPodCharSet((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_END_HighHallInterior_DropPodIntDevs(_Var1);
RequestSetSwarmGroup(_Var1, "END_HighHallInterior_IntDevs");
SetFaction(_Var1, ACT3_END_HighHallNautiloid_8b226cb2-c089-49b5-b73c-6cca493df263);

PROC
PROC_END_NautiloidStrike_IntDevPodDetonatorCharSet((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_END_HighHallInterior_DropPodIntDevs(_Var1);
RequestSetSwarmGroup(_Var1, "END_HighHallInterior_IntDevsDetonators");
SetStayInAiHints(_Var1, 1);
SetAiHint(_Var1, AI_HINT_UNIQUE_1902723d-dd16-4e7a-87d6-7b07f63add79);
SetFaction(_Var1, ACT3_END_HighHallNautiloid_8b226cb2-c089-49b5-b73c-6cca493df263);

IF
Died((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_DropPodIntDevs(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_DropPodIntDevs(_Var1);

IF
Died((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_DropPodMindFlayers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_DropPodMindFlayers(_Var1);
PROC_END_HighHallInterior_CheckAvailableDropPods();

PROC
PROC_END_HighHallInterior_CheckAvailableDropPods()
AND
DB_END_HighHallInterior_AvailableDropPodCount(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var1, 1, _Var2, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_AvailableDropPodCount(_Var1);
DB_END_HighHallInterior_AvailableDropPodCount(_Var2);

IF
TurnStarted(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _, _, _, _)
AND NOT
DB_END_HighHallInterior_AllCannonsPrimedOnTargets(1, _, _, _, _)
THEN
SetEntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_Targeting");

IF
UsingSpell(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "Shout_END_Nautiloid_HighHallInterior_Targeting", _, _, _)
AND NOT
DB_END_HighHallInterior_SelectedTargetsThisTurn(1, _, _, _, _)
THEN
DB_END_HighHallInterior_SelectedTargetsThisTurn(1);
PlaySound(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "SE_NB_ProjectileStrike_Prepare");
PROC_END_HighHallInterior_SelectTargets();

PROC
PROC_END_HighHallInterior_SelectTargets()
AND
DB_END_HighHallInterior_TotalTargetCount(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_TotalTargetCount(_Var1);
DB_END_HighHallInterior_TotalTargetCount(0);

PROC
PROC_END_HighHallInterior_SelectTargets()
AND
DB_END_HighHallInterior_PrimedCannonCount(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_PrimedCannonCount(_Var1);
DB_END_HighHallInterior_PrimedCannonCount(0);

PROC
PROC_END_IncreaseTotalTargetCount()
AND
DB_END_HighHallInterior_TotalTargetCount(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var1, 1, _Var2, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_TotalTargetCount(_Var1);
DB_END_HighHallInterior_TotalTargetCount(_Var2);

PROC
PROC_END_HighHallInterior_SelectTargets()
AND
DB_END_HighHallInterior_TargetedPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_TargetedPlayer(_Var1);

PROC
PROC_END_HighHallInterior_SelectTargets()
THEN
PROC_END_HighHallInterior_SelectPlayerTargets();

PROC
PROC_END_HighHallInterior_SelectPlayerTargets()
AND
QRY_END_HighHallInterior_GetNearestPlayerToSafeRoom()
AND
DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var1, _, _Var1, _Var1, _Var1)
AND
Random(1500, _Var3, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_TargetedPlayer(_Var1);
PROC_END_IncreaseTotalTargetCount();
RealTimeObjectTimerLaunch(_Var1, "END_HighHallInterior_SelectPlayerTarget", _Var3);

PROC
PROC_END_HighHallInterior_SelectPlayerTargets()
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND NOT
DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_HiddenCharacters(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Downed(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_END_HighHallInterior_PlayerIsNearOtherTargetedPlayers(_Var1, 5, _Var1, _Var1, _Var1)
AND
Random(1500, _Var4, _Var1, _Var1, _Var1)
THEN
DB_END_HighHallInterior_TargetedPlayer(_Var1);
PROC_END_IncreaseTotalTargetCount();
RealTimeObjectTimerLaunch(_Var1, "END_HighHallInterior_SelectPlayerTarget", _Var4);

QRY
QRY_END_HighHallInterior_GetNearestPlayerToSafeRoom()
AND
QRY_END_HighHallInterior_ClearNearestSafeRoomPlayerDB()
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Downed(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetDistanceTo(_Var1, S_END_PlayerDistancePoint_7f7cced3-1d3c-4f31-b2b3-040b1ce05d60, _Var2, _Var1, _Var1)
THEN
DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var1, _Var2);

QRY
QRY_END_HighHallInterior_ClearNearestSafeRoomPlayerDB()
AND
DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var1, _Var2);

IF
DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
_Var3 != _Var1
AND
_Var4 >= _Var2
THEN
NOT DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var3, _Var4);

QRY
QRY_END_HighHallInterior_PlayerIsNearOtherTargetedPlayers((CHARACTER)_Var1, (REAL)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_TargetedPlayer(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var3
AND
GetDistanceTo(_Var1, _Var3, _Var4, _Var1, _Var1)
AND
_Var4 <= _Var2
THEN
DB_NOOP(1);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "END_HighHallInterior_SelectPlayerTarget", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetPosition(_Var1, _Var2, _Var3, _Var4, _Var1)
AND
QRY_END_HighHallInterior_RandomOffSetPlayerTargetPosition(_Var2, _Var4, _Var1, _Var1, _Var1)
AND
DB_QRY_RTN_RandomOffSetPlayerTargetPosition(_Var5, _Var6, _Var1, _Var1, _Var1)
AND
FindValidPosition(_Var5, _Var3, _Var6, 5, _Var1, 0, _Var7, _, _Var9, _Var1)
THEN
NOT DB_QRY_RTN_RandomOffSetPlayerTargetPosition(_Var5, _Var6);
PROC_END_NautiloidStrike_SetTarget(_Var7, _Var9);
PROC_END_HighHallInterior_IncreasePrimedCount();

IF
DB_END_HighHallInterior_PositiveOrNegativeOptions(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_RandomOffSetPlayerTargetPosition((REAL)_Var1, (REAL)_Var2, (REAL)_Var1, (REAL)_Var1, (REAL)_Var1)
AND
Random(4, _Var3, _Var1, _Var1, _Var1)
AND
Random(4, _Var4, _Var1, _Var1, _Var1)
AND
QRY_GetRandom("DB_END_HighHallInterior_PositiveOrNegativeOptions", 2, "DB_QRY_RTN_END_HighHallInterior_RandomPositiveOrNegative", _Var1, _Var1)
AND
DB_QRY_RTN_END_HighHallInterior_RandomPositiveOrNegative(_Var5, _Var6, _Var1, _Var1, _Var1)
AND
IntegerProduct(_Var5, _Var3, _Var7, _Var1, _Var1)
AND
IntegerProduct(_Var6, _Var4, _Var8, _Var1, _Var1)
AND
IntegerToReal(_Var7, _Var9, _Var1, _Var1, _Var1)
AND
IntegerToReal(_Var8, _Var10, _Var1, _Var1, _Var1)
AND
RealSum(_Var1, _Var9, _Var11, _Var1, _Var1)
AND
RealSum(_Var2, _Var10, _Var12, _Var1, _Var1)
THEN
DB_QRY_RTN_RandomOffSetPlayerTargetPosition(_Var11, _Var12);
NOT DB_QRY_RTN_END_HighHallInterior_RandomPositiveOrNegative(_Var5, _Var6);

IF
DB_END_HighHallInterior_CannonCluster(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_TriggerRegisterForParty(_Var1);

IF
DB_END_HighHallInterior_CannonCluster(_Var1, _, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_Enemies(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
TriggerRegisterForCharacter(_Var1, _Var3);

PROC
PROC_END_HighHallInterior_SelectTargets()
AND
DB_END_HighHallInterior_SelectedTargetTrigger(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_SelectedTargetTrigger(_Var1);

PROC
PROC_END_HighHallInterior_SelectTargets()
AND
DB_END_HighHallInterior_ActiveWave(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_WaveClusters(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
QRY_DoNTimes(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRY_RTN_DoNTimes(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
QRY_END_HighHallInterior_GetUnoccupiedTriggers(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRTN_END_HighHallInterior_UnoccupiedTriggerIndexCount(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
_Var4 >= 0
AND
Random(_Var4, _Var5, _Var1, _Var1, _Var1)
AND
DB_QRTN_END_HighHallInterior_UnoccupiedClusterTriggers(_Var6, _Var5, _Var1, _Var1, _Var1)
AND
Random(1500, _Var7, _Var1, _Var1, _Var1)
THEN
RealTimeObjectTimerLaunch(_Var6, "END_HighHallInterior_SelectTarget", _Var7);
DB_END_HighHallInterior_SelectedTargetTrigger(_Var6);
PROC_END_IncreaseTotalTargetCount();

QRY
QRY_END_HighHallInterior_GetUnoccupiedTriggers(_, _, _, _, _)
AND
DB_QRTN_END_HighHallInterior_UnoccupiedClusterTriggers(_Var2, _Var3, _, _, _)
THEN
NOT DB_QRTN_END_HighHallInterior_UnoccupiedClusterTriggers(_Var2, _Var3);

QRY
QRY_END_HighHallInterior_GetUnoccupiedTriggers(_, _, _, _, _)
AND
DB_QRTN_END_HighHallInterior_UnoccupiedTriggerIndexCount(_Var2, _, _, _, _)
THEN
NOT DB_QRTN_END_HighHallInterior_UnoccupiedTriggerIndexCount(_Var2);
DB_QRTN_END_HighHallInterior_UnoccupiedTriggerIndexCount(-1);

QRY
QRY_END_HighHallInterior_GetUnoccupiedTriggers((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_END_HighHallInterior_CannonCluster(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_END_HighHallInterior_AnyCharacterInTargetTrigger(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_END_HighHallInterior_TriggerWithinPartyRange(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRTN_END_HighHallInterior_UnoccupiedTriggerIndexCount(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var3, 1, _Var4, _Var1, _Var1)
THEN
NOT DB_QRTN_END_HighHallInterior_UnoccupiedTriggerIndexCount(_Var3);
DB_QRTN_END_HighHallInterior_UnoccupiedTriggerIndexCount(_Var4);
DB_QRTN_END_HighHallInterior_UnoccupiedClusterTriggers(_Var2, _Var4);

QRY
QRY_END_HighHallInterior_AnyCharacterInTargetTrigger((TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_AnyCharacterInTargetTrigger((TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
DB_END_HighHallInterior_Enemies(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_IntDevSwarmEnemy(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_DropPodIntDevs(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_TriggerWithinPartyRange((TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var2, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND
GetPosition(_Var2, _Var3, _, _Var5, _Var1)
AND
GetPosition(_Var1, _Var6, _, _Var8, _Var1)
AND
RealSum(_Var3, 40, _Var9, _Var1, _Var1)
AND
RealSubtract(_Var3, 15, _Var10, _Var1, _Var1)
AND
QRY_END_HighHallInterior_DistanceWithinMinMaxRange(_Var10, _Var9, _Var6, _Var1, _Var1)
AND
RealSum(_Var5, 25, _Var11, _Var1, _Var1)
AND
RealSubtract(_Var5, 25, _Var12, _Var1, _Var1)
AND
QRY_END_HighHallInterior_DistanceWithinMinMaxRange(_Var12, _Var11, _Var8, _Var1, _Var1)
AND
GUIDToString(_Var1, _Var13, _Var1, _Var1, _Var1)
AND
Concatenate(_Var13, " is within player targeting range.", _Var14, _Var1, _Var1)
THEN
DebugBreak(_Var14);
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_DistanceWithinMinMaxRange((REAL)_Var1, (REAL)_Var2, (REAL)_Var3, (REAL)_Var1, (REAL)_Var1)
AND
_Var3 <= _Var2
AND
_Var3 >= _Var1
THEN
DB_NOOP(1);

IF
ObjectTimerFinished((TRIGGER)_Var1, "END_HighHallInterior_SelectTarget", (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
TriggerGetRandomPosition(_Var1, _Var2, _Var3, _Var4, _Var1)
THEN
NOT DB_END_HighHallInterior_FoundValidTriggerPosition(1);
PROC_END_HighHallInterior_TrySetTriggerTarget(_Var1, _Var2, _Var3, _Var4);

PROC
PROC_END_HighHallInterior_TrySetTriggerTarget((TRIGGER)_Var1, (REAL)_Var2, (REAL)_Var3, (REAL)_Var4, (TRIGGER)_Var1)
AND
FindValidPosition(_Var2, _Var3, _Var4, 5, S_END_NautiloidStrikeTargetHelper_001_d9f6374e-f2ec-42e1-8be8-59f24e9c0091, 0, _Var5, _Var6, _Var7, _Var1)
THEN
DB_END_HighHallInterior_FoundValidTriggerPosition(1);
PROC_END_NautiloidStrike_SetTarget(_Var5, _Var7);
PROC_END_HighHallInterior_IncreasePrimedCount();

PROC
PROC_END_HighHallInterior_TrySetTriggerTarget((TRIGGER)_Var1, _, _, _, (TRIGGER)_Var1)
AND NOT
DB_END_HighHallInterior_FoundValidTriggerPosition(1, _Var1, _Var1, _Var1, _Var1)
AND
GetPosition(_Var1, _Var5, _Var6, _Var7, _Var1)
AND
FindValidPosition(_Var5, _Var6, _Var7, 5, S_END_NautiloidStrikeTargetHelper_001_d9f6374e-f2ec-42e1-8be8-59f24e9c0091, 0, _Var8, _Var9, _Var10, _Var1)
THEN
PROC_END_NautiloidStrike_SetTarget(_Var8, _Var10);
PROC_END_HighHallInterior_IncreasePrimedCount();

PROC
PROC_END_HighHallInterior_TryTargetDropPod()
AND
DB_QRTN_END_HighHallInterior_NearestInterceptTrigger(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_QRTN_END_HighHallInterior_NearestInterceptTrigger(_Var1, _Var2);

PROC
PROC_END_HighHallInterior_TryTargetDropPod()
AND
DB_QRTN_END_HighHallInterior_InterceptPosition(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
NOT DB_QRTN_END_HighHallInterior_InterceptPosition(_Var1, _Var2, _Var3);

PROC
PROC_END_HighHallInterior_TryTargetDropPod()
AND
DB_END_HighHallInterior_AvailableDropPodCount(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 > 0
AND
QRY_END_HighHallInterior_GetTriggerNearestToIntercept()
AND
DB_QRTN_END_HighHallInterior_NearestInterceptTrigger(_Var2, _, _Var1, _Var1, _Var1)
AND
Random(1500, _Var4, _Var1, _Var1, _Var1)
THEN
ClearFlag(END_HighHallInterior_State_MindFlayerPodsReady_db580a5a-b7e7-4245-8796-7c6b388c37ee);
RealTimeObjectTimerLaunch(_Var2, "END_HighHallInterior_SelectDropPodTarget", _Var4);

PROC
PROC_END_HighHallInterior_TryTargetDropPod()
AND
DB_END_HighHallInterior_AvailableDropPodCount(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 <= 0
THEN
SetFlag(END_HighHallInterior_State_MindFlayerPodsReady_db580a5a-b7e7-4245-8796-7c6b388c37ee);

QRY
QRY_END_HighHallInterior_GetTriggerNearestToIntercept()
AND
QRY_END_HighHallInterior_GetNearestPlayerToSafeRoom()
AND
DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_END_HighHallInterior_GetIntercept(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRTN_END_HighHallInterior_InterceptPosition(_Var3, _Var4, _Var5, _Var1, _Var1)
AND
DB_END_HighHallInterior_CannonCluster(_Var6, _, _Var1, _Var1, _Var1)
AND NOT
QRY_END_HighHallInterior_AnyCharacterInTargetTrigger(_Var6, _Var1, _Var1, _Var1, _Var1)
AND
GetPosition(_Var1, _, _, _Var10, _Var1)
AND
RealSum(_Var10, 25, _Var11, _Var1, _Var1)
AND
RealSubtract(_Var10, 25, _Var12, _Var1, _Var1)
AND
GetPosition(_Var6, _, _, _Var15, _Var1)
AND
QRY_END_HighHallInterior_DistanceWithinMinMaxRange(_Var12, _Var11, _Var15, _Var1, _Var1)
AND NOT
DB_END_HighHallInterior_SelectedTargetTrigger(_Var6, _Var1, _Var1, _Var1, _Var1)
AND
GetDistanceToPosition(_Var6, _Var3, _Var4, _Var5, _Var16)
THEN
DB_QRTN_END_HighHallInterior_NearestInterceptTrigger(_Var6, _Var16);

IF
DB_QRTN_END_HighHallInterior_NearestInterceptTrigger(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRTN_END_HighHallInterior_NearestInterceptTrigger(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
_Var3 != _Var1
AND
_Var4 >= _Var2
THEN
NOT DB_QRTN_END_HighHallInterior_NearestInterceptTrigger(_Var3, _Var4);

QRY
QRY_END_HighHallInterior_GetIntercept((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetPosition(_Var1, _Var2, _Var3, _Var4, _Var1)
AND
GetPosition(S_END_DropPodDoorDistancePoint_7f7cced3-1d3c-4f31-b2b3-040b1ce05d60, _Var5, _Var6, _Var7, _Var1)
AND
RealSum(_Var2, _Var5, _Var8, _Var1, _Var1)
AND
RealSum(_Var3, _Var6, _Var9, _Var1, _Var1)
AND
RealSum(_Var4, _Var7, _Var10, _Var1, _Var1)
AND
DB_END_HighHallInterior_InterceptDistance(_Var11, _Var1, _Var1, _Var1, _Var1)
AND
RealDivide(_Var8, _Var11, _Var12, _Var1, _Var1)
AND
RealDivide(_Var9, _Var11, _Var13, _Var1, _Var1)
AND
RealDivide(_Var10, _Var11, _Var14, _Var1, _Var1)
THEN
DB_QRTN_END_HighHallInterior_InterceptPosition(_Var12, _Var13, _Var14);

IF
ObjectTimerFinished((TRIGGER)_Var1, "END_HighHallInterior_SelectDropPodTarget", (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
TriggerGetRandomPosition(_Var1, _Var2, _Var3, _Var4, _Var1)
AND
GetPosition(_Var1, _, _Var6, _, _Var1)
AND
RealSum(_Var6, 5, _Var8, _Var1, _Var1)
AND
FindValidPosition(_Var2, _Var8, _Var4, 5, S_END_NautiloidStrikeTargetHelper_001_d9f6374e-f2ec-42e1-8be8-59f24e9c0091, 0, _Var9, _Var10, _Var11, _Var1)
THEN
PROC_END_HighHallInterior_ReadyDropPodTargetVFX(_Var1, _Var9, _Var10, _Var11);

PROC
PROC_OneShotTriggerEntered((CHARACTER)_Var1, S_END_MindFlayerSpawnReadyBox_0b1dae83-b08a-410f-9e31-6f49d04c2448, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
SetEntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_ReadyMindFlayerPod");

PROC
PROC_END_HighHallInterior_IncreasePrimedCount()
AND NOT
DB_END_HighHallInterior_AllCannonsPrimedOnTargets(1, _, _, _, _)
AND
DB_END_HighHallInterior_PrimedCannonCount(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var1, 1, _Var2, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_PrimedCannonCount(_Var1);
DB_END_HighHallInterior_PrimedCannonCount(_Var2);
PROC_END_HighHallInterior_CheckForAllCannonsPrimed();

PROC
PROC_END_HighHallInterior_ReadyDropPodTargetVFX((TRIGGER)_Var1, (REAL)_Var2, (REAL)_Var3, (REAL)_Var4, (TRIGGER)_Var1)
AND
DB_QRTN_END_HighHallInterior_NearestInterceptTrigger(_Var1, _, _Var1, _Var1, _Var1)
AND
RealSum(_Var3, 5, _Var6, _Var1, _Var1)
THEN
TeleportToPosition(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, _Var2, _Var6, _Var4, "END_HighHallInterior_DropPodVFXPointArrived", 0, 0, 0, 0, 1);

IF
EntityEvent((GUIDSTRING)_Var1, "END_HighHallInterior_DropPodVFXPointArrived", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
ApplyStatus(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_HIGHHALLINTERIOR_DROPPODTARGET_VFX", -1, 1, S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623);
ApplyStatus(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_BOMBARDMENT_AI_AVOIDAREA", -1, 1, S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623);

PROC
PROC_END_HighHallInterior_CheckForAllCannonsPrimed()
AND
DB_END_HighHallInterior_PrimedCannonCount(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_TotalTargetCount(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 >= _Var2
THEN
DB_END_HighHallInterior_AllCannonsPrimedOnTargets(1);
PROC_END_HighHallInterior_TryTargetDropPod();
PROC_END_HighHallInterior_MoveNautiloidToNearestTargetToPlayer();

PROC
PROC_END_HighHallInterior_MoveNautiloidToNearestTargetToPlayer()
AND
QRY_END_HighHallInterior_GetNearestPlayerToSafeRoom()
AND
DB_QRYRTN_END_HighHallInterior_NearestPlayerToSafeRoom(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_END_HighHallInterior_NearestTargetToPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_END_HighHallInterior_NearestTargetToPlayer(_Var3, _, _Var1, _Var1, _Var1)
THEN
TeleportTo(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var3, "");

QRY
QRY_END_HighHallInterior_NearestTargetToPlayer((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_NautiloidStrike_PrimedStrikeHelpers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetDistanceTo(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
DB_QRYRTN_END_HighHallInterior_NearestTargetToPlayer(_Var2, _Var3);

IF
DB_QRYRTN_END_HighHallInterior_NearestTargetToPlayer(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_END_HighHallInterior_NearestTargetToPlayer(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
_Var1 != _Var3
AND
_Var4 >= _Var2
THEN
NOT DB_QRYRTN_END_HighHallInterior_NearestTargetToPlayer(_Var3, _Var4);

IF
EntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_FiringDone", _, _, _)
THEN
PROC_END_HighHallInterior_ProgressWave();

PROC
PROC_END_HighHallInterior_EndNautiloidTurn()
AND
DB_END_HighHallInterior_AfterEnteredCombatBehaviourReady(1, _, _, _, _)
THEN
SetEntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_EndTurn");

PROC
PROC_END_HighHallInterior_EndNautiloidTurn()
AND NOT
DB_END_HighHallInterior_AfterEnteredCombatBehaviourReady(1, _, _, _, _)
THEN
DB_END_HighHallInterior_AfterEnteredCombatBehaviourReady(1);

IF
DB_END_HighHallInterior_WavePushTriggers(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_OneShotPlayerTrigger(_Var1);

PROC
PROC_OneShotTriggerEntered((CHARACTER)_Var1, (TRIGGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_WavePushTriggers(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_ActiveWave(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 > _Var4
THEN
NOT DB_END_HighHallInterior_WavePushTriggers(_Var2, _Var3);
NOT DB_END_HighHallInterior_ActiveWave(_Var4);
DB_END_HighHallInterior_ActiveWave(_Var3);

PROC
PROC_END_HighHallInterior_ProgressWave()
AND
DB_END_HighHallInterior_ActiveWave(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_TotalWaveCount(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 < _Var2
AND
IntegerSum(_Var1, 1, _Var3, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_ActiveWave(_Var1);
DB_END_HighHallInterior_ActiveWave(_Var3);

IF
TurnEnded(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _, _, _, _)
AND
DB_END_HighHallInterior_SelectedTargetsThisTurn(1, _, _, _, _)
THEN
NOT DB_END_HighHallInterior_SelectedTargetsThisTurn(1);

IF
LeftCombat(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _, _, _, _)
AND
DB_END_HighHallInterior_SelectedTargetsThisTurn(1, _, _, _, _)
THEN
NOT DB_END_HighHallInterior_SelectedTargetsThisTurn(1);

IF
LeftTrigger((CHARACTER)_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_CannonCombatID(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_TriggerEvents_AnyPlayerInTrigger(S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_HighHallInterior_StopAllCannons();
PROC_END_HighHallInterior_TryNautiloidLeaveCombat();

IF
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CannonCombatID(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_END_HighHallInterior_AnyLivingPlayersLeftInTrigger()
THEN
PROC_END_HighHallInterior_StopAllCannons();
PROC_END_HighHallInterior_TryNautiloidLeaveCombat();
SetEntityEvent(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "END_HighHallInterior_Reset");

QRY
QRY_END_HighHallInterior_AnyLivingPlayersLeftInTrigger()
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_END_HighHallInterior_TryNautiloidLeaveCombat()
AND
IsInCombat(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, 1, _, _, _)
AND NOT
DB_END_HighHallInterior_NautiloidLeavingCombat(1, _, _, _, _)
THEN
DB_END_HighHallInterior_NautiloidLeavingCombat(1);
PROC_END_HighHallInterior_NautiloidLeaveCombat();

PROC
PROC_END_HighHallInterior_NautiloidLeaveCombat()
AND
DB_END_HighHallInterior_AfterEnteredCombatBehaviourReady(1, _, _, _, _)
THEN
NOT DB_END_HighHallInterior_AfterEnteredCombatBehaviourReady(1);

PROC
PROC_END_HighHallInterior_NautiloidLeaveCombat()
AND
DB_END_HighHallInterior_CombatActive(1, _, _, _, _)
THEN
NOT DB_END_HighHallInterior_CombatActive(1);

PROC
PROC_END_HighHallInterior_NautiloidLeaveCombat()
AND
DB_END_NautiloidHelper_Position(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var1, _Var2, _Var3, _Var1)
THEN
SetCanJoinCombat(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, 0);
LeaveCombat(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623);
TeleportToPosition(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var1, _Var2, _Var3, "", 0, 0, 0);

IF
LeftCombat(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _, _, _, _)
AND
DB_END_HighHallInterior_NautiloidLeavingCombat(1, _, _, _, _)
THEN
NOT DB_END_HighHallInterior_NautiloidLeavingCombat(1);

PROC
PROC_END_HighHallInterior_NautiloidLeaveCombat()
AND
DB_END_HighHallInterior_NautiloidSpotterHelpers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetCanJoinCombat(_Var1, 0);
SetForceUpdate(_Var1, 0);
LeaveCombat(_Var1);

PROC
PROC_END_HighHallInterior_StopAllCannons()
THEN
PROC_END_NautiloidStrike_ClearAll();
RemoveStatus(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_HIGHHALLINTERIOR_DROPPODTARGET_VFX");
RemoveStatus(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_BOMBARDMENT_AI_AVOIDAREA");
NOT DB_END_HighHallInterior_AllCannonsPrimedOnTargets(1);

PROC
PROC_END_HighHallInterior_StopAllCannons()
AND
DB_END_HighHallInterior_CannonTargets(_Var1, _Var2, _Var3, _Var4, _Var5)
THEN
NOT DB_END_HighHallInterior_CannonTargets(_Var1, _Var2, _Var3, _Var4, _Var5);

IF
DB_InRegion(_Var1, S_END_NautiloidSafeZoneBox_fee49087-ff00-4e2f-af26-43f855014c90, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PlayerSummons(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_END_HighHallInterior_TryEndBombardmentDialog(_Var1);

PROC
PROC_END_HighHallInterior_TryEndBombardmentDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318);
PROC_END_HighHallInterior_BombardmentEndDialog(_Var1);

IF
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _, _, _, _)
AND
DB_GlobalFlag(END_HighHallInterior_Event_MovePlayersToSafeRoom_78aa738e-77d1-4cc9-a41d-12f63770863e, _, _, _, _)
THEN
PROC_END_HighHallInterior_EndBombardment();

IF
DialogEnded(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23, _, _, _, _)
AND NOT
DB_GlobalFlag(END_HighHallInterior_Event_MovePlayersToSafeRoom_78aa738e-77d1-4cc9-a41d-12f63770863e, _, _, _, _)
THEN
PROC_END_HighHallInterior_EndBombardment();

PROC
PROC_END_HighHallInterior_EndBombardment()
AND
QRY_OnlyOnce("END_HighHallInterior_EndBombardmentOnce", _, _, _, _)
THEN
RemoveStatus(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_HIGHHALLINTERIOR_DROPPODTARGET_VFX");
RemoveStatus(S_END_DropPodTargetHelper_001_e433abd4-015c-4cdd-a86d-a446105f7ea2, "END_BOMBARDMENT_AI_AVOIDAREA");
QuestMessageHide("END_HighHallInterior_ReachNetherbrainID");
PROC_END_HighHallInterior_NautiloidDisappear();
PROC_END_HighHallInterior_StopAllCannons();
PROC_END_HighHallInterior_NautiloidLeaveCombat();
PROC_END_HighHallInterior_KillStragglers();
PROC_END_HighHallInterior_ToppleStatue();

PROC
PROC_END_HighHallInterior_NautiloidDisappear()
THEN
PROC_Poof(S_END_Nautiloid_001_2566e431-2d5a-45b4-9e6c-6cf04e01404d);
PROC_Poof(S_END_IntDevPodLauncher_001_f8a678a3-6cc5-4cfb-a781-53de0262cf94);
PROC_END_NautiloidStrike_ClearForceUpdatedObjects();

PROC
PROC_END_HighHallInterior_NautiloidDisappear()
AND
DB_END_HighHallInterior_Cannons(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetOnStage(_Var1, 0);

PROC
PROC_END_HighHallInterior_NautiloidDisappear()
AND
DB_END_HighHallInterior_CannonPlatforms(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
UnloadLevelTemplate(_Var1);

PROC
PROC_END_HighHallInterior_BombardmentEndDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_OnlyOnce("END_HighHallInterior_NautiloidDialogOnce", _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_StartDialogCustom(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23, S_GLO_Netherbrain_3858e896-d7dd-4699-b37d-d3919ff15ba7, _Var1, 0, 0, 0, 0, _Var1, _Var1, _Var1)
THEN
PROC_END_HighHallInterior_EndBombardment();

PROC
PROC_StartDialog_AddExtraSpeakers(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var2, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND NOT
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
AND NOT
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddListeningActor(_Var1, _Var2);

IF
DialogEnded(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
DB_AutoSaveTrigger(S_END_HighHallInteriorSafeRoom_AutoSave_0a1dd14e-c249-46b6-ae0c-b56e64496c6c);

IF
FlagSet(END_HighHallInterior_Event_MovePlayersToSafeRoom_78aa738e-77d1-4cc9-a41d-12f63770863e, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_END_HighHallInterior_MovePlayersToSafeRoom();

PROC
PROC_END_HighHallInterior_MovePlayersToSafeRoom()
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_END_SafeRoomAfterDialogPoint_cda48235-107f-43e5-89af-b5f89d47d610);

PROC
PROC_END_HighHallInterior_EndBombardment()
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(_Var1, "");

PROC
PROC_END_HighHallInterior_EndBombardment()
THEN
SetCombatGroupID(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, "");

PROC
PROC_END_HighHallInterior_EndBombardment()
AND
DB_END_HighHallInterior_NautiloidSpotterHelpers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(_Var1, "");

IF
DB_END_HighHallInterior_Enemies(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TriggerRegisterForCharacter(S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, _Var1);

PROC
PROC_END_HighHallInterior_KillStragglers()
AND
DB_END_HighHallInterior_Enemies(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var1, S_END_NautiloidCannonPoly_dcf15690-5483-40b2-8753-5d44a40ceb21, 1, _Var1, _Var1)
AND
Random(2, _Var2, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var2, 2, _Var3, _Var1, _Var1)
AND
IntegerToReal(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
Die(_Var1, 0, _Var1, 1, 1, 0);
CreateSurface(_Var1, "SurfaceFire", _Var4, -1, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_END_HighHallInterior_KillStragglers()
AND
DB_END_HighHallInterior_FirePoints(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
Random(3, _Var2, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var2, 1, _Var3, _Var1, _Var1)
AND
IntegerToReal(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
CreateSurface(_Var1, "SurfaceFire", _Var4, -1, NULL_00000000-0000-0000-0000-000000000000);

IF
Died((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_END_HighHallInterior_Guards(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_Enemies(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CurrentDeadEnemyCount(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var2, 1, _Var3, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_CurrentDeadEnemyCount(_Var2);
DB_END_HighHallInterior_CurrentDeadEnemyCount(_Var3);
NOT DB_END_HighHallInterior_Enemies(_Var1);
DB_END_HighHallInterior_DeadEnemies(_Var1, _Var3);

IF
DB_END_HighHallInterior_DeadEnemies(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
SysCount("DB_END_HighHallInterior_DeadEnemies", 2, _Var3, _Var1, _Var1)
AND
DB_END_HighHallInterior_MaxDeadEnemyCount(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 > _Var4
THEN
PROC_END_HighHallInterior_RemoveDeadEnemy();

PROC
PROC_END_HighHallInterior_RemoveDeadEnemy()
AND
DB_END_HighHallInterior_CurrentDespawnEnemyIndex(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_DeadEnemies(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var1, 1, _Var3, _Var1, _Var1)
AND
Random(3500, _Var4, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_CurrentDespawnEnemyIndex(_Var1);
DB_END_HighHallInterior_CurrentDespawnEnemyIndex(_Var3);
RealtimeObjectTimerLaunch(_Var2, "END_HighHallInterior_RemoveDeadEnemyTimer", _Var4);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "END_HighHallInterior_RemoveDeadEnemyTimer", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PlayEffect(_Var1, VFX_Status_END_DropPod_Disappear_ApplyEffect_01_4ac01809-5697-1a44-137d-1e125b43c3a1);
PROC_FadeOutEntity(_Var1, "END_HighHallInterior_RemoveDeadEnemy");

IF
EntityEvent((CHARACTER)_Var1, "END_HighHallInterior_RemoveDeadEnemy", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_DeadEnemies(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_DeadEnemies(_Var1, _Var2);
RequestDeleteTemporary(_Var1);

IF
DB_END_HighHallInterior_FodderReadyTriggers(_, _, _Var3, _, _)
THEN
PROC_TriggerRegisterForParty(_Var3);

PROC
PROC_END_HighHallInterior_WarningShot()
THEN
PROC_END_HighHallInterior_ReadyEnemyFodder();

PROC
PROC_END_HighHallInterior_ReadyEnemyFodder()
AND
QRY_TriggerEvents_AnyPlayerInTrigger(S_END_EnemyStartSidePoly_Left_2dab35de-1d2e-4b5a-a423-30a2f1e3d256, _, _, _, _)
AND
QRY_TriggerEvents_AnyPlayerInTrigger(S_END_EnemyStartSidePoly_Right_91c94102-6550-4998-9d08-a8f9cfbc6b84, _, _, _, _)
THEN
PROC_CharacterMoveTo(S_END_AbsoluteCannonFodder_001_fa170adf-bc09-4143-8aba-e0286231a8b4, S_END_Fodder001RunToPoint_Left_51a41092-8d20-4947-8c26-955e3d503682, "Run", "END_HighHallInterior_FodderReady");
PROC_CharacterMoveTo(S_END_AbsoluteCannonFodder_002_c1605cd8-238e-4589-a4fd-1d9c4edab015, S_END_Fodder002RunToPoint_Right_e8b0d498-8eda-428e-a0f1-e7a74a5cee3d, "Run", "END_HighHallInterior_FodderReady");
PROC_END_HighHallInterior_ClearReadyEnemyFodder();

PROC
PROC_END_HighHallInterior_ReadyEnemyFodder()
AND
DB_END_HighHallInterior_FodderReadyTriggers(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
QRY_TriggerEvents_AnyPlayerInTrigger(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CharacterMoveTo(_Var1, _Var2, "Sprint", "END_HighHallInterior_FodderReady");

IF
EntityEvent((GUIDSTRING)_Var1, "END_HighHallInterior_FodderReady", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetCombatGroupID(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var2, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(_Var1, _Var2);

PROC
PROC_END_HighHallInterior_ClearReadyEnemyFodder()
AND
DB_END_HighHallInterior_FodderReadyTriggers(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
PROC_TriggerUnregisterForParty(_Var3);
NOT DB_END_HighHallInterior_FodderReadyTriggers(_Var1, _Var2, _Var3);

IF
TurnStarted((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_END_HighHallInterior_FodderADs(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetEntityEventReal(_Var1, "GLO_CombatWait", 1);
NOT DB_END_HighHallInterior_FodderADs(_Var1);

IF
DB_END_HighHallInterior_Patrollers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TriggerRegisterForCharacter(S_END_EnemyStartSidePoly_Left_2dab35de-1d2e-4b5a-a423-30a2f1e3d256, _Var1);
TriggerRegisterForCharacter(S_END_EnemyStartSidePoly_Right_91c94102-6550-4998-9d08-a8f9cfbc6b84, _Var1);

PROC
PROC_END_HighHallInterior_ReadyEnemyFodder()
AND
QRY_TriggerEvents_AnyPlayerInTrigger(S_END_EnemyStartSidePoly_Left_2dab35de-1d2e-4b5a-a423-30a2f1e3d256, _, _, _, _)
AND
DB_END_HighHallInterior_Patrollers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_EnemyStartSidePoly_Left_2dab35de-1d2e-4b5a-a423-30a2f1e3d256, _Var1, _Var1, _Var1)
AND
GetCombatGroupID(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var2, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(_Var1, _Var2);

PROC
PROC_END_HighHallInterior_ReadyEnemyFodder()
AND
QRY_TriggerEvents_AnyPlayerInTrigger(S_END_EnemyStartSidePoly_Right_91c94102-6550-4998-9d08-a8f9cfbc6b84, _, _, _, _)
AND
DB_END_HighHallInterior_Patrollers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_END_EnemyStartSidePoly_Right_91c94102-6550-4998-9d08-a8f9cfbc6b84, _Var1, _Var1, _Var1)
AND
GetCombatGroupID(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var2, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(_Var1, _Var2);

IF
DB_Sees(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_Patrollers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_Enemies(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != _Var2
AND
DB_Is_InCombat(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
DB_END_HighHallInterior_CannonCombatID(_Var3, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
AND
GetCombatGroupID(S_END_NautiloidCannonHelper_5f06accf-0a2e-46bb-b3d2-8219e5748623, _Var5, _Var1, _Var1, _Var1)
AND
GetCombatGroupID(_Var1, _Var6, _Var1, _Var1, _Var1)
AND
_Var5 != _Var6
THEN
DB_END_DEBUG_HighHallInterior_IntDevJoinedFromSeeing(_Var1, _Var2);
SetCombatGroupID(_Var1, _Var5);

IF
DB_END_DEBUG_HighHallInterior_IntDevJoinedFromSeeing(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DestroyedBy(S_END_FallingStatue_4306e75f-1bf9-4bb7-860d-18dcd3626241, _, _, _, (CHARACTER)_)
THEN
PROC_END_HighHallInterior_ToppleStatue();

PROC
PROC_END_HighHallInterior_ToppleStatue()
AND
QRY_OnlyOnce("END_HighHallInterior_StatueFallen", _, _, _, _)
THEN
RealtimeObjectTimerLaunch(S_END_FallingStatue_4306e75f-1bf9-4bb7-860d-18dcd3626241, "END_HighHallInterior_FallingStatueTimer", 3600);

IF
ObjectTimerFinished(S_END_FallingStatue_4306e75f-1bf9-4bb7-860d-18dcd3626241, "END_HighHallInterior_FallingStatueTimer", _, _, _)
THEN
LoadLevelTemplate(S_END_FallingStatuePlatform_d988f74e-8186-41b2-a096-bf2642411c85);

IF
UseStarted((CHARACTER)_Var1, S_END_FallingStatue_4306e75f-1bf9-4bb7-860d-18dcd3626241, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
UseSpell(_Var1, "Target_Shove", S_END_FallingStatue_4306e75f-1bf9-4bb7-860d-18dcd3626241);
PROC_END_HighHallInterior_AttemptStatuePush(_Var1);

PROC
PROC_END_HighHallInterior_AttemptStatuePush((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
HasActiveStatus(_Var1, "SNEAKING", 1, _Var1, _Var1)
THEN
RemoveStatus(_Var1, "SNEAKING");

PROC
PROC_END_HighHallInterior_AttemptStatuePush((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
RequestPassiveRoll(_Var1, S_END_FallingStatue_4306e75f-1bf9-4bb7-860d-18dcd3626241, "Strength", Act3_Hard_6298329e-255c-4826-9209-e911873b64e7, "END_HighHallInterior_StatuePush");

IF
RollResult("END_HighHallInterior_StatuePush", (CHARACTER)_Var1, _, 1, _, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
Die(S_END_FallingStatue_4306e75f-1bf9-4bb7-860d-18dcd3626241);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, S_END_BrainStemClimb_3270ca2c-67ef-40d3-a980-8eeb580ece75, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_END_HighHallInterior_CanUse(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStopDialogFor(_Var1);
PROC_END_HighHallInterior_TryToClimbBrainStem(_Var1);
DB_CustomUseItemResponse(_Var1, S_END_BrainStemClimb_3270ca2c-67ef-40d3-a980-8eeb580ece75, 0);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, S_END_BrainStemClimb_3270ca2c-67ef-40d3-a980-8eeb580ece75, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
QRY_END_HighHallInterior_CanUse(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_PlayCantUseItemAD(_Var1);
DB_CustomUseItemResponse(_Var1, S_END_BrainStemClimb_3270ca2c-67ef-40d3-a980-8eeb580ece75, 0);

QRY
QRY_END_HighHallInterior_CanUse((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_SpeakerIsAvailable(_Var1, 0, 1, 0, _Var1)
AND
QRY_END_HighHallInterior_CurrentPartyMindFlayerCanSpeak()
AND
QRY_END_HighHallInterior_FollowerCanSpeak()
AND NOT
DB_DialogName(END_HighHallInterior_Nautiloid_3a5cb82c-788a-e0a3-fb7b-8a99fd2c7b23, _, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_CurrentPartyMindFlayerCanSpeak()
AND NOT
DB_END_General_PartyMindFlayer(_, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_CurrentPartyMindFlayerCanSpeak()
AND
DB_END_General_PartyMindFlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsAvailable(_Var1, 0, 1, 0, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_FollowerCanSpeak()
AND NOT
DB_END_IllithidOptionsFollower_Follower(_, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_FollowerCanSpeak()
AND
DB_END_IllithidOptionsFollower_Follower(_Var1, _, _, _, _Var1)
AND
QRY_SpeakerIsAvailable(_Var1, 0, 1, 0, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_END_HighHallInterior_CurrentPartyMindFlayerCanSpeak()
AND
DB_END_General_PartyMindFlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsAvailable(_Var1, 0, 1, 0, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_END_HighHallInterior_TryToClimbBrainStem((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
AND
QRY_END_General_CanProceedTowardsFinale()
THEN
DB_END_HighHallInterior_ToRoofReadyCheckPlayer(_Var1);
ReadyCheckGlobal("END_ReadyCheck_BrainStem", "END_ReadyMessage_BrainStem", 1, _Var1);

PROC
PROC_END_HighHallInterior_TryToClimbBrainStem((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_END_General_CanProceedTowardsFinale()
THEN
PROC_END_General_ThrallOfTheAbsoluteWarning(_Var1);

IF
ReadyCheckPassed("END_ReadyCheck_BrainStem", _, _, _, _)
THEN
PROC_END_BrainBattle_PreSetup();

PROC
PROC_END_BrainBattle_Setup()
THEN
PROC_END_General_KarsusStatusSafetyCheck();
GoalCompleted;

IF
ReadyCheckFailed("END_ReadyCheck_BrainStem", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_END_HighHallInterior_ToRoofReadyCheckPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_END_HighHallInterior_ToRoofReadyCheckPlayer(_Var1);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act3c"
