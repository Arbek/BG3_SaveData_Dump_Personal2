Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_QuestDef_BookReadState("GLO_PathToMoonrise", "ReadHalsinDiary_MT", S_GLO_HalsinDiary_5e4aafd4-f56c-4b05-ad5a-00eccdb87d9d);
DB_QuestDef_BookReadState("GLO_PathToMoonrise", "HalsinToldPath_Dead", S_GLO_HalsinDiary_5e4aafd4-f56c-4b05-ad5a-00eccdb87d9d);
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Unknown", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Unknown_Asharak", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Unknown_Cerys", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Known", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Known_Asharak", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinAtGrove_Known_Cerys", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinLeft_NoHelp_Known", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "HalsinLeft_NoHelp_Unknown", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Known_KillLeaders", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Known_AoD", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Known_LeadershipDead", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Unknown_KillLeaders", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Unknown_AoD", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "FoundHalsin_Unknown_LeadershipDead", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "GoToMoonrise", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "GoToMoonrise_NoIntro", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_ChainedState("GLO_Tadpole", "GoToMoonrise_SkippedGrove", "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");
DB_QuestDef_State(UND_TheDrowNere_Event_ToldGeneral_bb4e2597-65af-4ef4-fbe9-02167cd02963, "GLO_PathToMoonrise", "ToldMoonrise_Nere");
DB_QuestDef_State_ConditionalFlag(UND_TheDrowNere_Event_DeadToldGeneral_d4e8dab1-8358-12ed-b4c7-25025378f8b0, "GLO_PathToMoonrise", "ToldMoonrise_Nere", 0, UND_TheDrowNere_Event_ToldGeneral_bb4e2597-65af-4ef4-fbe9-02167cd02963);
DB_QuestDef_State(CAMP_GoblinHuntCelebration_DrowToldMoonrise_350ef7df-6bef-1294-9a07-53066292efd0, "GLO_PathToMoonrise", "ToldMoonrise_Minthara");
DB_QuestDef_State(GLO_Daisy_Event_ToldToGoToMoonrise_f51feeff-096d-44b3-8453-0c486e88f8a4, "GLO_PathToMoonrise", "ToldMoonrise_Daisy");
DB_QuestDef_LevelLoaded("GLO_PathToMoonrise", "EnteredCRE_Parent", "CRE_Main_A");
DB_QuestDef_State(GLO_Shadowcurse_Knows_FromDuergar_493ad2e1-44cd-2f9d-7d24-4697233a0a3b, "GLO_PathToMoonrise", "Underdark_DuergarToldAboutCurse");
DB_QuestDef_State(GLO_Shadowcurse_Knows_FromGnome_f81ae4ea-a095-11f2-fc60-1b7b61a4ba03, "GLO_PathToMoonrise", "Underdark_DuergarToldAboutCurse");
DB_QuestDef_State(GLO_PathToMoonrise_HalsinDeadRiver_75e1ac13-29bf-4c2d-9a66-476072fd7bf0, "GLO_PathToMoonrise", "HalsinToldPath_DeadRiver");
DB_QuestDef_State(UND_TheDrowNere_FollowUp_ToldGoToKetheric_4e86c9ca-b9aa-3216-eef2-e58273a7dd99, "GLO_PathToMoonrise", "Underdark_LearnedSearch");
DB_QuestDef_State(UND_Elevator_Event_GotWarning_fd2f3420-e1ee-e977-16f2-a21344e23918, "GLO_PathToMoonrise", "Underdark_LearnedSearch");
DB_QuestDef_BookReadState("GLO_PathToMoonrise", "Underdark_FoundPuzzle", S_GOB_TempleAccess_Lorebook_283d7eff-f6e5-401f-852e-7ad7fb728b88);
DB_QuestDef_BookReadState("GLO_PathToMoonrise", "Underdark_FoundPuzzle", S_GOB_LogbookOfSendings_b441a1c8-541c-4921-9b95-f035923fe6ab);
DB_QuestDef_BookReadState("GLO_PathToMoonrise", "Underdark_FoundPuzzle", S_GOB_SharTempleMap_f01b15a1-e670-43ac-abeb-e7ec9d5fc803);
DB_QuestDef_ChainedState("GLO_PathToMoonrise", "HalsinToldPath", "Underdark_HalsinToldPath");
DB_QuestDef_ChainedState("GLO_PathToMoonrise", "HalsinToldPath_Dead", "Underdark_HalsinToldPath_Dead");
DB_QuestDef_State(DEN_AttackOnDen_State_RaiderVictory_abe1bce8-c234-4afe-a490-76210d98a078, "GLO_PathToMoonrise", "Mountain_GoblinCelebration");
DB_QuestDef_State_ConditionalFlag(UND_TheDrowNere_Quest_SentToMinthara_c11385de-dd08-d0c3-0b52-49c2b80c3fe8, "GLO_PathToMoonrise", "ToldMoonrise_Nere", 1, GLO_DrowCommander_State_Dead_bf904558-1898-4d27-9526-9cef185cc9e1);
DB_QuestDef_State_ConditionalFlag(UND_TheDrowNere_Quest_SentToMinthara_c11385de-dd08-d0c3-0b52-49c2b80c3fe8, "GLO_PathToMoonrise", "Mountain_NereSentToMinthara", 0, GLO_DrowCommander_State_Dead_bf904558-1898-4d27-9526-9cef185cc9e1);
DB_QuestDef_State_ConditionalFlag(GLO_DrowCommander_State_Dead_bf904558-1898-4d27-9526-9cef185cc9e1, "GLO_PathToMoonrise", "Mountain_MintharaBecameUnavailable", 1, UND_TheDrowNere_Quest_SentToMinthara_c11385de-dd08-d0c3-0b52-49c2b80c3fe8);
DB_QuestDef_ChainedState("GLO_PathToMoonrise", "HalsinToldPath", "Mountain_HalsinToldPath");
DB_QuestDef_ChainedState("GLO_PathToMoonrise", "MintharaToldPath", "Mountain_MintharaToldPath");
DB_QuestDef_LevelLoaded("GLO_PathToMoonrise", "Mountain_EnteredCRE", "CRE_Main_A");
DB_GLO_Moonrise_UnderdarkSUB(S_UND_Underdark_SUB_b379a862-a59f-4e52-9166-23fbe0e8976e);
DB_GLO_Moonrise_UnderdarkSUB(S_UND_DuergarCamp_SUB_05c3bf1f-29a6-437c-9a98-c1ff0ec53a53);
DB_BookFlags(S_GLO_OrpheusChapter2_4dbaf850-49ff-4e41-adc2-7054e416c960, GLO_OrpheusChapters_State_ReadOrpheusChapter2_c382e9a1-c34d-42b2-8eca-ecfdb660e0ac);
DB_QuestDef_BookReadState("GLO_PrinceOrpheus", "DecipherBook2", S_GLO_OrpheusChapter2_4dbaf850-49ff-4e41-adc2-7054e416c960);
DB_QuestDef_State(GLO_OrpheusChapters_State_ReadOrpheusChapter1_c8fa6c18-6491-48b6-9197-43285a07f9c9, "GLO_PrinceOrpheus", "DecipherBook1");
DB_QuestDef_State(GLO_OrpheusChapters_State_ReadOrpheusChapter3_cd913886-8e41-47d2-bba1-fda22b129001, "GLO_PrinceOrpheus", "DecipherBook3");
DB_QuestDef_State(GLO_OrpheusChapters_State_FailedToDecipher_41ec29c6-de1f-4168-894c-8029b3275469, "GLO_PrinceOrpheus", "DidntDecipherABook");
DB_QuestDef_State(INT_EmperorRevealed_Event_SceneComplete_2fa4811a-8757-40e7-a0bb-dc7e210dd6e6, "GLO_PrinceOrpheus", "DiscoveredOrpheusIsInArtefact");
DB_QuestDef_State(PLA_GithChokepoint_Event_MentionedWeapon_569656de-2acb-6d5d-236c-c86df165e9b6, "GLO_ArtefactDiscovery", "AtGithChokepoint");
DB_QuestDef_State(GLO_SecretOfArtefact_MintharaMentionedWeapon_ccca0874-11d3-430f-8e59-cfd8d209b125, "GLO_ArtefactDiscovery", "GoblinCampMinthara");
DB_QuestDef_State(GOB_GoblinKing_Event_ToldAboutWeapon_a059e124-737c-bcaa-f95b-7fe727263655, "GLO_ArtefactDiscovery", "GoblinCampGoblinKing");
DB_QuestDef_State(GLO_GithChokepoint_Knows_DecipheredMap_604768b9-c983-414d-8c3b-ba1dee3da387, "GLO_ArtefactDiscovery", "DecypheredMap");
DB_QuestDef_BookReadState("GLO_ArtefactDiscovery", "DecypheredMap", S_ORI_Laezel_DeadGithyankiMapForCreche_7c48ba55-4644-4e41-ae1a-f056222f6580);
DB_QuestDef_State(GLO_SecretOfArtefact_GuardMentionedCaptain_1dea0195-bf42-4368-be02-f2149ad787ab, "GLO_ArtefactDiscovery", "InGithCreche");
DB_QuestDef_State(CRE_UpperGuards_State_GainedAccess_764df691-d1f0-4bde-ba36-73c4abe6a4e7, "GLO_ArtefactDiscovery", "GainedAccessToCreche");
DB_QuestDef_State(CRE_ChainOfCommand_State_StartedCaptain_234209eb-5e38-4bf3-97e3-fdec61c1677d, "GLO_ArtefactDiscovery", "EnteredCaptainsOffice");
DB_QuestDef_State(CRE_ChainOfCommand_State_CaptainBarrierDeactivated_fdfdbc4d-1713-495e-ad74-e969cfaf2b00, "GLO_ArtefactDiscovery", "TalkedToCaptain");
DB_QuestDef_State(CRE_ChainOfCommand_State_PlanecasterActive_5e5e9cb6-41d8-4a93-942d-3dca4d357561, "GLO_ArtefactDiscovery", "SpokenToVlaakith");
DB_QuestDef_State(CRE_AstralPrison_State_AstralPrisonWasEntered_2203e87a-6c7b-4aba-b2e8-e22ed96b9762, "GLO_ArtefactDiscovery", "EnteredAstralPrism");
DB_QuestDef_State(CRE_AstralPrison_State_KilledDaisyDuringDialog_f19ad2b1-a8b8-48b8-8f38-f3c83e580f1e, "GLO_ArtefactDiscovery", "SpokenToDreamVisitor_Kill");
DB_QuestDef_State(CRE_AstralPrison_State_SavedDaisyDuringDialog_929c9f76-537e-4ac4-bd23-a3299ece5db5, "GLO_ArtefactDiscovery", "SpokenToDreamVisitor_Save");
DB_QuestDef_State(NIGHT_DaisyDream1_52669b07-9584-4c9d-8219-49679811fd4f, "GLO_UnleashPowers", "FindTadpole");
DB_QuestDef_State(GLO_Tadpole_Event_FirstConsumed_fab5ae97-23b5-4bf2-88ae-0b1bd57523d8, "GLO_UnleashPowers", "FindMoreTadpoles");
DB_QuestDef_State(INT_EmperorRevealed_State_PartialCeremorph_bc1c1148-0ed1-8586-39b2-5aff43c3b393, "GLO_UnleashPowers", "UsedAstralTadpole");
DB_QuestDef_State(END_General_State_Started_a0fd5f91-e4b3-4d01-84d3-9ff484139e99, "GLO_UnleashPowers", "LeftToEND");
DB_QuestDef_State(COL_KethericShowdown_State_HasNetherstone_0243527e-408f-4711-97a0-7759847bb00a, "WYR_GetGortashGem", "GotKethericGem");
DB_QuestDef_State(VISITEDREGION_BGO_Main_A_40f06537-814f-4796-b012-5ffaa648a8d9, "WYR_GetGortashGem", "EnteredWyrmsCrossing");
DB_QuestDef_State(WYR_KillDirectorGortash_Knows_CeremonyLocationAndGortashName_5eb9384c-4108-4a68-85eb-ba72931a7bc9, "WYR_GetGortashGem", "LearnedCeremony");
DB_QuestDef_State(WYR_KillDirectorGortash_State_SteelWatcherInvitationHappened_f73940d9-d4d9-43d1-9a4c-766713b6d984, "WYR_GetGortashGem", "LearnedGortashSW");
DB_GLO_CompoundFlag(WYR_KillDirectorGortash_State_SteelWatcherInvitationHappened_f73940d9-d4d9-43d1-9a4c-766713b6d984, WYR_KillDirectorGortash_Knows_CeremonyLocationAndGortashName_5eb9384c-4108-4a68-85eb-ba72931a7bc9);
DB_QuestDef_State_ConditionalFlag(WYR_KillDirectorGortash_State_VisitedAudienceHall_8984a8f4-c0fa-4797-967b-b8024a7db9b7, "WYR_GetGortashGem", "EnteredCeremony_NoClue", 0, WYR_KillDirectorGortash_State_SteelWatcherInvitationHappened_f73940d9-d4d9-43d1-9a4c-766713b6d984);
DB_QuestDef_State_ConditionalFlag(WYR_KillDirectorGortash_State_VisitedAudienceHall_8984a8f4-c0fa-4797-967b-b8024a7db9b7, "WYR_GetGortashGem", "NoticedSteelWatch", 0, GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b);
DB_QuestDef_State(WYR_KillDirectorGortash_State_OfferedAlliance_03713386-ba9a-46b8-9911-554b89072d88, "WYR_GetGortashGem", "OfferedPact");
DB_QuestDef_State(LOW_BhaalTemple_State_HasNetherstone_818fd00e-6780-4712-980e-5c7c25ba9987, "WYR_GetGortashGem", "GotOrinGem");
DB_QuestDef_State(WYR_KillDirectorGortash_State_AgreedToMeetInUndercity_1375d542-cf0a-49fd-927b-5c6bbce13ce4, "WYR_GetGortashGem", "ForgedAllianceGortash");
DB_QuestDef_State(WYR_KillDirectorGortash_State_GortashTurnedHostile_c003c217-b263-4473-9e4f-9a90aaf43cc9, "WYR_GetGortashGem", "GortashHostile");
DB_QuestDef_ChainedState("GLO_DealWithTheBrain", "GortashDead", "WYR_GetGortashGem", "ElderBrain");
DB_QuestDef_State_ConditionalFlag(WYR_KillDirectorGortash_State_HasNetherstone_27dbf056-29ee-4d43-9ad9-4831fa2c8739, "WYR_GetGortashGem", "GotGortashGem", 0, END_MorphicPool_Event_GortashHeadPop_a596f4f1-fcce-416c-bf0e-31037a1f4fb0);
DB_QuestDef_State_ConditionalFlag(GLO_Gortash_State_PermaDefeated_74dd56ff-7e00-42a6-a0f3-0d122f364769, "WYR_GetGortashGem", "GortashDefeated", 0, END_MorphicPool_Event_GortashHeadPop_a596f4f1-fcce-416c-bf0e-31037a1f4fb0);
DB_QuestDef_State_ConditionalFlag(GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b, "WYR_GetGortashGem", "DestroyedFoundry_BeforeDeal", 0, WYR_KillDirectorGortash_State_OfferedAlliance_03713386-ba9a-46b8-9911-554b89072d88);
DB_QuestDef_State_ConditionalFlag(GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b, "WYR_GetGortashGem", "DestroyedFoundry", 1, WYR_KillDirectorGortash_State_OfferedAlliance_03713386-ba9a-46b8-9911-554b89072d88);
DB_QuestDef_State_ConditionalFlag(IRN_IronThrone_State_Destroyed_91795368-af06-4b56-9ac1-b78995aa9ea9, "WYR_GetGortashGem", "DestroyedIRN", 1, WYR_KillDirectorGortash_State_OfferedAlliance_03713386-ba9a-46b8-9911-554b89072d88);
DB_QuestDef_State(WYR_KillDirectorGortash_State_OfferedAlliance_03713386-ba9a-46b8-9911-554b89072d88, "WYR_GetGortashGem", "GortashOfferedPact");
DB_QuestDef_State(WYR_KillDirectorGortash_Event_WarnedDealBreakIRN_29e280ce-e0a0-b1e7-0483-6aa8b56fac77, "WYR_GetGortashGem", "GortashWarnedIRN");
DB_QuestDef_State(LOW_BhaalTemple_State_HasNetherstone_818fd00e-6780-4712-980e-5c7c25ba9987, "WYR_GetGortashGem", "GotOrinGemForGortash");
DB_QuestDef_State(WYR_KillDirectorGortash_State_AgreedToMeetInUndercity_1375d542-cf0a-49fd-927b-5c6bbce13ce4, "WYR_GetGortashGem", "SentToPool");
DB_QuestDef_State(WYR_KillDirectorGortash_State_GortashBecameHostile_990f1c60-6ecb-4898-ab2e-0a92d2dc0a2c, "WYR_GetGortashGem", "GortashBecameHostile");
DB_QuestDef_State(WYR_KillDirectorGortash_State_FailedConditions_1a56706c-cca6-4faf-bdd9-47008f061974, "WYR_GetGortashGem", "FailedConditions");
DB_QuestDef_State(WYR_KillDirectorGortash_State_BetrayedPlayer_e7144173-11a7-4b26-86a1-f3ef892c1fca, "WYR_GetGortashGem", "FailedTest");
DB_QuestDef_State(GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b, "WYR_GetGortashGem", "DestroyedSteelWatchFoundry");
DB_QuestDef_State(IRN_IronThrone_State_Destroyed_91795368-af06-4b56-9ac1-b78995aa9ea9, "WYR_GetGortashGem", "DestroyedIronThrone");
DB_QuestDef_State(GLO_OrinsMessages_Event_Read_SteelWatchFought_d4500cec-3261-45b1-9bce-460864095379, "WYR_GetGortashGem", "LearnedFromOrin");
DB_QuestDef_State(WYR_KillDirectorGortash_State_OrinToldSteelWatch_f935b068-ed34-40d9-b7c0-ca476e73d156, "WYR_GetGortashGem", "LearnedFromOrin");
DB_QuestDef_State(WYR_KillDirectorGortash_State_WulbrenToldSteelWatch_48b3c3f0-e78a-4277-8ef9-b9cc0a4d8960, "WYR_GetGortashGem", "LearnedFromGnomes");
DB_QuestDef_State(WYR_Wulbren_State_InterruptedByBarcus_f2211dd4-5494-66b1-5e7b-01664f7287b0, "WYR_GetGortashGem", "BarcusAgainst");
DB_QuestDef_State(WYR_Ironhand_Event_InvestigateQuest_Offered_bf4bd7b5-8a79-43a6-bc7b-4ae62cfe4302, "WYR_GetGortashGem", "BarcusAgainst");
DB_QuestDef_State_ConditionalFlag(WYR_KillDirectorGortash_State_VisitedAudienceHall_8984a8f4-c0fa-4797-967b-b8024a7db9b7, "WYR_GetGortashGem", "LearnedAtCeremony", 0, GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b);
DB_QuestDef_State(WYR_Ironhand_Event_TerroristQuest_Accepted_0dae7572-9ff4-4991-900b-dadfe153d306, "WYR_GetGortashGem", "GotBombAndLocation");
DB_QuestDef_State_ConditionalFlag(WYR_KillDirectorGortash_State_LearnedFoundryLocation_56e0ff1b-8cc9-4996-be5c-9cb4724c611d, "WYR_GetGortashGem", "LearnedFoundryLocation", 0, WYR_Ironhand_Event_TerroristQuest_Accepted_0dae7572-9ff4-4991-900b-dadfe153d306);
DB_QuestDef_State(LOW_SteelWatchFoundry_Hasmet_FundangoToobin_94af332f-8038-48bf-8998-70028a73a887, "WYR_GetGortashGem", "MetGondianLeader");
DB_QuestDef_State(LOW_SteelWatchFoundry_State_FundangoFollower_a3021d6d-9cc1-3545-54f3-53a35d44d89b, "WYR_GetGortashGem", "ConvincedGondianLeader");
DB_QuestDef_State(LOW_SteelWatchFoundry_State_KnownsHowToDisableNeurocitor_0df02f4a-0d44-f355-4638-9aee2ea61fde, "WYR_GetGortashGem", "ForcedGondianLeader");
DB_QuestDef_State(GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b, "WYR_GetGortashGem", "DisabledSteelWatch");
DB_QuestDef_State(GLO_Gortash_State_PermaDefeated_74dd56ff-7e00-42a6-a0f3-0d122f364769, "WYR_GetGortashGem", "DefeatedNoFoundry");
DB_WYR_KillDirectorGortash_Journal_LearnFoundryInsideDialogs(LOW_SteelWatchFoundry_DeadMansSwitchThreat_47d40827-597b-d211-395a-75429620f340);
DB_WYR_KillDirectorGortash_Journal_LearnFoundryInsideDialogs(LOW_SteelWatchFoundry_GondianWorker08_Leader_9d7d9cf1-437a-bba8-b087-456483f85edc);
DB_QuestDef_LevelLoaded("LOW_FindBhaalTemple", "EnteredCity", "BGO_Main_A");
DB_QuestDef_State(LOW_BhaalTemple_State_TempleCombatBegun_b3cf3252-a9af-47b1-9d06-8eae5a397235, "LOW_FindBhaalTemple", "DefeatedOrin");
DB_QuestDef_State(GLO_EmperorPrelude_State_OrinStoneCollected_3e629422-74fd-49d0-9e15-d078f6a9c02c, "LOW_FindBhaalTemple", "HaveControlGem");
DB_QuestDef_LevelLoaded("GLO_DealWithTheBrain", "ArrivedInBaldursGate", "BGO_Main_A");
DB_QuestDef_State(GLO_EmperorPrelude_State_GortashStoneCollected_c608f192-c5ab-4be9-b13d-4c4ca3c6b971, "GLO_DealWithTheBrain", "GotGortashStone");
DB_QuestDef_State(GLO_EmperorPrelude_State_OrinStoneCollected_3e629422-74fd-49d0-9e15-d078f6a9c02c, "GLO_DealWithTheBrain", "GotOrinStone");
DB_QuestDef_State(WYR_KillDirectorGortash_State_AgreedToMeetInUndercity_1375d542-cf0a-49fd-927b-5c6bbce13ce4, "GLO_DealWithTheBrain", "MadeDealWithGortash");
DB_QuestDef_State(END_MorphicPool_Event_GortashHeadPop_a596f4f1-fcce-416c-bf0e-31037a1f4fb0, "GLO_DealWithTheBrain", "GortashDead");
DB_QuestDef_State(END_MorphicPool_Event_GortashMove_7f2b9da1-250e-4bc1-b773-0468cb509fe6, "GLO_DealWithTheBrain", "FaceBrainAfterGortash");
DB_QuestDef_State(END_IllithidOptions_Event_EmperorBetrayal_411c2575-bfbc-449c-9762-edad4285aafd, "GLO_DealWithTheBrain", "DroveOffEmperor");
DB_QuestDef_State(END_IllithidOptions_State_AcceptedRaphaelDeal_c4d409ef-d70e-9934-edf2-d6bd66201c19, "GLO_DealWithTheBrain", "RaphaelOffer");
DB_QuestDef_State(END_IllithidOptions_State_OrpheusIsFree_3b747050-1be0-432e-9de6-e48faa4b74bb, "GLO_DealWithTheBrain", "FreedOrpheus");
DB_QuestDef_State(END_General_State_EmperorIsPartyMindFlayer_4e9c31b2-f298-48f6-853c-e74dd88591e9, "GLO_DealWithTheBrain", "EmperorIllithid");
DB_QuestDef_State(END_General_State_OrpheusIsMindFlayer_2b638127-f30a-424e-9d4a-a9f8f100a307, "GLO_DealWithTheBrain", "OrpheusIllithid");
DB_QuestDef_State(END_General_State_CurrentlyInHighHall_118b3dc5-dab8-4872-92da-ab01c15fa55e, "GLO_DealWithTheBrain", "GetToTheBrainStem");
DB_QuestDef_State(END_HighHallInterior_State_NautiloidArrived_31c66f5f-9606-42bf-a315-c06430504065, "GLO_DealWithTheBrain", "InteriorNautiloid");
DB_QuestDef_State(END_HighHallInterior_State_NautiloidLeft_ed57695e-adb6-4a4e-8f84-4e9dfc28f318, "GLO_DealWithTheBrain", "ReadyToClimb");
DB_QuestDef_State(END_BrainBattle_State_PortalOpen_d55bc4d7-eabb-1c01-88e4-28e3456bd1c7, "GLO_DealWithTheBrain", "OpenedPortalToMindArena");
DB_QuestDef_State(END_FinalDecisions_Event_PlayerDestroyedBrain_86f3e51d-873b-204d-7328-0c982f83e623, "GLO_DealWithTheBrain", "ChoseDestruction");
DB_QuestDef_State(END_FinalDecisions_Event_PlayerDestroyedBrain_86f3e51d-873b-204d-7328-0c982f83e623, "GLO_DealWithTheBrain", "DestroyedElderBrain");
DB_QuestDef_State(END_FinalDecisions_Event_PlayerDestroyedBrain_86f3e51d-873b-204d-7328-0c982f83e623, "GLO_DealWithTheBrain", "DealtWithBrain");
DB_QuestDef_State(END_BrainBattle_Event_EvilFinalDecision_71617aed-6f56-ad38-5657-189de2628cc8, "GLO_DealWithTheBrain", "ChoseDomination");
DB_QuestDef_State(END_BrainBattle_Event_EvilFinalDecision_71617aed-6f56-ad38-5657-189de2628cc8, "GLO_DealWithTheBrain", "DominatedElderBrain");
DB_QuestDef_State(END_BrainBattle_Event_EvilFinalDecision_71617aed-6f56-ad38-5657-189de2628cc8, "GLO_DealWithTheBrain", "DealtWithBrain");
DB_QuestDef_State(HAV_TieflingSurvivors_State_PromisedToSaveMol_9b927edd-a5e7-4462-bea6-ff1969c8c00f, "LOW_FindMol", "LearnedMolDisappeared");
DB_QuestDef_State(COL_NecromancerLab_HasItem_MolEyepatch_46133bb6-6a7f-38cd-df32-d8f596a1cd7c, "LOW_FindMol", "FoundMolEyePatch");
DB_QuestDef_State(COL_FindMol_Event_AskedNecromancerAboutMol_c782e2aa-d8ef-6694-3dc8-6af2e720631a, "LOW_FindMol", "MolNotInColonyBalthazaarLab");
DB_QuestDef_State(COL_TadpolingCentre_Event_PurgePods_e9c700a3-5ba8-07e9-e13f-c2e081a3a1c5, "LOW_FindMol", "MolNotInColonyPods");
DB_QuestDef_State(COL_TadpolingCentre_Event_ReleasePods_3e81dc65-eb2d-86aa-5163-28450894f868, "LOW_FindMol", "MolNotInColonyPods");
DB_QuestDef_State(COL_TadpolingCentre_State_NoInnocentOccupants_04462b73-768d-a59f-0d90-ff55a048090f, "LOW_FindMol", "MolNotInColonyPods");
DB_QuestDef_State(SCE_TieflingFollowUp_Knows_MolMissingEyepatch_d3b3d606-5a19-cad9-8f7d-e36a27d9f211, "LOW_FindMol", "MolStillMissing");
DB_QuestDef_State(SCE_TieflingFollowUp_Alfira_AskedAboutKids_85e5266c-9663-1a2d-dc54-ce93ed3b5d4e, "LOW_FindMol", "MolStillMissing");
DB_QuestDef_State(WYR_RefugeeCamp_Event_MattisMentionedMolInBG_a18054f8-9ec4-9248-c983-399f4c8c0447, "LOW_FindMol", "MolInCity");
DB_QuestDef_State(LOW_Guildhall_State_HasMolsContract_d781d435-91ea-454a-807c-a89a418d52f7, "LOW_FindMol", "FoundMolContract");
DB_QuestDef_State(LOW_Guildhall_HasMet_ThiefHideoutLeader_e69d09e3-d3ab-fe5f-b8e4-41c274ee1d2f, "LOW_FindMol", "MolInGuildhall");
DB_QuestDef_LevelLoaded("LOW_FindMol", "NeverFoundMol", "END_Main");
DB_LOW_FindMol_ChangeCategoryEntries("MolInCity");
DB_LOW_FindMol_ChangeCategoryEntries("MolStillMissing");
DB_LOW_FindMol_ChangeCategoryEntries("FoundMolContract");

KBSECTION
IF
FlagSet(GLO_Halsin_Quest_GoToMoonrise_f334b6de-349a-01e6-2a04-d794a62b38ec, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QuestIsAccepted(_Var3, "GLO_Tadpole_SUB_Druid", 0, _, _)
THEN
QuestUpdate(_Var3, "GLO_PathToMoonrise", "ToldMoonrise_Known_MT");

IF
QuestAccepted(_, "GLO_PathToMoonrise_SUB_UnderdarkPath", _, _, _)
AND
DB_GLO_Moonrise_UnderdarkSUB(_, _, _, _, _)
AND NOT
QRY_GLO_Tadpole_SUB_Moonrise_ChainEnteredUnderdark()
THEN
DB_GLO_Tadpole_SUB_Moonrise_CheckEnteredUnderdark(1);

QRY
QRY_GLO_Tadpole_SUB_Moonrise_ChainEnteredUnderdark()
AND
DB_CurrentLevel("WLD_Main_A", _, _, _, _)
AND
DB_GLO_Moonrise_UnderdarkSUB(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_TriggerEvents_AnyPlayerInTrigger(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate("GLO_PathToMoonrise", "Underdark_EnteredUnderdark");

IF
EnteredTrigger((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GLO_Moonrise_UnderdarkSUB(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GLO_Tadpole_SUB_Moonrise_CheckEnteredUnderdark(1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_Tadpole_SUB_Moonrise_CheckEnteredUnderdark(1);
QuestUpdate(_Var1, "GLO_PathToMoonrise", "Underdark_EnteredUnderdark");

IF
QuestUpdateUnlocked(_, "GLO_PathToMoonrise", "Underdark_EnteredUnderdark", _, _)
AND
DB_GLO_Moonrise_UnderdarkSUB(_Var2, _, _, _, _)
THEN
NOT DB_GLO_Moonrise_UnderdarkSUB(_Var2);

IF
EnteredTrigger((CHARACTER)_Var1, S_SCL_EntryBox_Mountain_4d4ccb57-e568-4536-b71b-6993ed640265, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_PathToMoonrise", "Mountain_ReachedSCL_MountainPass");
QuestUpdate(_Var1, "GLO_PathToMoonrise", "Underdark_ReachedSCL_MountainPass");
QuestUpdate(_Var1, "GLO_PathToMoonrise", "ReachedSCL");

IF
EnteredTrigger((GUIDSTRING)_Var1, S_SCL_Act1ReturnAttemptDialogBox_ToUNDFromSCL_7a5bb6d4-9c7e-495f-bdf2-f49f52bad40a, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_PathToMoonrise", "Mountain_ReachedSCL_Grymforge");
QuestUpdate(_Var1, "GLO_PathToMoonrise", "Underdark_ReachedSCL_KethericCity");
QuestUpdate(_Var1, "GLO_PathToMoonrise", "ReachedSCL");

IF
FlagSet(UND_TheDrowNere_FollowUp_ToldGoToKetheric_4e86c9ca-b9aa-3216-eef2-e58273a7dd99, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_PathToMoonrise", "ToldMoonrise_PromisedNere");

IF
EnteredTrigger((CHARACTER)_Var1, S_GOB_TempleBox_001_754d69fd-f1aa-486d-8f9f-ee8957215780, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_PathToMoonrise", "Underdark_HalsinToldPath", 1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_PathToMoonrise", "Underdark_FindPuzzle");

IF
EnteredTrigger((CHARACTER)_Var1, S_GOB_TempleBox_001_754d69fd-f1aa-486d-8f9f-ee8957215780, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "GLO_PathToMoonrise", "Underdark_HalsinToldPath_Dead", 1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_PathToMoonrise", "Underdark_FindPuzzle");

IF
DB_GlobalFlag(GLO_Moonrise_Knows_AbsoluteAtGrymforge_95f18900-7644-dabb-5add-c8f0cf71cba0, _, _, _, _)
AND
DB_QuestIsAccepted("GLO_PathToMoonrise", _, _, _, _)
THEN
QuestUpdate("GLO_PathToMoonrise", "Underdark_LearnedSearch");

IF
DB_GlobalFlag(GLO_Moonrise_Knows_AbsoluteAtGrymforge_NoName_e0b97077-996b-45ac-2403-c68226a88ef2, _, _, _, _)
AND
DB_GlobalFlag(GLO_DuergarCamp_EverEnteredBefore_ac0bae57-7006-4676-88b8-7498dde79c41, _, _, _, _)
AND
DB_QuestIsAccepted("GLO_PathToMoonrise", _, _, _, _)
THEN
QuestUpdate("GLO_PathToMoonrise", "Underdark_LearnedSearch");

IF
FlagSet(GOB_TempleAccess_Event_PuzzleSolved_e48a7760-a5b2-4f2e-9e9c-52645d772bd3, _, _, _, _)
AND
QRY_QuestUpdateIsUnlockedForAny("GLO_PathToMoonrise", "Underdark_FoundPuzzle", _, _, _)
THEN
QuestUpdate("GLO_PathToMoonrise", "Underdark_OpenedPuzzle");

IF
QuestUpdateUnlocked(_, "GLO_PathToMoonrise", "Underdark_FoundPuzzle", _, _)
AND
DB_GlobalFlag(GOB_TempleAccess_Event_PuzzleSolved_e48a7760-a5b2-4f2e-9e9c-52645d772bd3, _, _, _, _)
AND NOT
QRY_QuestUpdateIsUnlockedForAny("GLO_PathToMoonrise", "Underdark_OpenedPuzzle", _, _, _)
THEN
QuestUpdate("GLO_PathToMoonrise", "Underdark_OpenedPuzzle");

IF
DialogEnded(GOB_DrowCommander_b31382b6-355d-9ab4-3d20-4680e2c26477, _, _, _, _)
AND
DB_GlobalFlag(GOB_DrowCommander_State_ReadyToGo_ac6a5aac-ab85-1109-afd0-559a75dca04e, _, _, _, _)
AND
DB_GlobalFlag(GOB_DrowCommander_Event_RaidersSortie_26816b01-2d64-b50c-3bf6-bffd7dc5f0b9, _, _, _, _)
AND NOT
DB_GlobalFlag(GOB_DrowCommander_State_Hostile_27a5c5a6-70bc-81e2-6aa9-ca1f4e619623, _, _, _, _)
AND
DB_Players(_Var2, _, _, _, _)
THEN
QuestUpdate(_Var2, "GLO_PathToMoonrise", "Mountain_RaidGrove");

IF
DB_GlobalFlag(GLO_OrpheusChapters_State_ReadOrpheusChapter1_c8fa6c18-6491-48b6-9197-43285a07f9c9, _, _, _, _)
AND
DB_GlobalFlag(GLO_OrpheusChapters_State_ReadOrpheusChapter2_c382e9a1-c34d-42b2-8eca-ecfdb660e0ac, _, _, _, _)
AND
DB_GlobalFlag(GLO_OrpheusChapters_State_ReadOrpheusChapter3_cd913886-8e41-47d2-bba1-fda22b129001, _, _, _, _)
THEN
QuestUpdate("GLO_PrinceOrpheus", "DecipheredAllBooks");

IF
DialogEnded(TUT_Start_OM_Shadowheart_AOM_c989b41e-3af8-40ec-31d6-309d3f37b129, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
DB_TUT_Start_JournalUpdate(NULL_00000000-0000-0000-0000-000000000000, "GLO_ArtefactDiscovery", "AcceptedQuestReceivedArtefact");

IF
DialogEnded(ShadowHeart_Recruitment_Gob_cd0dd81e-a7b4-1cae-6d4c-750a7a65ff59, _, _, _, _)
AND
DB_GlobalFlag(ORI_ShadowheartRecruitment_State_BoxRecruit_7b706c7d-f23e-49b8-9171-6d493c947ee8, _, _, _, _)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "AcceptedQuestRecruitedShadowheart");

IF
NestedDialogPlayed(ShadowHeart_Recruitment_Gob_cd0dd81e-a7b4-1cae-6d4c-750a7a65ff59, _, _, _, _)
AND
DB_GlobalFlag(ORI_ShadowheartRecruitment_State_BoxRecruit_7b706c7d-f23e-49b8-9171-6d493c947ee8, _, _, _, _)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "AcceptedQuestRecruitedShadowheart");

IF
DialogEnded(GOB_Orpheus_VoiceOfAbsolute_ShadowheartHasBox_8996ac21-4624-8bd4-02f2-24c92219d8cd, _, _, _, _)
AND
DB_PartyMembers(S_Player_ShadowHeart_3ed74f06-3c60-42dc-83f6-f034cb47c679, _, _, _, _)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "AcceptedQuestRecruitedShadowheart");

IF
DB_CampNight_Completed(NIGHT_ShadowHeart_Box_2de162ec-4272-4750-945f-9d306c5ba0da, _, _, _, _)
AND
QRY_OnlyOnce("GLO_SecretOfArtefact_QuestStart", _, _, _, _)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "AcceptedQuestSawShadowHeartAndBoxAtCamp");

IF
DB_CampNight_Completed(NIGHT_InfernalBoxAppears_47942a99-c44e-4e90-a0a2-6956bed9dc5b, _, _, _, _)
AND
QRY_OnlyOnce("GLO_SecretOfArtefact_QuestStart", _, _, _, _)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "AcceptedQuestArtefactAtCamp");

IF
DB_CurrentLevel("CRE_Main_A", _, _, _, _)
AND
DB_GlobalFlag(GLO_GithChokepoint_Knows_DecipheredMap_604768b9-c983-414d-8c3b-ba1dee3da387, _, _, _, _)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "EnteredCRERegion");

IF
DB_GlobalFlag(CRE_ChainOfCommand_Event_TemplarLeavesCaptainDialog_c5263176-8df5-4e8d-a51e-e5bc35715f51, _, _, _, _)
AND
DB_Defeated(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, _, _, _, _)
AND
QRY_OnlyOnce("GLO_SecretOfArtefact_TalkedToCaptain", _, _, _, _)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "TalkedToCaptain");

IF
DialogEnded(CRE_ChainOfCommand_Templar_5b966f52-b647-b971-e783-437801218856, _, _, _, _)
AND
DB_GlobalFlag(CRE_ChainOfCommand_State_SecurityOfficeHostile_04a08ea2-98de-4711-8cd1-9fa6e145a841, _, _, _, _)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "KeptArtefact");

IF
EntityEvent((GUIDSTRING)_Var1, "CRE_AstralPrison_Returned", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_GlobalFlag(CRE_AstralPrison_Quest_AttemptedToKillDaisy_1d5878d4-1909-453a-aa6a-c43c2faf0c65, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "LeftPrisonSavedDaisy");

IF
EntityEvent((GUIDSTRING)_Var1, "CRE_AstralPrison_Returned", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GlobalFlag(CRE_AstralPrison_Quest_AttemptedToKillDaisy_1d5878d4-1909-453a-aa6a-c43c2faf0c65, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "LeftPrisonUpsetDaisy");

IF
DialogEnded(INT_EmperorRevealed_WokenUpAtNight_SCO_2dd56c1b-66b0-5c6e-00d3-e6fdd5cab379, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
QuestUpdate("GLO_ArtefactDiscovery", "WokenAtNight");

IF
TemplateAddedTo(Tadpole_6426104b-3e00-4ff5-90c7-c25cc27b916f, (GUIDSTRING)_Var1, (GUIDSTRING)_Var2, _, (GUIDSTRING)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var2, "GLO_UnleashPowers", "FoundTadpole");

IF
TemplateAddedTo((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var3, _, (GUIDSTRING)_Var1)
AND
DB_TadpolePowers_TadpolePowerJar_Templates(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var3, "GLO_UnleashPowers", "FoundTadpole");

IF
TemplateAddedTo(LOOT_MF_Tadpole_Astral_A_4a82e6f2-839f-434e-addf-b07dd1578194, _, (GUIDSTRING)_Var2, _, _)
AND
DB_Players(_Var2, _, _, _, _)
THEN
QuestUpdate(_Var2, "GLO_UnleashPowers", "UseAstralTadpole");

IF
DialogStarted(GLO_Tadpole_Consume_b8af6722-476f-9d04-d36d-484db6e0d56f, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
QuestUpdate("GLO_UnleashPowers", "DaisyAskedConsume");

PROC
PROC_GLO_Tadpole_CorruptionIncrease(_, _, _, _, _)
AND NOT
DB_CurrentLevel("TUT_Avernus_C", _, _, _, _)
THEN
QuestUpdate("GLO_UnleashPowers", "UsedIllithidPersuasion");

IF
RelationChanged(Hero_a1542c81-6895-929e-4522-10ce218bb360, (FACTION)_Var1, (INTEGER)_Var2, 1, (FACTION)_Var1)
AND
_Var2 < 50
AND
GetFaction(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(WYR_KillDirectorGortash_State_GortashBecameHostile_990f1c60-6ecb-4898-ab2e-0a92d2dc0a2c);

IF
AutomatedDialogEnded(LOW_SteelWatchFoundry_AD_BrokenWatcherReturnTo_c9b8a683-e3b2-b8dc-2a50-fa2deeeef845, _, _, _, _)
AND NOT
DB_GlobalFlag(LOW_SteelWatchFoundry_State_FoundryVisited_5c929efe-ffe2-4eeb-8853-da29735b53ab, _, _, _, _)
THEN
QuestUpdate("WYR_GetGortashGem", "LearnedFoundryLocation");

IF
DB_GlobalFlag(LOW_SteelWatchFoundry_State_FoundryVisited_5c929efe-ffe2-4eeb-8853-da29735b53ab, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Ironhand_Event_TerroristQuest_Accepted_0dae7572-9ff4-4991-900b-dadfe153d306, _, _, _, _)
THEN
QuestUpdate("WYR_GetGortashGem", "EnteredFoundry");

IF
FlagSet(LOW_SteelWatchFoundry_State_FoundryVisited_5c929efe-ffe2-4eeb-8853-da29735b53ab, _, _, _, _)
AND
DB_GlobalFlag(WYR_Ironhand_Event_TerroristQuest_Accepted_0dae7572-9ff4-4991-900b-dadfe153d306, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
GetFlag(LOW_SteelWatchFoundry_State_HasBomb_8a262fbb-6d98-48cc-bebf-d52773eb38f7, _Var3, 1, _, _)
THEN
QuestUpdate(_Var3, "WYR_GetGortashGem", "EnteredFoundry_HasBomb");

IF
DialogStarted((DIALOGRESOURCE)_Var1, _, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_WYR_KillDirectorGortash_Journal_LearnFoundryInsideDialogs(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_KillDirectorGortash_State_LearnedFoundryLocation_56e0ff1b-8cc9-4996-be5c-9cb4724c611d, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Ironhand_Event_TerroristQuest_Accepted_0dae7572-9ff4-4991-900b-dadfe153d306, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate("WYR_GetGortashGem", "LearnedInside");

IF
FlagSet(LOW_SteelWatchFoundry_State_TitanDefeatedWithoutToobinPresent_b0c70e67-f759-4e42-8568-93bc695e7437, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
GetFlag(LOW_SteelWatchFoundry_State_HasBomb_8a262fbb-6d98-48cc-bebf-d52773eb38f7, _Var3, 1, _, _)
THEN
QuestUpdate(_Var3, "WYR_GetGortashGem", "ReachedCentre_HasBomb");

IF
FlagSet(WYR_Ironhand_BombDestroyed_8ed705b5-6f86-4cff-8c14-cc1c7b87ad9c, _, _, _, _)
AND
QRY_QuestUpdateIsUnlockedForAny("WYR_GetGortashGem", "ReachedCentre_HasBomb", _, _, _)
THEN
QuestUpdate("WYR_GetGortashGem", "LostBombCentre");

IF
DB_PermaDefeated(S_LOW_GondianWorker08_Leader_3607ec31-f939-41aa-a7d2-e32f8c46979d, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "WYR_GetGortashGem", "ConvincedGondianLeader", 1, _Var1)
AND
QuestUpdateIsUnlocked(_Var1, "WYR_GetGortashGem", "GondianLeaderDied", 0, _Var1)
THEN
QuestUpdate(_Var1, "WYR_GetGortashGem", "GondianLeaderDied");

IF
AddedTo(S_WYR_Ironhand_RunepowderBomb_8b926cb4-9dd3-4bbf-8b76-9d628270cf1f, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Ironhand_Event_TerroristQuest_Offered_681451d3-6186-4c59-aba7-94ef8fdef701, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_State_StoleBomb_9c8f4663-50f4-4468-8bbc-994090c3110e);

IF
TextEvent("journal_ggcg_complete", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "WYR_GetGortashGem", "GotKethericGem");
QuestUpdate(_Var1, "WYR_GetGortashGem", "GortashOfferedPact");
QuestUpdate(_Var1, "WYR_GetGortashGem", "GotOrinGemForGortash");
QuestUpdate(_Var1, "WYR_GetGortashGem", "SentToPool");
QuestUpdate(_Var1, "WYR_GetGortashGem", "LearnedFromOrin");
QuestUpdate(_Var1, "WYR_GetGortashGem", "LearnedFromGnomes");
QuestUpdate(_Var1, "WYR_GetGortashGem", "LearnedAtCeremony");
QuestUpdate(_Var1, "WYR_GetGortashGem", "StoleBomb");
QuestUpdate(_Var1, "WYR_GetGortashGem", "GotBombAndLocation");
QuestUpdate(_Var1, "WYR_GetGortashGem", "LearnedFoundryLocation");
QuestUpdate(_Var1, "WYR_GetGortashGem", "LocatedFoundry");
QuestUpdate(_Var1, "WYR_GetGortashGem", "EnteredFoundry");
QuestUpdate(_Var1, "WYR_GetGortashGem", "MetGondianLeader");
QuestUpdate(_Var1, "WYR_GetGortashGem", "ConvincedGondianLeader");
QuestUpdate(_Var1, "WYR_GetGortashGem", "GondianLeaderDied");
QuestUpdate(_Var1, "WYR_GetGortashGem", "ForcedGondianLeader");
QuestUpdate(_Var1, "WYR_GetGortashGem", "DisabledSteelWatch");
QuestUpdate(_Var1, "WYR_GetGortashGem", "EnteredWyrmsCrossing");
QuestUpdate(_Var1, "WYR_GetGortashGem", "LearnedCeremony");
QuestUpdate(_Var1, "WYR_GetGortashGem", "LearnedGortashSW");
QuestUpdate(_Var1, "WYR_GetGortashGem", "EnteredCeremony_NoClue");
QuestUpdate(_Var1, "WYR_GetGortashGem", "NoticedSteelWatch");
QuestUpdate(_Var1, "WYR_GetGortashGem", "OfferedPact");
QuestUpdate(_Var1, "WYR_GetGortashGem", "GotOrinGem");
QuestUpdate(_Var1, "WYR_GetGortashGem", "ForgedAllianceGortash");
QuestUpdate(_Var1, "WYR_GetGortashGem", "GotGortashGem");
QuestUpdate(_Var1, "WYR_GetGortashGem", "ElderBrain");

IF
DialogEnded(COL_KethericShowdown_CrownController_1bcd7cc6-6b38-3cf7-ca60-686d4eadc2b2, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
QuestUpdate("LOW_FindBhaalTemple", "LearnedAboutOrin");

IF
DB_GlobalFlag(WYR_OrinsImpersonation_State_MetOrinOnce_5f82392a-6e8f-4c9b-a927-b9d77ee263ec, _, _, _, _)
AND NOT
QRY_GLO_OrinControlGem_StartObjectiveReached()
THEN
QuestUpdate("LOW_FindBhaalTemple", "OrinImpersonatedFirst");

IF
DB_GlobalFlag(WYR_OrinsImpersonation_State_MetOrinOnce_5f82392a-6e8f-4c9b-a927-b9d77ee263ec, _, _, _, _)
AND
QRY_GLO_OrinControlGem_StartObjectiveReached()
THEN
QuestUpdate("LOW_FindBhaalTemple", "OrinImpersonatedFirst_SecondQuestStep");

QRY
QRY_GLO_OrinControlGem_StartObjectiveReached()
AND
QRY_QuestUpdateIsUnlockedForAny("LOW_FindBhaalTemple", "BecomeOrFollowMurders", _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_GLO_OrinControlGem_StartObjectiveReached()
AND
QRY_QuestUpdateIsUnlockedForAny("LOW_FindBhaalTemple", "FindBhaalTemple_StartPoint_Devella_Clueless", _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_GLO_OrinControlGem_StartObjectiveReached()
AND
QRY_QuestUpdateIsUnlockedForAny("LOW_FindBhaalTemple", "FindBhaalTemple_StartPoint_Gortash_Ceremony", _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_GLO_OrinControlGem_StartObjectiveReached()
AND
QRY_QuestUpdateIsUnlockedForAny("LOW_FindBhaalTemple", "FindBhaalTemple_TableauxOfMurder", _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_GLO_OrinControlGem_StartObjectiveReached()
AND
QRY_QuestUpdateIsUnlockedForAny("LOW_FindBhaalTemple", "OrinImpersonatedFirst_SecondQuestStep", _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_GLO_OrinControlGem_StartObjectiveReached()
AND
QRY_QuestUpdateIsUnlockedForAny("LOW_FindBhaalTemple", "StartPoint_NoTargetList_AbductionOccured_Companion", _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_GLO_OrinControlGem_StartObjectiveReached()
AND
QRY_QuestUpdateIsUnlockedForAny("LOW_FindBhaalTemple", "StartPoint_NoTargetList_AbductionOccured_Yenna", _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_GLO_OrinControlGem_StartObjectiveReached()
AND
QRY_QuestUpdateIsUnlockedForAny("LOW_FindBhaalTemple", "StartPoint_NoTargetList_FindBhaalTempleDoor", _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_GLO_OrinControlGem_StartObjectiveReached()
AND
QRY_QuestUpdateIsUnlockedForAny("LOW_FindBhaalTemple", "StartPoint_NoTargetList_OrinNote", _, _, _)
THEN
DB_NOOP(1);

IF
DB_GlobalFlag(GLO_Orin_State_PermaDefeated_c716e4d9-e6ed-445c-a710-ee4d91c67298, _, _, _, _)
AND NOT
DB_GlobalFlag(GLO_EmperorPrelude_State_OrinStoneCollected_3e629422-74fd-49d0-9e15-d078f6a9c02c, _, _, _, _)
THEN
QuestUpdate("LOW_FindBhaalTemple", "RetrievedDagger");

IF
DialogEnded(INT_EmperorRevealed_WokenUpAtNight_SCO_2dd56c1b-66b0-5c6e-00d3-e6fdd5cab379, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
QuestUpdate("GLO_DealWithTheBrain", "LearnedOfElderBrain");
QuestUpdate("GLO_DealWithTheBrain", "LearnedOfDestroyOption");
QuestUpdate("GLO_DealWithTheBrain", "LearnedOfDominateOption");

IF
DB_GlobalFlag(GLO_EmperorPrelude_State_GortashStoneCollected_c608f192-c5ab-4be9-b13d-4c4ca3c6b971, _, _, _, _)
AND
DB_GlobalFlag(GLO_EmperorPrelude_State_OrinStoneCollected_3e629422-74fd-49d0-9e15-d078f6a9c02c, _, _, _, _)
AND NOT
DB_GlobalFlag(END_General_State_CurrentlyInMorphicPool_06208edf-4c61-44a2-932b-b158d9ddd2f0, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "GotAllStones");

IF
FlagSet(GLO_EmperorPrelude_State_GortashStoneCollected_c608f192-c5ab-4be9-b13d-4c4ca3c6b971, _, _, _, _)
AND
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
AND
DB_GlobalFlag(END_General_State_CurrentlyInMorphicPool_06208edf-4c61-44a2-932b-b158d9ddd2f0, _, _, _, _)
AND
DB_GlobalFlag(END_MorphicPool_Event_AttackedGortash_d3c03c7a-d153-4d4e-bc90-6f7b3bb9af1f, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "FaceBrainAfterGortash");

PROC
PROC_END_MorphicPool_TeleportToAstralPrism()
THEN
QuestUpdate("GLO_DealWithTheBrain", "FailedToControlBrain");

IF
DialogStarted(END_IllithidOptions_Assimilation_f909fcc9-a3dc-b91d-e91c-33f0479c55bb, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
QuestUpdate("GLO_DealWithTheBrain", "LearnedMindflayerNeeded");

IF
DialogEnded(END_IllithidOptions_Assimilation_f909fcc9-a3dc-b91d-e91c-33f0479c55bb, _, _, _, _)
AND
DB_GlobalFlag(END_General_State_SupremeTadpoleAvailable_0177c452-90cc-4c29-83b8-4acaa2902b27, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "SupremeTadpole");

IF
FlagSet(END_General_State_CompKarlachIsMindFlayer_4f403cb8-c9d8-4e50-ff3a-e56a90c8f1d0, _, _, _, _)
AND
DB_GlobalFlag(END_General_State_CurrentlyInAstralPlane_b3cf6c91-4d1c-4dcf-bc57-262f7d0f02b9, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "CompanionKarlachIllithid");

IF
FlagSet(END_General_State_PlayerIsMindFlayer_d138f537-2268-49a6-8dc4-256bd9cf5633, _, _, _, _)
AND
DB_GlobalFlag(END_General_State_CurrentlyInAstralPlane_b3cf6c91-4d1c-4dcf-bc57-262f7d0f02b9, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "AvatarIllithid");

IF
FlagSet(END_General_State_CompKarlachIsMindFlayer_4f403cb8-c9d8-4e50-ff3a-e56a90c8f1d0, _, _, _, _)
AND
DB_GlobalFlag(END_General_State_CurrentlyInHighHall_118b3dc5-dab8-4872-92da-ab01c15fa55e, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "CompanionKarlachIllithid_HH");

IF
FlagSet(END_General_State_PlayerIsMindFlayer_d138f537-2268-49a6-8dc4-256bd9cf5633, _, _, _, _)
AND
DB_GlobalFlag(END_General_State_CurrentlyInHighHall_118b3dc5-dab8-4872-92da-ab01c15fa55e, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "AvatarIllithid_HH");

IF
FlagSet(END_General_State_CompKarlachIsMindFlayer_4f403cb8-c9d8-4e50-ff3a-e56a90c8f1d0, _, _, _, _)
AND
DB_GlobalFlag(END_General_State_CurrentlyInBrainBattle_0d7205b2-0d55-4540-8737-543253873cd6, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "CompanionKarlachIllithid_BB");

IF
FlagSet(END_General_State_PlayerIsMindFlayer_d138f537-2268-49a6-8dc4-256bd9cf5633, _, _, _, _)
AND
DB_GlobalFlag(END_General_State_CurrentlyInBrainBattle_0d7205b2-0d55-4540-8737-543253873cd6, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "AvatarIllithid_BB");

IF
DialogEnded(END_BrainBattle_Intro_4565e114-0153-0449-ea83-de3b972c7679, _, _, _, _)
AND
DB_PartyMembers(_Var2, _, _, _, _)
AND
DB_END_BrainBattle_Start(1, _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "StandingAtopTheBrain");

IF
EnteredTrigger((CHARACTER)_Var1, S_END_NetherbrainArena_001_SUB_a79f975d-d33a-455b-a444-9a0d08f59c57, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "GLO_DealWithTheBrain", "EnteredMindArena");

IF
DB_PermaDefeated(S_MOO_Ketheric_e9918f3e-5b87-40a3-a9bd-61545151573f, _, _, _, _)
THEN
QuestUpdate("LOW_FindMol", "MolNotInColonyDefeatedKetheric");

IF
QuestUpdateUnlocked(_, "LOW_FindMol", (STRING)_Var2, _, _)
AND
DB_LOW_FindMol_ChangeCategoryEntries(_Var2, _, _, _, _)
THEN
QuestSetCategory("LOW_FindMol", "BaldursGate");

IF
TeleportedToCamp((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("HIDDEN_WLD_Boosters_CAMP_FirstGoToCamp", _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var1, "HIDDEN_WLD_Boosters", "CAMP_FirstGoToCamp");

IF
UseFinished(_, S_GOB_ThroneRoom_Door_Entrance_bf8a7b29-383d-4344-bbe6-b72f10c1ba50, 1, (CHARACTER)_, (CHARACTER)_)
THEN
QuestUpdate("SHA_Nightsong", "SearchTemple");

IF
QuestClosed((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
THEN
QuestSetCategory(_Var1, "CompletedQuests");

IF
TextEvent("getgems", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ToInventory(S_COL_CrownController_Ketheric_06b8891b-e71c-423b-8482-2680c3c16a4d, _Var1, 1, 1, 1);
ToInventory(S_WYR_CrownController_Gortash_383be300-d328-4152-86df-4927482d1fd7, _Var1, 1, 1, 1);
ToInventory(S_LOW_CrownController_Orin_360b0dfd-8e0b-48d2-a079-fcf68c104d6b, _Var1, 1, 1, 1);

IF
TextEvent("journal_testall", _, _, _, _)
AND
DB_QuestDef_State(_, _Var2, _Var3, _, _)
THEN
QuestUpdate(_Var2, _Var3);

IF
TextEvent("journal_dealwithbrainstart", _, _, _, _)
THEN
QuestUpdate("GLO_DealWithTheBrain", "LearnedOfElderBrain");
QuestUpdate("GLO_DealWithTheBrain", "LearnedOfDestroyOption");
QuestUpdate("GLO_DealWithTheBrain", "LearnedOfDominateOption");


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Start"
