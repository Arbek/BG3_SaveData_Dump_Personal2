Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_ShadowStoneShadows(S_HAV_Wave0_Wraith_001_d51f412c-8b40-4141-a65f-057a81d549fb, SCL_AD_ShadowMemory1_779e04b2-88f8-49e5-c88a-2d001683f7a6, "HAV_Wave0");
DB_ShadowStoneShadows(S_HAV_Wave0_Shadow_007_7e722c07-0bd0-4091-aa5a-d7391404229a, SCL_AD_ShadowMemory2_581fa00a-eeff-0143-679c-b8041a5a7c12, "HAV_Wave0");
DB_ShadowStoneShadows(S_HAV_Wave0_Shadow_008_01e7cde6-a4df-403c-87c3-d5377682a6eb, SCL_AD_ShadowMemory3_76933ca2-cdff-980e-44d7-79bda40ab72b, "HAV_Wave0");
DB_ShadowStoneShadows(S_HAV_Wave0_Shadow_009_702751d5-1ac0-4399-b02e-972c7258e974, SCL_AD_ShadowMemory4_6c4e133d-e66b-5cef-3f48-f6ff299faff7, "HAV_Wave0");
DB_ShadowStoneShadows(S_HAV_Wave2_Wraith_001_98dde2d9-06c1-4cfd-83b9-a9d2338b514d, SCL_AD_ShadowMemory5_ff6d3cc7-031e-8281-8a0c-bf69e5ea13fd, "HAV_Wave2");
DB_ShadowStoneShadows(S_HAV_Wave2_Shadow_001_61dfdf61-6860-464a-8e38-bce3458846a7, SCL_AD_ShadowMemory6_06fd0ebd-bb89-f767-7b33-c58689788642, "HAV_Wave2");
DB_ShadowStoneShadows(S_SCL_ProdigyFight_Shadow_000_2a6ee685-e36f-460f-a593-8aa5ceccbb03, SCL_AD_ShadowMemory7_ba1ebbde-43cf-fda0-2886-593ce9ecebc2, "SCL_ProdigyFight");
DB_ShadowStoneShadows(S_SCL_ProdigyFight_Shadow_001_acdfb716-78c5-4260-9709-6a7227e2068e, SCL_AD_ShadowMemory8_4c790aff-339f-687b-7d62-b3745eb63e4c, "SCL_ProdigyFight");
DB_ShadowStoneShadows(S_SCL_HarperShadow_000_20fe1b42-edc1-415c-9537-519702284390, SCL_AD_ShadowMemory9_c7a2da88-4f52-e0ba-4991-bb112b343f92, "SCL_HarperShadow");
DB_ShadowStoneShadows(S_SCL_HarperShadow_001_e667c348-1daa-4817-aade-2bbaa4a4e6fd, SCL_AD_ShadowMemory10_b95cd623-32f5-56eb-4f1a-495bf4db7312, "SCL_HarperShadow");
DB_ShadowStoneShadows(S_SCL_HarperShadow_002_cac7dc03-adcf-4cf1-9a3b-2e78c73e3a50, SCL_AD_ShadowMemory11_8a532100-03e0-5e36-cb56-097e7c4ea2e1, "SCL_HarperShadow");
DB_ShadowStoneShadows(S_SCL_HarperShadow_003_f046eca6-145d-44fa-b50f-f94a1b389f62, SCL_AD_ShadowMemory12_ef26dd1a-529d-8bcc-b4ef-5413950c1505, "SCL_HarperShadow");
DB_ShadowStoneShadows(S_SCL_HarperShadow_004_ac392bb8-d47f-4175-9dad-4148382bd0b7, SCL_AD_ShadowMemory13_e5ef368a-e4dd-b2c8-10ab-7729a4c097fd, "SCL_HarperShadow");
DB_ShadowStoneShadows(S_SCL_HarperShadow_005_ea04d8d5-a8c5-4766-97ad-120aad20584a, SCL_AD_ShadowMemory14_390c1ea5-fc8d-9b82-6e04-3b37b4e28449, "SCL_HarperShadow");
DB_ShadowStoneShadows(S_TWN_ArabellaPowers_Shadow_1_6f78bd45-cd89-499d-af09-de331e945ad4, SCL_AD_ShadowMemory15_b3251c0c-0de5-af83-f0e6-5334200797c1, "TWN_ArabellaPowers");
DB_ShadowStoneShadows(S_TWN_ArabellaPowers_Shadow_2_92489d69-dae8-4aa2-9a93-2053e809c0d0, SCL_AD_ShadowMemory16_a7d1ef9c-54dc-09f5-0177-5f1e76416a86, "TWN_ArabellaPowers");
DB_ShadowStoneShadows(S_TWN_BasementShadows_001_b58da1fb-6b31-463f-bea9-a48c04569aec, SCL_AD_ShadowMemory17_c4e62039-e127-d8e7-c88a-06638d3df192, "TWN_MasonsGuild_RebelHideout");
DB_ShadowStoneShadows(S_TWN_BasementShadows_002_c553d945-2760-4de1-9c0c-caaaa1e693c4, SCL_AD_ShadowMemory18_917960d9-1f79-7e3b-26cf-2ac3a99451eb, "TWN_MasonsGuild_RebelHideout");
DB_ShadowStoneShadows(S_TWN_BasementShadows_003_6889f976-681d-4ce1-9af5-245717897eed, SCL_AD_ShadowMemory19_18069d70-4340-e0ed-c36a-bf2cd6ec6db8, "TWN_MasonsGuild_RebelHideout");
DB_ShadowStoneShadows(S_TWN_BasementShadows_004_c6a9934d-19db-4f69-9bc2-4c4c8e0653b7, SCL_AD_ShadowMemory20_3249d0ae-6ee8-2d46-d12d-f01fdf96055f, "TWN_MasonsGuild_RebelHideout");
DB_ShadowStoneShadows(S_TWN_BasementShadows_005_5ad56dd4-0c9a-4c8d-b5bd-4cafcf5708ce, SCL_AD_ShadowMemory21_d38e9ac9-f119-ec3c-94d7-fc859dfbc991, "TWN_MasonsGuild_RebelHideout");
DB_ShadowStoneShadows(S_TWN_BasementShadows_006_238d6737-efc6-4ba9-9022-8d4b26828fc7, SCL_AD_ShadowMemory22_54728284-9919-ec4d-c88f-c30dbeb810c1, "TWN_MasonsGuild_RebelHideout");
DB_ShadowStoneShadows(S_TWN_ArabellaPower_DeadShadow_1_be1d10fc-d50d-472c-ac1f-afba5d558b97, SCL_AD_ShadowMemory23_8eb7724f-1cfb-f569-8832-da0dc8fbb128, "TWN_ArabellaPowers");
DB_ShadowStoneShadows(S_TWN_ArabellaPower_DeadShadow_2_c94576db-572f-481f-a75b-f8c719b50600, SCL_AD_ShadowMemory24_178b263b-a8ba-1d4f-2d57-f91b7600970d, "TWN_ArabellaPowers");
DB_ShadowStoneShadows(S_TWN_CentralSquare_Shadows_Shadow_01_810ebf58-3b08-4664-9a52-3915f0801a8a, SCL_AD_ShadowMemory31_40a7c95f-6d8f-e012-c0c3-e9367243a36d, "TWN_CentralSquare");
DB_ShadowStoneShadows(S_TWN_CentralSquare_Shadows_Shadow_02_b33cd839-9bbf-441e-bbba-a21b9ff2a33c, SCL_AD_ShadowMemory32_75327e3f-6bd7-9a2a-c683-f1f6a94f43db, "TWN_CentralSquare");
DB_ShadowStoneShadows(S_TWN_CentralSquare_Shadows_Shadow_03_1caca0a2-f41d-4699-a10b-4b961f39d529, SCL_AD_ShadowMemory33_474dcbee-4e6e-fdcb-4ce1-72eb2c3c0dcb, "TWN_CentralSquare");
DB_GLO_DefeatCounter_AllDefeatedGlobalFlag("TWN_MasonsGuild_RebelHideout", TWN_MasonsGuild_RebelHideout_State_Cleared_e67e4bf3-ba34-4411-8745-ea00c5d040a4);

KBSECTION
IF
Dying((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_ShadowStoneShadows(_Var1, _Var2, _, _Var1, _Var1)
AND
CreateAtObject(UNI_Quest_ShadowStone_5c6904cc-5bb0-4ed9-a97c-b2df9aa2a9b6, _Var1, 0, 0, "", 0, _Var4, _Var1, _Var1, _Var1)
AND
GetPosition(_Var1, _Var5, _Var6, _Var7, _Var1)
AND
FindValidPosition(_Var5, _Var6, _Var7, 3, _Var4, 0, _Var8, _Var9, _Var10, _Var1)
THEN
TeleportToPosition(_Var4, _Var8, _Var9, _Var10);
DB_ItemDialog_NarratorAD(_Var4, _Var2);

IF
Died((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_ShadowStoneShadows(_Var1, _, _, _Var1, _Var1)
THEN
SetOnStage(_Var1, 0);

PROC
PROC_CleanupShadowStones()
AND
DB_ShadowStoneShadows(_Var1, _Var2, _, _Var1, _Var1)
AND
DB_ItemDialog_NarratorAD(_Var4, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_ItemDialog_NarratorAD(_Var4, _Var2);

PROC
PROC_CleanupShadowStones()
AND
DB_ShadowStoneShadows(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
NOT DB_ShadowStoneShadows(_Var1, _Var2, _Var3);

IF
DB_ShadowStoneShadows(_Var1, _, "TWN_MasonsGuild_RebelHideout", _Var1, _Var1)
THEN
DB_GLO_DefeatCounter(_Var1, "TWN_MasonsGuild_RebelHideout");


EXITSECTION
PROC_CleanupShadowStones();
ENDEXITSECTION

ParentTargetEdge "Act2"
