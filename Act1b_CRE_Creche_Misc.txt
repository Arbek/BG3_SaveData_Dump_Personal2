Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_InRegionFlag(S_CRE_Creche_TopFloor_SUB_01f823fe-7363-4f8a-bea3-31755b318738, GLO_GithCreche_State_EverEnteredBefore_3ebdfeaa-4e83-4878-90db-01adb9fdf629);
DB_Dialogs(S_CRE_CrecheGuard01_5a5c5878-fd9f-41c0-9c8c-b74cea0e3fd9, CRE_CrecheGuard01_5c37235c-70fc-9746-fe18-7a20d98a8e21);
DB_Dialogs(S_CRE_CrecheGuard02_99439816-fcaa-4167-a20a-8f3dfff4e345, CRE_CrecheGuard02_073fed4f-16c2-6ea8-5344-6b2d7f0aa0b3);
DB_Dialogs(S_CRE_CrecheGuard04_d55e65a4-0663-46e5-8213-4ae5dd410e06, CRE_CrecheGuard04_1010c686-4891-c61b-c196-30ebc4d030cf);
DB_Dialogs(S_CRE_CrecheGuard05_00135309-731d-4782-bd43-c8b54cacec16, CRE_CrecheGuard05_91ec8fa4-4373-699e-d053-6803b5c39d57);
DB_Dialogs(S_CRE_CrecheTeenager01_8a7b36f5-378c-4a71-a593-e00ea01ab6ff, CRE_CrecheTeenager01_439fd51a-4432-7c7a-da67-95d7d660a1f0);
DB_Dialogs(S_CRE_CrecheTeenager02_c67ff924-036b-4259-8acc-9fc013fe2059, CRE_CrecheTeenager02_7cb5d715-4070-c970-79d6-526fb793b553);
DB_Dialogs(S_CRE_CrecheKid01_81845208-9721-4c58-8546-84f958a85d57, CRE_CrecheKid01_dad26f1e-74a5-10f6-7129-068c8995e59e);
DB_Dialogs(S_CRE_CrecheKid02_5d33ac06-faa7-48c3-8794-6cff79515ce5, CRE_CrecheKid02_07bdc65f-6560-0c0a-ac9b-ec16b699fed6);
DB_Dialogs(S_CRE_CrecheKid03_ba10db62-da84-4c7e-8867-0a98be775aa9, CRE_CrecheKid03_38a05937-c75f-64c8-ecb6-b5b28b532d0c);
DB_Dialogs(S_CRE_CrecheKid04_139392d5-d068-4445-b5a4-42ef9340b1b7, CRE_CrecheKid04_48bf81fe-10db-6b24-3e99-59a835950015);
DB_Dialogs(S_CRE_InfirmaryAmbushGuard01_2c0b5b3b-5e48-48e6-b10f-08a910ad07f5, CRE_InfirmaryAmbushGuard01_e65d4547-6c1d-fbc2-e09b-cfca50413537);
DB_Dialogs(S_CRE_InfirmaryAmbushGuard02_ecb4222c-22b9-49d6-88ed-62b5cba281fc, CRE_InfirmaryAmbushGuard02_f2261932-32f2-e16c-6dec-ba9fb1f115fa);
DB_Dialogs(S_CRE_InfirmaryAmbushGuard03_8f599eca-cf21-42d2-a9f8-56e92aa8624c, CRE_InfirmaryAmbushGuard03_bc5cca90-6afc-f707-0f3a-32c1c69dfb22);
DB_Dialogs(S_CRE_InfirmaryAmbushGuard04_3efd4f36-05d3-4a30-80e8-59fd14215fd5, CRE_InfirmaryAmbushGuard04_0919d578-b056-1df3-1551-91ae56764116);
DB_Dialogs(S_CRE_SecurityOfficer01_64445697-2adc-4784-883e-392bae899892, CRE_SecurityOfficer01_69bcef0f-1b21-ef54-bfd7-fb4b75da59e2);
DB_Dialogs(S_CRE_SecurityOfficer02_475367c4-aace-4884-af66-16097e2d2119, CRE_SecurityOfficer02_96c01b5a-3e2c-a2e1-c790-e8fa220eb935);
DB_Dialogs(S_CRE_IntelligenceOfficer01_c76d7d19-3d46-44e5-a914-80efc8cac4ea, CRE_IntelligenceOfficer01_30295d00-e676-5d7b-4a09-40c69abf7799);
DB_Dialogs(S_CRE_IntelligenceOfficer02_a17c356a-6e0c-4d2f-bcf6-58195d6c9edf, CRE_IntelligenceOfficer02_0b1c7944-b6cb-387b-d9f8-84fca7efaf6e);
DB_Dialogs(S_CRE_IntelligenceOfficer03_266e49a3-83f8-40aa-baff-5ffe2a1a35db, CRE_IntelligenceOfficer03_7be66ab4-0109-bc6f-bd5e-7af7d8a01ee3);
DB_Dialogs(S_CRE_IntelligenceOfficer04_f51854ec-5dbc-4686-bb4a-b2f8b4c5341b, CRE_IntelligenceOfficer04_3628abf0-6ec6-4fcc-fe03-10f041ee96d5);
DB_Dialogs(S_CRE_Quartermistress_ffb0ec61-5739-4b34-8d27-e61b1f4500ad, CRE_Quartermistress_5576e41f-bf21-beee-fe44-bf28aff10cb1);
DB_Dialogs(S_CRE_PortraitKid_428056fd-37b5-49ff-92b1-d1f84b733b64, CRE_PortraitKid_a4aae191-fa9e-71df-bb1b-291ecbe0dc34);
DB_Inclusion_NPCDialog(CRE_General_VlaakithPortrait_291a6ebd-da9a-3f80-0eba-1f9c61d66b88, S_CRE_PortraitKid_428056fd-37b5-49ff-92b1-d1f84b733b64);
DB_Inclusion_Object(S_CRE_PortraitKid_428056fd-37b5-49ff-92b1-d1f84b733b64, CRE_General_PortraitKid_StartInclusion_3b504bb6-0fe0-4ea1-855a-ee54fd09cab8, CRE_General_PortraitKid_EndInclusion_a81aaa25-9d0b-47e0-b971-1f21993caecd);
DB_GlobalFlagReactionAfterDialog(CRE_General_State_VlaakithPortraitRuined_680dfd25-1e5e-4214-b697-a692be1df84d, CRE_General_VlaakithPortrait_291a6ebd-da9a-3f80-0eba-1f9c61d66b88);
DB_GlobalFlagReactionAfterDialog(CRE_General_State_VlaakithPortraitPlayerFailed_83b64d2b-48b4-4af8-ae69-912a21117fc3, CRE_General_VlaakithPortrait_291a6ebd-da9a-3f80-0eba-1f9c61d66b88);
PROC_SetOnStage(S_CRE_VlaakithPortrait_Vandalised_cb30aad6-74a4-40f0-84ca-1460632cc8ef, 0);
PROC_SetOnStage(S_CRE_VlaakithPortrait_Vandalised_Failed_8d37dc16-6930-4950-9287-f383590304b2, 0);
DB_SceneManager(NULL_00000000-0000-0000-0000-000000000000, "CRE_PortraitScene");
DB_SceneTriggerManager("CRE_PortraitScene", S_CRE_VlaakithPortrait_SceneBounds_e5719f4b-6026-4c14-abfd-abe9a965cb69, 0);
DB_SceneAllowAllDisturbances("CRE_PortraitScene");
DB_CRE_GithKids(S_CRE_CrecheKid01_81845208-9721-4c58-8546-84f958a85d57);
DB_CRE_GithKids(S_CRE_CrecheKid02_5d33ac06-faa7-48c3-8794-6cff79515ce5);
DB_CRE_GithKids(S_CRE_CrecheKid03_ba10db62-da84-4c7e-8867-0a98be775aa9);
DB_CRE_GithKids(S_CRE_CrecheKid04_139392d5-d068-4445-b5a4-42ef9340b1b7);
DB_CRE_GithKids(S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f);
DB_CRE_GithKids(S_CRE_MageHandKid02_840d6525-88ba-462a-944c-a74975afa695);
PROC_CRE_MageHand_SceneSetup();
DB_Dialogs(S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f, S_CRE_MageHandKid02_840d6525-88ba-462a-944c-a74975afa695, S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, CRE_General_MageHandMain_b4b752e9-d4e9-185b-44e4-365550ac4e99);
DB_GlobalFlagReactionAfterDialog(CRE_General_State_MageHandKidsMoveAside_d9c41f69-6996-4366-a5d6-2aa2abac1f08, CRE_General_MageHandMain_b4b752e9-d4e9-185b-44e4-365550ac4e99);
DB_CRE_MageHandGremishka(S_CRE_MageHandGremishka_1358e104-c187-400e-b111-b2cf8581422d);
DB_CRE_GremishkaFactions(Act1B_CRE_Gremishkas_d376a9f5-1c31-4aa3-b758-c217d9237cea);
DB_HasItemEvent(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, CRE_General_State_HasMageHandBox_bc0b2be2-f3e4-4b7a-947b-4bb1bff4adc0);
DB_FlagReactionAfterDialog(CRE_MageHandGame_Event_PlayerJoinsGame_d37b8034-0a34-48d1-9ae0-39ddf4f064cf, CRE_General_MageHandMain_b4b752e9-d4e9-185b-44e4-365550ac4e99);
DB_FlagReactionAfterDialog(CRE_MageHandGame_State_PlayerAskedToPlay_c0c02d22-70cb-4490-aebc-efe79b01f0f1, CRE_General_MageHandMain_b4b752e9-d4e9-185b-44e4-365550ac4e99);
DB_CRE_GithBoys_MageHands(S_CRE_MageHand01_750cd0fb-42ec-4570-adc7-c4508dabadda);
DB_CRE_GithBoys_MageHands(S_CRE_MageHand02_80c883bd-8116-4d33-afcb-9032e9421209);
DB_SceneManager(S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f, "CRE_MageHandKids");
DB_SceneManager(S_CRE_MageHandKid02_840d6525-88ba-462a-944c-a74975afa695, "CRE_MageHandKids");
DB_SceneManager(S_CRE_MageHand01_750cd0fb-42ec-4570-adc7-c4508dabadda, "CRE_MageHandKids");
DB_SceneManager(S_CRE_MageHand02_80c883bd-8116-4d33-afcb-9032e9421209, "CRE_MageHandKids");
DB_SceneAllowAllDisturbances("CRE_MageHandKids");
DB_CRE_MageHandKids_BlockDisturbance("StartedDialog");
DB_Dialogs(S_CRE_CorridorTeenager02_d6483496-2e6c-4cf2-9402-a06af68d5326, S_CRE_CorridorTeenager01_a99624a6-4bff-4d1f-9de5-7b3cd89cc669, CRE_General_CorridorTeenagers_16cf2b21-1dd3-333b-45f9-79e3d4e7d9b1);
DB_SpotPlayers(S_CRE_CorridorTeenager02_d6483496-2e6c-4cf2-9402-a06af68d5326, "CRE_CorridorTeens_SpottedPlayer", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_CRE_ForbiddenToSellItems(S_CRE_VlaakithPortrait_Original_5df3cd99-8125-4342-aaab-4b037931f202);
DB_CRE_ForbiddenToSellItems(S_CRE_VlaakithPortrait_Vandalised_cb30aad6-74a4-40f0-84ca-1460632cc8ef);
DB_CRE_ForbiddenToSellItems(S_CRE_GithyankiEgg_999b6dd7-2901-4604-8280-1931a5217a94);
DB_CRE_GithFactions(Act1B_CRE_Gith_GuardsMonastery_625e1224-c1aa-490e-bcc4-75931c8aeaf4);
DB_CRE_GithFactions(Act1B_CRE_Gith_CaptainsQuarters_27e5030c-794e-4270-8ad0-de541d9311b6);
DB_CRE_GithFactions(Act1B_CRE_Gith_PatrollingGuards_8ad3e1d9-70d1-4fc8-a3eb-3dad72f765c2);
DB_CRE_GithFactions(Act1B_CRE_Gith_SecurityOffice_6a8d9c32-b2ba-49e6-9ce8-8cc745bc015e);
DB_CRE_GithFactions(Act1B_CRE_Gith_SecuirtyOffice_Dismissed_15dd6417-255c-4305-846a-e98984d72371);
DB_CRE_GithFactions(Act1B_CRE_Gith_Infirmary_9aac625d-9738-4e1d-8dfa-d53f50846e08);
DB_CRE_GithFactions(Act1B_CRE_Gith_TrainingRoom_fad2dd03-8af3-4697-a06c-71c7add7ce10);
DB_CRE_GithFactions(Act1B_CRE_Gith_TrainingRoom_GithBoy_5fe66d36-13ef-4b30-8fd0-f45d58677b36);
DB_CRE_GithFactions(Act1B_CRE_Gith_MainCheckpoint_a51f68a3-e53a-4784-ba02-8d465b781646);
DB_CRE_GithFactions(Act1B_CRE_Gith_HiddenCheckpoint_5a532d4a-4eb5-4969-8fc8-9c12bf956c06);
DB_CRE_GithFactions(Act1B_CRE_Gith_Hatchery_fead05db-8b13-4083-8c94-db015a8b61b4);
DB_CRE_GithFactions(Act1B_CRE_Gith_QuarterMistress_daff735f-f0a6-4dc2-9382-d0538f56f9c1);
DB_GLO_FireBowls(S_CRE_Hanging_Bowls_A_Gold_000_f291a95d-ffb1-4dd5-96cc-ab0e1463eefe, S_CRE_Chandelier_Hinge_A_Gold_000_271bd290-3a06-4edb-8504-c38170ffabbe);
DB_GLO_FireBowls(S_CRE_Hanging_Bowls_A_Gold_001_21e1e62c-9c32-4af7-ba88-78dc451ea9cd, S_CRE_Chandelier_Hinge_A_Gold_001_527ef17d-1000-4e4e-98f9-3551ceac5e3f);
DB_GLO_FireBowls(LTS_DUN_Chandelier_C_Gold_000_ab82482a-f8e6-45d4-85b4-07971e57a3b0, LTS_DUN_Chandelier_Hinge_A_Gold_001_355e940d-3e16-41c0-8738-3432f40ce001);
DB_GLO_FireBowls(LTS_DUN_Hanging_Bowls_D_053_7ec3d95c-fbf9-4c84-8473-de41dae4bd11, LTS_DUN_Hanging_Bowls_Hinge_A_027_bee7c010-cf72-4dfe-b34a-de3fe81ff32c);
DB_GLO_FireBowls(LTS_DUN_Hanging_Bowls_C_009_e4a1c53a-b60a-46bc-861f-d5988434bf24, LTS_DUN_Hanging_Bowls_Hinge_A_016_14731c0c-69dd-4ce1-b57b-54f456a4cfb9);
DB_GLO_FireBowls(LTS_DUN_Hanging_Bowls_C_010_4bc3ec10-8c75-4871-b8cf-8cdfe9b98329, LTS_DUN_Hanging_Bowls_Hinge_A_018_7a21e424-7451-4f6a-bd73-cfb885ddeabe);
DB_GLO_FireBowls(LTS_DUN_Hanging_Bowls_C_012_95366551-2c80-440a-9812-964bb725902e, LTS_DUN_Hanging_Bowls_Hinge_A_022_29ad1672-d244-41c4-b35a-48593b10ce9a);
DB_GLO_FireBowls(LTS_DUN_Hanging_Bowls_D_052_87b4fd28-b835-4749-b44b-1d22409a5012, LTS_DUN_Hanging_Bowls_Hinge_A_026_1e04710f-a5fd-481e-95f6-d03eda244e0d);
DB_GLO_FireBowls(LTS_DUN_Hanging_Bowls_D_051_e2e0e7af-1cf1-4fc4-9a0c-48743f231443, LTS_DUN_Hanging_Bowls_Hinge_A_025_0c1ee892-0220-4850-a81b-27569d7a17cf);
DB_GLO_FireBowls(LTS_DUN_Hanging_Bowls_B_Gold_001_53343b1e-1818-42fc-b77c-06b042c8c068, LTS_DUN_Hanging_Bowls_Hinge_A_020_1cf3a659-f7bf-433e-9c2b-2a6b62e3d1b1);
DB_GLO_FireBowls(LTS_DUN_Hanging_Bowls_D_021_0909fa72-f8a6-4e21-9766-db0e59e8d32b, LTS_DUN_Hanging_Bowls_Hinge_A_001_49deab6a-c7be-425b-858f-57817abca32d);
DB_CRE_LootableCharacterVBs(S_CRE_Roof_GithyankiSkeleton_5530b1fa-468a-4207-864a-9bf51039d453, CRE_Monastery_VB_GithSkeletonComment_0864aa6c-a5f0-d622-5a12-da0f6e05a447);
DB_OneShot_VoiceBarkTrigger(S_CRE_Hatchery_CommentArea_8e63e84c-18e7-429a-bfaf-b0917409377a, CRE_Hatchery_VB_HatcheryComment_74693886-7199-38f1-bea3-325a6e2d4ddd);
DB_OneShot_VoiceBarkTrigger(S_CRE_Dormitory_CommentArea_e3ed83e5-6a89-4c81-9daa-e998d9b2d437, CRE_General_VB_DormitoryComment_a77fc5ef-85a0-14c6-d2e2-ed0e3208e486);
DB_CRE_ClickableItemVBs(S_CRE_ScienceTools_01_c06c6150-7a2a-4928-a250-c48628467a30, CRE_Infirmary_VB_ScienceComment_5580b99a-8bd9-31db-2e84-53118a7e9158);
DB_CRE_ClickableItemVBs(S_CRE_ScienceTools_02_df24a584-93a9-4db5-a300-d780e28ec03b, CRE_Infirmary_VB_ScienceComment_5580b99a-8bd9-31db-2e84-53118a7e9158);
DB_CRE_ClickableItemVBs(S_CRE_ScienceTools_03_ac3aa8f6-c73a-41d2-a3ed-ee930163f63f, CRE_Infirmary_VB_ScienceComment_5580b99a-8bd9-31db-2e84-53118a7e9158);
DB_CRE_ClickableItemVBs(S_CRE_ScienceTools_04_0374d145-0cf3-486f-94c0-75081a7abeab, CRE_Infirmary_VB_ScienceComment_5580b99a-8bd9-31db-2e84-53118a7e9158);
DB_OneShot_VoiceBarkTrigger(S_CRE_AnatomyCommentArea_ef5a6b19-dd7a-416c-b581-b1060af28e68, CRE_YouthTraining_VB_AnatomicalSketchesComment_9fea9cc0-806f-3e73-f770-6d1454591f92);
DB_CRE_ClickableItemVBs(S_CRE_TrainingDummy01_d5196b1a-771f-4ad3-9d06-131ee45901e6, CRE_YouthTraining_VB_TrainingDummyComment_045d785a-5d7d-98d4-7760-4c9050d49244);
DB_CRE_ClickableItemVBs(S_CRE_TrainingDummy02_09e60f88-c484-4da8-976e-84c78ea9febb, CRE_YouthTraining_VB_TrainingDummyComment_045d785a-5d7d-98d4-7760-4c9050d49244);
DB_CRE_ClickableItemVBs(S_CRE_TrainingDummy03_5038da3a-e874-4e9a-9e28-733aef4bae3b, CRE_YouthTraining_VB_TrainingDummyComment_045d785a-5d7d-98d4-7760-4c9050d49244);
DB_CRE_ClickableItemVBs(S_CRE_TrainingDummy04_cc7ac9a2-3265-4d14-9f5c-0f49da8b0b1a, CRE_YouthTraining_VB_TrainingDummyComment_045d785a-5d7d-98d4-7760-4c9050d49244);
DB_CRE_ClickableItemVBs(S_CRE_TrainingDummy05_b3d0529b-e02e-4393-9028-2c5c05f4a992, CRE_YouthTraining_VB_TrainingDummyComment_045d785a-5d7d-98d4-7760-4c9050d49244);
DB_CRE_ClickableItemVBs(S_CRE_TrainingDummy06_0181f86f-71ca-429f-93d6-5b478aa290c1, CRE_YouthTraining_VB_TrainingDummyComment_045d785a-5d7d-98d4-7760-4c9050d49244);
DB_CRE_ClickableItemVBs(S_CRE_TrainingDummy07_16248d0a-5b76-4a02-9657-414d34a34b01, CRE_YouthTraining_VB_TrainingDummyComment_045d785a-5d7d-98d4-7760-4c9050d49244);
DB_CRE_AttackableItemVBs(SS_CRE_Training_Dummy_Mindflayer_A_01_86da9e9f-027f-4bf1-b4e6-aeb17da3e36d, CRE_YouthTraining_VB_TrainingDummyComment_045d785a-5d7d-98d4-7760-4c9050d49244);
DB_CRE_AttackableItemVBs(S_CRE_Training_Dummy_Mindflayer_A_02_f59c071d-a071-465b-9e74-523c99825fbf, CRE_YouthTraining_VB_TrainingDummyComment_045d785a-5d7d-98d4-7760-4c9050d49244);
DB_CRE_ClickableItemVBs(S_CRE_AppleCrate_7324ba09-bd6e-498d-9dc5-d26017f112b5, CRE_General_VB_FoodComment_8f543d51-6d48-b3b1-e14e-68b69b7ce35c);
DB_CRE_ClickableItemVBs(S_CRE_CaptainMap_a7e650b8-4546-497f-82e2-f87fda12db3c, CRE_ChainOfCommand_VB_CaptainsMapComment_774470ac-c602-9f2e-ed71-12020a933008);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_MainEntrance_13ceb6b3-8b28-48f8-b5e1-0ab649741181, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_Corridor_01_f7a48821-45ab-47dd-aeff-c22046439103, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_Infirmary_deb1957d-9440-4cb0-8fda-a99809a3efdb, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_Corridor_03_05f577dd-52ff-4c2c-968b-c2eabe42ba25, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_Hatchery_984792e0-2a7d-4aa5-b17b-4a60debeba61, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_Dorm_05bcae88-4bb8-4fed-878c-bce3b3eb1caa, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_YouthTraining_6a33db5b-0623-4c92-a7f4-4339ba1b39cd, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_Corridor_04_da32059a-201d-4258-9ba1-bfbb0027f457, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_CaptainsOffice_fec80d38-f06d-463c-9903-7fd423247f6a, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_ItemOwnerShipTriggers("CRE_Main_A", S_CRE_Ownership_SecOffice_e5646070-eaf3-475a-b999-0e6229bff0fd, S_CRE_Templar_378ac93e-03a0-40b4-904c-f37989ac7a8c);
DB_CRE_BattleStations(S_CRE_CrecheCaptain_5093da9b-237a-491f-9402-4f9da73c1565, S_CRE_BattleStation_CrecheCaptain_7cb34834-eb70-48f0-9960-707a51986dff);
DB_CRE_BattleStations(S_CRE_CaptainsBeast01_82736dcd-8648-4795-a296-21aa1bcaf096, S_CRE_BattleStation_CaptainsBeast01_425834b1-a762-4fc6-ac47-401577686ac3);
DB_CRE_BattleStations(S_CRE_CaptainsBeast02_fcd64862-67ba-4358-9636-09ff9545177a, S_CRE_BattleStation_CaptainsBeast02_1a9d771c-2f7c-40c3-ae32-e1879b3f16cc);
DB_CRE_BattleStations(S_CRE_IntelligenceOfficer01_c76d7d19-3d46-44e5-a914-80efc8cac4ea, S_CRE_BattleStation_IntelligenceOfficer01_637b4858-bdd4-4bba-a9f6-19c2c2e58ae0);
DB_CRE_BattleStations(S_CRE_CaptainGuard_ea4643de-cc2c-42f0-949d-4968201ad2c7, S_CRE_BattleStation_CaptainGuard_8c14f682-e60a-4b78-8424-910c49470223);
DB_CRE_BattleStations(S_CRE_PatrollingGuard02_00135309-731d-4782-bd43-c8b54cacec16, S_CRE_BattleStation_PatrollingGuard02_b21a812c-644a-4911-a0d6-af7d88fdcc86);
DB_CRE_BattleStations(S_CRE_CorridorTeenager01_a99624a6-4bff-4d1f-9de5-7b3cd89cc669, S_CRE_BattleStation_CorridorTeenager01_49bbc9ea-d3f2-4803-9849-8441199ac3dd);
DB_CRE_BattleStations(S_CRE_CorridorTeenager02_d6483496-2e6c-4cf2-9402-a06af68d5326, S_CRE_BattleStation_CorridorTeenager02_d25580e7-7e1f-42cf-a74a-99fadfaae510);
DB_CRE_BattleStations(S_CRE_PatrollingGuard01_d55e65a4-0663-46e5-8213-4ae5dd410e06, S_CRE_BattleStation_PatrollingGuard01_3492f227-1e81-42bc-b791-cd3053214876);
DB_CRE_BattleStations(S_CRE_PortraitKid_428056fd-37b5-49ff-92b1-d1f84b733b64, S_CRE_BattleStation_PortraitKid_13073edd-5c2d-43e3-8881-421ee7fe0fc3);
DB_CRE_BattleStations(S_CRE_Quartermistress_ffb0ec61-5739-4b34-8d27-e61b1f4500ad, S_CRE_BattleStation_QuarterMistress_b2d268be-b76e-4149-9178-a3316de2c191);
DB_CRE_BattleStations(S_CRE_HiddenCheckpointWarningGuard_970d10ed-8092-463b-8446-223fe4cf2d68, S_CRE_BattleStation_HiddenCheckpointWarningGuard_2d00d622-4140-4280-99b6-e8cb6af9bbfc);
DB_CRE_BattleStations(S_CRE_HiddenCheckpointMainGuard_3bcbf8fb-5a90-4439-bd81-d9113d74f27e, S_CRE_BattleStation_HiddenCheckpointMainGuard_cec1503a-6915-47ab-bb80-8ca150288e48);
DB_CRE_BattleStations(S_CRE_GithGuardMonastery01_fd348f90-dbc9-41a8-8abc-b6e212e9ff77, S_CRE_BattleStation_GithGuardMonastery01_5e05f0a6-22a5-4291-8bdc-61ba120d5343);
DB_CRE_BattleStations(S_CRE_GithGuardMonastery02_606c0555-d7c3-41a8-9018-14ede3d52e21, S_CRE_BattleStation_GithGuardMonastery02_755a0298-cd08-41e2-a5d0-6de367bbdd47);
DB_CRE_BattleStations(S_CRE_CrecheGuard01_5a5c5878-fd9f-41c0-9c8c-b74cea0e3fd9, S_CRE_BattleStation_CrecheGuard01_bc18c6a9-fb08-4119-8006-f7cc71b675c5);
DB_CRE_BattleStations(S_CRE_MainCheckpointMainGuard_161701af-17b7-4def-b378-5f24e95d667f, S_CRE_BattleStation_MainCheckpointMainGuard_0ef75653-421a-4637-879c-2f9af7c5988e);
DB_CRE_BattleStations(S_CRE_CrecheGuard02_99439816-fcaa-4167-a20a-8f3dfff4e345, S_CRE_BattleStation_CrecheGuard02_2f53e72b-f3ca-4a72-83f4-7473b09d5516);
DB_CRE_BattleStations(S_CRE_MainCheckpointWarningGuard_a6c0d21e-ce59-4dbb-9f64-1ec80b95c838, S_CRE_BattleStation_MainCheckpointWarningGuard_c48289fe-9b0a-4376-b219-0faba61fd698);
DB_CRE_BattleStations(S_CRE_CrecheTeenager01_8a7b36f5-378c-4a71-a593-e00ea01ab6ff, S_CRE_BattleStation_CrecheTeenager01_821842d7-87ba-4f35-b58d-671d28c646ff);
DB_CRE_BattleStations(S_CRE_CrecheTeenager02_c67ff924-036b-4259-8acc-9fc013fe2059, S_CRE_BattleStation_CrecheTeenager02_78c3968d-951c-4af1-bcb7-5a68ab3bf8a7);
DB_CRE_BattleStations(S_CRE_InfirmaryAmbushGuard04_3efd4f36-05d3-4a30-80e8-59fd14215fd5, S_CRE_BattleStation_InfirmaryAmbushGuard04_86259d40-1ee9-4955-b1f7-4c8586a2d566);
DB_CRE_BattleStations(S_CRE_InfirmaryAmbushGuard01_2c0b5b3b-5e48-48e6-b10f-08a910ad07f5, S_CRE_BattleStation_InfirmaryAmbushGuard01_f5296db7-40d8-488a-b0f8-3b13d56557d7);
DB_CRE_BattleStations(S_CRE_InfirmaryAmbushGuard03_8f599eca-cf21-42d2-a9f8-56e92aa8624c, S_CRE_BattleStation_InfirmaryAmbushGuard03_5254d27b-091f-4414-ba40-5d279d9cf43a);
DB_CRE_BattleStations(S_CRE_InfirmaryAmbushGuard02_ecb4222c-22b9-49d6-88ed-62b5cba281fc, S_CRE_BattleStation_InfirmaryAmbushGuard02_686325c7-032d-4aa6-9463-3243cefa5b3f);
DB_CRE_BattleStations(S_CRE_Doctor_c04c1977-d53f-4b5c-a29d-2e8d75024768, S_CRE_BattleStation_Doctor_c657824b-4bb3-4510-a233-bcb3c4d3a9bb);
DB_CRE_BattleStations(S_CRE_CrecheGuard03_245be20a-c140-48b8-bea7-9ff44d9606b2, S_CRE_BattleStation_CrecheGuard03_22eacfbb-76fc-4027-908c-504ae6eba0e3);
DB_CRE_BattleStations(S_CRE_Caretaker_c61ac08e-addf-4f0e-8a0a-2fc026ec0224, S_CRE_BattleStation_Caretaker_34dc7bd3-2397-4bde-9df8-c7ee63fa8a4c);
DB_CRE_BattleStations(S_CRE_CrecheGuard06_09a52fd9-ff83-4594-857a-a1ab0b296dc6, S_CRE_BattleStation_CrecheGuard06_65050abc-1ac2-4329-bc93-bc2fb97561e1);
DB_CRE_BattleStations(S_CRE_Teacher_60933e69-c642-46e0-92ee-0e4353fc2adf, S_CRE_BattleStation_Teacher_b7ef510a-ba60-4dba-8b1e-c8c86b25b5df);
DB_CRE_BattleStations(S_CRE_Student03_91223ba2-41d5-4cde-85b2-6b076e462e3b, S_CRE_BattleStation_Student03_6707178c-2463-4133-baf9-a6039a4dddbf);
DB_CRE_BattleStations(S_CRE_Student02_0d17add0-9e8d-4e6f-82e0-cd14645707d5, S_CRE_BattleStation_Student02_f44d0fbc-f60c-4495-8a8f-16c842da7c26);
DB_CRE_BattleStations(S_CRE_Student04_d3eb2b9a-ac8e-40dc-8596-70b05d08496b, S_CRE_BattleStation_Student04_f8883dab-961a-42bb-a62d-56bbf8e2afc6);
DB_CRE_BattleStations(S_CRE_Student01_82f7512c-3b1d-4af7-92cc-3fbe4e4d9c33, S_CRE_BattleStation_Student01_717f69d4-dc60-4f2b-998a-98a0ba28d824);
DB_CRE_BattleStations(S_CRE_IntelligenceOfficer02_a17c356a-6e0c-4d2f-bcf6-58195d6c9edf, S_CRE_BattleStation_IntelligenceOfficer02_f6c60a51-ed1d-4b16-b92a-4ecf35516605);

KBSECTION
IF
TextEvent("cre_giveportrait", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ToInventory(S_CRE_VlaakithPortrait_Original_5df3cd99-8125-4342-aaab-4b037931f202, _Var1, 1, 1, 1);

IF
TextEvent("cre_OpenBoxSpecialAnim", _, _, _, _)
THEN
PlayAnimation(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, CUST_Spawn_Chest_01_938061ed-e661-47d2-a46e-c8e585d4a57a, "");

IF
TextEvent("cre_SimpleOpenBox", _, _, _, _)
THEN
Open(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30);

IF
TextEvent("cre_SimpleCloseBox", _, _, _, _)
THEN
Close(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30);

IF
TextEvent("cre_BattleStations", _, _, _, _)
THEN
PROC_CRE_BattleStations();

IF
UseFinished((GUIDSTRING)_Var1, S_CRE_VlaakithPortrait_Original_5df3cd99-8125-4342-aaab-4b037931f202, 1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_GlobalFlag(CRE_General_State_VlaakithPortraitRuined_680dfd25-1e5e-4214-b697-a692be1df84d, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(CRE_General_State_VlaakithPortraitPlayerFailed_83b64d2b-48b4-4af8-ae69-912a21117fc3, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CRE_VlaakithPortrait_NotInOriginalPosition(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(CRE_General_VlaakithPortrait_291a6ebd-da9a-3f80-0eba-1f9c61d66b88, S_CRE_VlaakithPortrait_Original_5df3cd99-8125-4342-aaab-4b037931f202, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_General_State_VlaakithPortraitRuined_680dfd25-1e5e-4214-b697-a692be1df84d, _, _, _, _)
THEN
PROC_CharacterMoveTo(S_CRE_PortraitKid_428056fd-37b5-49ff-92b1-d1f84b733b64, S_CRE_PotraitBoyCleaningPos_3c3e59b5-16db-4d11-beea-317584a4083a, "Walk", "CRE_PortraitKid_GoToPortrait");
DB_ItemDialog_NarratorAD(S_CRE_VlaakithPortrait_Vandalised_cb30aad6-74a4-40f0-84ca-1460632cc8ef, CRE_General_AD_VlaakithPortraitVandalized_9a506f7a-a422-4ce8-51ea-5e0afee5c61b);
PROC_SetOnStage(S_CRE_VlaakithPortrait_Original_5df3cd99-8125-4342-aaab-4b037931f202, 0);
PROC_SetOnStage(S_CRE_VlaakithPortrait_Vandalised_cb30aad6-74a4-40f0-84ca-1460632cc8ef, 1);

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_General_State_VlaakithPortraitPlayerFailed_83b64d2b-48b4-4af8-ae69-912a21117fc3, _, _, _, _)
THEN
PROC_CharacterMoveTo(S_CRE_PortraitKid_428056fd-37b5-49ff-92b1-d1f84b733b64, S_CRE_PotraitBoyCleaningPos_3c3e59b5-16db-4d11-beea-317584a4083a, "Run", "CRE_PortraitKid_GoToPortrait");
DB_ItemDialog_NarratorAD(S_CRE_VlaakithPortrait_Vandalised_cb30aad6-74a4-40f0-84ca-1460632cc8ef, CRE_General_AD_VlaakithPortraitVandalized_9a506f7a-a422-4ce8-51ea-5e0afee5c61b);
PROC_SetOnStage(S_CRE_VlaakithPortrait_Original_5df3cd99-8125-4342-aaab-4b037931f202, 0);
PROC_SetOnStage(S_CRE_VlaakithPortrait_Vandalised_Failed_8d37dc16-6930-4950-9287-f383590304b2, 1);

IF
WentOnStage(S_CRE_VlaakithPortrait_Original_5df3cd99-8125-4342-aaab-4b037931f202, 0, _, _, _)
THEN
DB_SceneManager(NULL_00000000-0000-0000-0000-000000000000, "CRE_PortraitScene_Vandalised");
DB_SceneTriggerManager("CRE_PortraitScene_Vandalised", S_CRE_VlaakithPortrait_SceneBounds_e5719f4b-6026-4c14-abfd-abe9a965cb69, 0);
DB_SceneAllowAllDisturbances("CRE_PortraitScene_Vandalised");

IF
EntityEvent(S_CRE_PortraitKid_428056fd-37b5-49ff-92b1-d1f84b733b64, "CRE_PortraitKid_GoToPortrait", _, _, _)
AND NOT
DB_CRE_VandalisedVlaakithPortrait_NotInOriginalPosition(1, _, _, _, _)
THEN
LookAtEntity(S_CRE_PortraitKid_428056fd-37b5-49ff-92b1-d1f84b733b64, S_CRE_VlaakithPortrait_Vandalised_cb30aad6-74a4-40f0-84ca-1460632cc8ef, 3);
PROC_TryStartAD(CRE_General_AD_PortraitKidReaction_aa178484-b292-7c0a-83f6-a967f7a18ebc, S_CRE_PortraitKid_428056fd-37b5-49ff-92b1-d1f84b733b64);

IF
AutomatedDialogEnded(CRE_General_AD_PortraitKidReaction_aa178484-b292-7c0a-83f6-a967f7a18ebc, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
SetFlag(CRE_General_State_PortraitKid_ShouldBeCleaning_bb83775f-db4f-49f6-b638-87aca9c14eb1);

IF
AutomatedDialogRequestFailed(CRE_General_AD_PortraitKidReaction_aa178484-b292-7c0a-83f6-a967f7a18ebc, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
SetFlag(CRE_General_State_PortraitKid_ShouldBeCleaning_bb83775f-db4f-49f6-b638-87aca9c14eb1);

PROC
PROC_SceneInterrupted(S_CRE_VlaakithPortrait_Original_5df3cd99-8125-4342-aaab-4b037931f202, _, "CRE_PortraitScene", "LeftTrigger", (CHARACTER)_)
THEN
DB_CRE_VlaakithPortrait_NotInOriginalPosition(1);
PROC_SceneOver("CRE_PortraitScene");

PROC
PROC_SceneInterrupted(S_CRE_VlaakithPortrait_Original_5df3cd99-8125-4342-aaab-4b037931f202, _, "CRE_PortraitScene_Vandalised", "LeftTrigger", (CHARACTER)_)
THEN
DB_CRE_VandalisedVlaakithPortrait_NotInOriginalPosition(1);
ClearFlag(CRE_General_State_PortraitKid_ShouldBeCleaning_bb83775f-db4f-49f6-b638-87aca9c14eb1);

IF
AddedTo((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, "", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_ForbiddenToSellItems(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetFaction(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
DB_CRE_GithFactions(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
GetClosestAlivePlayer(_Var2, _Var4, _, _Var1, _Var1)
THEN
SetFlag(CRE_QuarterMistress_Event_TriedSellingIllegalItem_6ea9cd72-9fe9-44cf-8648-a5dd21455e71);
PROC_SetHostileToIndivPlayerFaction(_Var3, _Var4);

PROC
PROC_CRE_MageHand_SceneSetup()
THEN
SetFlag(CRE_General_State_MageHandKidsPlayingShove_a4da0c89-a3b5-47f0-a726-28c818c91312);
SetFlag(CRE_General_Event_MageHandKid_ActiveKid_96461d01-0ad2-4b0b-ba02-5ba65141a6ea, S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f);
PROC_SetOnStage(S_CRE_MageHandGremishka_1358e104-c187-400e-b111-b2cf8581422d, 0);

PROC
PROC_SceneInterrupted(_, _, "CRE_MageHandKids", (STRING)_Var3, _)
AND NOT
DB_CRE_MageHandKids_BlockDisturbance(_Var3, _, _, _, _)
THEN
PROC_SceneOver("CRE_MageHandKids");
PROC_CRE_General_MagehandKidsCancel();

PROC
PROC_GlobalFlagReactionAfterDialog(CRE_General_State_MageHandKidsMoveAside_d9c41f69-6996-4366-a5d6-2aa2abac1f08, _, _, _, _)
THEN
PROC_CRE_General_MageHandKidsMoveAway();

IF
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_CRE_GithBoys_MageHands(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CRE_General_MageHandKidsMoveAway();

PROC
PROC_CRE_General_MageHandKidsMoveAway()
AND
QRY_OnlyOnce("CRE_General_MageHandKidsMoveAway", _, _, _, _)
THEN
PROC_CharacterMoveTo(S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f, S_CRE_MageHandKid01_MoveAsidePos_6d2cb9c9-7567-4b87-8655-db57729407ff, "Run", "CRE_General_MageHandKid01_ReachedPos");
PROC_CharacterMoveTo(S_CRE_MageHandKid02_840d6525-88ba-462a-944c-a74975afa695, S_CRE_MageHandKid02_MoveAsidePos_475b2e88-a6d4-4b77-a01d-bb26d360c0bc, "Run", "CRE_General_MageHandKid02_ReachedPos");
PROC_CRE_General_MagehandKidsCancel();

PROC
PROC_CRE_General_MagehandKidsCancel()
THEN
PROC_SetOnStage(S_CRE_MageHand01_750cd0fb-42ec-4570-adc7-c4508dabadda, 0);
PROC_SetOnStage(S_CRE_MageHand02_80c883bd-8116-4d33-afcb-9032e9421209, 0);
PROC_RemoveDialog(S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f);
PROC_RemoveDialog(S_CRE_MageHandKid02_840d6525-88ba-462a-944c-a74975afa695);
DB_Dialogs(S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f, CRE_MageHandKid01_da880028-0c40-5ee1-85de-b7650caf79d7);
DB_Dialogs(S_CRE_MageHandKid02_840d6525-88ba-462a-944c-a74975afa695, CRE_MageHandKid02_3b1578a3-a649-312f-c9d3-73c41b476287);

IF
AttackedBy(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, _, _, _, _, _, _, _, _, _)
AND NOT
DB_GlobalFlag(CRE_General_State_MageHandBoxUnlocked_9a839662-ae6a-4420-bdce-45769bbe149b, _, _, _, _)
THEN
PROC_CRE_General_PlayGremishkaCry();

IF
Moved(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, _, _, _, _)
AND NOT
DB_GlobalFlag(CRE_General_State_MageHandBoxUnlocked_9a839662-ae6a-4420-bdce-45769bbe149b, _, _, _, _)
THEN
PROC_CRE_General_PlayGremishkaCry();

PROC
PROC_CRE_General_PlayGremishkaCry()
AND NOT
DB_DialogName(CRE_General_AD_MageHandGremishkaCries_5c4d789b-16ee-d3b1-6af3-ed30adbebffd, _, _, _, _)
THEN
PROC_TryStartAD(CRE_General_AD_MageHandGremishkaCries_5c4d789b-16ee-d3b1-6af3-ed30adbebffd, S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30);

IF
Unlocked(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, _, _, (CHARACTER)_, (CHARACTER)_)
THEN
PROC_CRE_General_SpawnMageHandGremishka();

IF
StatusApplied((GUIDSTRING)_Var1, "CRE_MAGEHANDBOX_MAGICREACTION", _, _, (GUIDSTRING)_Var1)
AND NOT
DB_CRE_MageHandBox_TrackCastingCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CRE_MageHandBox_TrackCastingCharacter(_Var1);

IF
StatusRemoved((GUIDSTRING)_Var1, "CRE_MAGEHANDBOX_MAGICREACTION", _, _, (GUIDSTRING)_Var1)
AND
DB_CRE_MageHandBox_TrackCastingCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_CRE_MageHandBox_TrackCastingCharacter(_Var1);

IF
CastedSpell((GUIDSTRING)_Var1, (STRING)_Var2, _, _, _)
AND
DB_CRE_MageHandBox_TrackCastingCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(CRE_General_Event_MageHandBoxSpellCast_e0edda3d-97b9-4be8-a105-6f1da0e8241a, _Var1, _Var1, _Var1, _Var1)
AND
SpellHasSpellFlag(_Var2, "IsSpell", 1, _Var1, _Var1)
AND
IsInInventory(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, 0, _Var1, _Var1, _Var1)
THEN
PROC_CRE_General_BreakMageHandBox();

IF
CastedSpell((GUIDSTRING)_Var1, (STRING)_Var2, _, _, _)
AND
DB_CRE_MageHandBox_TrackCastingCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(CRE_General_Event_MageHandBoxSpellCast_e0edda3d-97b9-4be8-a105-6f1da0e8241a, _Var1, _Var1, _Var1, _Var1)
AND
SpellHasSpellFlag(_Var2, "IsSpell", 1, _Var1, _Var1)
AND
GetInventoryOwner(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, _Var6, _Var1, _Var1, _Var1)
AND
GetPosition(_Var6, _Var7, _Var8, _Var9, _Var1)
AND
FindValidPosition(_Var7, _Var8, _Var9, 3, S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, 0, _Var10, _Var11, _Var12, _Var1)
THEN
DB_CRE_General_GremishkaBoxDropped(1);
DropTo(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, _Var10, _Var11, _Var12);

IF
DroppedBy(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, _, _, _, _)
AND
DB_CRE_General_GremishkaBoxDropped(1, _, _, _, _)
THEN
PROC_CRE_General_BreakMageHandBox();

PROC
PROC_CRE_General_BreakMageHandBox()
THEN
SetFlag(CRE_General_Event_MageHandBoxSpellCast_e0edda3d-97b9-4be8-a105-6f1da0e8241a);
Die(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 0, 5);

IF
FlagSet(CRE_General_State_HasMageHandBox_bc0b2be2-f3e4-4b7a-947b-4bb1bff4adc0, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_GlobalFlag(CRE_General_State_MageHandBoxUnlocked_9a839662-ae6a-4420-bdce-45769bbe149b, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(CRE_General_State_MageHandKidsPlayingShove_a4da0c89-a3b5-47f0-a726-28c818c91312);
SetFlag(CRE_MageHandGame_State_BoxPickedUp_8976a026-db99-40fc-8d95-d59cc690c11b, NULL_00000000-0000-0000-0000-000000000000, 0);
PROC_CRE_General_MageHandKidsMoveAway();

IF
DestroyedBy(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, _, _, _, (CHARACTER)_)
THEN
PROC_CRE_General_SpawnMageHandGremishka();

PROC
PROC_CRE_General_SpawnMageHandGremishka()
AND
QRY_OnlyOnce("CRE_General_MageHandGremishkaSpawned", _, _, _, _)
THEN
PROC_CRE_General_MageHandKidsMoveAway();
NOT DB_HasItemEvent(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, CRE_General_State_HasMageHandBox_bc0b2be2-f3e4-4b7a-947b-4bb1bff4adc0);
SetFlag(CRE_General_State_MageHandBoxUnlocked_9a839662-ae6a-4420-bdce-45769bbe149b);
PROC_CRE_General_MageHandGremishkaAppears();
PROC_TryStartAD(CRE_General_AD_MageHandKidLaughingAtPlayer_b19f4f20-62b9-3253-2d87-a3e68e0bc901, S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f);

PROC
PROC_CRE_General_MageHandGremishkaAppears()
THEN
PROC_SetOnStage(S_CRE_MageHandGremishka_1358e104-c187-400e-b111-b2cf8581422d, 1);
TeleportTo(S_CRE_MageHandGremishka_1358e104-c187-400e-b111-b2cf8581422d, S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, "CRE_General_GremishkaIsSpawned", 0, 0, 0, 0, 1);
PlayAnimation(S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, CUST_Spawn_Chest_01_938061ed-e661-47d2-a46e-c8e585d4a57a, "");
PlayAnimation(S_CRE_MageHandGremishka_1358e104-c187-400e-b111-b2cf8581422d, CUST_Spawn_Chest_01_938061ed-e661-47d2-a46e-c8e585d4a57a, "");

PROC
PROC_CRE_General_MageHandGremishkaAppears()
AND
DB_GlobalFlag(CRE_General_Event_MageHandBoxSpellCast_e0edda3d-97b9-4be8-a105-6f1da0e8241a, _, _, _, _)
THEN
ApplyStatus(S_CRE_MageHandGremishka_1358e104-c187-400e-b111-b2cf8581422d, "ENLARGE", 18, 0, NULL_00000000-0000-0000-0000-000000000000);

IF
Saw((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetFaction(_Var1, _Var4, _Var1, _Var1, _Var1)
AND
DB_CRE_GremishkaFactions(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
GetFaction(_Var2, _Var5, _Var1, _Var1, _Var1)
AND NOT
DB_CRE_GremishkaFactions(_Var5, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetRelationMutual(Act1B_CRE_Gremishkas_d376a9f5-1c31-4aa3-b758-c217d9237cea, _Var5, 0);

IF
EntityEvent((GUIDSTRING)_Var1, "CRE_General_GremishkaIsSpawned", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_GetClosestAvailableCharacterTo(_Var1, 0, 0, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, 1, _Var1, _Var1, _Var1, _Var1)
AND
DB_ClosestAvailableCharacterTo(_Var2, _Var1, _Var3, _Var1, _Var1)
AND
_Var3 <= 15
AND
QRY_StartDialogCustom(CRE_General_PAD_PlayerSurprisedAtGremishka_f8341280-c2af-c936-69b3-ac522e9f2d39, _Var2, 0, 0, 0, 0, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_FlagReactionAfterDialog((GUIDSTRING)_Var1, CRE_MageHandGame_State_PlayerAskedToPlay_c0c02d22-70cb-4490-aebc-efe79b01f0f1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_CRE_PlayWithMageHandKids(_Var1);
PROC_TryStartAD(CRE_MageHandKids_AD_PlayerExpelledFromGame_30c196ef-156d-4542-a3cc-a0d034f4f099, S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f);

IF
FlagSet(CRE_MageHandGame_Event_PlayerInterferesWithGame_d37b8034-0a34-48d1-9ae0-39ddf4f064cf, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_DialogPlayers(_, _Var1, _, _Var1, _Var1)
THEN
PROC_CRE_PlayWithMageHandKids(_Var1);
PROC_TryStartAD(CRE_MageHandKids_AD_PlayerIsShoved_daa7a20d-2132-634c-cb78-634c8eb895f4, S_CRE_MageHandKid01_67c5e825-c850-414f-8279-e1968a321d4f);

PROC
PROC_CRE_PlayWithMageHandKids((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
UseSpell(S_CRE_MageHand01_750cd0fb-42ec-4570-adc7-c4508dabadda, "Target_CRE_MageHand_AutoShove", _Var1, _Var1);
ClearFlag(CRE_MageHandGame_Event_PlayerInterferesWithGame_d37b8034-0a34-48d1-9ae0-39ddf4f064cf, _Var1, 0);

QRY
QRY_GLO_SkillCheck_CheckAdvantage((CHARACTER)_Var1, _, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CRE_GithBoys_MageHands(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_GLO_Skillcheck_CheckAdvantage(2);

IF
UsingSpellOnTarget((CHARACTER)_Var1, S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, "Target_Shove_MageHand", _, _, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_CRE_GithBoys_MageHands(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
CharacterGetOwner(_Var1, _Var5, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(CRE_General_State_MageHandKidsPlayingShove_a4da0c89-a3b5-47f0-a726-28c818c91312, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(CRE_MageHandGame_Event_PlayerInterferesWithGame_d37b8034-0a34-48d1-9ae0-39ddf4f064cf, _Var5, 0);

IF
UsingSpellOnTarget((GUIDSTRING)_Var1, S_CRE_MageHandBox_49bc0f54-3bd2-4945-8785-cc1f813d8a30, "Target_Shove", _, _, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GlobalFlag(CRE_General_State_MageHandKidsPlayingShove_a4da0c89-a3b5-47f0-a726-28c818c91312, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(CRE_MageHandGame_Event_PlayerInterferesWithGame_d37b8034-0a34-48d1-9ae0-39ddf4f064cf, _Var1, 0);

IF
DB_InRegion(_Var1, S_CRE_Creche_TopFloor_01f823fe-7363-4f8a-bea3-31755b318738, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_GLO_ChokepointScout_627e03ed-d23c-42fa-90c8-1e8d6f927fd6, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(S_GLO_ChokepointScout_627e03ed-d23c-42fa-90c8-1e8d6f927fd6, CRE_POI_TieflingSwD_a017cb45-1433-401c-931c-ee9fc1542b12);
PROC_SetOnStage(S_PLA_ChokepointScout_627e03ed-d23c-42fa-90c8-1e8d6f927fd6, 1);
Die(S_GLO_ChokepointScout_627e03ed-d23c-42fa-90c8-1e8d6f927fd6, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 0);
DB_GLO_CharacterCorpseDialog(S_GLO_ChokepointScout_627e03ed-d23c-42fa-90c8-1e8d6f927fd6, CRE_Pilgrim_Dead_44139537-8686-5be5-c68b-468f58cdbc0b);

IF
DB_CRE_GithKids(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Children(_Var1);

IF
EnteredCombat(S_CRE_MageHandGremishka_1358e104-c187-400e-b111-b2cf8581422d, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_CRE_MageHandGremishkaFight(_Var1);
SetFlag(CRE_MageHandGame_State_GremishkaCombat_975dcfa7-759e-4bb4-b17e-60cd33b1d10f, NULL_00000000-0000-0000-0000-000000000000, 0);
PROC_CRE_CheckAllCombatMembers(_Var1);

PROC
PROC_CRE_CheckAllCombatMembers((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Is_InCombat(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsCharacter(_Var2, 1, _Var1, _Var1, _Var1)
AND NOT
DB_CRE_MageHandGremishka(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(CRE_MageHandGame_State_GremishkaCombat_975dcfa7-759e-4bb4-b17e-60cd33b1d10f, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
CombatEnded((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_MageHandGremishkaFight(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(CRE_MageHandGame_State_GremishkaCombat_975dcfa7-759e-4bb4-b17e-60cd33b1d10f, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
EnteredCombat((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_MageHandGremishkaFight(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsCharacter(_Var1, 1, _Var1, _Var1, _Var1)
AND NOT
DB_CRE_MageHandGremishka(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(CRE_MageHandGame_State_GremishkaCombat_975dcfa7-759e-4bb4-b17e-60cd33b1d10f, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
SwitchedCombat(S_CRE_MageHandGremishka_1358e104-c187-400e-b111-b2cf8581422d, (GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_MageHandGremishkaFight(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_CRE_MageHandGremishkaFight(_Var1);
DB_CRE_MageHandGremishkaFight(_Var2);

IF
AnimationEvent((GUIDSTRING)_Var1, "AnimationSetOffStage", 0, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CRE_GithKids(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_SpotPlayers_Spotted(S_CRE_CorridorTeenager02_d6483496-2e6c-4cf2-9402-a06af68d5326, "CRE_CorridorTeens_SpottedPlayer", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("CRE_CorridorTeens_ADStarted", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(CRE_General_AD_CorridorTeens_fc3950f6-7e66-be33-1e14-3e317f2cfb94, S_CRE_CorridorTeenager02_d6483496-2e6c-4cf2-9402-a06af68d5326, S_CRE_CorridorTeenager01_a99624a6-4bff-4d1f-9de5-7b3cd89cc669);

IF
UseFinished((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_CRE_ClickableItemVBs(_Var2, _Var4, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(_Var4, _Var1);

IF
UseFinished((CHARACTER)_Var1, S_CRE_Dormitory_Schedules_126d9846-51f4-4622-b73f-826667ef9c71, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_CRE_SchedulemCommented(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(CRE_General_VB_RulesPoster_ea0aac7b-5662-061e-d5f1-2f9cf4531baa, _Var1);
DB_CRE_SchedulemCommented(_Var1);

IF
AttackedBy((ITEM)_Var1, _, (CHARACTER)_Var3, _, _, _, _, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_CRE_AttackableItemVBs(_Var1, _Var8, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(_Var8, _Var3);

IF
CharacterLootedCharacter((CHARACTER)_Var1, S_CRE_Roof_GithyankiSkeleton_5530b1fa-468a-4207-864a-9bf51039d453, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CRE_LootableCharacterVBs(S_CRE_Roof_GithyankiSkeleton_5530b1fa-468a-4207-864a-9bf51039d453, _Var2, _Var1, _Var1, _Var1)
THEN
StartVoiceBark(_Var2, _Var1);

IF
DB_GlobalFlag(ORI_Laezel_State_CrecheExploded_31ee1ed3-b163-4d1a-84f3-d37521900a87, _, _, _, _)
THEN
PROC_LockWaypointForAll("WAYP_CRE_Creche");

PROC
PROC_CRE_BattleStations()
AND
DB_CRE_GithKids(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(CRE_General_State_KidEscape_88e294b3-111a-4e6b-877a-1cca3fa3fe08, _Var1, 0);

PROC
PROC_CRE_BattleStations()
AND
DB_CRE_BattleStations(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_SetAnubisConfig(_Var1, "CRE_BattleStations");

PROC
PROC_CRE_BattleStations()
AND
DB_CRE_BattleStations(_Var1, _, _Var1, _Var1, _Var1)
THEN
SetWeaponUnsheathed(_Var1, 1, 0);

PROC
PROC_CRE_BattleStations()
THEN
TimerLaunch("CRE_BattleStations_ConfigReassignTimer", 5000);

IF
TimerFinished("CRE_BattleStations_ConfigReassignTimer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CRE_BattleStations(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
SetDualEntityEvent(_Var1, _Var2, "CrecheBattlePosition", 1);

PROC
PROC_CRE_BattleStations()
AND NOT
DB_Defeated(S_CRE_GithBoy_3e97baba-812b-4589-a7aa-454543aa3187, _, _, _, _)
AND NOT
DB_GlobalFlag(CRE_YouthTraining_State_TeacherBeatingBoy_ccaa2ee8-654b-491f-9623-c8a9376d3c61, _, _, _, _)
THEN
PROC_DisappearOutOfSight(S_CRE_GithBoy_3e97baba-812b-4589-a7aa-454543aa3187, "Run", 0, "");

PROC
PROC_CRE_BattleStations()
AND
DB_GlobalFlag(CRE_YouthTraining_State_TeacherBeatingBoy_ccaa2ee8-654b-491f-9623-c8a9376d3c61, _, _, _, _)
THEN
NOT DB_PreventKnockedOutPermaDefeated(S_CRE_GithBoy_3e97baba-812b-4589-a7aa-454543aa3187);
Attack(S_CRE_Teacher_60933e69-c642-46e0-92ee-0e4353fc2adf, S_CRE_GithBoy_3e97baba-812b-4589-a7aa-454543aa3187, 1);
ClearFlag(CRE_YouthTraining_State_TeacherBeatingBoy_ccaa2ee8-654b-491f-9623-c8a9376d3c61);
DB_CRE_YouthTraining_TeacherKillingBoy(1);

PROC
PROC_CRE_BattleStations()
AND
DB_Defeated(S_CRE_GithBoy_3e97baba-812b-4589-a7aa-454543aa3187, _, _, _, _)
AND NOT
DB_Dead(S_CRE_GithBoy_3e97baba-812b-4589-a7aa-454543aa3187, _, _, _, _)
THEN
NOT DB_PreventKnockedOutPermaDefeated(S_CRE_GithBoy_3e97baba-812b-4589-a7aa-454543aa3187);
Attack(S_CRE_Teacher_60933e69-c642-46e0-92ee-0e4353fc2adf, S_CRE_GithBoy_3e97baba-812b-4589-a7aa-454543aa3187, 1);
ClearFlag(CRE_YouthTraining_State_TeacherBeatingBoy_ccaa2ee8-654b-491f-9623-c8a9376d3c61);
DB_CRE_YouthTraining_TeacherKillingBoy(1);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act1b"
