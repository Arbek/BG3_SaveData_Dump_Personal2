Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_-40_For_Sp1_b5ab9ca2-f6cd-aefc-5a2d-7d64f5d3f705, -40);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_-40_For_Sp2_8048280b-6d47-7a41-ca35-4acd441219fb, -40);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_-40_For_Sp3_972ad03d-3a49-bab2-2983-01efd98ec272, -40);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_-40_For_Sp4_dcebf4e2-2410-f836-b5ac-843f283bb8db, -40);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_-40_For_Sp5_8bc51a4f-4e27-e233-603a-0152a597bb53, -40);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_-40_For_Sp6_66a71cdc-fff4-002a-a596-f1a411ebf834, -40);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_-40_For_Sp7_52cf2f29-d327-38c9-4b95-af45737310f9, -40);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_-40_For_Sp8_a51ebfc6-4f03-dee3-7371-7f77d9438396, -40);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_-30_For_Sp8_862600f1-3fec-7cf1-5919-ea231e60741e, -30);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_-30_For_Sp7_f2077c29-8b90-e7bf-1b3b-e54953572d9f, -30);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_-30_For_Sp6_1367a864-28a6-6e79-f4fb-bfdf6693195e, -30);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_-30_For_Sp5_af384d6b-0a1a-d2fe-eccf-f7b5fbf0a77d, -30);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_-30_For_Sp4_fff32281-b937-22d0-b283-29e547cb2765, -30);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_-30_For_Sp3_c6dc4704-03d4-7341-da34-27f8df3f3390, -30);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_-30_For_Sp2_f3edd65c-5368-b2e0-486f-fb6bbfd8f948, -30);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_-30_For_Sp1_8f9363d0-7072-bbac-3615-7ede8167786e, -30);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_-20_For_Sp1_209202b4-2d23-0c5f-9437-8cae49ef1a36, -20);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_-20_For_Sp2_4c39c64b-8373-6f5f-2dac-990196d3c6dc, -20);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_-20_For_Sp3_f9de3de1-3b93-acc1-d0c6-bb5ec029ceb4, -20);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_-20_For_Sp4_78b5186f-9a5c-2225-3293-d6b9b67b042e, -20);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_-20_For_Sp5_5c42332e-8fce-c600-7c9c-1db11d983ba9, -20);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_-20_For_Sp6_e3d69631-b56b-5cf8-4343-ddf74ef5e2a2, -20);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_-20_For_Sp7_9c3028cd-6361-acb1-28a1-b2ade10712a2, -20);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_-20_For_Sp8_32ba15fd-1aa8-e6d1-746c-ef06acd20241, -20);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_-10_For_Sp1_487684c1-c443-51f9-2b5a-605e1d744164, -10);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_-10_For_Sp2_83af0bd4-90ca-5a49-2cd4-b7f6d84f55d6, -10);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_-10_For_Sp3_ce552cc6-4a56-66ce-4307-f184558fd519, -10);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_-10_For_Sp4_c380eaee-571b-3d90-5ab3-0fc49a3147af, -10);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_-10_For_Sp5_bafcfe34-39d0-76d6-d3b3-f83a3af6520d, -10);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_-10_For_Sp6_ba713378-57c3-0174-bdb4-500d4696baf1, -10);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_-10_For_Sp7_fdd7ea1d-3e9e-671c-2a26-f007e7f24374, -10);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_-10_For_Sp8_dd631c7c-1e7c-3c0e-a2fd-781571013df6, -10);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_0_For_Sp1_80966819-5946-2be4-645c-809ecb253ed6, 0);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_0_For_Sp2_c90a1ed4-c142-3300-65d0-0a0a4d6e08f7, 0);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_0_For_Sp3_1a5e1181-0d95-2ede-17a4-73d90ff80b16, 0);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_0_For_Sp4_0f3d2be5-4b46-5d79-52d7-23d192809d8c, 0);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_0_For_Sp5_c6d3b29d-f6aa-b56f-4534-1a469825a01b, 0);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_0_For_Sp6_2dc29d83-6949-af53-7716-ef92a033797e, 0);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_0_For_Sp7_9ba9c4f0-701b-9b3f-5351-89799446b87f, 0);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_0_For_Sp8_53c05fc5-8650-3dbd-77db-6a967a98451f, 0);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_5_For_Sp1_7468e995-931a-454f-9b2d-0facc6e81ee1, 5);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_5_For_Sp2_1966ea6c-0567-401b-96b6-28eb2b9116b8, 5);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_5_For_Sp3_a0c5116c-d6cf-4a92-8ba0-fa3e93cf327f, 5);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_5_For_Sp4_6c0445e8-1f6e-4487-8c8f-fffdfe36bc45, 5);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_5_For_Sp5_3de95a00-c1e1-4c0b-8a96-cfe8d1a0bdd1, 5);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_5_For_Sp6_544e42f0-e5ed-40e9-8eb6-3fb291e8cc96, 5);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_5_For_Sp7_a607d7c2-550e-4370-a881-9f17057c8964, 5);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_5_For_Sp8_cb3132da-b370-4b39-9564-2fdb55b69ed9, 5);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_10_For_Sp1_2a7380a2-da28-7741-a065-fd118fdd9a92, 10);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_10_For_Sp2_fccac36f-92a5-ad84-9e45-fed71d386452, 10);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_10_For_Sp3_be8510e8-0339-3fee-f198-b1dbe1a0b010, 10);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_10_For_Sp4_d9dca2cd-6f2e-2b0b-7acd-2998c28e423f, 10);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_10_For_Sp5_07cc77e6-f6b6-cced-08c8-15e0b6e57fcb, 10);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_10_For_Sp6_a73a36ae-c4b3-e79e-98ae-c393c8613f8a, 10);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_10_For_Sp7_ad3eebe2-0608-3b7d-940d-0a5f89817009, 10);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_10_For_Sp8_0c69a671-d426-347e-4ed7-3652a2c62dc6, 10);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_20_For_Sp1_f262956a-153c-91bd-4d7c-9a8e5e11119e, 20);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_20_For_Sp2_91cfff92-fb1e-caf5-9d5c-9c5971b96d04, 20);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_20_For_Sp3_1e3e9473-4277-79b5-42a2-cfd066386593, 20);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_20_For_Sp4_6577f4d6-484e-6054-93a3-586ef6fb790e, 20);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_20_For_Sp5_71329c17-9144-3f40-e7fc-c1f7d4257663, 20);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_20_For_Sp6_7b3cf70e-ee58-25c1-076a-8b8e863469a6, 20);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_20_For_Sp7_dfc5c129-03de-43ec-1355-b91dd281d1d3, 20);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_20_For_Sp8_4cd2d6ed-7581-1e83-6ef6-d2585b7a65b2, 20);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_30_For_Sp1_55081005-8df3-62e5-60d9-971a0439947e, 30);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_30_For_Sp2_98ca7185-0f2d-4420-be81-2b7c5e109e91, 30);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_30_For_Sp3_534d898c-b83a-2523-eff2-e44fec0c207e, 30);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_30_For_Sp4_6f7d25cc-01ae-5a89-578e-355fade06976, 30);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_30_For_Sp5_d7a4ac4f-4f39-0307-e3ff-fefee2b5e36c, 30);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_30_For_Sp6_7cde612d-5755-6bf7-6fb2-6365e20cc7cc, 30);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_30_For_Sp7_da1fcdc2-de0d-7ff8-0487-9b970cdb6a01, 30);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_30_For_Sp8_2249338c-8458-4a51-2bc7-f1ace2aa8897, 30);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_40_For_Sp1_50cd7894-b71c-adf0-7476-48b94c42be43, 40);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_40_For_Sp2_cb50595f-b514-26a8-0c90-fbb21185b22e, 40);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_40_For_Sp3_f1ab5792-7ebe-3021-bb12-e8b749507477, 40);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_40_For_Sp4_f242d0c0-ec33-ba97-0fc7-38eb9e069744, 40);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_40_For_Sp5_dbbb346d-e481-fab7-5656-c66a9aba41ec, 40);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_40_For_Sp6_a9100391-be49-c52d-4514-bc12c412c77a, 40);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_40_For_Sp7_e4647aa3-27b6-9141-1852-c3cb9ad387dc, 40);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_40_For_Sp8_264fd066-e4ab-30c1-20bf-37f3878ead69, 40);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_50_For_Sp1_31d32c7a-52bc-62fc-38a7-15277f3b46fb, 50);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_50_For_Sp2_c2882882-ad2e-460d-4ab7-77f502407eaf, 50);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_50_For_Sp3_1ab5dca5-dc29-9dcc-2f8f-bcc15147a15c, 50);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_50_For_Sp4_9127723e-2705-ab06-3756-74ef70c64e63, 50);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_50_For_Sp5_3ec33176-b4dd-66fc-d2c2-3c35e75c9d57, 50);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_50_For_Sp6_6931495d-29b5-8971-69a8-e6738963688e, 50);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_50_For_Sp7_558ee7d5-41ec-430e-2f6e-b88d0164dbc8, 50);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_50_For_Sp8_f8470e9b-4176-7b85-ab98-14ba12932d10, 50);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_60_For_Sp1_4445984d-56f3-0e7c-25d5-cf5cca2a5642, 60);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_60_For_Sp2_bf670cb3-8110-e901-ed45-bb0b0f15b761, 60);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_60_For_Sp3_379b2a1e-207f-fca8-b2e7-372dc8751a5d, 60);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_60_For_Sp4_0ec68bb1-36f5-91a6-33ce-bdeb03500cd3, 60);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_60_For_Sp5_0327c081-f75e-af79-db68-6bff6b3fc618, 60);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_60_For_Sp6_f6320f72-d30d-2ada-6ad3-029ba68bb162, 60);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_60_For_Sp7_f5e9b2a3-7008-f239-ed0d-c8c93468f4a3, 60);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_60_For_Sp8_4ed58c96-3ed3-d0ab-08fe-1e005b897e68, 60);
DB_OriginRelationThresholdEventsPerSpeaker(9, Approval_AtLeast_60_For_Sp9_8767c432-0a83-d4b0-e0e4-7306f38ba150, 60);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_70_For_Sp1_2fb2abfb-5445-5419-6de4-77380dbf6265, 70);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_70_For_Sp2_183bb6c7-7d59-0fbc-82ea-8f167bbb7553, 70);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_70_For_Sp3_207d5eaa-871d-a8ff-7ef4-a3778ef41660, 70);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_70_For_Sp4_75d58ff1-4ef2-da14-e7f0-9a2a07e94bbe, 70);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_70_For_Sp5_92845171-f0a7-b40d-a2bd-276f1869a99b, 70);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_70_For_Sp6_1a586740-994e-e3aa-0d1e-bc070f483e89, 70);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_70_For_Sp7_5b917a54-1f88-8d60-bee2-a0cac84fa475, 70);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_70_For_Sp8_199fbc42-e5f8-7e11-36b3-d4dc348fdb73, 70);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_80_For_Sp1_c014f892-8450-7821-8936-f862cc67654e, 80);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_80_For_Sp2_4975d4b7-031d-7a78-778a-86b46503a224, 80);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_80_For_Sp3_5d4a8ffd-8e6b-f5ad-22f4-c4c21fe9f3e0, 80);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_80_For_Sp4_001125f2-3208-5127-bdb2-eeb45f054e70, 80);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_80_For_Sp5_c349164e-ae28-d2b4-eef1-50fbdd06bc2e, 80);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_80_For_Sp6_afbcda35-0370-bcd3-2b8f-4ab9515b44b0, 80);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_80_For_Sp7_b62c330f-45c1-31f8-259c-1612e5bde942, 80);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_80_For_Sp8_f9d76602-b77c-ad3c-e629-a3db592b0414, 80);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_90_For_Sp1_1b98e5dd-064f-a93b-fcb0-23cd1c55671f, 90);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_90_For_Sp2_a6e30a69-e73e-be47-44e6-5e0a799ba02d, 90);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_90_For_Sp3_4caef451-20b0-49ff-c5ad-954fadd29d44, 90);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_90_For_Sp4_d0321928-f0ea-8138-7e44-7830852d0a85, 90);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_90_For_Sp5_6fdd52fa-7899-d484-fc0c-2d6349a4ca2d, 90);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_90_For_Sp6_c77be22f-d0e7-e38c-dc68-c5d42e98a832, 90);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_90_For_Sp7_b0467b67-bbe5-5835-2788-3060dae6e779, 90);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_90_For_Sp8_f9b00a9c-a3c1-2737-21e7-b8f1669a614f, 90);
DB_OriginRelationThresholdEventsPerSpeaker(1, Approval_AtLeast_100_For_Sp1_20293b72-864b-f8c7-605b-500e5a9fffd1, 100);
DB_OriginRelationThresholdEventsPerSpeaker(2, Approval_AtLeast_100_For_Sp2_5a2ce348-da21-b68d-e777-83631eb4107d, 100);
DB_OriginRelationThresholdEventsPerSpeaker(3, Approval_AtLeast_100_For_Sp3_4c9f41f5-b15c-7c2b-b62e-9c9b16ca46f5, 100);
DB_OriginRelationThresholdEventsPerSpeaker(4, Approval_AtLeast_100_For_Sp4_6f71c17b-9d7d-aafe-dae3-914dcc464b8b, 100);
DB_OriginRelationThresholdEventsPerSpeaker(5, Approval_AtLeast_100_For_Sp5_ba31ebb9-f3ac-c89d-fca1-c80163f5960e, 100);
DB_OriginRelationThresholdEventsPerSpeaker(6, Approval_AtLeast_100_For_Sp6_7689ecc4-914c-368d-41b8-9ab20afd6ffb, 100);
DB_OriginRelationThresholdEventsPerSpeaker(7, Approval_AtLeast_100_For_Sp7_ebeb67a2-c031-0b10-9205-041ece18f242, 100);
DB_OriginRelationThresholdEventsPerSpeaker(8, Approval_AtLeast_100_For_Sp8_3d696bde-ff67-01a9-c131-6c46b96c8931, 100);
NOT DB_OriginLeavingDialog(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
NOT DB_OriginMayLeaveDialog(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
NOT DB_CompanionCanPartner(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, "");
NOT DB_OriginPartOfTheTeamFlag(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
NOT DB_OriginKickFromPartyFlags(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
NOT DB_Origin_TemporaryLeaveReason("");
NOT DB_ORI_Dating(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
NOT DB_ORI_FreeDating(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_CompanionCaredFaction(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, 0, 0, 0);
NOT DB_CompanionCaredFaction_IgnoredNPC(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_Origins_BlockTransferReasons("Killed");
DB_Origins_BlockTransferReasons("CompanionHostile");
DB_Origins_BlockTransferReasons("CompanionMurdered");
DB_Origins_BlockTransferReasons("Debug");
DB_Origins_NestedFlags(ORI_InParty_Event_EnterFromNestedEnd_d0b9336e-628d-9882-92f4-1e8333733573);
DB_Origins_NestedFlags(ORI_InParty_Event_EnterFromNestedNoComment_9b25b086-d73c-4ae4-8099-d995a740be2d);
DB_Origins_NestedFlags(ORI_InParty_Event_EnterFromNestedWithComment_1eed37c0-2301-440f-bf0e-842d49aacf5b);
NOT DB_ORI_WasDating(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
NOT DB_ORI_WasDatingFlag(NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);

KBSECTION
PROC
PROC_PlayersSelected("Initial", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Origins(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, AVATAR_306b9b05-1057-4770-aa17-01af21acd650, 0, _Var1, _Var1)
THEN
PROC_GLO_PartyMembers_Initialize(_Var1);

PROC
PROC_PlayersSelected("Initial", _, _, _, _)
THEN
PROC_CheckPartyFull();

PROC
PROC_LevelLoadedOnce((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND NOT
DB_StoryReloaded(1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_Origins_SetupRecruitment(_Var1);

PROC
PROC_GLO_Origins_SetupRecruitment((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
THEN
DB_NOOP(1);

IF
DB_OriginNPCAlignment(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_GLO_PartyMembers_OriginalAlignment(_Var1, _Var2);

QRY
QRY_GLO_PartyMembers_GetInPartyDialog((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_OriginInPartyDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_GLO_PartyMembers_InPartyDialog(_Var1, _Var2);

IF
DB_OriginInPartyDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_OriginInPartyDialog(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
_Var2 != _Var3
AND
DB_Dialogs(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginInPartyDialog(_Var1, _Var3);
PROC_RemoveAllDialogEntriesForSpeaker(_Var1);
DB_Dialogs(_Var1, _Var2);

PROC
PROC_GLO_Origins_SetRecruitmentDialog((CHARACTER)_Var1, (DIALOGRESOURCE)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_GLO_Origins_SetRecruitmentDialog(_Var1, _Var2, 0);

PROC
PROC_GLO_Origins_SetRecruitmentDialog((CHARACTER)_Var1, (DIALOGRESOURCE)_Var2, (INTEGER)_Var3, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_GLO_Origins_RemoveRecruitmentDialogs(_Var1);
DB_OriginRecruitmentDialog(_Var1, _Var2);
DB_DropMutingStatussesDialog(_Var2);
PROC_GLO_Origins_SetRecruitmentDialog_Internal(_Var1, _Var3);

PROC
PROC_GLO_Origins_SetRecruitmentDialog_Internal((CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_Origin_GetRecruitmentDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Origin_GetRecruitmentDialog(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
PROC_RemoveAllDialogEntriesForSpeaker(_Var1);
PROC_GLO_Origins_MaybeSetDefaultDialog(_Var1, _Var3);

IF
Resurrected((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_OriginRecruitmentDialog(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_Origins_SetRecruitmentDialog_Internal(_Var1, 0);

PROC
PROC_KnockedOut_Ended((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_OriginRecruitmentDialog(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_Origins_SetRecruitmentDialog_Internal(_Var1, 0);

QRY
QRY_Origin_GetRecruitmentDialog((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_QRYRTN_Origin_GetRecruitmentDialog(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
NOT DB_QRYRTN_Origin_GetRecruitmentDialog(_Var1, _Var3);

QRY
QRY_Origin_GetRecruitmentDialog((CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GLO_PartyMembers_BlockRecruitmentDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_Origin_GetRecruitmentDialog(_Var1, NULL_00000000-0000-0000-0000-000000000000);

QRY
QRY_Origin_GetRecruitmentDialog((GUIDSTRING)_Var1, 0, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_QRYRTN_Origin_GetRecruitmentDialog(_Var1, _, _Var1, _Var1, _Var1)
AND
DB_PartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginInPartyDialog(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_Origin_GetRecruitmentDialog(_Var1, _Var3);

QRY
QRY_Origin_GetRecruitmentDialog((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_QRYRTN_Origin_GetRecruitmentDialog(_Var1, _, _Var1, _Var1, _Var1)
AND
DB_OriginRecruitmentDialog(_Var1, _Var4, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_Origin_GetRecruitmentDialog(_Var1, _Var4);

IF
FlagSet(OriginAddToParty_4870b2cd-210c-0fdc-9c58-4d0142bdae29, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DialogPlayers(_Var2, _Var3, _, _Var1, _Var1)
AND NOT
DB_GLO_PartyMembers_RecruitAfterDialog(_Var2, _Var1, _, _Var1, _Var1)
AND
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GLO_PartyMembers_RecruitAfterDialog(_Var2, _Var1, _Var3);

IF
FlagSet(OriginAddToParty_4870b2cd-210c-0fdc-9c58-4d0142bdae29, (CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GLO_PartyMembers_RecruitAfterDialog(_Var2, _Var1, _Var3, _Var1, _Var1)
AND
DB_DialogPlayers(_Var2, _Var4, _, _Var1, _Var1)
AND
_Var4 != _Var3
AND
DB_Avatars(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DebugBreak("Multiple avatars in dialog when recruiting, first avatar selected as recruiter. Add a custom flag for this case to make it more explicit.");

IF
FlagSet(OriginAddToParty_4870b2cd-210c-0fdc-9c58-4d0142bdae29, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_GLO_PartyMembers_RecruitAfterDialog(_Var2, _Var1, _, _Var1, _Var1)
THEN
DebugBreak("Could not find avatar for recruitment");

IF
FlagSet(OriginAddToParty_4870b2cd-210c-0fdc-9c58-4d0142bdae29, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
ClearFlag(OriginAddToParty_4870b2cd-210c-0fdc-9c58-4d0142bdae29, _Var1, 0);

IF
UserAvatarCreated((INTEGER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var3, (INTEGER)_Var1, (INTEGER)_Var1)
AND
GetHostCharacter(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var2, _Var4);
SetOnStage(_Var3, 0);

PROC
PROC_GLO_PartyMembers_MakeNPCHook((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_OriginNPCAlignment(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_Origin_GetRecruitmentDialog(_Var1, 0, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Origin_GetRecruitmentDialog(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
PROC_GroupDiscussion_CancelForPlayer(_Var1);
PROC_RemoveAllDialogEntriesForSpeaker(_Var1);
PROC_GLO_Origins_MaybeSetDefaultDialog(_Var1, _Var3);
SetHasDialog(_Var1, 0);

PROC
PROC_GLO_PartyMembers_MakeNPCHook((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_GLO_BreakConcentration(_Var1);

PROC
PROC_GLO_PartyMembers_MakeNPCHook((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
CharacterIgnoreActiveCrimes(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_GLO_Origins_MaybeSetDefaultDialog((GUIDSTRING)_Var1, (DIALOGRESOURCE)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 != NULL_00000000-0000-0000-0000-000000000000
THEN
DB_Dialogs(_Var1, _Var2);

PROC
PROC_GLO_Origins_RemoveRecruitmentDialogs((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_OriginRecruitmentDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginRecruitmentDialog(_Var1, _Var2);

PROC
PROC_GLO_PartyMembers_MakeNPCHook((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_OriginNPCAlignment(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_GLO_PartyMembers_BlockReturnToRecruitmentPosition(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DismissToCamp(_Var1);

PROC
PROC_GLO_PartyMembers_MakeNPCHook((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_OriginInPartyGlobal(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
ClearFlag(_Var2, NULL_00000000-0000-0000-0000-000000000000, 0);

PROC
PROC_DismissToCamp((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_Camp_GetCamperPos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Camp_GetCamperPos(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetDistanceTo(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
DB_InCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetHasDialog(_Var1, 1);

PROC
PROC_DismissToCamp((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_Camp_GetCamperPos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Camp_GetCamperPos(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetDistanceTo(_Var1, _Var2, _Var3, _Var1, _Var1)
AND NOT
DB_InCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 > 18
THEN
PROC_DisappearOutOfSight(_Var1, "Walk", 0, "Origin_RestoreDialog");
DB_CAMP_WalkingToCamp(_Var1);

PROC
PROC_DismissToCamp((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_Camp_GetCamperPos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Camp_GetCamperPos(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
GetDistanceTo(_Var1, _Var2, _Var3, _Var1, _Var1)
AND NOT
DB_InCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 <= 18
THEN
PROC_CharacterMoveTo(_Var1, _Var2, "Walk", "Origin_RestoreDialog");

IF
EntityEvent((GUIDSTRING)_Var1, "Origin_RestoreDialog", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_Camp_GetCamperPos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Camp_GetCamperPos(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, _Var2);

IF
EntityEvent((GUIDSTRING)_Var1, "Origin_RestoreDialog", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
SetOnStage(_Var1, 1);
SetHasDialog(_Var1, 1);

PROC
PROC_Camp_TeleportAllToCamp()
AND
DB_CAMP_WalkingToCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
FlushOsirisQueue(_Var1);

IF
TeleportedToCamp((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CAMP_WalkingToCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_CAMP_WalkingToCamp(_Var1);

PROC
PROC_AssignCharacterToPlayer((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
GetReservedUserID(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
AssignToUser(_Var3, _Var1);

QRY
QRY_GetBestAvatarForCompanion((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_GetBestAvatarForCompanion(_Var1, 0, 0, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_GetBestAvatarForCompanion((GUIDSTRING)_Var1, (INTEGER)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_NOOP(1);

QRY
QRY_GetBestAvatarForCompanion((GUIDSTRING)_Var1, (INTEGER)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_QRYRTN_GetBestAvatarForCompanion(_Var1, _Var4, _Var1, _Var1, _Var1)
THEN
NOT DB_QRYRTN_GetBestAvatarForCompanion(_Var1, _Var4);

QRY
QRY_GetBestAvatarForCompanion((GUIDSTRING)_Var1, (INTEGER)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetReservedUserID(_Var1, _Var4, _Var1, _Var1, _Var1)
AND NOT
QRY_BestAvatarForCompanion_PartnerAvailable(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion_FindBestCandidates(_Var1, _Var4, _Var2, _Var3, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_BestAvatarForCompanion_PartnerAvailable((GUIDSTRING)_Var1, (INTEGER)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_ORI_Partnered(_Var4, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_PreventMPDialogue(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion_CheckNearby(_Var2, _Var1, _Var4, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion_CheckAvailable(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_GetBestAvatarForCompanion(_Var1, _Var4);

QRY
QRY_GetBestAvatarForCompanion_FindBestCandidates((GUIDSTRING)_Var1, -65536, (INTEGER)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1)
AND
DB_ApprovalRating(_Var1, _Var4, _Var5, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion_CheckNearby(_Var2, _Var1, _Var4, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion_CheckAvailable(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_GetBestAvatarForCompanion_Candidate(_Var1, _Var4, _Var5);

QRY
QRY_GetBestAvatarForCompanion_FindBestCandidates((GUIDSTRING)_Var1, (INTEGER)_Var2, (INTEGER)_Var3, (INTEGER)_Var4, (GUIDSTRING)_Var1)
AND
_Var2 != -65536
AND
DB_ApprovalRating(_Var1, _Var5, _Var6, _Var1, _Var1)
AND
GetReservedUserID(_Var5, _Var2, _Var1, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion_CheckNearby(_Var3, _Var1, _Var5, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion_CheckAvailable(_Var4, _Var5, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_GetBestAvatarForCompanion_Candidate(_Var1, _Var5, _Var6);

QRY
QRY_GetBestAvatarForCompanion_FindBestCandidates((CHARACTER)_Var1, (INTEGER)_Var2, (INTEGER)_Var3, (INTEGER)_Var4, (CHARACTER)_Var1)
AND
DB_Hirelings_Hired(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var5, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_PreventMPDialogue(_Var5, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion_CheckNearby(_Var3, _Var1, _Var5, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion_CheckAvailable(_Var4, _Var5, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_GetBestAvatarForCompanion_Candidate(_Var1, _Var5, 0);

QRY
QRY_GetBestAvatarForCompanion_CheckNearby(0, (GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_NOOP(1);

QRY
QRY_GetBestAvatarForCompanion_CheckNearby(1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_SpeakerIsInDialogRange(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_GetBestAvatarForCompanion_CheckAvailable(0, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_NOOP(1);

QRY
QRY_GetBestAvatarForCompanion_CheckAvailable(1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_SpeakerIsAvailable(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DB_QRYRTN_GetBestAvatarForCompanion_Candidate(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
DB_QRYRTN_GetBestAvatarForCompanion_Candidate(_Var1, _Var4, _Var5, _Var1, _Var1)
AND
_Var2 != _Var4
AND
_Var5 <= _Var3
THEN
NOT DB_QRYRTN_GetBestAvatarForCompanion_Candidate(_Var1, _Var4, _Var5);

QRY
QRY_GetBestAvatarForCompanion_FindBestCandidates((GUIDSTRING)_Var1, (INTEGER)_Var2, (INTEGER)_Var3, (INTEGER)_Var4, (GUIDSTRING)_Var1)
AND
DB_QRYRTN_GetBestAvatarForCompanion_Candidate(_Var1, _Var5, _Var6, _Var1, _Var1)
THEN
NOT DB_QRYRTN_GetBestAvatarForCompanion_Candidate(_Var1, _Var5, _Var6);
DB_QRYRTN_GetBestAvatarForCompanion(_Var1, _Var5);

PROC
PROC_DialogFlagSetup((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetReservedUserID(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
GetReservedUserID(_Var2, _Var5, _Var1, _Var1, _Var1)
AND
_Var4 == _Var5
THEN
DB_GLO_Shared_Origins_UserOwnedPlayerCharacterFlag(_Var1, _Var2);
SetFlag(UserOwnedPlayerCharacter_29e72419-7c09-4b79-be31-1acdc6293c17, _Var2);

IF
DialogEnded((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GLO_Shared_Origins_UserOwnedPlayerCharacterFlag(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
DB_DialogPlayers(_Var2, _Var3, 1, _Var1, _Var1)
THEN
NOT DB_GLO_Shared_Origins_UserOwnedPlayerCharacterFlag(_Var1, _Var3);
ClearFlag(UserOwnedPlayerCharacter_29e72419-7c09-4b79-be31-1acdc6293c17, _Var3, 0);

IF
FlagSet(SetOriginHostileAfterDialog_91659c6d-ed58-4b95-894b-763b69df824d, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_SetOriginHostileAfterDialog(_Var1);
ClearFlag(SetOriginHostileToOtherOrigins_8e8bb4ee-af06-4225-bed9-905b244f8780, _Var1, 0);

IF
DialogEnded(_, (INTEGER)_Var2, _, _, _)
AND
DB_SetOriginHostileAfterDialog(_Var3, _, _, _, _)
AND
DialogGetInvolvedNPC(_Var2, 1, _Var3, _, _)
AND
GetFaction(_Var3, _Var4, _, _, _)
THEN
NOT DB_SetOriginHostileAfterDialog(_Var3);
PROC_SetRelationToPlayers(_Var4, 0);
DB_ResetOriginAlignmentAfterCombat(_Var3, _Var4);

IF
LeftCombat((CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ResetOriginAlignmentAfterCombat(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
SetFaction(_Var1, _Var3);
NOT DB_ResetOriginAlignmentAfterCombat(_Var1, _Var3);

IF
FlagSet(FactionHostileToIndivPlayerAfterDialog_3a7747bd-004a-6e69-7ff5-4f4eb6c3c223, _, (INTEGER)_Var2, _, _)
AND
DialogGetInvolvedNPC(_Var2, 1, _Var3, _, _)
AND
DB_GLO_PartyMembers_DefaultFaction(_Var3, _Var4, _, _, _)
THEN
SetFaction(_Var3, _Var4);

IF
TagSet((CHARACTER)_Var1, AVATAR_306b9b05-1057-4770-aa17-01af21acd650, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Avatars(_Var1);

IF
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, AVATAR_306b9b05-1057-4770-aa17-01af21acd650, 1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Avatars(_Var1);

IF
TagCleared((CHARACTER)_Var1, AVATAR_306b9b05-1057-4770-aa17-01af21acd650, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_Avatars(_Var1);

IF
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_PartOfTheTeam(_Var1);

IF
UsingSpellOnTarget(_, (CHARACTER)_Var2, "Target_AntiResurrection", _, _, _, (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
SetTag(_Var2, BLOCK_RESURRECTION_22a75dbb-1588-407e-b559-5aa4e6d4e6a6);

IF
UsingSpellOnTarget(_, (CHARACTER)_Var2, "Target_AntiResurrection", _, _, _, _, _, _, _)
AND
IsTagged(_Var2, AVATAR_306b9b05-1057-4770-aa17-01af21acd650, 0, _, _)
THEN
DB_GLO_PartyMembers_BlockReturnToRecruitmentPosition(_Var2);
PROC_GLO_PartyMembers_Remove(_Var2, NULL_00000000-0000-0000-0000-000000000000, 0);
PurgeOsirisQueue(_Var2);

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Origin_TemporaryLeaveReason(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_ApprovalRating(_Var1, _Var3, _Var4, _Var1, _Var1)
AND
RemoveApprovalRating(_Var1, _Var3, _, _Var1, _Var1)
THEN
NOT DB_ApprovalRating(_Var1, _Var3, _Var4);

IF
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_ApprovalRating(_Var1, _Var2, _, _Var1, _Var1)
THEN
DB_ApprovalRating(_Var1, _Var2, 0);

IF
DB_InCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_ApprovalRating(_Var1, _Var2, _, _Var1, _Var1)
THEN
DB_ApprovalRating(_Var1, _Var2, 0);

IF
ApprovalRatingChangeAttempt((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, _, (INTEGER)_Var5)
THEN
PROC_ApprovalRatingChanged(_Var1, _Var2, _Var3, _Var5);

PROC
PROC_ApprovalRatingChanged((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, (INTEGER)_Var4, (GUIDSTRING)_Var1)
AND
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_ApprovalRating(_Var1, _Var2, _Var5, _Var1, _Var1)
THEN
PROC_OriginWarningBlockRemoval(_Var1, _Var3);
PROC_ApprovalRatingChanged_Apply(_Var1, _Var2, _Var3, _Var4);

PROC
PROC_ApprovalRatingChanged_Apply((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, (INTEGER)_Var4, (GUIDSTRING)_Var1)
AND
DB_ApprovalRating(_Var1, _Var2, _Var5, _Var1, _Var1)
AND
_Var4 != _Var5
THEN
DB_ApprovalRating_Updating(_Var1, _Var2);
DB_ApprovalRating(_Var1, _Var2, _Var4);
NOT DB_ApprovalRating(_Var1, _Var2, _Var5);
NOT DB_ApprovalRating_Updating(_Var1, _Var2);

PROC
PROC_OriginWarningBlockRemoval((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
_Var2 < 0
THEN
NOT DB_OriginWarningBlock(_Var1);

IF
DB_OriginInPartyDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_DropMutingStatussesDialog(_Var2);

IF
DB_OriginInPartyDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_OriginDialog(_Var1, _Var2);

PROC
PROC_RelationshipDialog((CHARACTER)_Var1, (DIALOGRESOURCE)_Var2, (FLAG)_Var3, (GUIDSTRING)_Var4, _, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_OriginDialog(_Var1, _Var2);

PROC
PROC_CampRelationshipDialog((CHARACTER)_Var1, (DIALOGRESOURCE)_Var2, (FLAG)_Var3, _, _)
THEN
DB_OriginDialog(_Var1, _Var2);

IF
DB_ApprovalRating(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
_Var3 <= -20
THEN
ObjectTimerLaunch(_Var1, "ORI_GiveLeaveWarning1", 3000);

IF
DB_ApprovalRating(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
_Var3 <= -40
THEN
ObjectTimerLaunch(_Var1, "ORI_GiveLeaveWarning2", 3000);

IF
DB_ApprovalRating(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
_Var3 <= -50
AND
GetFlag(GLO_Companion_LeaveBlocked_4386e3a1-b16e-4331-92ec-29edbc359d51, _Var1, 0, _Var1, _Var1)
THEN
ObjectTimerLaunch(_Var1, "ORI_StartLeaveDialog", 3000);

IF
FlagCleared(GLO_Companion_LeaveBlocked_4386e3a1-b16e-4331-92ec-29edbc359d51, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ApprovalRating(_Var1, _Var3, _Var4, _Var1, _Var1)
AND
_Var4 <= -50
THEN
ObjectTimerLaunch(_Var1, "ORI_StartLeaveDialog", 3000);

IF
ObjectTimerFinished((CHARACTER)_Var1, "ORI_GiveLeaveWarning1", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_OriginWarningBlock(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginWarning1Dialog(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_ApprovalRating(_Var1, _Var3, _Var4, _Var1, _Var1)
AND
_Var4 <= -20
AND NOT
QRY_OriginAttemptLeaveWarning(_Var1, _Var3, _Var2, _Var1, _Var1)
AND NOT
DB_OriginRetryWarning(_Var1, _Var2, _Var3, "ORI_GiveLeaveWarning1", _Var1)
THEN
DB_OriginRetryWarning(_Var1, _Var2, _Var3, "ORI_GiveLeaveWarning1");

IF
DialogEnded((DIALOGRESOURCE)_Var1, _, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_OriginWarning1Dialog(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginWarning1Dialog(_Var3, _Var1);
DB_OriginWarningBlock(_Var3);

IF
ObjectTimerFinished((CHARACTER)_Var1, "ORI_GiveLeaveWarning2", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_OriginWarningBlock(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginWarning2Dialog(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_ApprovalRating(_Var1, _Var3, _Var4, _Var1, _Var1)
AND
_Var4 <= -40
AND NOT
QRY_OriginAttemptLeaveWarning(_Var1, _Var3, _Var2, _Var1, _Var1)
AND NOT
DB_OriginRetryWarning(_Var1, _Var2, _Var3, "ORI_GiveLeaveWarning2", _Var1)
THEN
DB_OriginRetryWarning(_Var1, _Var2, _Var3, "ORI_GiveLeaveWarning2");

IF
DialogEnded((DIALOGRESOURCE)_Var1, _, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_OriginWarning2Dialog(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginWarning2Dialog(_Var3, _Var1);
DB_OriginWarningBlock(_Var3);

IF
ObjectTimerFinished((CHARACTER)_Var1, "ORI_StartLeaveDialog", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_OriginWarningBlock(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginLeavingDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_ApprovalRating(_Var1, _Var3, _Var4, _Var1, _Var1)
AND
_Var4 <= -50
AND NOT
QRY_OriginAttemptLeaveWarning(_Var1, _Var3, _Var2, _Var1, _Var1)
AND NOT
DB_OriginRetryWarning(_Var1, _Var2, _Var3, "ORI_StartLeaveDialog", _Var1)
THEN
DB_OriginRetryWarning(_Var1, _Var2, _Var3, "ORI_StartLeaveDialog");

IF
DB_Sees(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_OriginRetryWarning(_Var1, _Var3, _Var2, _Var4, _Var1)
AND NOT
DB_CantTalk(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ObjectTimerLaunch(_Var1, _Var4, 3000);

IF
DialogStarted((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_OriginRetryWarning(_Var3, _Var1, _Var4, _Var5, _Var1)
THEN
NOT DB_OriginRetryWarning(_Var3, _Var1, _Var4, _Var5);

IF
DB_OriginLeavingDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_OriginMayLeaveDialog(_Var1, _Var2);
DB_OriginLeavingDependency(_Var1, _Var2);

IF
DB_OriginMayLeaveDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_OriginLeavingDependency(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_OriginLeavingDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginMayLeaveDialog(_Var1, _Var2);
NOT DB_OriginLeavingDependency(_Var1, _Var2);

PROC
PROC_ClearOriginLeavingDialogs((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_OriginLeavingDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginLeavingDialog(_Var1, _Var2);

PROC
PROC_ClearOriginLeavingDialogs((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_OriginMayLeaveDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginMayLeaveDialog(_Var1, _Var2);

PROC
PROC_Origins_CompanionLeavePermanently((GUIDSTRING)_Var1, (STRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_GLO_PartyMembers_BlockReturnToRecruitmentPosition(_Var1);
PROC_GLO_PartyMembers_MakeNPC(_Var1);
UnregisterAsCompanion(_Var1);
NOT DB_NoLowAttitudeDialog(_Var1);
NOT DB_GLO_PartyMembers_BlockReturnToRecruitmentPosition(_Var1);
SetTag(_Var1, BLOCK_RESURRECTION_22a75dbb-1588-407e-b559-5aa4e6d4e6a6);
NOT DB_PartOfTheTeam(_Var1);
PROC_StopLoopEffect(_Var1, "RelationshipMarker");

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Origin_TemporaryLeaveReason(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_Origins_RemoveRecruitmentDialogs(_Var1);

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Origin_TemporaryLeaveReason(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_CompanionCanPartner(_Var1, _Var3, _Var4, _, _, _, _, _Var1, _Var1, _Var1)
THEN
PROC_PurgeLevelPartyFlag(_Var3);
PROC_PurgeLevelPartyFlag(_Var4);

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Origin_TemporaryLeaveReason(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginInPartyDialog(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginInPartyDialog(_Var1, _Var3);

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_QuestDef_State_CompanionLeft(_Var3, _Var4, _Var2, _Var1, _Var1)
AND
IsTagged(_Var1, _Var3, 1, _Var1, _Var1)
AND
DB_Avatars(_Var5, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var5, _Var4, _Var2);

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Origin_TemporaryLeaveReason(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
SetTag(_Var1, DOWNED_DISABLED_7095912e-fcb9-41dd-aec3-3cf7803e4b22);

PROC
PROC_StateSet_PermaDefeated((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Origins(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QuestDef_State_CompanionLeft(_Var2, _Var3, _, _Var1, _Var1)
AND
IsTagged(_Var1, _Var2, 1, _Var1, _Var1)
AND
DB_Avatars(_Var5, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate(_Var5, _Var3, "CompanionMurdered");

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_OriginMayLeaveDialog(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartOfTheTeam(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
QRY_Origins_PlayerForItemsOfLeavingCompanion(_Var3, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
GetFlag(GLO_Companion_Leave_363c71f4-8b46-c0c0-4bbb-0e5a85e4652d, _Var3, 1, _Var1, _Var1)
THEN
DB_CompanionLeaving(_Var3, _Var4);
PROC_Origins_CompanionLeavePermanently(_Var3, "CompanionLowRelation");
PROC_ClearOriginLeavingDialogs(_Var3);
PROC_DisappearOutOfSight(_Var3, "Run", 1, "GLO_CompanionLeaves_LowRelation");

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_OriginMayLeaveDialog(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartOfTheTeam(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GLO_Companion_LeaveNoDisappear_5f7db208-df3c-8cf8-a397-1d188ed79523, _Var3, 1, _Var1, _Var1)
AND
QRY_Origins_PlayerForItemsOfLeavingCompanion(_Var3, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
DB_CompanionLeaving(_Var3, _Var4);
PROC_Origins_CompanionLeavePermanently(_Var3, "CompanionLowRelation");
PROC_ClearOriginLeavingDialogs(_Var3);

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_OriginMayLeaveDialog(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartOfTheTeam(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GLO_Companion_LeaveDisappearInstantly_8d15c1c9-fa85-4c67-8f85-c5c1bb672b28, _Var3, 1, _Var1, _Var1)
AND
QRY_Origins_PlayerForItemsOfLeavingCompanion(_Var3, _Var2, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
DB_CompanionLeaving(_Var3, _Var4);
PROC_Origins_CompanionLeavePermanently(_Var3, "CompanionLowRelation");
PROC_ClearOriginLeavingDialogs(_Var3);
SetOnStage(_Var3, 0);

QRY
QRY_Origins_PlayerForItemsOfLeavingCompanion((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
NOT DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var1, _Var3);

QRY
QRY_Origins_PlayerForItemsOfLeavingCompanion((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DialogPlayers(_Var2, _Var3, _, _Var1, _Var1)
AND
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var1, _Var3);

QRY
QRY_Origins_PlayerForItemsOfLeavingCompanion((CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DialogPlayers(_Var2, _Var3, _, _Var1, _Var1)
AND
_Var3 != _Var1
AND NOT
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var1, _Var3);

QRY
QRY_Origins_PlayerForItemsOfLeavingCompanion((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_GetBestAvatarForCompanion(_Var1, _Var4, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_Origins_PlayerForItemsOfLeavingCompanion(_Var1, _Var4);

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_OriginMayLeaveDialog(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartOfTheTeam(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GLO_Companion_Murder_2b416989-93e2-4853-b48a-7aeed3e69f7c, _Var3, 1, _Var1, _Var1)
THEN
PROC_Origins_CompanionLeavePermanently(_Var3, "CompanionMurdered");
PROC_ClearOriginLeavingDialogs(_Var3);
PROC_DieImmediate(_Var3, 0, 1);

IF
DialogEnded((DIALOGRESOURCE)_Var1, (INTEGER)_Var2, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_OriginMayLeaveDialog(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartOfTheTeam(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(GLO_Companion_Combat_d8f0c309-193b-eaed-5aaa-812cd137caf2, _Var3, 1, _Var1, _Var1)
AND
DB_GLO_PartyMembers_OriginalAlignment(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
PROC_Origins_CompanionLeavePermanently(_Var3, "CompanionHostile");
PROC_ClearOriginLeavingDialogs(_Var3);
PROC_SetRelationToPlayers(_Var4, 0);
DB_Origin_BecameHostile(_Var3);

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, "CompanionMurdered", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_Origin_DontMakeCorpseOwned(_Var1);

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, "CompanionHostile", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_Origin_DontMakeCorpseOwned(_Var1);

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, "Killed", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_Origin_DontMakeCorpseOwned(_Var1);

QRY
QRY_CorpseLooting_BlockMakeOwned((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Origin_DontMakeCorpseOwned(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
LongRestStarted()
AND
DB_Origin_BecameHostile(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantMove(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DisappearOutOfSight(_Var1, "Run", 0, "ORI_LeftAfterHostility");
NOT DB_Origin_BecameHostile(_Var1);

QRY
QRY_Origins_BlockTransferInventory(_, (STRING)_Var2, _, _, _)
AND
DB_Origins_BlockTransferReasons(_Var2, _, _, _, _)
THEN
DB_NOOP(1);

PROC
PROC_Origins_CompanionLeavePermanently((GUIDSTRING)_Var1, (STRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
QRY_Origins_BlockTransferInventory(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_Origins_TransferCompanionInventory(_Var1, _Var2);

PROC
PROC_Origins_TransferCompanionInventory((GUIDSTRING)_Var1, (STRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_CompanionLeaving(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_GetBestAvatarForCompanion(_Var1, _Var4, _Var1, _Var1, _Var1)
THEN
PROC_GLO_PartyMembers_TransferInventoryToPlayer(_Var1, _Var4, _Var2);

PROC
PROC_Origins_TransferCompanionInventory((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CompanionLeaving(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
PROC_GLO_PartyMembers_TransferInventoryToPlayer(_Var1, _Var3, _Var2);

PROC
PROC_Origins_CompanionLeavePermanently((CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_CompanionLeaving(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
NOT DB_CompanionLeaving(_Var1, _Var3);

IF
AddedTo((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CompanionLeavingBackPack(_Var4, _Var5, _Var2, _Var1, _Var1)
AND
Exists(_Var1, 1, _Var1, _Var1, _Var1)
AND
IsItem(_Var1, 1, _Var1, _Var1, _Var1)
AND
GetOriginalOwner(_Var1, _Var4, _Var1, _Var1, _Var1)
THEN
SetOriginalOwner(_Var1, _Var5);

IF
ApprovalRatingChanged((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_DialogSpeakers(_Var4, _Var1, _, _Var1, _Var1)
AND
DB_DialogSpeakers(_Var4, _Var2, _Var6, _Var1, _Var1)
THEN
PROC_ApprovalRating_SetThresholdEvents(_Var1, _Var2, _Var6);

IF
DB_DialogSpeakers(_Var1, _Var2, _, _Var1, _Var1)
AND
DB_DialogSpeakers(_Var1, _Var4, _Var5, _Var1, _Var1)
AND
DB_ApprovalRating(_Var2, _Var4, _, _Var1, _Var1)
THEN
PROC_ApprovalRating_SetThresholdEvents(_Var2, _Var4, _Var5);

PROC
PROC_ApprovalRating_SetThresholdEvents((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_ApprovalRating(_Var1, _Var2, _Var4, _Var1, _Var1)
AND
DB_OriginRelationThresholdEventsPerSpeaker(_Var3, _Var5, _Var6, _Var1, _Var1)
AND
_Var4 >= _Var6
THEN
SetFlag(_Var5, _Var1);

PROC
PROC_ApprovalRating_SetThresholdEvents((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_ApprovalRating(_Var1, _Var2, _Var4, _Var1, _Var1)
AND
DB_OriginRelationThresholdEventsPerSpeaker(_Var3, _Var5, _Var6, _Var1, _Var1)
AND
_Var4 < _Var6
THEN
ClearFlag(_Var5, _Var1);

QRY
QRY_OriginAttemptLeaveWarning((CHARACTER)_Var1, (CHARACTER)_Var2, (DIALOGRESOURCE)_Var3, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_SpeakerIsInDialogRange(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog_Fixed(_Var3, _Var1, _Var2, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_OriginAttemptLeaveWarning((CHARACTER)_Var1, (CHARACTER)_Var2, (DIALOGRESOURCE)_Var3, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_SpeakerIsInDialogRange(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
QRY_SameUser(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
QRY_StartDialog_Fixed(_Var3, _Var1, _Var2, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_Origins_ForceLowApprovalLeavingDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Origins(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_Origins_ForceLowApprovalLeavingDialog_Internal(_Var1);

PROC
PROC_Origins_ForceLowApprovalLeavingDialog_Internal((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_OriginWarning1Dialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginWarning1Dialog(_Var1, _Var2);

PROC
PROC_Origins_ForceLowApprovalLeavingDialog_Internal((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_OriginWarning2Dialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_OriginWarning2Dialog(_Var1, _Var2);

PROC
PROC_Origins_ForceLowApprovalLeavingDialog_Internal((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ApprovalRating(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
IntegerSum(_Var3, 100, _Var4, _Var1, _Var1)
AND
IntegerProduct(_Var4, -1, _Var5, _Var1, _Var1)
AND
ChangeApprovalRating(_Var1, _Var2, 0, _Var5, _)
THEN
DB_NOOP(1);

QRY
QRY_IsOriginPartOfTheTeam((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_PartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginNPCAlignment(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_IsOriginPartOfTheTeam((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_DisappearingToCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginNPCAlignment(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
AttackedBy((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var3, _, (INTEGER)_Var5, (STRING)_Var6, (INTEGER)_Var7, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_IgnoreAssault(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GLO_Mad(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Dominated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_CRIME_IsDamageAssault(_Var6, _Var5, _Var1, _Var1, _Var1)
AND
QRY_IsOriginPartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GetCharacterOwnerIfItemSummon(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_GetCharacterOwnerIfItemSummon(_Var8, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var8, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GLO_Mad(_Var8, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Dominated(_Var8, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_IgnoreDamageSource(_Var6, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_CRIME_StoryActionHandled(_Var8, "Assault", _Var7, NULL_00000000-0000-0000-0000-000000000000, _Var1, -1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_IgnoreAssaultFor(_Var8, _Var1, _Var1, _Var1, _Var1)
AND
IsEnemy(_Var8, _Var1, 0, _Var1, _Var1)
AND
HasActiveStatusWithGroup(_Var1, "SG_Confused", 0, _Var1, _Var1)
AND
HasActiveStatusWithGroup(_Var8, "SG_Confused", 0, _Var1, _Var1)
THEN
PROC_ORI_FriendlyFire(_Var8, _Var1);

PROC
PROC_ORI_FriendlyFire((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_FriendlyFire_Tracker(_Var2, _, _Var1, _Var1, _Var1)
THEN
RealtimeObjectTimerCancel(_Var2, "ORI_FriendlyFireTimer");
RealtimeObjectTimerLaunch(_Var2, "ORI_FriendlyFireTimer", 60000);

PROC
PROC_ORI_FriendlyFire((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_ORI_FriendlyFire_Tracker(_Var2, _, _Var1, _Var1, _Var1)
THEN
RealtimeObjectTimerLaunch(_Var2, "ORI_FriendlyFireTimer", 60000);
DB_ORI_FriendlyFire_Tracker(_Var2, 0);

PROC
PROC_ORI_FriendlyFire((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_ORI_FriendlyFire_Tracker(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var3, 1, _Var4, _Var1, _Var1)
THEN
NOT DB_ORI_FriendlyFire_Tracker(_Var2, _Var3);
DB_ORI_FriendlyFire_Tracker(_Var2, _Var4);

PROC
PROC_ORI_FriendlyFire((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_FriendlyFire_Tracker(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
_Var3 >= 3
THEN
NOT DB_ORI_FriendlyFire_Tracker(_Var2, _Var3);
RealtimeObjectTimerCancel(_Var2, "ORI_FriendlyFireTimer");
PROC_ORI_FriendlyFire_React(_Var1, _Var2);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "ORI_FriendlyFireTimer", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_ORI_FriendlyFire_Tracker(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_ORI_FriendlyFire_Tracker(_Var1, _Var2);

PROC
PROC_ORI_FriendlyFire_React((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ApprovalRating(_Var2, _Var1, _Var3, _Var1, _Var1)
AND
ChangeApprovalRating(_Var2, _Var1, 0, -10, _)
THEN
DB_NOOP(1);

PROC
PROC_ORI_FriendlyFire_React((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_ApprovalRating(_Var2, _Var1, _, _Var1, _Var1)
AND
QRY_OnlyOnce_Reset("ORI_FriendlyFire_React_OnlyOncePerRule", _Var1, _Var1, _Var1, _Var1)
AND
DB_ApprovalRating(_Var2, _Var4, _Var5, _Var1, _Var1)
AND
QRY_SameUser(_Var1, _Var4, _Var1, _Var1, _Var1)
AND
ChangeApprovalRating(_Var2, _Var4, 0, -10, _)
AND
QRY_OnlyOnce("ORI_FriendlyFire_React_OnlyOncePerRule", _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_StartOriginOverrideDialog((DIALOGRESOURCE)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var3, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_OriginRecruitmentDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion(_Var3, 1, 1, _Var1, _Var1)
AND
DB_QRYRTN_GetBestAvatarForCompanion(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
QRY_StartDialog_Fixed(_Var1, _Var2, _Var4, _Var1, _Var1)
THEN
MakePlayerActive(_Var4);

QRY
QRY_StartOriginOverrideDialog((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_OriginInPartyDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion(_Var3, 1, 1, _Var1, _Var1)
AND
DB_QRYRTN_GetBestAvatarForCompanion(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
QRY_StartDialog_Fixed(_Var1, _Var2, _Var4, _Var1, _Var1)
THEN
MakePlayerActive(_Var4);

QRY
QRY_SelectCompanionFallback((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_SelectCompanionFallback_Found(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetReservedUserID(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
GetReservedUserID(_Var1, _Var4, _Var1, _Var1, _Var1)
AND
_Var3 != _Var4
THEN
DB_SelectedDialog(DIALOGRESOURCEGUID_GLO_AD_CompanionCantTalk_5b47f078-c7c2-3f21-d96f-93c0652aa2f2, _Var1);
DB_SelectCompanionFallback_Found(_Var2);

QRY
QRY_SelectCompanionFallback((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_SelectCompanionFallback_Found(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_PartyDialogSuppressed(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyDialogSuppressed(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
DB_PartyDialogSuppression_CustomDialogForCompanion(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(_Var4, _Var1);
DB_SelectCompanionFallback_Found(_Var2);

QRY
QRY_SelectCompanionFallback((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_SelectCompanionFallback_Found(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_PartyDialogSuppressed(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyDialogSuppressed(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
DB_PartyDialogSuppression_CustomDialogForParty(_Var3, _Var4, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(_Var4, _Var1);
DB_SelectCompanionFallback_Found(_Var2);

QRY
QRY_SelectCompanionFallback((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_SelectCompanionFallback_Found(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_PartyDialogSuppressed(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(DIALOGRESOURCEGUID_GLO_AD_CompanionCantTalk_5b47f078-c7c2-3f21-d96f-93c0652aa2f2, _Var1);
DB_SelectCompanionFallback_Found(_Var2);

QRY
QRY_SelectCompanionFallback((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_SelectCompanionFallback_Found(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_SameUser(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GetBestAvatarForCompanion(_Var1, 1, 1, _Var1, _Var1)
AND
DB_QRYRTN_GetBestAvatarForCompanion(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
QRY_SelectDialog(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
MakePlayerActive(_Var3);
DB_SelectCompanionFallback_Found(_Var2);

QRY
QRY_SelectCompanionFallback((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_SelectCompanionFallback_Found(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(DIALOGRESOURCEGUID_GLO_AD_CompanionCantTalk_5b47f078-c7c2-3f21-d96f-93c0652aa2f2, _Var1);
DB_SelectCompanionFallback_Found(_Var2);

QRY
QRY_SelectCompanionFallback((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_SelectCompanionFallback_Found(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_PreventMPDialogue(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(DIALOGRESOURCEGUID_GLO_AD_NonBondedCompanionDialog_62ba7c46-8d22-c591-f04c-2e99441cd02a, _Var1);
DB_SelectCompanionFallback_Found(_Var2);

QRY
QRY_SelectCompanionFallback((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_SelectCompanionFallback_Found(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_SelectCompanionFallback_Found(_Var2);

IF
FlagSet(GLO_ORI_Event_InvitedToCamp_Run_07c4d37e-fc82-4055-b768-167650be9956, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_ORI_ToCampAfterDialog(_Var1, _Var2, "Run");

IF
FlagSet(GLO_ORI_Event_InvitedToCamp_Walk_6dfae0e0-e6c4-4d4f-8979-df320356ea03, (CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_ORI_ToCampAfterDialog(_Var1, _Var2, "Walk");

IF
DialogEnded(_, (INTEGER)_Var2, _, _, _)
AND
DB_ORI_ToCampAfterDialog(_Var3, _Var2, _Var4, _, _)
AND
DB_DialogPlayers(_Var2, _Var5, 1, _, _)
THEN
NOT DB_ORI_ToCampAfterDialog(_Var3, _Var2, _Var4);
PROC_ORI_SendToCampAfterDialog(_Var3, _Var2, _Var4, _Var5);

PROC
PROC_ORI_SendToCampAfterDialog((GUIDSTRING)_Var1, (INTEGER)_Var2, (STRING)_Var3, (GUIDSTRING)_Var4, (GUIDSTRING)_Var1)
THEN
DB_ORI_DisappearingToCamp(_Var1);
PROC_CheckFirstTimeRecruited(_Var1);
RegisterAsCompanion(_Var1, _Var4);
PROC_DisappearOutOfSight(_Var1, _Var3, 0, "ORI_ToCamp");

IF
EntityEvent((GUIDSTRING)_Var1, "ORI_ToCamp", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
NOT DB_ORI_DisappearingToCamp(_Var1);
PROC_ORI_SetupCamp(_Var1);

PROC
PROC_ORI_SetupCamp((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_ORI_SetupCamp(_Var1, 1);

PROC
PROC_ORI_SetupCamp((CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_PartOfTheTeam(_Var1);
SetOnStage(_Var1, 1);

PROC
PROC_ORI_SetupCamp((GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
IsTagged(_Var1, DOWNED_DISABLED_7095912e-fcb9-41dd-aec3-3cf7803e4b22, 1, _Var1, _Var1)
THEN
ClearTag(_Var1, DOWNED_DISABLED_7095912e-fcb9-41dd-aec3-3cf7803e4b22);

PROC
PROC_ORI_SetupCamp((CHARACTER)_Var1, 1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_Camp_GetCamperPos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_QRYRTN_Camp_GetCamperPos(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, _Var2);

PROC
PROC_ORI_SetupCamp((CHARACTER)_Var1, 1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_GLO_Origins_SetRecruitmentDialog_Internal(_Var1, 0);

PROC
PROC_CharacterRegisterCrime_Success((CHARACTER)_Var1, (STRING)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var4, (CHARACTER)_Var5, (INTEGER)_Var6, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Origins(_Var5, _Var1, _Var1, _Var1, _Var1)
AND
QRY_CRIME_IsCrimeFamilyMember(_Var2, "Murder", _Var1, _Var1, _Var1)
THEN
CrimeIgnoreCrime(_Var6, _Var5);

IF
DB_PartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Origins_SelfHealing_Disabled(_Var1);
PROC_SelfHealing_Disable(_Var1);

IF
DB_Origins_SelfHealing_Disabled(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_Origins_SelfHealing_Disabled(_Var1);
PROC_SelfHealing_Enable(_Var1);

IF
FlagSet((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CompanionCanPartner(_Var4, _Var1, _, _, _, _, _, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_ORI_Dating(_, _Var4, _Var1, _Var1, _Var1)
THEN
DB_ORI_Dating(_Var2, _Var4);
SetFlag(ORI_State_Dating_a3346d5b-c54b-4c73-bf18-0a2bf90c35da, _Var2, _Var3);
SetFlag(ORI_State_Dating_a3346d5b-c54b-4c73-bf18-0a2bf90c35da, _Var4, _Var3);

IF
FlagCleared((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CompanionCanPartner(_Var4, _Var1, _, _, _, _, _, _Var1, _Var1, _Var1)
AND
DB_ORI_Dating(_Var2, _Var4, _Var1, _Var1, _Var1)
THEN
NOT DB_ORI_Dating(_Var2, _Var4);
DB_ORI_WasDating(_Var2, _Var4);
ClearFlag(ORI_State_Dating_a3346d5b-c54b-4c73-bf18-0a2bf90c35da, _Var4, _Var3);
PROC_ORI_Partnered_Clear_DatingFlag(_Var2, _Var3);

IF
DB_ORI_WasDating(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_ORI_WasDatingFlag(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
SetFlag(_Var3, _Var1, 0);

PROC
PROC_ORI_Partnered_Clear_DatingFlag((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_ORI_Dating(_Var1, _, _Var1, _Var1, _Var1)
THEN
ClearFlag(ORI_State_Dating_a3346d5b-c54b-4c73-bf18-0a2bf90c35da, _Var1, _Var2);

QRY
QRY_ORI_GetPartnerOrDatingAvatar((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_QRYRTN_ORI_PartnerOrDatingAvatar(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
NOT DB_QRYRTN_ORI_PartnerOrDatingAvatar(_Var2, _Var3);

QRY
QRY_ORI_GetPartnerOrDatingAvatar((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_Dating(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_ORI_PartnerOrDatingAvatar(_Var1, _Var2);

QRY
QRY_ORI_GetPartnerOrDatingAvatar((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_Partnered(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_QRYRTN_ORI_PartnerOrDatingAvatar(_Var1, _Var2);

IF
DB_ORI_Dating(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_ORI_Dating(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
_Var2 != _Var3
AND NOT
DB_ORI_FreeDating(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_ORI_FreeDating(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(ORI_State_DoubleDating_41320aeb-8e1a-433d-a82e-3d78aff578da, _Var1, 0);

IF
FlagCleared((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CompanionCanPartner(_Var4, _Var1, _, _, _, _, _, _Var1, _Var1, _Var1)
AND NOT
DB_ORI_FreeDating(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(ORI_State_DoubleDating_41320aeb-8e1a-433d-a82e-3d78aff578da, _Var2, 0);

IF
FlagSet((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_CompanionCanPartner(_Var4, _, _Var1, _, _, _, _, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_ORI_Partnered(_Var2, _, _Var1, _Var1, _Var1)
AND NOT
DB_ORI_Partnered(_, _Var4, _Var1, _Var1, _Var1)
THEN
DB_ORI_Partnered(_Var2, _Var4);
SetFlag(ORI_State_Partnered_6c1a31e8-1d3d-42a5-af4f-72ef7a798f74, _Var2);
SetFlag(ORI_State_Partnered_6c1a31e8-1d3d-42a5-af4f-72ef7a798f74, _Var4);

IF
FlagCleared((FLAG)_Var1, (CHARACTER)_Var2, (INTEGER)_Var3, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_CompanionCanPartner(_Var4, _Var5, _Var1, _Var6, _, _, _, _Var1, _Var1, _Var1)
AND
DB_ORI_Partnered(_Var2, _Var4, _Var1, _Var1, _Var1)
THEN
NOT DB_ORI_Partnered(_Var2, _Var4);
PROC_ORI_Partnered_Clear_PartneredFlag(_Var2);
SetFlag(_Var6, _Var2, _Var3);
ClearFlag(_Var5, _Var2, 0);
ClearFlag(ORI_State_Partnered_6c1a31e8-1d3d-42a5-af4f-72ef7a798f74, _Var4);

IF
FlagCleared((FLAG)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var3, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_CompanionCanPartner(_Var4, _, _Var1, _, _Var7, _, _, _Var1, _Var1, _Var1)
AND
DB_DialogSpeakers(_Var3, _Var4, _, _Var1, _Var1)
THEN
SetFlag(_Var7, _Var2, _Var3);

IF
DB_ORI_Partnered(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_PartOfTheTeam(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_CompanionCanPartner(_Var2, _, _Var4, _, _, _, _, _Var1, _Var1, _Var1)
THEN
ClearFlag(_Var4, _Var1);

PROC
PROC_ORI_Partnered_Clear_PartneredFlag((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_ORI_Partnered(_Var1, _, _Var1, _Var1, _Var1)
THEN
ClearFlag(ORI_State_Partnered_6c1a31e8-1d3d-42a5-af4f-72ef7a798f74, _Var1);

IF
DB_DialogSpeakers(_Var1, _Var2, _, _Var1, _Var1)
AND
DB_ORI_Partnered(_Var2, _Var4, _Var1, _Var1, _Var1)
AND
DB_DialogSpeakers(_Var1, _Var4, _, _Var1, _Var1)
AND NOT
DB_ORI_PartneredInDialog(_Var2, _Var4, _Var1, _Var1, _Var1)
THEN
DB_ORI_PartneredInDialog(_Var2, _Var4, _Var1);
SetFlag(ORI_State_PartneredCompanionIncluded_c401d64f-025e-433d-911d-1e32d0da37fa, _Var2, _Var1);

IF
DB_ORI_PartneredInDialog(_Var1, _Var2, _Var3, _Var1, _Var1)
AND NOT
DB_ORI_Partnered(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_ORI_PartneredInDialog(_Var1, _Var2, _Var3);
PROC_ORI_PartneredInDialog_RecheckFlag(_Var1, _Var3);

IF
DB_ORI_PartneredInDialog(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
DB_ORI_Partnered(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_DialogSpeakers(_Var3, _Var2, _, _Var1, _Var1)
THEN
NOT DB_ORI_PartneredInDialog(_Var1, _Var2, _Var3);
PROC_ORI_PartneredInDialog_RecheckFlag(_Var1, _Var3);

PROC
PROC_ORI_PartneredInDialog_RecheckFlag((GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_ORI_PartneredInDialog(_Var1, _, _Var2, _Var1, _Var1)
THEN
ClearFlag(ORI_State_PartneredCompanionIncluded_c401d64f-025e-433d-911d-1e32d0da37fa, _Var1, _Var2);

IF
FlagCleared(ORI_State_Partnered_6c1a31e8-1d3d-42a5-af4f-72ef7a798f74, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_ORI_ResetStableRelationshipCounter(_Var1);

IF
FlagSet(ORI_State_Partnered_6c1a31e8-1d3d-42a5-af4f-72ef7a798f74, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_ORI_ResetStableRelationshipCounter(_Var1);

PROC
PROC_ORI_ResetStableRelationshipCounter((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
ClearFlag(ORI_State_StableRelationship_d904563d-2660-4b0c-8ac8-748bbe3c3095, _Var1, 0);

PROC
PROC_ORI_ResetStableRelationshipCounter((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_StableRelationshipCounter(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_ORI_StableRelationshipCounter(_Var1, _Var2);

PROC
PROC_ORI_ResetStableRelationshipCounter((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_ORI_StableRelationshipCounter(_Var1, 0);

PROC
PROC_LongRest()
AND
DB_ORI_StableRelationshipCounter(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var2, 1, _Var3, _Var1, _Var1)
THEN
NOT DB_ORI_StableRelationshipCounter(_Var1, _Var2);
DB_ORI_StableRelationshipCounter(_Var1, _Var2);

IF
DB_ORI_StableRelationshipCounter(_Var1, 3, _Var1, _Var1, _Var1)
THEN
NOT DB_ORI_StableRelationshipCounter(_Var1, 3);
SetFlag(ORI_State_StableRelationship_d904563d-2660-4b0c-8ac8-748bbe3c3095, _Var1, 0);

IF
FlagCleared((FLAG)_Var1, (CHARACTER)_Var2, (INTEGER)_Var3, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_CompanionCanPartner(_Var4, _Var1, _, _, _, _Var8, _, _Var1, _Var1, _Var1)
AND
DB_OriginInPartyDialog(_Var4, _Var10, _Var1, _Var1, _Var1)
AND
DB_DialogName(_Var10, _Var3, _Var1, _Var1, _Var1)
AND
DB_ORI_Partnered(_Var2, _Var11, _Var1, _Var1, _Var1)
AND
_Var4 != _Var11
THEN
SetFlag(_Var8, _Var2, _Var3);

IF
FlagSet((FLAG)_Var1, (GUIDSTRING)_Var2, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_CompanionCanPartner(_Var4, _, _Var1, _, _, _, _, _Var1, _Var1, _Var1)
AND
DB_CompanionCanPartner(_Var10, _, _, _, _, _Var15, _, _Var1, _Var1, _Var1)
AND
_Var15 != NULL_00000000-0000-0000-0000-000000000000
AND
GetFlag(_Var15, _Var2, 1, _Var1, _Var1)
THEN
ClearFlag(_Var15, _Var2, 0);

IF
FlagCleared((FLAG)_Var1, (GUIDSTRING)_Var2, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_CompanionCanPartner(_Var4, _, _Var1, _, _, _, _, _Var1, _Var1, _Var1)
AND
DB_CompanionCanPartner(_Var10, _, _, _, _, _Var15, _, _Var1, _Var1, _Var1)
AND
_Var15 != NULL_00000000-0000-0000-0000-000000000000
AND
GetFlag(_Var15, _Var2, 1, _Var1, _Var1)
THEN
ClearFlag(_Var15, _Var2, 0);

IF
TextEvent("date", _, _, _, _)
THEN
DB_ORI_DateCommands_DumpString("To date someone, select the avatar and use one of the following commands: oe stopdate");

IF
TextEvent("date", _, _, _, _)
AND
DB_CompanionCanPartner(_, _, _, _, _, _, _Var7, _, _, _)
THEN
PROC_ORI_DateCommands_FillDumpString(_Var7);

PROC
PROC_ORI_DateCommands_FillDumpString((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_ORI_DateCommands_DumpString(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
Concatenate(_Var2, ", oe ", _Var3, _Var1, _Var1)
AND
Concatenate(_Var3, _Var1, _Var4, _Var1, _Var1)
THEN
NOT DB_ORI_DateCommands_DumpString(_Var2);
DB_ORI_DateCommands_DumpString(_Var4);

IF
TextEvent("date", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_ORI_DateCommands_DumpString(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_ORI_DateCommands_DumpString(_Var1);
DebugText(_Var2, _Var1);

IF
TextEvent((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_CompanionCanPartner(_Var2, _, _Var4, _, _, _, _Var1, _Var1, _Var1, _Var1)
AND
GetHostCharacter(_Var8, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_ORI_Partner_DebugCheck(_Var8, _Var2, _Var1, _Var1, _Var1)
THEN
SetFlag(_Var4, _Var8);

IF
TextEvent("stopdate", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Please select an avatar to end a relationship");

IF
TextEvent("stopdate", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_ORI_Partnered(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_CompanionCanPartner(_Var2, _, _Var4, _, _, _, _Var8, _Var1, _Var1, _Var1)
THEN
ClearFlag(_Var4, _Var1);

QRY
QRY_ORI_Partner_DebugCheck((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Can't start relationship: Selected character is not an avatar");

QRY
QRY_ORI_Partner_DebugCheck((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Can't start relationship: Target character is an avatar");

QRY
QRY_ORI_Partner_DebugCheck((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_Partnered(_Var1, _, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Can't start relationship: Avatar is already in a relationship. Use 'oe stopdate' to clear relationships on target.");

QRY
QRY_ORI_Partner_DebugCheck((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_ORI_Partnered(_, _Var2, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Can't start relationship: Companion is already in a relationship. Use 'oe stopdate' to clear relationships on target.");

QRY
QRY_ORI_Partner_DebugCheck((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_PartOfTheTeam(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DebugText(_Var1, "Can't start relationship: Companion is not in the party.");

IF
DB_PartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginPartOfTheTeamFlag(_Var1, _Var2, _, _, _Var1)
AND
_Var2 != NULL_00000000-0000-0000-0000-000000000000
THEN
SetFlag(_Var2);

IF
DB_OriginPartOfTheTeamFlag(_Var1, _Var2, _, _, _Var1)
AND NOT
DB_PartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var2 != NULL_00000000-0000-0000-0000-000000000000
THEN
ClearFlag(_Var2);

IF
DB_PartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginPartOfTheTeamFlag(_Var1, _, _Var3, _, _Var1)
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 != NULL_00000000-0000-0000-0000-000000000000
THEN
SetFlag(_Var3);

IF
DB_OriginPartOfTheTeamFlag(_Var1, _, _Var3, _, _Var1)
AND NOT
DB_PartOfTheTeam(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var3 != NULL_00000000-0000-0000-0000-000000000000
THEN
ClearFlag(_Var3);

IF
CharacterReservedUserIDChanged((GUIDSTRING)_Var1, (INTEGER)_Var2, (INTEGER)_Var3, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_ORI_UpdateCharacterControlledFlags(_Var1);
PROC_ORI_ClearUserControlledFlags(_Var2, _Var1);
PROC_ORI_SetUserControlledFlags(_Var3, _Var1);

PROC
PROC_ORI_UpdateCharacterControlledFlags((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginPartOfTheTeamFlag(_Var2, _, _, _Var5, _Var1)
AND
QRY_SameUser(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(_Var5, _Var1);

PROC
PROC_ORI_UpdateCharacterControlledFlags((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_OriginPartOfTheTeamFlag(_Var2, _, _, _Var5, _Var1)
AND NOT
QRY_SameUser(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(_Var5, _Var1);

PROC
PROC_ORI_ClearUserControlledFlags((INTEGER)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_OriginPartOfTheTeamFlag(_Var2, _, _, _Var5, _Var1)
AND
DB_Players(_Var6, _Var1, _Var1, _Var1, _Var1)
AND
GetReservedUserID(_Var6, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(_Var5, _Var6);

PROC
PROC_ORI_SetUserControlledFlags((INTEGER)_Var1, (GUIDSTRING)_Var2, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_OriginPartOfTheTeamFlag(_Var2, _, _, _Var5, _Var1)
AND
DB_Players(_Var6, _Var1, _Var1, _Var1, _Var1)
AND
GetReservedUserID(_Var6, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(_Var5, _Var6);

IF
DB_OriginKickFromPartyFlags(_Var1, _, _Var3, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(_Var3, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
DB_OriginKickFromPartyFlags(_Var1, _, _Var3, _Var1, _Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(_Var3, NULL_00000000-0000-0000-0000-000000000000, 0);

IF
FlagSet((FLAG)_Var1, NULL_00000000-0000-0000-0000-000000000000, (INTEGER)_Var2, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_OriginKickFromPartyFlags(_Var3, _Var1, _, _Var1, _Var1)
AND
DialogGetInvolvedPlayer(_Var2, 1, _Var5, _Var1, _Var1)
THEN
PROC_GLO_PartyMembers_Remove(_Var5, _Var5, 1);

IF
FlagSet((FLAG)_Var1, NULL_00000000-0000-0000-0000-000000000000, (INTEGER)_Var2, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_OriginKickFromPartyFlags(_Var3, _Var1, _, _Var1, _Var1)
THEN
ClearFlag(_Var1, _Var3, 0);

IF
KilledBy((CHARACTER)_Var1, (CHARACTER)_Var2, _, _, (CHARACTER)_Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_CompanionCaredFaction(_Var5, _Var6, _Var7, _Var8, _Var9)
AND
DB_PartOfTheTeam(_Var5, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var5, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CompanionCaredFaction_IgnoredNPC(_Var5, _Var1, _Var1, _Var1, _Var1)
AND
QRY_CompanionCanReactToFactionMemberBeingKilled(_Var5, _Var6, _Var9, _Var1, _Var1)
AND
GetBaseFaction(_Var1, _Var10, _Var1, _Var1, _Var1)
AND
QRY_CompanionNeedToReactToFactionMemberDeath(_Var6, _Var10, _Var8, _Var1, _Var1)
THEN
DB_CompanionReactedToFactionMemberDeath(_Var5, _Var6);
PROC_ChangeApprovalRatingForAllAvatars(_Var5, _Var7);

PROC
PROC_ChangeApprovalRatingForAllAvatars((CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
ChangeApprovalRating(_Var1, _Var3, 0, _Var2, _)
THEN
DB_NOOP(1);

QRY
QRY_CompanionCanReactToFactionMemberBeingKilled((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, 0, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
DB_NOOP(1);

QRY
QRY_CompanionCanReactToFactionMemberBeingKilled((CHARACTER)_Var1, (FACTION)_Var2, 1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_CompanionReactedToFactionMemberDeath(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_CompanionNeedToReactToFactionMemberDeath((FACTION)_Var1, (FACTION)_Var2, 0, (FACTION)_Var1, (FACTION)_Var1)
AND
_Var1 == _Var2
THEN
DB_NOOP(1);

QRY
QRY_CompanionNeedToReactToFactionMemberDeath((FACTION)_Var1, (FACTION)_Var2, 1, (FACTION)_Var1, (FACTION)_Var1)
AND
QRY_CompanionNeedToReactToFactionMemberDeath_CheckWithChildren(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_CompanionNeedToReactToFactionMemberDeath_CheckWithChildren((FACTION)_Var1, (FACTION)_Var2, (FACTION)_Var1, (FACTION)_Var1, (FACTION)_Var1)
AND
_Var1 == _Var2
THEN
DB_NOOP(1);

QRY
QRY_CompanionNeedToReactToFactionMemberDeath_CheckWithChildren((FACTION)_Var1, (FACTION)_Var2, (FACTION)_Var1, (FACTION)_Var1, (FACTION)_Var1)
AND
_Var1 != _Var2
AND
FactionGetParentFaction(_Var2, 1, _Var3, _Var1, _Var1)
AND
QRY_CompanionNeedToReactToFactionMemberDeath_CheckWithChildren(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_BlockWaitInCampOption(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InDangerZone(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_BlockWaitInCampOption(_Var1);

IF
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_BlockWaitInCampOption(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyDialogSuppressed(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_BlockWaitInCampOption(_Var1);

IF
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_BlockWaitInCampOption(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_FastTravelBlock_BlockedZone_StatusSet(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_BlockWaitInCampOption(_Var1);

IF
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_BlockWaitInCampOption(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_FastTravelBlock_Arrested_StatusSet(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_BlockWaitInCampOption(_Var1);

IF
DB_BlockWaitInCampOption(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_InDangerZone(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_PartyDialogSuppressed(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_FastTravelBlock_BlockedZone_StatusSet(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_FastTravelBlock_Arrested_StatusSet(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_BlockWaitInCampOption(_Var1);

IF
DB_BlockWaitInCampOption(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(GLO_Origin_BlockWaitInCampOption_a2cd0f8e-67c2-4294-8f5d-2d30f1acde38, _Var1);
DB_Origin_BlockWaitInCampOptionFlagSet(_Var1);

IF
DB_Origin_BlockWaitInCampOptionFlagSet(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_BlockWaitInCampOption(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_Origin_BlockWaitInCampOptionFlagSet(_Var1);
ClearFlag(GLO_Origin_BlockWaitInCampOption_a2cd0f8e-67c2-4294-8f5d-2d30f1acde38, _Var1);

IF
FlagSet((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Origins_NestedFlags(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_Origins_NestedFlagSet(_Var1, _Var2);

IF
FlagCleared((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Origins_NestedFlagSet(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_Origins_NestedFlagSet(_Var1, _Var2);

IF
DB_Origins_NestedFlagSet(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_DialogSpeakers(_, _Var2, _, _Var1, _Var1)
THEN
ClearFlag(_Var1, _Var2, 0, 0);
NOT DB_Origins_NestedFlagSet(_Var1, _Var2);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "__Shared_Campaign"
