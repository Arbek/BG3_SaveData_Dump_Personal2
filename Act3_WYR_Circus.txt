Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_Dialogs(S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa, WYR_Circus_EntranceCivilian_ca74ba62-4ae0-da8b-2451-1ad96515f28e);
DB_Dialogs(S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178, WYR_Circus_EntranceGuard_58759362-6e26-364d-4d4b-b9741f3ae49c);
DB_Dialogs(S_WYR_Circus_EntranceChildParent_77e57716-91e9-4812-91e9-f20971924672, WYR_Circus_EntranceChildParent_edb01cbe-d5b9-da04-15d6-1186b43f27f1);
DB_Dialogs(S_WYR_Circus_EntranceChild_aec9e513-d471-4bd9-9891-4dff9890a265, WYR_Circus_EntranceChild_d15a60af-f721-03ac-3b8c-71c9dd4b754c);
DB_Dialogs(S_WYR_Circus_GhoulSniffer_cda5ce1f-c0d1-4e15-b1c5-0d785fa935bf, WYR_Circus_GhoulSniffer_0e6aca41-e393-8ecb-8968-fe471cfc1964);
DB_WYR_Circus_EntranceSceneCharacter(S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178);
DB_WYR_Circus_EntranceSceneCharacter(S_WYR_Circus_GhoulSniffer_cda5ce1f-c0d1-4e15-b1c5-0d785fa935bf);
DB_WYR_Circus_EntranceSceneCharacter(S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa);
DB_DoNotFaceDialog(S_WYR_Circus_EntranceChild_aec9e513-d471-4bd9-9891-4dff9890a265, WYR_Circus_AD_EntranceChildAndParent_dea98b08-8139-d531-28dd-8bd3054e8372);
DB_DoNotFaceDialog(S_WYR_Circus_EntranceChildParent_77e57716-91e9-4812-91e9-f20971924672, WYR_Circus_AD_EntranceChildAndParent_dea98b08-8139-d531-28dd-8bd3054e8372);
DB_GlobalFlagReactionAfterDialog(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, WYR_Circus_Checkpoint_5117a414-8890-f4db-a844-8bf632d62086);
DB_DialogMoneyTransfer(1, WYR_Circus_Checkpoint_5117a414-8890-f4db-a844-8bf632d62086, 200, 4);
DB_WYR_Circus_SplattersLevels(0);
DB_WYR_Circus_SplattersLevels(0);
DB_WYR_Circus_SplattersLevels(0);
DB_WYR_Circus_SplattersLevels(0);
DB_Dialogs(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, WYR_Circus_Clown_1e8e8b23-51b3-8399-9dd7-ab269ae938ba);
DB_Dialogs(S_WYR_Circus_Thug_01_e11b95c9-0e4a-4777-b935-1ebaa5166a45, WYR_Circus_Thug_01_7e75237c-7223-5a67-dc17-d457ba9cd620);
DB_Dialogs(S_WYR_Circus_Thug_02_bc256194-1856-452b-a14e-f1c3f3b8c933, WYR_Circus_Thug_02_e525b7bd-185e-8e8a-969d-517870c8e6ce);
DB_AD_Dialog(S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, GEB_AD_Noticed_AnimalAttackedAnimal_11687f74-c7c2-eb34-4155-7a18109460a0);
DB_GLO_CharacterCorpseDialog(S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, WYR_Circus_Clown_Dead_34c89578-4954-f689-5a45-e111488dd946);
DB_FlagReactionAfterDialog(WYR_Circus_Event_StabPlayer_85cec1bd-2d3f-4b68-4ecf-6bb6da53e611, WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767);
DB_FlagReactionAfterDialog(WYR_Circus_Event_StabPlayer_85cec1bd-2d3f-4b68-4ecf-6bb6da53e611, WYR_Circus_Clown_PreShow_Companions_d901ebe4-cd17-36f4-b21b-c0654eb4d99a);
DB_WYR_Circus_Absolutists(S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336);
DB_WYR_Circus_Absolutists(S_WYR_Circus_Thug_02_bc256194-1856-452b-a14e-f1c3f3b8c933);
DB_WYR_Circus_Absolutists(S_WYR_Circus_Thug_01_e11b95c9-0e4a-4777-b935-1ebaa5166a45);
DB_WYR_Circus_Absolutists(S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3);
DB_DefeatedEvent(S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, WYR_Circus_Clown_State_Defeated_11c7036f-a818-eff0-b405-53fe0d58bbce);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, 0, 0, 0);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, 0, 0, 0);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_CuriousFan_48b86ab3-bf79-4466-b44d-1342ee76d57f, 1, 0, 1);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_Patron_01_44697396-1131-4351-8d1b-205a9823d2e7, 1, 1, 1);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_Patron_02_029bda74-5e5a-421e-8e38-9e691b7ccd01, 1, 1, 1);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_Patron_04_c9455f09-b761-4a77-9c98-5c18395085f8, 1, 1, 1);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_Patron_05_0848dbe3-0edc-4603-a07f-b61257054c0b, 1, 1, 1);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_Patron_03_37934c16-3809-4f22-8584-892f5c474fcb, 1, 1, 1);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_FanClubKid_01_554160c9-77fb-4d6e-b108-86c07dd3de56, 1, 1, 1);
DB_WYR_Circus_PartOfShowScene(S_WYR_Circus_FanClubKid_02_6afc0210-436a-4ec0-99b1-f95140b3557d, 1, 0, 0);
PROC_WYR_Circus_InitShowScene();
TeleportTo(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, S_WYR_Circus_Clown_PreShowPos_604e0de9-f034-4f98-aedf-3822dc777e8d, "", 0, 0, 0, 0, 0);
TeleportTo(S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, S_WYR_Circus_Beast_03_PreShowPos_83fe59dc-4f29-4583-8e36-03c26e751cef, "", 0, 0, 0, 0, 0);
DB_WYR_Circus_Workers(S_WYR_Circus_FacePainter_1138b56d-1cd2-4c7b-9147-ea77709a85bd);
DB_WYR_Circus_Workers(S_WYR_Circus_GhoulSniffer_cda5ce1f-c0d1-4e15-b1c5-0d785fa935bf);
DB_WYR_Circus_Workers(S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7);
DB_WYR_Circus_Workers(S_WYR_Circus_SculptorAssistant_08d3b7be-bc23-4a7a-a6b5-9457bae054cd);
DB_WYR_Circus_Workers(S_WYR_Circus_RedcapClenaer_001_f76cc3eb-dacc-4a85-9b0f-d119d3292c74);
DB_WYR_Circus_Workers(S_WYR_Circus_Bard_8242793c-1504-4128-a7af-b3f58425235e);
DB_WYR_Circus_Workers(S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f);
DB_WYR_Circus_Workers(S_WYR_Circus_Sculptor_f9c9d3a2-8dba-4af0-b3c0-5f3b46b10b6e);
DB_WYR_Circus_Workers(S_WYR_Circus_LoveDryad_a8bce35d-17ee-46e3-8d56-1d0d29c4a01e);
DB_WYR_Circus_Workers(S_WYR_Circus_Merchant_60e4431d-dee5-4af4-a05e-65896ec64f2f);
DB_WYR_Circus_Workers(S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178);
DB_WYR_Circus_Workers(S_WYR_Circus_Skeleton_001_9405f985-72c0-475d-9f06-b8d365206eaf);
DB_WYR_Circus_Workers(S_WYR_Circus_Skeleton_002_7c802a00-afb5-49ad-bd1d-c7c2c027aad7);
DB_WYR_Circus_Workers(S_WYR_Circus_Skeleton_003_f17f0c79-f475-4352-afe2-2eef4a911bce);
DB_WYR_Circus_Workers(S_WYR_Circus_CrawlingClaw_002_ce15737b-ff82-4df0-8202-81389be58b64);
DB_WYR_Circus_Workers(S_WYR_Circus_CrawlingClaw_001_b758a1e0-1b08-4052-86ec-969fa09cc56b);
DB_WYR_Circus_Workers(S_WYR_Circus_RedcapClenaer_002_dcd59458-b259-48c0-bc79-9c23fb2fe730);
DB_WYR_Circus_Workers(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e);
DB_WYR_Circus_Workers(S_WYR_Circus_DressingRoomWorker_1985a13e-b870-4618-8c19-09f79667c598);
DB_WYR_Circus_Workers(S_WYR_Circus_CarnivalWorker_01_60e4431d-dee5-4af4-a05e-65896ec64f2f);
DB_WYR_Circus_Workers(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4);
DB_WYR_Circus_Workers(S_WYR_Circus_Bouncer_01_08106e46-8ac2-49c4-adb3-dcc2aa585aa7);
DB_WYR_Circus_Workers(S_WYR_Circus_CarnivalWorker_02_21aa8a76-40ac-4d3a-881f-d6871487df6f);
DB_WYR_Circus_Workers(S_WYR_Circus_BackupBard_01_acac9e7e-c7f1-47dc-b87e-247005a641d9);
DB_WYR_Circus_Workers(S_WYR_Circus_BackupBard_02_c6761d3e-62f4-4a43-a593-771b670b583d);
DB_WYR_Circus_Workers(S_WYR_Circus_BackupPerformer_01_df3fcab6-63af-43c7-a1a5-2f3267d3e9c9);
DB_WYR_Circus_Workers(S_WYR_Circus_BackupPerformer_02_892f9260-502e-4987-8438-1e4714c6586c);
DB_Dialogs(S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7, WYR_Circus_Bouncer_f6c8ff54-4a0f-5c94-362d-336a17cc01a7);
DB_Dialogs(S_WYR_Circus_Bard_8242793c-1504-4128-a7af-b3f58425235e, WYR_Circus_Bard_f262aef7-16c3-547e-a463-cf494c958324);
DB_Dialogs(S_WYR_Circus_ScaredChild_79a1cc38-1a2d-46b7-8eef-96b16325c9a7, WYR_Circus_ScaredChild_74041821-e069-048d-b2e5-a7f2e51b0ada);
DB_Dialogs(S_WYR_Circus_ScaredChildMother_06429901-adb0-4c3c-968b-9dcca0c0cf3c, WYR_Circus_ScaredChildMother_8015dcc9-3038-81d4-65ef-cb034a4b9701);
DB_Dialogs(S_WYR_Circus_RedcapClenaer_001_f76cc3eb-dacc-4a85-9b0f-d119d3292c74, WYR_Circus_RedcapClenaer_001_f540db8c-b00e-7267-5d8e-1fb20c3c38ec);
DB_Dialogs(S_WYR_Circus_RedcapClenaer_002_dcd59458-b259-48c0-bc79-9c23fb2fe730, WYR_Circus_RedcapClenaer_002_93c11aa0-6ea2-5c93-7cd0-95cc22c42979);
DB_Dialogs(S_WYR_Circus_Skeleton_001_9405f985-72c0-475d-9f06-b8d365206eaf, WYR_Circus_DancingSkeletons_f7f37b86-e466-fb87-bd4a-ffba3aa6c94a);
DB_Dialogs(S_WYR_Circus_Skeleton_002_7c802a00-afb5-49ad-bd1d-c7c2c027aad7, WYR_Circus_DancingSkeletons_f7f37b86-e466-fb87-bd4a-ffba3aa6c94a);
DB_Dialogs(S_WYR_Circus_Skeleton_003_f17f0c79-f475-4352-afe2-2eef4a911bce, WYR_Circus_DancingSkeletons_f7f37b86-e466-fb87-bd4a-ffba3aa6c94a);
DB_Dialogs(S_WYR_Circus_BackupBard_01_acac9e7e-c7f1-47dc-b87e-247005a641d9, WYR_Circus_BackupBard_01_6182a7bf-c0b1-1b86-cdf0-7f73e28efa6c);
DB_Dialogs(S_WYR_Circus_BackupPerformer_02_892f9260-502e-4987-8438-1e4714c6586c, WYR_Circus_BackupPerformer_02_04bd20e2-8840-cb9e-c760-2bb45e86e484);
DB_Dialogs(S_WYR_Circus_BackupPerformer_01_df3fcab6-63af-43c7-a1a5-2f3267d3e9c9, WYR_Circus_BackupPerformer_01_d1a7e129-3f50-ee89-ccff-2278aa30407a);
DB_Dialogs(S_WYR_Circus_BackupBard_02_c6761d3e-62f4-4a43-a593-771b670b583d, GEB_AD_CantTalkNow_ae991ba1-8a2e-9cc7-b4c2-379af7f058c5);
DB_PermaDefeatedEvent(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, WYR_Circus_Ringmaster_State_PermaDefeated_2a46bf3d-77e2-4f9e-9dbe-a9a635656b97);
PROC_CharacterDisableCrime(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, "DangerousMonsterReactionFallback");
PROC_CharacterDisableCrime(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, "DangerousMonsterReaction");
PROC_CharacterDisableCrime(S_WYR_Circus_Thug_01_e11b95c9-0e4a-4777-b935-1ebaa5166a45, "DangerousMonsterReaction");
PROC_CharacterDisableCrime(S_WYR_Circus_Thug_01_e11b95c9-0e4a-4777-b935-1ebaa5166a45, "DangerousMonsterReactionFallback");
PROC_CharacterDisableCrime(S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f, "DangerousMonsterReactionFallback");
PROC_CharacterDisableCrime(S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f, "DangerousMonsterReaction");
PROC_CharacterDisableCrime(S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f, "EmptyPocketNoticedInvestigation");
PROC_CharacterDisableCrime(S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f, "EmptyPocketNoticed");
DB_DefeatedEvent(S_WYR_Circus_Bard_8242793c-1504-4128-a7af-b3f58425235e, WYR_Circus_Bard_State_Defeated_506f13c8-5688-4537-8374-6bf01da08034);
DB_Dialogs(S_WYR_Circus_Beast_01_4d909cad-9b9b-4f34-ba27-6584bc8b4e20, WYR_Circus_Beast_01_b0dac659-e2e9-bcc2-eb36-fe3893bf1efd);
DB_Dialogs(S_WYR_Circus_Beast_02_cfaec473-d13a-42e8-a771-aa0e8f6a04da, WYR_Circus_Beast_02_ac234dc1-3988-dc16-e043-9e046cac4a67);
DB_WYR_Circus_BeastCages(S_WYR_Circus_CageDoor_01_ebd4f99e-6d72-4eca-8efe-30905f83bb9e, S_WYR_Circus_Beast_01_4d909cad-9b9b-4f34-ba27-6584bc8b4e20, S_WYR_Circus_Beast_01_CageArea_c736e991-bbe0-4bc7-a0b9-5fe47c8296e0);
DB_WYR_Circus_BeastCages(S_WYR_Circus_CageDoor_02_75520e8a-2e8f-4df3-a59e-3b21983f4c07, S_WYR_Circus_Beast_02_cfaec473-d13a-42e8-a771-aa0e8f6a04da, S_WYR_Circus_Beast_02_CageArea_0baa35ed-e5bf-40cd-ac80-075079dfae9a);
DB_WYR_Circus_BeastReleasedFlags(S_WYR_Circus_Beast_01_4d909cad-9b9b-4f34-ba27-6584bc8b4e20, WYR_Circus_Beast_01_State_ReleasedByPlayer_4ac1efa9-f863-4fa2-bf1b-11f5394c9d8f);
DB_WYR_Circus_BeastReleasedFlags(S_WYR_Circus_Beast_02_cfaec473-d13a-42e8-a771-aa0e8f6a04da, WYR_Circus_Beast_02_State_ReleasedByPlayer_2f7e8457-f7d4-4bf4-bd9b-8a48c6725868);
DB_WYR_Circus_BeastCalmedFlags(S_WYR_Circus_Beast_02_cfaec473-d13a-42e8-a771-aa0e8f6a04da, WYR_Circus_Beast_02_State_CalmedDown_817e9a5f-66dc-9b36-b7c6-3f3366423a61, "Pacified");
DB_WYR_Circus_BeastCalmedFlags(S_WYR_Circus_Beast_01_4d909cad-9b9b-4f34-ba27-6584bc8b4e20, WYR_Circus_Beast_01_State_CageBlocked_a0fbd326-9087-9a8e-20a7-34b804d60ba5, "Blocked");
DB_TaggedItemTracker("MEAT_fae436d4-da32-42a6-a2b2-9635da0b82eb", WYR_Circus_State_HasMeat_1815590b-a1ae-4405-b11b-d70d95ee7ff7);
Open(S_WYR_Circus_CageDoor_04_d7f4ad47-85d9-442b-bd97-1f020e63a413);
SetTag(S_WYR_Circus_Thug_01_e11b95c9-0e4a-4777-b935-1ebaa5166a45, ACT3_WYR_CIRCUS_CAGEOPENER_f3acc92a-eb22-4076-940b-e52988d0dbdf);
SetTag(S_WYR_Circus_Thug_02_bc256194-1856-452b-a14e-f1c3f3b8c933, ACT3_WYR_CIRCUS_CAGEOPENER_f3acc92a-eb22-4076-940b-e52988d0dbdf);
DB_Dialogs(S_WYR_Circus_CuriousFan_48b86ab3-bf79-4466-b44d-1342ee76d57f, WYR_Circus_CuriousFan_b3b99267-e7b7-2840-88fd-e6467bd2bb56);
DB_Dialogs(S_WYR_Circus_Patron_01_44697396-1131-4351-8d1b-205a9823d2e7, WYR_Circus_Patron_01_718c1f70-7db6-b576-95e9-c6caf11cad3e);
DB_Dialogs(S_WYR_Circus_Patron_02_029bda74-5e5a-421e-8e38-9e691b7ccd01, WYR_Circus_Patron_02_2a22ccea-c11f-e470-327a-50baf670d89a);
DB_Dialogs(S_WYR_Circus_Patron_04_c9455f09-b761-4a77-9c98-5c18395085f8, WYR_Circus_Patron_04_b8b96337-043f-3945-c6ca-500e8029b706);
DB_Dialogs(S_WYR_Circus_Patron_05_0848dbe3-0edc-4603-a07f-b61257054c0b, WYR_Circus_Patron_05_58156804-f2a1-a159-4e08-0a96cc0a4571);
DB_Dialogs(S_WYR_Circus_Patron_03_37934c16-3809-4f22-8584-892f5c474fcb, WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767);
DB_Dialogs(S_WYR_Circus_FanClubKid_01_554160c9-77fb-4d6e-b108-86c07dd3de56, WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767);
DB_Dialogs(S_WYR_Circus_FanClubKid_02_6afc0210-436a-4ec0-99b1-f95140b3557d, WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767);
DB_DoNotFace(S_WYR_Circus_CuriousFan_48b86ab3-bf79-4466-b44d-1342ee76d57f);
DB_DoNotFaceDialog(S_WYR_Circus_ScaredChild_79a1cc38-1a2d-46b7-8eef-96b16325c9a7, WYR_Circus_AD_ScaredChildAndMother_6d8e414e-74c0-ed47-aa20-8325c52c1da7);
DB_DoNotFaceDialog(S_WYR_Circus_ScaredChildMother_06429901-adb0-4c3c-968b-9dcca0c0cf3c, WYR_Circus_AD_ScaredChildAndMother_6d8e414e-74c0-ed47-aa20-8325c52c1da7);
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_Patron_03_37934c16-3809-4f22-8584-892f5c474fcb, "Run", "Disappear");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_FanClubKid_01_554160c9-77fb-4d6e-b108-86c07dd3de56, "Run", "Disappear");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_FanClubKid_02_6afc0210-436a-4ec0-99b1-f95140b3557d, "Run", "Disappear");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_ScaredChild_79a1cc38-1a2d-46b7-8eef-96b16325c9a7, "Flee", "Disappear");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_ScaredChildMother_06429901-adb0-4c3c-968b-9dcca0c0cf3c, "Flee", "Disappear");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_Patron_01_44697396-1131-4351-8d1b-205a9823d2e7, "Stay", "Kill");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_Patron_02_029bda74-5e5a-421e-8e38-9e691b7ccd01, "Stay", "Kill");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_Patron_04_c9455f09-b761-4a77-9c98-5c18395085f8, "Stay", "Kill");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_Patron_05_0848dbe3-0edc-4603-a07f-b61257054c0b, "Stay", "Kill");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_CuriousFan_48b86ab3-bf79-4466-b44d-1342ee76d57f, "Stay", "Kill");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_EntranceChild_aec9e513-d471-4bd9-9891-4dff9890a265, "Stay", "Disappear");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_EntranceChildParent_77e57716-91e9-4812-91e9-f20971924672, "Stay", "Disappear");
DB_WYR_Circus_ShowPatrons(S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa, "Stay", "Disappear");
DB_Children(S_WYR_Circus_EntranceChild_aec9e513-d471-4bd9-9891-4dff9890a265);
DB_Children(S_WYR_Circus_ScaredChild_79a1cc38-1a2d-46b7-8eef-96b16325c9a7);
DB_Children(S_WYR_Circus_FanClubKid_02_6afc0210-436a-4ec0-99b1-f95140b3557d);
DB_Children(S_WYR_Circus_FanClubKid_01_554160c9-77fb-4d6e-b108-86c07dd3de56);
DB_WYR_Circus_ShowPatrons_DisappearGroup("WYR_Circus_ScaredFamily_SceneDialogOnly", S_WYR_Circus_ScaredChildMother_06429901-adb0-4c3c-968b-9dcca0c0cf3c, S_WYR_Circus_ScaredFamily_SceneArea_78f590b8-2da2-424d-953e-13965cb3ff88, S_WYR_Circus_Beasts_DisappearPos_e90b2bbf-8fc8-4b23-bc10-f348cde23b3f);
DB_WYR_Circus_ShowPatrons_DisappearGroup("WYR_Circus_ScaredFamily_SceneDialogOnly", S_WYR_Circus_ScaredChild_79a1cc38-1a2d-46b7-8eef-96b16325c9a7, S_WYR_Circus_ScaredFamily_SceneArea_78f590b8-2da2-424d-953e-13965cb3ff88, S_WYR_Circus_Beasts_DisappearPos_e90b2bbf-8fc8-4b23-bc10-f348cde23b3f);
DB_WYR_Circus_ShowPatrons_DisappearGroup("WYR_Circus_EntranceFamily_SceneDialogOnly", S_WYR_Circus_EntranceChildParent_77e57716-91e9-4812-91e9-f20971924672, S_WYR_Circus_EntranceFamily_SceneArea_c30452b2-e92c-4244-9d86-5bdfb4218f27, S_WYR_Circus_PatronsOutsideLeavePos_c85479f5-c2d3-435c-a169-031cb6789967);
DB_WYR_Circus_ShowPatrons_DisappearGroup("WYR_Circus_EntranceFamily_SceneDialogOnly", S_WYR_Circus_EntranceChild_aec9e513-d471-4bd9-9891-4dff9890a265, S_WYR_Circus_EntranceFamily_SceneArea_c30452b2-e92c-4244-9d86-5bdfb4218f27, S_WYR_Circus_PatronsOutsideLeavePos_c85479f5-c2d3-435c-a169-031cb6789967);
DB_WYR_Circus_ShowPatrons_FleePos(S_WYR_Circus_ScaredChild_79a1cc38-1a2d-46b7-8eef-96b16325c9a7, S_WYR_Circus_ScaredChild_PostCombatPos_6f6b05ee-bebb-4b75-87d8-a0c6ea57d2c4);
DB_WYR_Circus_ShowPatrons_FleePos(S_WYR_Circus_ScaredChildMother_06429901-adb0-4c3c-968b-9dcca0c0cf3c, S_WYR_Circus_ScaredChildMother_PostCombatPos_c0487687-aa9c-419b-82a1-1484bf25dcc0);
DB_WYR_Circus_ShowPatrons_Flee_SubstituteDisappearGroup("WYR_Circus_ScaredFamily_SceneDialogOnly_PostCombat", S_WYR_Circus_ScaredChildMother_06429901-adb0-4c3c-968b-9dcca0c0cf3c, S_WYR_Circus_ScaredFamily_SceneArea_PostCombat_cf5122fc-212a-4f26-b508-2d6f6f2184e5, S_WYR_Circus_PatronsOutsideLeavePos_c85479f5-c2d3-435c-a169-031cb6789967);
DB_WYR_Circus_ShowPatrons_Flee_SubstituteDisappearGroup("WYR_Circus_ScaredFamily_SceneDialogOnly_PostCombat", S_WYR_Circus_ScaredChild_79a1cc38-1a2d-46b7-8eef-96b16325c9a7, S_WYR_Circus_ScaredFamily_SceneArea_PostCombat_cf5122fc-212a-4f26-b508-2d6f6f2184e5, S_WYR_Circus_PatronsOutsideLeavePos_c85479f5-c2d3-435c-a169-031cb6789967);
DB_WYR_Circus_ShowPatrons_CombatBark(S_WYR_Circus_Patron_01_44697396-1131-4351-8d1b-205a9823d2e7, WYR_Circus_AD_Patron_01_Help_c445a580-5278-e20a-d71b-ecbda848b184);
DB_WYR_Circus_ShowPatrons_CombatBark(S_WYR_Circus_Patron_02_029bda74-5e5a-421e-8e38-9e691b7ccd01, WYR_Circus_AD_Patron_02_Help_803135ac-b208-8313-a889-042891687923);
DB_WYR_Circus_ShowPatrons_CombatBark(S_WYR_Circus_Patron_04_c9455f09-b761-4a77-9c98-5c18395085f8, WYR_Circus_AD_Patron_04_Help_67952b2a-51a2-3a2c-84a0-3a657c1e61c8);
DB_WYR_Circus_ShowPatrons_CombatBark(S_WYR_Circus_Patron_05_0848dbe3-0edc-4603-a07f-b61257054c0b, WYR_Circus_AD_Patron_05_Help_49e5a94c-6d7b-c8ee-871c-5e64ef22b476);
DB_Dialogs(S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f, S_WYR_Circus_FortuneWheel_9ca7562b-8b85-4a56-8cd6-44ed6244ea1d, WYR_Circus_FortuneWheelWorker_20e8bc32-6107-ba59-793b-6ca9722de343);
DB_Dialogs(S_WYR_Circus_LoveDryad_a8bce35d-17ee-46e3-8d56-1d0d29c4a01e, WYR_Circus_LoveDryad_d0c00951-4d09-d1a6-2ab3-6c6ba1932a25);
DB_Dialogs(S_WYR_Circus_FaireFoodSeller_60e4431d-dee5-4af4-a05e-65896ec64f2f, WYR_Circus_FaireFoodSeller_808018b3-ccb7-6a1b-e561-f75a1db21839);
DB_Dialogs(S_WYR_Circus_FacePainter_1138b56d-1cd2-4c7b-9147-ea77709a85bd, WYR_Circus_FacePainter_95a816ad-ad84-1140-6c25-b4b28266bf28);
DB_Dialogs(S_WYR_Circus_Sculptor_f9c9d3a2-8dba-4af0-b3c0-5f3b46b10b6e, WYR_Circus_Sculptor_406bad8c-2b0c-bf7f-d734-0b4b6ec42524);
DB_Dialogs(S_WYR_Circus_SculptorAssistant_08d3b7be-bc23-4a7a-a6b5-9457bae054cd, WYR_Circus_SculptorAssistant_5e613db1-4eed-9f13-4489-a060c0a179d7);
DB_DialogMoneyTransfer(1, WYR_Circus_FortuneWheelWorker_20e8bc32-6107-ba59-793b-6ca9722de343, 500, 3);
DB_DialogMoneyTransfer(1, WYR_Circus_LoveDryad_d0c00951-4d09-d1a6-2ab3-6c6ba1932a25, 100, 2);
DB_DialogMoneyTransfer(1, WYR_Circus_FacePainter_95a816ad-ad84-1140-6c25-b4b28266bf28, 100, 2);
DB_DialogMoneyTransfer(1, WYR_Circus_Sculptor_406bad8c-2b0c-bf7f-d734-0b4b6ec42524, 5000, 2);
DB_ItemOwnerShipTriggers("BGO_Main_A", S_WYR_Circus_FacePaintOwnership_b3d2a22a-8c6c-4bc8-be5c-ab650f559a93, S_WYR_Circus_FacePainter_1138b56d-1cd2-4c7b-9147-ea77709a85bd);
DB_ItemShopTrigger(S_WYR_Circus_FacePaintOwnership_b3d2a22a-8c6c-4bc8-be5c-ab650f559a93, S_WYR_Circus_FacePainter_1138b56d-1cd2-4c7b-9147-ea77709a85bd);
DB_BoughtFromMerchantInDialogFlag(S_WYR_Circus_Merchant_60e4431d-dee5-4af4-a05e-65896ec64f2f, WYR_Circus_Merchant_808018b3-ccb7-6a1b-e561-f75a1db21839, WYR_Circus_Merchant_Event_Bought_e6543464-cdb0-6d25-5f55-bc41243c388b);
DB_ItemOwnerShipTriggers("BGO_Main_A", S_WYR_Circus_MerchantOwnership_0f9331d4-45a3-419c-9761-da38a416940d, S_WYR_Circus_Merchant_60e4431d-dee5-4af4-a05e-65896ec64f2f);
DB_ItemShopTrigger(S_WYR_Circus_MerchantOwnership_0f9331d4-45a3-419c-9761-da38a416940d, S_WYR_Circus_Merchant_60e4431d-dee5-4af4-a05e-65896ec64f2f);
DB_WYR_Circus_LoveGame_MistakeFlags(1, WYR_Circus_State_LoveQuestion1Wrong_72f36f55-9126-f618-a246-855417b64f6b);
DB_WYR_Circus_LoveGame_MistakeFlags(2, WYR_Circus_State_LoveQuestion2Wrong_1499ad08-31b2-48fb-e8d3-06911eb221e6);
DB_WYR_Circus_LoveGame_MistakeFlags(3, WYR_Circus_State_LoveQuestion3Wrong_f62beb23-5577-5ed9-fb7e-a0e22acd4257);
DB_WYR_Circus_LoveGame_MistakesNow(0, NULL_00000000-0000-0000-0000-000000000000);
DB_ItemOwnerShipTriggers("BGO_Main_A", S_WYR_Circus_DryadOwnership_187d2545-9abc-4210-abdc-7afc2ada0374, S_WYR_Circus_LoveDryad_a8bce35d-17ee-46e3-8d56-1d0d29c4a01e);
DB_FlagReactionAfterDialog(WYR_Circus_Event_OrderedStatue_9bd9aa22-d90e-6928-91df-2591988ceb24, WYR_Circus_Sculptor_406bad8c-2b0c-bf7f-d734-0b4b6ec42524);
DB_BoughtFromMerchantInDialogFlag(S_WYR_Circus_Sculptor_f9c9d3a2-8dba-4af0-b3c0-5f3b46b10b6e, WYR_Circus_Sculptor_406bad8c-2b0c-bf7f-d734-0b4b6ec42524, WYR_Circus_Event_BoughtFromSculptor_7fa4bdd4-7d77-9b42-b2be-bf7daec0a3d4);
DB_ItemOwnerShipTriggers("BGO_Main_A", S_WYR_Circus_SculptorOwnership_9e5a4175-6468-4597-9440-8537cec42203, S_WYR_Circus_Sculptor_f9c9d3a2-8dba-4af0-b3c0-5f3b46b10b6e);
SetOnStage(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, 0);
RemoveTransforms(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309);
PROC_CharacterDisableAllCrimes(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, 1);
ApplyStatus(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, "INVULNERABLE", -1, 1, NULL_00000000-0000-0000-0000-000000000000);
SetAmbushing(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, 1);
DB_WYR_Circus_StateNames(REALLY_WYLL_5f40def5-d3ec-4698-a367-01a339888956, "WYR_Circus_StatueName_Wyll");
DB_WYR_Circus_StateNames(REALLY_ASTARION_ffd08582-7396-4cac-bcd4-8f9cd0fd8ef3, "WYR_Circus_StatueName_Astarion");
DB_WYR_Circus_StateNames(REALLY_GALE_9b0354c0-56d9-4723-8034-918ac9abab19, "WYR_Circus_StatueName_Gale");
DB_WYR_Circus_StateNames(REALLY_KARLACH_1a2f70d6-8ead-4eb5-a824-79ee1971764a, "WYR_Circus_StatueName_Karlach");
DB_WYR_Circus_StateNames(REALLY_LAEZEL_b5682d1d-c395-489c-9675-1f9b0c328ea5, "WYR_Circus_StatueName_Laezel");
DB_WYR_Circus_StateNames(REALLY_SHADOWHEART_642d2aee-e3df-47e3-9f47-bbcd441bb9e0, "WYR_Circus_StatueName_Shadowheart");
DB_WYR_Circus_StateNames(REALLY_MINSC_aeb694fc-83fb-452d-819a-b97ba442dc42, "WYR_Circus_StatueName_Minsc");
DB_WYR_Circus_StateNames(REALLY_MINTHARA_3e84e1cd-2193-4f9f-80b4-c2ededefaea6, "WYR_Circus_StatueName_Minthara");
DB_WYR_Circus_StateNames(REALLY_HALSIN_9b8709f9-8d2a-4b4e-a465-8505c561d7f5, "WYR_Circus_StatueName_Halsin");
DB_WYR_Circus_StateNames(REALLY_JAHEIRA_8457eb5f-036c-4143-b6cf-447a9f555c7a, "WYR_Circus_StatueName_Jaheira");
DB_WYR_Circus_Statue_CampPosTriggers("FARM", S_CAMP_FARM_CircusStatuePos_c8ec3351-8ceb-4033-b39c-1e4bacab45dd, S_CAMP_FARM_CircusStatuePedestal_9dbfcb9e-6325-4589-80fc-9cc9ddc07342);
DB_WYR_Circus_Statue_CampPosTriggers("ELFSONG", S_CAMP_ELFSONG_CircusStatuePos_7a01b784-e1a3-416b-8ca2-38cc64db0666, S_CAMP_ELFSONG_CircusStatuePedestal_f99160d4-ddea-4387-a646-1a54cc22aea9);
DB_WYR_Circus_Statue_CampPosTriggers("SLUMS", S_CAMP_SLUMS_CircusStatuePos_3e2e0118-dd2f-4e3b-8bcb-1bd7148554e5, S_CAMP_SLUMS_CircusStatuePedestal_f532430e-bd5d-40af-ba10-4ace86512d72);
PROC_GlobalSetFlagAndCache(WYR_Circus_State_WheelHasPrizes_dcea2493-c33f-7d42-d348-90530855995f);
DB_HasItemEvent(S_WYR_Circus_DjinniWheelRing_f5b64ba3-3ad2-461d-a4e6-993aed1a738d, WYR_Circus_State_HasWheelRing_6937318c-5702-148c-6033-47d8ccaa56b9);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_WetCloak_aca72f44-df0a-4ef3-8e52-d9228ca19938);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_MumblingStaff_29fa7809-200e-4d10-a7ba-4515e843fc3d);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_BagOfMolding_4e08dac7-f6b4-42ac-b4b1-e217387892d2);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_TeleportBoots_7ce1670a-3376-4486-a464-62528f7d2421);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_OldLamp_82c47d57-531a-4c08-b57c-9a41730df957);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_ReturningGem_6ac94c55-7d06-43e0-9afd-b0edc5c765b1);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_SharessFlyer_6edb20ee-62da-4c48-bc1a-a554f706f99b);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_Pitcher_91b5ac01-c112-45f8-a348-dfa856817bdb);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_Broom_ed6baec4-bcb8-47ff-a285-d81b36e37eb5);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_AgingMirror_ca2642b7-7991-4529-a2ab-71660223c2b1);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_WishNuts_36da0262-3542-4211-bd52-cd18c9eabeb7);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_HandaxeReturning_b99c44d7-7baa-474b-bad2-6e65dcbd7a12);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_ThiefGloves_5245dd19-89c4-4b2c-9d26-2a04188b2379);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_OneBoot_e673be4f-ab9d-4cd0-94a8-8fef833cef37);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_ArmorPlusOne_69402299-1401-42e9-8d3d-5f080644bcd7);
DB_WYR_Circus_WheelPrizes(S_WYR_Circus_WheelPrize_VecnasHand_2ee5181f-44a5-4c16-9729-a9d71cf6e7fe);
DB_WYR_Circus_FakePrizes(CONS_Potion_Speed_102616ad-d4b0-425c-ad03-495852265ac9);
DB_WYR_Circus_FakePrizes(LOOT_SCROLL_FireShield_Warm_f0a60e9f-f0b1-4061-b264-4fdec9dd982e);
DB_WYR_Circus_FakePrizes(LOOT_GEN_Goblet_Rich_Large_B_9bf7699d-47db-4837-a6af-1a4f9095559e);
DB_WYR_Circus_FakePrizes(LOOT_GEN_Chalice_A_Silver_A_9170ead6-710a-4017-b85e-4ba24095a823);
DB_WYR_Circus_FakePrizes(ARM_RingMail_7cc93f92-3bfd-49fb-ac89-25ced62c21ed);
DB_WYR_Circus_FakePrizes(ARM_Gloves_Metal_2ccfc38e-b0ef-4ba6-9bf1-e6d4980f57e6);
DB_WYR_Circus_FakePrizes(WPN_HUM_LightCrossbow_A_1_2be69c52-086f-42a2-bcca-d278b1695c25);
DB_WYR_Circus_FakePrizes(BOOK_GEN_Planes_Yeenoghu_3bb26f67-f3c2-4a97-ab6d-3dee97611798);
DB_WYR_Circus_FakePrizes(LOOT_SCROLL_Fly_5e979979-b51e-41cf-9fa5-1fd0690cf068);
DB_WYR_Circus_FakePrizes(ARM_Helmet_Metal_f428de60-df53-4e09-be6d-f2b2d4f6fd7a);
DB_WYR_Circus_FakePrizes(ARM_Boots_Chainmail_A_5add3c23-bc67-4ae6-9d9f-47014a5ed9a9);
DB_WYR_Circus_FakePrizes(LOOT_GEN_Goblet_Rich_Large_A_b21a3507-52b2-4917-8e52-e57e29f2f246);
DB_WYR_Circus_FakePrizes(LOOT_GEN_Amulet_Necklace_A_Gold_A_a6c6bec7-bd49-46c5-823f-a178015a0525);
DB_WYR_Circus_FakePrizes(CONS_Potion_Bottled_Breath_A_ed5efb91-e2ff-42a3-89d7-5dd7268e72e2);
DB_WYR_Circus_FakePrizes(LOOT_GEM_Sapphire_A_1f1ac74f-c400-4db7-be37-b2d588a23dda);
DB_WYR_Circus_FakePrizes(LOOT_GEN_Amulet_Necklace_F_Gold_A_744d53bd-c306-47aa-a798-3e1fdd159a76);
DB_WYR_Circus_FakePrizes(LOOT_GEN_Ring_I_Gold_A_c28d48e3-595c-4f9e-a6c1-98eae3e16b35);
DB_WYR_Circus_FakePrizes(WPN_HUM_Katana_A_9cb65f7b-daeb-4b48-a0ee-2e803d1743d4);
DB_WYR_Circus_FakePrizes(WPN_HUM_Javelin_A_1_763af70d-8b50-4401-9b9b-2ba0977aa90c);
DB_WYR_Circus_FakePrizes(WPN_HUM_Shield_A_1_09bbc3ca-202f-455f-9404-4c6d1262498b);
DB_QRY_RTN_WYR_Circus_WheelPrizeWon(NULL_00000000-0000-0000-0000-000000000000);
NOT DB_QRY_RTN_WYR_Circus_WheelPrizeWon(NULL_00000000-0000-0000-0000-000000000000);
DB_ItemOwnerShipTriggers("BGO_Main_A", S_WYR_Circus_FortuneWheelOwnership_df650389-a18e-4530-a9e5-99625f921bbd, S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f);
DB_CRIME_ShapeshiftDisturbance(WYR_CIRCUS_CHEESE_6c06f5e4-d4fa-498a-91b9-e1ed98773e92, "WYR_Circus_CheeseReaction", "", "Harmless");
DB_Dialogs(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, WYR_Circus_Ringmaster_fc57170e-3acf-541c-0879-ca7bf0303426);
DB_ItemOwnerShipTriggers("BGO_Main_A", S_WYR_Circus_RingmasterOwnership_f1335ba5-56b9-4e07-a825-10d73b48b286, S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4);
DB_WYR_Circus_RingmasterSkeletons(S_WYR_Circus_Skeleton_001_9405f985-72c0-475d-9f06-b8d365206eaf);
DB_WYR_Circus_RingmasterSkeletons(S_WYR_Circus_Skeleton_002_7c802a00-afb5-49ad-bd1d-c7c2c027aad7);
DB_WYR_Circus_RingmasterSkeletons(S_WYR_Circus_Skeleton_003_f17f0c79-f475-4352-afe2-2eef4a911bce);
PROC_SceneDialogOnly("WYR_Circus_RingmasterSkeletons_SceneDialogOnly", S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, S_WYR_Circus_Ringmaster_SkeletonsSceneArea_42bc0560-3eba-4fb2-802c-3abd044884ae);
DB_WYR_Circus_DisappearTarget(S_WYR_Circus_CageDoor_01_ebd4f99e-6d72-4eca-8efe-30905f83bb9e);
DB_WYR_Circus_DisappearTarget(S_WYR_Circus_CageDoor_02_75520e8a-2e8f-4df3-a59e-3b21983f4c07);
DB_WYR_Circus_DisappearTarget(S_WYR_Circus_DressingRoomBedroll_02_c7bc4045-3fdc-4089-b520-f626f8f6d3ae);
DB_WYR_Circus_DisappearTarget_CheckTaken(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, S_WYR_Circus_MerchantHandArea_70df12a0-bb26-4d9d-9f74-a2b492b1187f);
DB_WYR_Circus_DisappearTarget_CheckTaken(S_WYR_Circus_CheesomancyBook_1f9ddf43-b1f4-418a-8eb8-1d6e8bd34406, S_WYR_Circus_SUB_22d3f3ff-3cbb-4240-a3ab-051889832375);
DB_WYR_Circus_FlamingFists(S_WYR_Circus_FlamingFist_02_8ad04b31-7d78-4077-83a2-9490ebdd1831);
DB_WYR_Circus_FlamingFists(S_WYR_Circus_FlamingFist_01_4caa11fb-d04d-45fd-bc11-e825833498c6);
DB_Dialogs(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, WYR_Circus_DressingRoomSleeper_212375f0-7d44-feb8-ba41-cfeb14fc136b);
DB_Dialogs(S_WYR_Circus_DressingRoomWorker_1985a13e-b870-4618-8c19-09f79667c598, WYR_Circus_DressingRoomWorker_70dd52fa-3250-65fa-e9be-7ca70c9fab4b);
Use(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, S_WYR_Circus_DressingRoomBedroll_02_c7bc4045-3fdc-4089-b520-f626f8f6d3ae, 1, 1, "");
DB_FlagReactionAfterDialog(WYR_Circus_Event_WheelSendToJungle_c542b674-dde9-f9c3-b3e7-c3e17d3d5cca, WYR_Circus_FortuneWheelWorker_20e8bc32-6107-ba59-793b-6ca9722de343);
DB_DangerZone(S_WYR_Jungle_SUB_8bb03671-b130-4b2f-877b-bc7eb8cc4d49, "WYR_Jungle");
DB_TriggerEvents_AllPlayersLeft(S_WYR_Jungle_Alioramus_01_SkipIntroArea_d1887a22-bb9d-4041-86ab-5249fec34cf4, "WYR_Jungle_Alioramus_01_LeftIntroArea");
DB_TriggerEvents_AllPlayersLeft(S_WYR_Jungle_Alioramus_01_RoutineAArea_98ea94ec-3951-4318-a3b9-79cb74516540, "WYR_Jungle_Alioramus_01_LeftRoutineAArea");
DB_TriggerEvents_AllPlayersLeft(S_WYR_Jungle_Alioramus_04_SkipIntroArea_a0e1ca0c-c23b-416b-80e1-b66d96ef5de7, "WYR_Jungle_Alioramus_04_LeftIntroArea");
PROC_TriggerRegisterForPlayers(S_WYR_Jungle_Alioramus_StartFeedingIntroArea_af4c7263-125b-468c-8d43-1450990c9b7e);
DB_WYR_Jungle_Dinos(S_WYR_Jungle_Alioramus_01_b2bdcb69-3a93-4200-b64e-154f44723b71);
DB_WYR_Jungle_Dinos(S_WYR_Jungle_Alioramus_02_5b798267-0f14-4563-885c-f7afc6798b81);
DB_WYR_Jungle_Dinos(S_WYR_Jungle_Alioramus_03_3d73e2c7-4e52-443b-a016-2035b677c21a);
DB_WYR_Jungle_Dinos(S_WYR_Jungle_Alioramus_04_76f78311-aa65-4108-84b6-61f5f033ac0d);
DB_WYR_Jungle_Dinos(S_WYR_Jungle_Alioramus_05_c6df7a48-97c7-4138-9ec4-a1e2a9dbad87);
DB_WYR_Jungle_Dinos(S_WYR_Jungle_Alioramus_Female_60a49df8-b266-40b4-bc44-2ac1ec36a7cc);
DB_TrespassTrigger(S_WYR_Circus_CheckpointTrespassArea_f3f8880b-fad4-4c33-816f-d620a5f9a6bf, S_WYR_Circus_CheckpointTrespassOutPos_081f81cb-3362-4f5a-a6df-569122f4b29e, "WYR_Circus_CheckpointTrespassing", S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178);
DB_TrespassTrigger(S_WYR_Circus_BouncerTrespassArea_eeb030bd-c1ff-4562-bbc3-8fbe3ec1d3c6, S_WYR_Circus_BouncerTrespassOutPos_a4515583-c7d3-434a-97c3-839bc453faaa, "WYR_Circus_BouncerTrespassing", S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7);
DB_ItemOwnerShipTriggers("BGO_Main_A", S_WYR_Circus_Bouncer_Ownership_15c578fe-4ddb-43b4-a8b5-b7bc46dcb3a6, S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7);
DB_ItemOwnerShipTriggers("BGO_Main_A", S_WYR_Circus_Storage_Ownership_cc72fba0-965e-422d-a6f0-4d22c94384a1, S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7);
DB_TrespassTrigger(S_WYR_Circus_StageTrespassArea_fc55638f-6156-4d8d-ada2-7eebab6e3e9d, S_WYR_Circus_StageTrespassOutPos_0deb2e38-5f3b-4ac8-85b1-db48ab156f7e, "WYR_Circus_StageTrespassing");
DB_DialogMoneyTransfer(1, WYR_Circus_Merchant_808018b3-ccb7-6a1b-e561-f75a1db21839, 10000, 2);
DB_DialogMoneyTransfer(2, WYR_Circus_Merchant_808018b3-ccb7-6a1b-e561-f75a1db21839, 100, 2);
DB_WYR_Circus_ClownPieces(S_WYR_Circus_ClownHead_3f6d0022-b6ea-4867-8b17-e02994c779b6, WYR_Circus_State_ClownPiecesHasHead_49eae672-5a63-5b78-714d-06b665395b30, WYR_Circus_Event_ClownPiecesPickedHead_6f093bf5-5c08-d686-e7c3-2ede5a4f8a70, "GotHead");
DB_WYR_Circus_ClownPieces(S_WYR_Circus_ClownLeg_4cf94219-541b-4fd7-95b4-7e2a0dad47ab, WYR_Circus_State_ClownPiecesHasLeg_6504c481-4142-e163-96f1-da9b25f31f68, WYR_Circus_Event_ClownPiecesPickedLeg_78fdcfec-2180-4aab-b40d-24a1a15d953c, "GotLeg");
DB_WYR_Circus_ClownPieces(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, WYR_Circus_State_ClownPiecesHasHand_025d9d68-2786-9bb3-eeed-a89bf0f2ecc4, WYR_Circus_Event_ClownPiecesPickedHand_90794df8-03cc-c0bc-f9cb-2284586fe2c2, "GotHand");
DB_WYR_Circus_ClownPieces(S_WYR_Circus_ClownArm_6a4f25a0-c4af-4227-85b3-25635cae8f0d, WYR_Circus_State_ClownPiecesHasArm_aea3226c-3ef8-a571-566d-e8219ada3c12, WYR_Circus_Event_ClownPiecesPickedArm_e94f2ee8-c6c7-4507-bfdf-3c75ebb5c726, "GotArm");
DB_WYR_Circus_ClownPieces(S_WYR_Circus_ClownWaist_d5a69e93-7a9b-460d-b580-4e7cee01cfd3, WYR_Circus_State_ClownPiecesHasWaist_77dd69ac-f9b9-ae2c-a90f-ecf648e14a4c, WYR_Circus_Event_ClownPiecesPickedWaist_24259252-650a-49d3-85d3-ee3f7a915118, "GotWaist");
DB_WYR_Circus_ClownPieces(S_WYR_Circus_DribblesBodyPart_Torso_ffb44db4-4573-4ddd-89f9-24b790e0c838, WYR_Circus_State_ClownPiecesHasTorso_a64b9be2-cb32-3475-472a-5b86129a5aea, WYR_Circus_Event_ClownPiecesPickedTorso_38e87e3f-27ca-4639-aa5e-e4c07c53d349, "GotTorso");
DB_WYR_Circus_ClownPieces(S_WYR_Circus_ClownFoot_79b4649e-2c56-4494-b50f-6a6cf3642bb9, WYR_Circus_State_ClownPiecesHasFoot_334a73d7-9278-6717-d2a7-2e0cbbf04313, WYR_Circus_Event_ClownPiecesPickedFoot_830fed3e-2dcc-48aa-9fb7-45d360b4e8f6, "GotFoot");
DB_GLO_CompoundFlag(WYR_Circus_Knows_DoppelgangerKilledDribbles_a1c76c3e-b21e-7a81-c594-5a34a0f44473, WYR_Circus_Knows_ClownDead_b0651ffa-2c1d-41b9-b4e8-1af9677db7e0);
DB_GLO_CompoundFlag(WYR_Circus_State_ClownPiecesFoundAny_42d65dc1-e187-4484-8418-fec83083bff9, WYR_Circus_Knows_ClownDead_b0651ffa-2c1d-41b9-b4e8-1af9677db7e0);
DB_GLO_CompoundFlag(WYR_Circus_Knows_MerchantHasHand_ae4d6d60-9541-388b-7e32-4233567480f1, WYR_Circus_State_ClownPiecesFoundAny_42d65dc1-e187-4484-8418-fec83083bff9);
DB_QuestDef_State_ConditionalFlag(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87, "WYR_Clown", "GotQuest_KnowsDead", 1, WYR_Circus_Knows_ClownDead_b0651ffa-2c1d-41b9-b4e8-1af9677db7e0);
DB_QuestDef_State(WYR_Circus_Ringmaster_State_Rewarded_7a42ebcf-255e-853b-bad6-30cf36746c10, "WYR_Clown", "Rewarded");
DB_QuestDef_State(WYR_Circus_Knows_Disappeared_e664f3d2-8d76-4fb6-8761-6b145eede1ee, "WYR_Clown", "CircusGone");
DB_QuestDef_State(END_General_State_Started_a0fd5f91-e4b3-4d01-84d3-9ff484139e99, "WYR_Clown", "LeftToEND");
DB_QuestDef_State(WYR_Circus_State_ClownPiecesHasHand_025d9d68-2786-9bb3-eeed-a89bf0f2ecc4, "WYR_Clown", "FoundHand");
DB_QuestDef_State(WYR_Circus_Knows_MerchantHasHand_ae4d6d60-9541-388b-7e32-4233567480f1, "WYR_Clown", "FoundHand");
DB_QuestDef_State(WYR_Circus_State_ClownPiecesHasAll_73f56db8-afa1-4b5f-a7a6-611afddcf435, "WYR_Clown", "FoundAll");
DB_QuestDef_State(WYR_Circus_Event_ClownPiecesOneLeft_b058bb0e-e7f1-0c0f-8e69-7c7ace5cad4d, "WYR_Clown", "FoundAlmostAll");
DB_QuestDef_SawPermaDefeatedState("WYR_Clown", "RingmasterDefeated", S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4);
DB_WYR_Circus_HandCrimesFamilies("EmptyPocketNoticed");
DB_WYR_Circus_HandCrimesFamilies("Steal");
DB_WYR_Circus_HandCrimesFamilies("EmptyPocketNoticedInvestigation");
DB_CombatReact_AD_OnNextTurn(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, WYR_Circus_AD_Clown_Combat_01_88020a68-db6d-1aab-7faf-4e567139fdef);
DB_CombatReact_AD_OnNextTurn(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, WYR_Circus_AD_Clown_Combat_02_341540f7-0c76-b28f-dd29-957d1f91b4cd);
DB_CombatReact_AD_OnNextTurn(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, WYR_Circus_AD_Clown_Combat_03_a5624506-c952-8609-7c56-cb6de2febbce);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_TalkREAC_022_996e8f89-4a4d-4559-9501-ee10de52c1bf);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_023_1bc6ba92-0206-41cf-a86f-07af283d0e2d);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_025_9559476a-5995-4b32-b93d-af0340a2fca7);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_024_2841ccfe-44c3-41c0-9118-5c2a05369067);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_030_7278489e-7dc0-4f46-8ecb-f9225220102d);
DB_WYR_Circus_Crowd(CCT_BsG_RFG_TalkREAC_046_a1b6c18c-312f-4433-8d23-c50efab9529e);
DB_WYR_Circus_Crowd(CCT_BsG_RFG_Talk_045_84a1bcc9-c567-4783-91d3-1d75c05506de);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_026_8a676ccd-18e6-4b6c-aec5-2fdd235bc803);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_029_17a7deda-bbb2-45c2-9f17-f6bb0f0dd3e8);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_027_c9a1d882-702d-4c37-b4bf-f01ba7337035);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_028_89ea7d55-37f7-4f10-be34-414c22fb8a36);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_TalkREAC_021_01b454de-ce65-4adc-9a73-8711827e494a);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_022_ead8f733-ceda-4563-b4f3-e04b99cd17ea);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_TalkREAC_020_66210f96-cf55-4ae6-803e-2043005434b2);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_021_b674c360-d933-4621-bf76-15f7d3577bc3);
DB_WYR_Circus_Crowd(CCT_BsG_RFG_Talk_044_d57b97ae-9679-4354-935a-7e8fd067739b);
DB_WYR_Circus_Crowd(CCT_BsG_RFG_TalkREAC_045_22ac7c7c-8bf7-45af-a35f-d1bdde956f75);
DB_WYR_Circus_Crowd(CCT_BsG_CTZN_Talk_031_b2defc03-664b-49ad-ad86-1ba1c34cf0a9);

KBSECTION
IF
DB_WYR_Circus_EntranceSceneCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SceneDialogOnly("WYR_Circus_EntranceCheckpoint_Scene", _Var1, S_WYR_Circus_EntranceFamily_CheckpointSceneArea_a62463cd-7a1b-4bd3-9dfe-b61743f69c14);

IF
DB_SceneManager(_Var1, "WYR_Circus_EntranceCheckpoint_Scene", _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_EntranceSceneCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_SceneManager(_Var1, "WYR_Circus_EntranceCheckpoint_Scene");

IF
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_EntranceSceneCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_Circus_BlockEntranceScene(_Var1);

PROC
PROC_SceneInterrupted((CHARACTER)_Var1, _, "WYR_Circus_EntranceCheckpoint_Scene", "LeftTrigger", (CHARACTER)_Var1)
AND
DB_WYR_Circus_EntranceSceneCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_Circus_BlockEntranceScene(_Var1);

PROC
PROC_WYR_Circus_BlockEntranceScene((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_SceneManager(_Var1, "WYR_Circus_EntranceCheckpoint_Scene", _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SceneOver("WYR_Circus_EntranceCheckpoint_Scene");
PROC_GlobalSetFlagAndCache(WYR_Circus_Checkpoint_State_Blocked_8d2626bb-3119-cf9d-6ee7-e5c1d491fcdc);

IF
FlagSet(WYR_Circus_State_CheckpointSceneEnded_570c10d7-b7b9-9805-c78e-c03375a5f051, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_SceneOver("WYR_Circus_EntranceCheckpoint_Scene");

IF
FlagSet(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_SceneOver("WYR_Circus_EntranceCheckpoint_Scene");

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, S_WYR_Circus_EntranceGate_243c4eaa-d26b-4eda-8c04-b1f00c4d7492, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Checkpoint_State_Blocked_8d2626bb-3119-cf9d-6ee7-e5c1d491fcdc, _Var1, _Var1, _Var1, _Var1)
AND
CanSee(S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178, _Var1, 1, _Var1, _Var1)
AND
QRY_WYR_Circus_TryStartEntranceCheckpointDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, S_WYR_Circus_EntranceGate_243c4eaa-d26b-4eda-8c04-b1f00c4d7492, 0);

PROC
PROC_BlockLockpickItem((CHARACTER)_Var1, S_WYR_Circus_EntranceGate_243c4eaa-d26b-4eda-8c04-b1f00c4d7492, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Checkpoint_State_Blocked_8d2626bb-3119-cf9d-6ee7-e5c1d491fcdc, _Var1, _Var1, _Var1, _Var1)
AND
CanSee(S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178, _Var1, 1, _Var1, _Var1)
AND
QRY_WYR_Circus_TryStartEntranceCheckpointDialog(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CustomLockpickItemResponse(_Var1, S_WYR_Circus_EntranceGate_243c4eaa-d26b-4eda-8c04-b1f00c4d7492, 0);

QRY
QRY_SelectCustomDialog_AfterGenerics((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Checkpoint_State_Blocked_8d2626bb-3119-cf9d-6ee7-e5c1d491fcdc, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_EntranceSceneCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_WYR_Circus_TryStartEntranceCheckpointDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_WYR_Circus_TryStartEntranceCheckpointDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_State_CheckpointSceneEnded_570c10d7-b7b9-9805-c78e-c03375a5f051, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(WYR_Circus_Checkpoint_5117a414-8890-f4db-a844-8bf632d62086, S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178, S_WYR_Circus_GhoulSniffer_cda5ce1f-c0d1-4e15-b1c5-0d785fa935bf, S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_WYR_Circus_TryStartEntranceCheckpointDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(WYR_Circus_State_CheckpointSceneEnded_570c10d7-b7b9-9805-c78e-c03375a5f051, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(WYR_Circus_Checkpoint_5117a414-8890-f4db-a844-8bf632d62086, S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178, S_WYR_Circus_GhoulSniffer_cda5ce1f-c0d1-4e15-b1c5-0d785fa935bf, NULL_00000000-0000-0000-0000-000000000000, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_SelectCustomDialog_AfterGenerics(S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(WYR_Circus_Checkpoint_State_Blocked_8d2626bb-3119-cf9d-6ee7-e5c1d491fcdc, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _Var1, _Var1, _Var1, _Var1)
AND
QRY_StartDialog(WYR_Circus_Checkpoint_5117a414-8890-f4db-a844-8bf632d62086, S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178, NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, _Var1)
THEN
DB_NOOP(1);

IF
FlagSet(WYR_Circus_State_CheckpointSceneEnded_570c10d7-b7b9-9805-c78e-c03375a5f051, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
NOT DB_WYR_Circus_EntranceSceneCharacter(S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa);

IF
FlagSet(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_RemoveDBTrespassTrigger(S_WYR_Circus_CheckpointTrespassArea_f3f8880b-fad4-4c33-816f-d620a5f9a6bf, S_WYR_Circus_CheckpointTrespassOutPos_081f81cb-3362-4f5a-a6df-569122f4b29e, S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178);

PROC
PROC_GlobalFlagReactionAfterDialog(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _, _, _, _)
AND NOT
DB_Defeated(S_WYR_Circus_EntranceGuard_63ef213e-7a72-4126-9d5f-2f7d60ee9178, _, _, _, _)
AND
IsDestroyed(S_WYR_Circus_EntranceGate_243c4eaa-d26b-4eda-8c04-b1f00c4d7492, 0, _, _, _)
AND NOT
QRY_IsOpeneding(S_WYR_Circus_EntranceGate_243c4eaa-d26b-4eda-8c04-b1f00c4d7492, _, _, _, _)
THEN
Open(S_WYR_Circus_EntranceGate_243c4eaa-d26b-4eda-8c04-b1f00c4d7492);

IF
FlagSet(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearOwnership(S_WYR_Circus_EntranceGate_243c4eaa-d26b-4eda-8c04-b1f00c4d7492);

IF
EnteredTrigger(_, S_WYR_Circus_SUB_22d3f3ff-3cbb-4240-a3ab-051889832375, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d);

IF
FlagSet(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d);

IF
FlagSet(WYR_Circus_Event_CheckpointAskedQuestion_3cc9ed1d-5776-f570-959f-4e809c24dc85, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_WYR_Circus_CheckpointQuestionsAsked(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_CheckpointQuestionsAsked(_Var1, 1);

IF
FlagSet(WYR_Circus_Event_CheckpointAskedQuestion_3cc9ed1d-5776-f570-959f-4e809c24dc85, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_CheckpointQuestionsAsked(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var3, 1, _Var4, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_CheckpointQuestionsAsked(_Var1, _Var3);
DB_WYR_Circus_CheckpointQuestionsAsked(_Var1, _Var4);

IF
FlagSet(WYR_Circus_Event_CheckpointAskedQuestion_3cc9ed1d-5776-f570-959f-4e809c24dc85, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
ClearFlag(WYR_Circus_Event_CheckpointAskedQuestion_3cc9ed1d-5776-f570-959f-4e809c24dc85, _Var1, _Var2);

IF
DB_WYR_Circus_CheckpointQuestionsAsked(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
_Var2 >= 2
THEN
SetFlag(WYR_Circus_State_CheckpointAskedTooMany_ac7f416a-c267-3506-b42b-e9360d39b9fd, _Var1, 0);

PROC
PROC_DialogFlagSetup(WYR_Circus_Checkpoint_5117a414-8890-f4db-a844-8bf632d62086, _, _, _, (CHARACTER)_Var4)
AND
GetAppliedSplatterLevel(_Var4, 0, _Var5, _, _)
AND
DB_WYR_Circus_SplattersLevels(_Var5, _, _, _, _)
THEN
DB_WYR_Circus_PlayerSplatterFlags(WYR_Circus_State_Dirty_b4c3e532-1230-7b41-ca72-a452f26bdd7e, _Var4);

PROC
PROC_DialogFlagSetup(WYR_Circus_Checkpoint_5117a414-8890-f4db-a844-8bf632d62086, _, _, _, (CHARACTER)_Var4)
AND
GetAppliedSplatterLevel(_Var4, 0, _Var5, _, _)
AND
DB_WYR_Circus_SplattersLevels(_Var5, _, _, _, _)
THEN
DB_WYR_Circus_PlayerSplatterFlags(WYR_Circus_Checkpoint_State_Bloodied_f7587580-c1e1-32ad-a3df-5c895e539567, _Var4);

IF
DB_WYR_Circus_PlayerSplatterFlags(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
SetFlag(_Var1, _Var2, 0);

IF
DialogActorLeft(WYR_Circus_Checkpoint_5117a414-8890-f4db-a844-8bf632d62086, _, (CHARACTER)_Var2, _, _)
AND
DB_WYR_Circus_PlayerSplatterFlags(_Var4, _Var2, _, _, _)
THEN
NOT DB_WYR_Circus_PlayerSplatterFlags(_Var4, _Var2);
ClearFlag(_Var4, _Var2, 0);

IF
DB_InRegion(_, S_WYR_Circus_SUB_22d3f3ff-3cbb-4240-a3ab-051889832375, _, _, _)
AND
DB_GlobalFlag(WYR_Circus_State_CheckpointGainedAccess_6c332552-395f-6f80-a0e7-d2450ab0812d, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_EntranceCivilian_Event_PlayerEntered_81faaf61-0a04-4b1b-9dbc-330e1d310a58, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _, _, _, _)
AND NOT
DB_WYR_Circus_EntranceCivilian_CanEnterTimerStarted(1, _, _, _, _)
THEN
DB_WYR_Circus_EntranceCivilian_CanEnterTimerStarted(1);
TimerLaunch("WYR_Circus_EntranceCivilianCanEnter_Timer", 3000);

IF
TimerFinished("WYR_Circus_EntranceCivilianCanEnter_Timer", _, _, _, _)
AND
DB_WYR_Circus_EntranceCivilian_CanEnterTimerStarted(1, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_EntranceCivilian_Event_PlayerEntered_81faaf61-0a04-4b1b-9dbc-330e1d310a58);
NOT DB_WYR_Circus_EntranceCivilian_CanEnterTimerStarted(1);

PROC
PROC_WYR_Circus_OnCombatStarted()
AND NOT
DB_PermaDefeatedOrOffstage(S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa, _, _, _, _)
AND
IsInTrigger(S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa, S_WYR_Circus_SUB_22d3f3ff-3cbb-4240-a3ab-051889832375, 0, _, _)
THEN
PROC_DisappearOutOfSightTo(S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa, S_WYR_Circus_PatronsOutsideLeavePos_c85479f5-c2d3-435c-a169-031cb6789967, "Run", 0, "");

IF
FlagSet(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4, _, _, _, _)
AND NOT
DB_PermaDefeatedOrOffstage(S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa, _, _, _, _)
THEN
PROC_DisappearOutOfSightTo(S_WYR_Circus_EntranceCivilian_30c7b090-5bc1-41d1-a87a-ae7b6ade6cfa, S_WYR_Circus_PatronsOutsideLeavePos_c85479f5-c2d3-435c-a169-031cb6789967, "Run", 0, "");

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "WYR_Circus_EntranceCheckpoint_Scene", "DisturbanceRegistering", (GUIDSTRING)_)
THEN
PROC_WYR_Circus_ProcessGroupSceneInterrupted(_Var2, "WYR_Circus_EntranceFamily_SceneDialogOnly");

IF
FlagSet(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _, _, _, _)
AND
DB_WYR_Circus_ShowPatrons_DisappearGroup("WYR_Circus_EntranceFamily_SceneDialogOnly", _Var3, _, _, _)
THEN
PROC_WYR_Circus_GroupScene_ForceEndForCharacter(_Var3);

IF
DB_WYR_Circus_ShowPatrons(_Var1, _, _, _Var1, _Var1)
THEN
PROC_SelfHealing_Disable(_Var1);

PROC
PROC_WYR_Circus_OnCombatStarted()
AND
DB_WYR_Circus_ShowPatrons(_Var1, "Run", _, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_PatronReadyToRun(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetCanJoinCombat(_Var1, 0);
LeaveCombat(_Var1);
DB_WYR_Circus_PatronReadyToRun(_Var1);

IF
DB_WYR_Circus_PatronReadyToRun(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantMove(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_PolymorphedByPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_OffStage(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_PatronReadyToRun(_Var1);
PROC_DisappearOutOfSightTo(_Var1, S_WYR_Circus_PatronsDisappearPos_af65c343-97f2-4e76-b4fc-3be88fcc5328, "Run", 0, "");

PROC
PROC_WYR_Circus_OnCombatStarted()
AND
DB_WYR_Circus_ShowPatrons(_Var1, "Flee", _, _Var1, _Var1)
AND
DB_WYR_Circus_ShowPatrons_FleePos(_Var1, _Var3, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_PatronReadyToFlee(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_PatronReadyToFlee(_Var1, _Var3);

IF
DB_WYR_Circus_PatronReadyToFlee(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_PatronEnableCanJoinCombat(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
CanJoinCombat(_Var1, 1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_PatronEnableCanJoinCombat(_Var1);
SetCanJoinCombat(_Var1, 0);
LeaveCombat(_Var1);

IF
DB_WYR_Circus_PatronReadyToFlee(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_CantMove(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_PolymorphedByPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_OffStage(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_PatronReadyToFlee(_Var1, _Var2);
PROC_CharacterMoveTo(_Var1, _Var2, "Run", "WYR_Circus_Event_PatronFleesOnCombataStart");

IF
EntityEvent((CHARACTER)_Var1, "WYR_Circus_Event_PatronFleesOnCombataStart", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_PatronEnableCanJoinCombat(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetCanJoinCombat(_Var1, 1);
SetCanFight(_Var1, 1);

IF
EntityEvent((CHARACTER)_Var1, "WYR_Circus_Event_PatronFleesOnCombataStart", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_ShowPatrons_Flee_SubstituteDisappearGroup(_Var2, _Var1, _Var3, _Var4, _Var1)
AND
DB_WYR_Circus_ShowPatrons_DisappearGroup(_Var5, _Var1, _Var6, _Var7, _Var1)
THEN
PROC_SceneOver(_Var5);
NOT DB_WYR_Circus_ShowPatrons_DisappearGroup(_Var5, _Var1, _Var6, _Var7);
DB_WYR_Circus_ShowPatrons_DisappearGroup(_Var2, _Var1, _Var3, _Var4);

IF
TurnStarted((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_ShowPatrons_CombatBark(_Var2, _Var3, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk_IgnoreCombat(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_CombatBarksBlocked(_, _Var1, _Var1, _Var1, _Var1)
AND
DB_Sees(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_CombatBarksBlocked(_Var3);
PROC_TryStartAD(_Var3, _Var2);

IF
AutomatedDialogEnded((DIALOGRESOURCE)_Var1, _, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_WYR_Circus_CombatBarksBlocked(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_Circus_UnblockCombatBarks(_Var1);

IF
AutomatedDialogRequestFailed((DIALOGRESOURCE)_Var1, _, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_WYR_Circus_CombatBarksBlocked(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_Circus_UnblockCombatBarks(_Var1);

IF
AutomatedDialogForceStopping((DIALOGRESOURCE)_Var1, _, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_WYR_Circus_CombatBarksBlocked(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_Circus_UnblockCombatBarks(_Var1);

PROC
PROC_WYR_Circus_UnblockCombatBarks((DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
THEN
NOT DB_WYR_Circus_CombatBarksBlocked(_Var1);

PROC
PROC_WYR_Circus_UnblockCombatBarks((DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_WYR_Circus_ShowPatrons_CombatBark(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_ShowPatrons_CombatBark(_Var2, _Var1);

PROC
PROC_StateSet_Defeated((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_ShowPatrons_CombatBark(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_ShowPatrons_CombatBark(_Var1, _Var2);

IF
DB_GlobalFlag(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_ShowPatrons(_Var1, "Stay", "Kill", _Var1, _Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_PatronCanFightEnabled(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_PatronCanFightEnabled(_Var1);
PROC_SetCanFight(_Var1, 1);

IF
DB_WYR_Circus_ShowPatrons_DisappearGroup(_Var1, _Var2, _Var3, _, _Var1)
THEN
DB_WYR_Circus_DisappearScene(_Var1);
PROC_SceneDialogOnly(_Var1, _Var2, _Var3);

IF
DB_WYR_Circus_DisappearScene(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_ShowPatrons_DisappearGroup(_Var1, _, _, _, _Var1)
THEN
NOT DB_WYR_Circus_DisappearScene(_Var1);

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, (STRING)_Var3, "DisturbanceRegistering", _)
AND
DB_WYR_Circus_DisappearScene(_Var3, _, _, _, _)
THEN
PROC_WYR_Circus_ProcessGroupSceneInterrupted(_Var2, _Var3);

PROC
PROC_WYR_Circus_ProcessGroupSceneInterrupted((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_SceneManager_DisturbanceRegistering(_Var1, _Var3, _, _, _, _Var7, _Var1, _Var1, _Var1, _Var1)
AND
QRY_CRIME_IsAssaultOrMurder(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_ShowPatrons_DisappearGroup(_Var2, _Var8, _, _, _Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var8, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SceneOver(_Var2);
PROC_NotifyWhenReadyToMoveOn(_Var8, "WYR_Circus_DisappearGroupInterrupted_Notify");

PROC
PROC_ReadyToMoveOn((CHARACTER)_Var1, "WYR_Circus_DisappearGroupInterrupted_Notify", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_ShowPatrons_DisappearGroup(_Var2, _Var1, _Var3, _Var4, _Var1)
THEN
NOT DB_WYR_Circus_ShowPatrons_DisappearGroup(_Var2, _Var1, _Var3, _Var4);
SetCanJoinCombat(_Var1, 0);
PROC_SetCanFight(_Var1, 0);
PROC_DisappearOutOfSightTo(_Var1, _Var4, "Sprint", 0, "");

PROC
PROC_WYR_Circus_GroupScene_ForceEndForCharacter((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_ShowPatrons_DisappearGroup(_Var2, _Var1, _, _, _Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SceneOver(_Var2);
PROC_NotifyWhenReadyToMoveOn(_Var1, "WYR_Circus_DisappearGroupInterrupted_Notify");

PROC
PROC_WYR_Circus_InitShowScene()
AND
DB_WYR_Circus_PartOfShowScene(_Var1, _, _, _, _Var1)
THEN
DB_SceneManager(_Var1, "WYR_Circus_ClownPreShowScene");

PROC
PROC_WYR_Circus_InitShowScene()
THEN
DB_SpotPlayers(S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, "WYR_Circus_ClownPreShowScene", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_SpotPlayers_SpotTrigger(S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, "WYR_Circus_ClownPreShowScene", S_WYR_Circus_ClownPreShowSpotArea_0fb69c88-839a-4132-950e-a43f297d273e);

PROC
PROC_SceneInterrupted(_, _, "WYR_Circus_ClownPreShowScene", (STRING)_Var3, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
THEN
PROC_WYR_Circus_StartCombat();

PROC
PROC_SpotPlayers_Spotted(_, "WYR_Circus_ClownPreShowScene", (CHARACTER)_Var2, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _, _, _, _)
AND
QRY_GetClosestAvailableCharacterTo(_Var2, 0, _, _, _)
AND
DB_ClosestAvailableCharacterTo_PreferAvatar(_Var3, _Var2, _, 1, _)
AND
QRY_SpeakerIsAvailable(_Var3, 0, 0, _, _)
AND
IsInTrigger(_Var3, S_WYR_Circus_ClownPreShowAddToDialogArea_fb3d57c2-5ccd-4b7a-a885-feb2fd6898aa, 1, _, _)
AND
QRY_OnlyOnce("WYR_Circus_ClownPreShowSceneStarted_OnlyOnce", _, _, _, _)
AND NOT
QRY_StartDialog(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, S_WYR_Circus_CuriousFan_48b86ab3-bf79-4466-b44d-1342ee76d57f, S_WYR_Circus_FanClubKid_02_6afc0210-436a-4ec0-99b1-f95140b3557d, _Var3, _, _, _, _)
THEN
PROC_WYR_Circus_StartCombat();

PROC
PROC_SpotPlayers_Spotted(_, "WYR_Circus_ClownPreShowScene", (CHARACTER)_Var2, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _, _, _, _)
AND NOT
DB_OnlyOnce("WYR_Circus_ClownPreShowSceneStarted_OnlyOnce", _, _, _, _)
AND NOT
QRY_StartDialog(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, S_WYR_Circus_CuriousFan_48b86ab3-bf79-4466-b44d-1342ee76d57f, S_WYR_Circus_FanClubKid_02_6afc0210-436a-4ec0-99b1-f95140b3557d, _Var2, _, _, _, _)
THEN
PROC_WYR_Circus_StartCombat();

QRY
QRY_SelectCustomDialog_AfterGenerics((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_PartOfShowScene(_Var1, 1, _, _, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, S_WYR_Circus_CuriousFan_48b86ab3-bf79-4466-b44d-1342ee76d57f, S_WYR_Circus_FanClubKid_02_6afc0210-436a-4ec0-99b1-f95140b3557d, _Var2);
PROC_SpotPlayers_StopSpotting(S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, "WYR_Circus_ClownPreShowScene");

PROC
PROC_StartDialog_AddExtraSpeakers(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_Circus_PartOfShowScene(_Var2, _, 1, _, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, _Var2);

PROC
PROC_StartDialog_AddExtraSpeakers(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_WildShaped(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var2, S_WYR_Circus_ClownPreShowAddToDialogArea_fb3d57c2-5ccd-4b7a-a885-feb2fd6898aa, 1, _Var1, _Var1)
THEN
PROC_DialogAddListeningActor(_Var1, _Var2);

IF
DialogRequestFailed(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_WYR_Circus_StartCombat();

PROC
PROC_DialogFlagSetup(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, _, _, _, _, _, _, _, _, _)
AND
DB_DialogRequestCache_SpeakerList_Players(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, _, _Var7, _, _)
AND
DB_Is_EngineBlock_Move(_Var7, _, _, _, _)
THEN
SetFlag(WYR_Circus_State_PreShowCantMove_a3f94e23-c024-4f37-b8e7-b89e0d5cd911, _Var7);

IF
DialogEnded(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
AND
GetFlag(WYR_Circus_State_PreShowCantMove_a3f94e23-c024-4f37-b8e7-b89e0d5cd911, _Var2, 1, _Var1, _Var1)
THEN
ClearFlag(WYR_Circus_State_PreShowCantMove_a3f94e23-c024-4f37-b8e7-b89e0d5cd911, _Var2);

PROC
PROC_FlagReactionAfterDialog((CHARACTER)_Var1, WYR_Circus_Event_StabPlayer_85cec1bd-2d3f-4b68-4ecf-6bb6da53e611, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Defeated(S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, _Var1, _Var1, _Var1, _Var1)
AND
GetDistanceTo(S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, _Var1, _Var2, _Var1, _Var1)
AND
_Var2 < 10
THEN
PROC_WYR_Circus_BeastAttacks(_Var1);

PROC
PROC_WYR_Circus_BeastAttacks((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
Attack(S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, _Var1, 1);

PROC
PROC_WYR_Circus_BeastAttacks((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
HasActiveStatus(_Var1, "PRONE_FALLEN", 0, _Var1, _Var1)
THEN
ApplyStatus(_Var1, "PRONE_FALLEN", 6, 0, S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3);

IF
FlagSet(WYR_Circus_Event_ShowSendCompanion_17c5041c-d83e-cd5b-9ba6-feba725e81e5, (CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_WYR_Circus_ShowSendCompanion(_, _, _, _Var1, _Var1)
AND
DB_DialogPlayers(_Var2, _Var6, _Var7, _Var1, _Var1)
THEN
DB_WYR_Circus_ShowSendCompanion(_Var1, _Var6, _Var7);

IF
DialogEnded(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_Circus_ShowSendCompanion(_Var2, _Var3, 1, _Var1, _Var1)
AND NOT
QRY_StartDialog(WYR_Circus_Clown_PreShow_Companions_d901ebe4-cd17-36f4-b21b-c0654eb4d99a, S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, S_WYR_Circus_FanClubKid_02_6afc0210-436a-4ec0-99b1-f95140b3557d, _Var2, _Var3, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_Circus_StartCombat();

PROC
PROC_StartDialog_AddExtraSpeakers(WYR_Circus_Clown_PreShow_Companions_d901ebe4-cd17-36f4-b21b-c0654eb4d99a, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_Circus_PartOfShowScene(_Var2, _, _, 1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, _Var2);

PROC
PROC_StartDialog_AddExtraSpeakers(WYR_Circus_Clown_PreShow_Companions_d901ebe4-cd17-36f4-b21b-c0654eb4d99a, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_Circus_ShowSendCompanion(_, _Var3, _Var4, _Var1, _Var1)
AND
_Var4 != 1
AND
DB_Avatars(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var3, S_WYR_Circus_ClownPreShowAddToDialogArea_fb3d57c2-5ccd-4b7a-a885-feb2fd6898aa, 1, _Var1, _Var1)
THEN
PROC_DialogAddListeningActor(_Var1, _Var3);

IF
DialogEnded(WYR_Circus_Clown_PreShow_Companions_d901ebe4-cd17-36f4-b21b-c0654eb4d99a, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_WYR_Circus_StartCombat();

PROC
PROC_WYR_Circus_OnCombatStarted()
AND
DB_WYR_Circus_ShowSendCompanion(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_ShowSendCompanion(_Var1, _Var2, _Var3);

IF
DialogEnded(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, _, _, _, _)
AND NOT
DB_WYR_Circus_ShowSendCompanion(_, _, _, _, _)
THEN
PROC_WYR_Circus_StartCombat();

IF
DialogEnded(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_Event_ClownTriggersAttack_5184f147-8f58-5954-0089-86b6d3b2e410, _, _, _, _)
THEN
PROC_SpotPlayers_RestartSpotting(S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, "WYR_Circus_ClownPreShowScene");

IF
FlagSet(WYR_Circus_Event_GoOnStage_1f416988-6a27-4564-01a2-7e32954fa1af, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_CharacterMoveTo(_Var1, S_WYR_Circus_PlayerShowPos_a845d9c7-2c31-4928-b394-ab3ee86c46ad, "Sprint", "");

QRY
QRY_SelectADForRequest(S_WYR_Circus_Beast_03_fd8e7a4b-38cf-40c3-b4bf-8bbe084b5ca3, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_SpeakerIsAvailableAndInDialogRange(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SelectedDialog(WYR_Circus_Clown_1e8e8b23-51b3-8399-9dd7-ab269ae938ba, S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var1);

PROC
PROC_WYR_Circus_StartCombat()
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4, _, _, _, _)
THEN
PROC_SceneOver("WYR_Circus_ClownPreShowScene");
PROC_SpotPlayers_StopSpotting(S_WYR_Circus_Clown_21f541c1-e1bc-49a8-888f-d8a330c47336, "WYR_Circus_ClownPreShowScene");
PROC_GlobalSetFlagAndCache(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45);
PROC_WYR_Circus_OnCombatStarted();

PROC
PROC_WYR_Circus_OnCombatStarted()
AND NOT
DB_PermaDefeated(WYR_Circus_Clown_1e8e8b23-51b3-8399-9dd7-ab269ae938ba, _, _, _, _)
THEN
PROC_RemoveAllDialogEntriesForSpeaker(WYR_Circus_Clown_1e8e8b23-51b3-8399-9dd7-ab269ae938ba);

PROC
PROC_WYR_Circus_OnCombatStarted()
THEN
NOT DB_DoNotFace(S_WYR_Circus_CuriousFan_48b86ab3-bf79-4466-b44d-1342ee76d57f);

PROC
PROC_WYR_Circus_OnCombatStarted()
AND
DB_WYR_Circus_BeastCages(_, _Var2, _, _, _)
THEN
PROC_WYR_Circus_PrepareBeastForCombat(_Var2);

PROC
PROC_WYR_Circus_PrepareBeastForCombat((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_BeastCalmed(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetCombatGroupID(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var2, _Var1, _Var1, _Var1)
THEN
DB_GLO_DefeatCounter(_Var1, "WYR_Circus_Absolutists");
SetCombatGroupAndEnterCombat(_Var1, _Var2, S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336);

PROC
PROC_WYR_Circus_OnCombatStarted()
AND
GetCombatGroupID(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_Absolutists(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GLO_DefeatCounter(_Var2, "WYR_Circus_Absolutists");
SetCombatGroupAndEnterCombat(_Var2, _Var1, S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336);

PROC
PROC_WYR_Circus_OnCombatStarted()
THEN
PROC_SetRelationToPlayers(Act3_WYR_Circus_Clown_d10eb6f8-a38c-4bd6-8bed-b155a6e5ab5a, 0);
PROC_SetRelationMutual(Act3_WYR_Circus_Clown_d10eb6f8-a38c-4bd6-8bed-b155a6e5ab5a, Act3_WYR_Circus_Patrons_cf592db8-2a56-4d75-8185-33b77bfa5051, 0);
PROC_SetRelationMutual(Act3_WYR_Circus_Clown_d10eb6f8-a38c-4bd6-8bed-b155a6e5ab5a, ACT3_WYR_Circus_Workers_1c52504e-5262-4670-a834-6248e68534ad, 0);
PROC_SetRelationMutual(ACT3_WYR_Circus_Beasts_5afda7e4-e61a-4d23-af6d-86fdef9322a8, Act3_WYR_Circus_Workers_1c52504e-5262-4670-a834-6248e68534ad, 0);
PROC_SetRelationMutual(Act3_WYR_Circus_Beasts_5afda7e4-e61a-4d23-af6d-86fdef9322a8, Act3_WYR_Circus_Patrons_cf592db8-2a56-4d75-8185-33b77bfa5051, 0);
PROC_SetRelationMutual(Act3_WYR_Circus_Beasts_5afda7e4-e61a-4d23-af6d-86fdef9322a8, ACT3_WYR_Circus_Ringmaster_c8ee67a5-f6c1-46ab-8957-b1e4018adbf8, 50);
PROC_SetRelationMutual(Act3_WYR_Circus_Clown_d10eb6f8-a38c-4bd6-8bed-b155a6e5ab5a, ACT3_WYR_Circus_Ringmaster_c8ee67a5-f6c1-46ab-8957-b1e4018adbf8, 50);
PROC_SetRelationToPlayers(Act3_WYR_Circus_Beasts_5afda7e4-e61a-4d23-af6d-86fdef9322a8, 0);

IF
TurnStarted(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_Is_InCombat(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _Var1, _Var1, _Var1, _Var1)
AND
QRY_IsEnemyToAnyPlayerInCombat(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_Circus_StartCombat();

PROC
PROC_WYR_Circus_StartCombat()
THEN
DB_WYR_Circus_ClownWantsToYellAD(1);

IF
DB_WYR_Circus_ClownWantsToYellAD(1, _, _, _, _)
AND NOT
DB_CantTalk_IgnoreCombat(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _, _, _, _)
AND
QRY_OnlyOnce("WYR_Circus_StartCombatClownAD_OnlyOnce", _, _, _, _)
THEN
NOT DB_WYR_Circus_ClownWantsToYellAD(1);
PROC_TryStartAD(WYR_Circus_AD_Clown_Attack_ba7dd863-e0c2-1246-c721-5882d242dbee, S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336);

IF
DB_WYR_Circus_Absolutists(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CRIME_Guards_NoSummonBy(_Var1);

QRY
QRY_CorpseLooting_BlockMakeOwned((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_Absolutists(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_CorpseLooting_BlockMakeOwned((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_BeastReleasedFlags(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_WYR_Circus_OnCombatStarted()
THEN
PROC_RemoveDBTrespassTrigger(S_WYR_Circus_BouncerTrespassArea_eeb030bd-c1ff-4562-bbc3-8fbe3ec1d3c6, S_WYR_Circus_BouncerTrespassOutPos_a4515583-c7d3-434a-97c3-839bc453faaa, S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7);

IF
DialogStarted(WYR_Circus_Clown_PreShow_3201c8cc-8a13-cd0d-3b3c-d89bec8ba767, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
PROC_RemoveDBTrespassTrigger(S_WYR_Circus_StageTrespassArea_fc55638f-6156-4d8d-ada2-7eebab6e3e9d, S_WYR_Circus_StageTrespassOutPos_0deb2e38-5f3b-4ac8-85b1-db48ab156f7e);

PROC
PROC_WYR_Circus_OnCombatStarted()
THEN
PROC_RemoveDBTrespassTrigger(S_WYR_Circus_StageTrespassArea_fc55638f-6156-4d8d-ada2-7eebab6e3e9d, S_WYR_Circus_StageTrespassOutPos_0deb2e38-5f3b-4ac8-85b1-db48ab156f7e);

PROC
PROC_GLO_DefeatCounter_AllDefeated("WYR_Circus_Absolutists", _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4);

IF
FlagSet(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_GlobalSetFlagAndCache(GLO_Gortash_Knows_AttackedByOrin_3dbc99c9-06c2-4471-88dd-ecc7537eeee9);
PROC_GlobalSetFlagAndCache(WYR_Circus_State_MetDoppelgangerClown_c1d1c6ec-374b-bae1-6ad7-8289a1dfb346);

IF
DB_PermaDefeated(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var1, _Var1, _Var1, _Var1)
AND
DB_Was_InCombat(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Was_InCombat(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var2, _, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_PostCombatVBPlayed(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_PostCombatVBPlayed(1);
RealtimeObjectTimerLaunch(_Var2, "WYR_Circus_VB_PostCombat_Timer", 1500);

IF
ObjectTimerFinished((CHARACTER)_Var1, "WYR_Circus_VB_PostCombat_Timer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
StartVoiceBark(WYR_Circus_VB_PostCombat_db39eab5-e4d4-b068-1a72-364337d1c2fb, _Var1);

QRY
QRY_GLO_Doppelgangers_BlockGenericReactionPAD((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_Absolutists(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_LongRest()
AND
DB_GlobalFlag(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_Gone_151fd307-4cb8-44ba-8998-40e1d748b707, _, _, _, _)
AND
DB_WYR_Circus_ShowPatrons(_Var1, _, _, _Var1, _Var1)
AND NOT
DB_OffStage(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_DeadOutsideCircus(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CancelDisappearOutOfSight(_Var1);
PROC_SetOnStage(_Var1, 0);

PROC
PROC_LongRest()
AND
DB_GlobalFlag(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87, _, _, _, _)
THEN
PROC_WYR_Circus_BorrowClown();

PROC
PROC_WYR_Circus_BorrowClown()
AND NOT
DB_WYR_Circus_AbsolutistsCorpsesBurried(1, _, _, _, _)
AND
GetPosition(S_WYR_Circus_Clown_DeadArea_85b576cc-f551-4322-a2c6-cca443850938, _Var1, _Var2, _Var3, _Var1)
AND
FindValidPosition(_Var1, _Var2, _Var3, 10, S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, 0, _Var4, _Var5, _Var6, _Var1)
THEN
TeleportToPosition(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var4, _Var5, _Var6);
DB_WYR_Circus_AbsolutistsCorpsesBurried(1);

PROC
PROC_LongRest()
AND
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_Gone_151fd307-4cb8-44ba-8998-40e1d748b707, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_AboutToLeave_39876ea2-3a3a-441d-96be-f907b6226239, _, _, _, _)
AND NOT
DB_PermaDefeatedOrOffstage(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, _, _, _, _)
THEN
PROC_WYR_Circus_LeftCombat_CircusWon();

PROC
PROC_WYR_Circus_LeftCombat_CircusWon()
THEN
PROC_WYR_Circus_KillAllAbsolutists();
PROC_WYR_Circus_KillPatrons();

PROC
PROC_WYR_Circus_LeftCombat_CircusWon()
AND NOT
DB_PermaDefeatedOrOffstage(S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7, _, _, _, _)
AND
TriggerGetRandomPosition(S_WYR_Circus_ClownPreShowCombatArea_2ea315a6-c570-45d1-a984-0142838ccab3, _Var1, _Var2, _Var3, _Var1)
THEN
PurgeOsirisQueue(S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7);
Die(S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7, 0, 1);
PROC_TeleportToSafePosition(S_WYR_Circus_Bouncer_08106e46-8ac2-49c4-adb3-dcc2aa585aa7, _Var1, _Var2, _Var3);

PROC
PROC_WYR_Circus_LeftCombat_CircusWon()
THEN
PROC_Helper_SafeTeleportTo(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, S_WYR_Circus_Ringmaster_PostCombatPos_fbd722db-155d-430a-96d6-b897cb798c4f);

PROC
PROC_LongRest()
AND
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_Gone_151fd307-4cb8-44ba-8998-40e1d748b707, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_AboutToLeave_39876ea2-3a3a-441d-96be-f907b6226239, _, _, _, _)
AND
DB_Defeated(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, _, _, _, _)
THEN
PROC_WYR_Circus_LeftCombat_AbsolutistsWon();

PROC
PROC_WYR_Circus_LeftCombat_AbsolutistsWon()
AND
DB_WYR_Circus_BeastCages(_, _Var2, _, _, _)
AND NOT
QRY_WYR_Circus_BeastCalmed(_Var2, _, _, _, _)
THEN
DB_WYR_Circus_DoNotDisappearWithCircus(_Var2);

PROC
PROC_WYR_Circus_LeftCombat_AbsolutistsWon()
AND
DB_WYR_Circus_ShowPatrons(_Var1, _, "Kill", _Var1, _Var1)
THEN
DB_WYR_Circus_DoNotDisappearWithCircus(_Var1);

PROC
PROC_WYR_Circus_LeftCombat_AbsolutistsWon()
THEN
PROC_WYR_Circus_FlamingFistsAppear();
PROC_WYR_Circus_KillAllAbsolutists();
PROC_WYR_Circus_KillPatrons();
PROC_WYR_Circus_MakeCircusDisappear();

PROC
PROC_WYR_Circus_FlamingFistsAppear()
AND
DB_WYR_Circus_FlamingFists(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 1);

PROC
PROC_WYR_Circus_FlamingFistsAppear()
THEN
DB_Dialogs(S_WYR_Circus_FlamingFist_01_4caa11fb-d04d-45fd-bc11-e825833498c6, WYR_Circus_FlamingFist_01_17d8b1a2-00b0-6cc3-6af3-dcba290414f5);
DB_Dialogs(S_WYR_Circus_FlamingFist_02_8ad04b31-7d78-4077-83a2-9490ebdd1831, WYR_Circus_FlamingFist_02_0cf44ed1-5eb9-3283-f86c-03b5fc9a6343);

IF
DB_WYR_Circus_FlamingFists(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_WYR_Circus_KillPatrons()
AND
DB_WYR_Circus_ShowPatrons(_Var1, _, "Kill", _Var1, _Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
TriggerGetRandomPosition(S_WYR_Circus_ClownPreShowCombatArea_2ea315a6-c570-45d1-a984-0142838ccab3, _Var3, _Var4, _Var5, _Var1)
THEN
PurgeOsirisQueue(_Var1);
Die(_Var1, 0, 1);
PROC_TeleportToSafePosition(_Var1, _Var3, _Var4, _Var5);

PROC
PROC_WYR_Circus_KillPatrons()
AND
DB_WYR_Circus_ShowPatrons(_Var1, _, "Disappear", _Var1, _Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CancelDisappearOutOfSight(_Var1);
PROC_SetOnStage(_Var1, 0);

PROC
PROC_WYR_Circus_KillAllAbsolutists()
AND
DB_WYR_Circus_Absolutists(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
TriggerGetRandomPosition(S_WYR_Circus_ClownPreShowCombatArea_2ea315a6-c570-45d1-a984-0142838ccab3, _Var2, _Var3, _Var4, _Var1)
THEN
PurgeOsirisQueue(_Var1);
Die(_Var1, 0, 1);
PROC_TeleportToSafePosition(_Var1, _Var2, _Var3, _Var4);

PROC
PROC_WYR_Circus_KillAllAbsolutists()
AND
DB_WYR_Circus_BeastCages(_, _Var2, _, _, _)
AND NOT
DB_PermaDefeatedOrOffstage(_Var2, _, _, _, _)
AND NOT
QRY_WYR_Circus_BeastCalmed(_Var2, _, _, _, _)
THEN
PROC_WYR_Circus_KillBeastAndOpenCage(_Var2);

PROC
PROC_WYR_Circus_KillBeastAndOpenCage((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_BeastCages(_Var2, _Var1, _, _Var1, _Var1)
AND NOT
DB_Destroyed(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsOpened(_Var2, 0, _Var1, _Var1, _Var1)
THEN
Open(_Var2);

PROC
PROC_WYR_Circus_KillBeastAndOpenCage((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_CancelDisappearOutOfSight(_Var1);
PurgeOsirisQueue(_Var1);
Die(_Var1, 0, 1);

IF
DB_WYR_Circus_BeastCages(_Var1, _Var2, _Var3, _Var1, _Var1)
THEN
SetTag(_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc);
TriggerRegisterForCharacter(_Var3, _Var2);

IF
LeftTrigger((CHARACTER)_Var1, (TRIGGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_BeastCages(_Var3, _Var1, _Var2, _Var1, _Var1)
AND
IsTagged(_Var3, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 1, _Var1, _Var1)
THEN
ClearTag(_Var3, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc);

IF
DestroyedBy((ITEM)_Var1, _, _, _, (ITEM)_Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _, _, _Var1, _Var1)
AND
IsTagged(_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 1, _Var1, _Var1)
THEN
ClearTag(_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc);

IF
Opened((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _, _, _Var1, _Var1)
AND
IsLocked(_Var1, 0, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 1, _Var1, _Var1)
THEN
ClearTag(_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc);

IF
UseFinished(_, (ITEM)_Var2, 1, _, _)
AND
DB_WYR_Circus_BeastCages(_Var2, _, _, _, _)
AND
QRY_IsOpeneding(_Var2, _, _, _, _)
AND
IsLocked(_Var2, 0, _, _, _)
AND
IsTagged(_Var2, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 1, _, _)
THEN
ClearTag(_Var2, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc);

IF
DB_PermaDefeatedOrOffstage(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var2, _Var1, _, _Var1, _Var1)
AND
IsTagged(_Var2, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 1, _Var1, _Var1)
THEN
ClearTag(_Var2, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc);

IF
TagCleared((ITEM)_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _, _, _Var1, _Var1)
THEN
PROC_WYR_Circus_CheckCageReleased(_Var1);

IF
Opened((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _, _, _Var1, _Var1)
THEN
PROC_WYR_Circus_CheckCageReleased(_Var1);

IF
Unlocked((ITEM)_Var1, _, _, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _, _, _Var1, _Var1)
THEN
PROC_WYR_Circus_CheckCageReleased(_Var1);

IF
DestroyedBy((ITEM)_Var1, _, _, _, (ITEM)_Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _, _, _Var1, _Var1)
THEN
PROC_WYR_Circus_CheckCageReleased(_Var1);

PROC
PROC_WYR_Circus_CheckCageReleased((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND NOT
DB_WYR_Circus_CageReleased(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
DB_InRegion(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
IsOpened(_Var1, 1, _Var1, _Var1, _Var1)
AND
IsLocked(_Var1, 0, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 0, _Var1, _Var1)
THEN
DB_WYR_Circus_CageReleased(_Var1);
PROC_WYR_Circus_OnCageReleased(_Var1);

PROC
PROC_WYR_Circus_CheckCageReleased((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND NOT
DB_WYR_Circus_CageReleased(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _Var2, _Var3, _Var1, _Var1)
AND
DB_InRegion(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
IsDestroyed(_Var1, 1, _Var1, _Var1, _Var1)
THEN
TriggerUnregisterForCharacter(_Var3, _Var2);
DB_WYR_Circus_CageReleased(_Var1);
PROC_WYR_Circus_OnCageReleased(_Var1);

PROC
PROC_WYR_Circus_CheckCageReleased((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND NOT
DB_WYR_Circus_CageReleased(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _Var2, _Var3, _Var1, _Var1)
AND NOT
DB_InRegion(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 0, _Var1, _Var1)
THEN
DB_WYR_Circus_CageReleased(_Var1);
PROC_WYR_Circus_OnCageReleased(_Var1);

PROC
PROC_WYR_Circus_OnCombatStarted()
AND
DB_WYR_Circus_BeastCages(_Var1, _Var2, _, _Var1, _Var1)
AND NOT
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_BeastCalmed(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 1, _Var1, _Var1)
THEN
AiAddInterestingItem(_Var2, _Var1);

IF
TagCleared((ITEM)_Var1, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _Var2, _, _Var1, _Var1)
AND NOT
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_BeastCalmed(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
AiRemoveInterestingItem(_Var2, _Var1);

IF
RemovedFrom((GUIDSTRING)_Var1, (CHARACTER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_WYR_Circus_Absolutists(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var2, ACT3_WYR_CIRCUS_CAGEOPENER_f3acc92a-eb22-4076-940b-e52988d0dbdf, 1, _Var1, _Var1)
AND
GetTemplate(_Var1, UNI_WYR_Circus_BeastCageKey_5121d4a2-10c7-45e6-a46f-b279cd554bce, _Var1, _Var1, _Var1)
THEN
ClearTag(_Var2, ACT3_WYR_CIRCUS_CAGEOPENER_f3acc92a-eb22-4076-940b-e52988d0dbdf);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_Absolutists(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var2, _, _, _Var1, _Var1)
AND NOT
DB_WYR_Circus_BeastCage_AiBlockUsage(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_BeastCage_AiBlockUsage(_Var2);
DB_CustomUseItemResponse(_Var1, _Var2, 1);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_Absolutists(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var2, _, _, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCage_AiBlockUsage(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, _Var2, 0);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_Absolutists(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var2, _, _, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _Var1, _Var1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, _Var2, 0);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_WYR_Circus_StartedBeastDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var2, _, _, _Var1, _Var1)
AND
QRY_WYR_Circus_TryStartBeastInCageDialog(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, _Var2, 0);

QRY
QRY_WYR_Circus_TryStartBeastInCageDialog((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var2, _Var3, _Var4, _Var1, _Var1)
AND NOT
DB_CantTalk(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var2, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 1, _Var1, _Var1)
AND
IsLocked(_Var2, 1, _Var1, _Var1, _Var1)
AND
DB_Dialogs(_Var3, _Var5, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var3, _Var4, 1, _Var1, _Var1)
AND
QRY_StartDialog(_Var5, _Var3, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_StartedBeastDialog(_Var2);

IF
DialogStarted((DIALOGRESOURCE)_Var1, _, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1, (DIALOGRESOURCE)_Var1)
AND
DB_Dialogs(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var4, _Var3, _, _Var1, _Var1)
AND NOT
DB_WYR_Circus_StartedBeastDialog(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_StartedBeastDialog(_Var4);

PROC
PROC_BlockLockpickItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var2, _Var3, _, _Var1, _Var1)
AND
QRY_WYR_Circus_BeastCalmed(_Var3, "Blocked", _Var1, _Var1, _Var1)
THEN
DB_CustomLockpickItemResponse(_Var1, _Var2, 0);
PROC_TryStartAD(GEN_AD_ItemBlocked_a4eb2e7b-809a-a9e4-94da-955a8ac9b8c6, _Var1);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var2, _Var3, _, _Var1, _Var1)
AND
QRY_WYR_Circus_BeastCalmed(_Var3, "Blocked", _Var1, _Var1, _Var1)
THEN
DB_CustomUseItemResponse(_Var1, _Var2, 0);

IF
FlagSet((FLAG)_Var1, _, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_Circus_BeastCalmedFlags(_Var4, _Var1, "Pacified", _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var5, _Var4, _, _Var1, _Var1)
AND
IsTagged(_Var5, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 1, _Var1, _Var1)
THEN
ClearTag(_Var5, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc);

IF
FlagSet((FLAG)_Var1, _, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_Circus_BeastCalmedFlags(_Var4, _Var1, "Blocked", _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var5, _Var4, _, _Var1, _Var1)
AND
IsTagged(_Var5, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc, 1, _Var1, _Var1)
THEN
ClearTag(_Var5, ACT3_WYR_CIRCUS_BEASTCAGE_c2e9f87c-ec66-4519-bbf6-fb8ce249e6dc);
Unlock(_Var5);
Lock(_Var5, "NO_KEY");

IF
FlagSet(WYR_Circus_Beast_01_State_CageBlocked_a0fbd326-9087-9a8e-20a7-34b804d60ba5, _, _, _, _)
AND
DB_WYR_Circus_Absolutists(_Var3, _, _, _, _)
AND NOT
DB_Defeated(_Var3, _, _, _, _)
THEN
AiAddInterestingItem(_Var3, S_WYR_Circus_CageDoor_01_ebd4f99e-6d72-4eca-8efe-30905f83bb9e);

IF
FlagSet(WYR_Circus_State_GiveMeat_1900792c-21d6-4b24-ae46-52afb43029ee, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
MagicPocketsDestroyLocalItemsByTag(_Var1, "MEAT_fae436d4-da32-42a6-a2b2-9635da0b82eb", 1);
NOT DB_TaggedItemTracker("MEAT_fae436d4-da32-42a6-a2b2-9635da0b82eb", WYR_Circus_State_HasMeat_1815590b-a1ae-4405-b11b-d70d95ee7ff7);

IF
FlagSet((FLAG)_Var1, _, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_Circus_BeastCalmedFlags(_Var4, _Var1, _, _Var1, _Var1)
THEN
SetFaction(_Var4, Act3_WYR_Circus_PacifiedBeast_379cb629-2a67-4844-9c77-d8f1bac8bd31);

QRY
QRY_WYR_Circus_BeastCalmed((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_BeastCalmedFlags(_Var1, _Var2, _, _Var1, _Var1)
AND
DB_GlobalFlag(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_WYR_Circus_BeastCalmed((CHARACTER)_Var1, (STRING)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_BeastCalmedFlags(_Var1, _Var3, _Var2, _Var1, _Var1)
AND
DB_GlobalFlag(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
BaseFactionChanged((CHARACTER)_Var1, _, Act3_WYR_Circus_PacifiedBeast_379cb629-2a67-4844-9c77-d8f1bac8bd31, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_PeacefulResolve(_Var1);

PROC
PROC_WYR_Circus_OnCageReleased((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _Var2, _Var3, _Var1, _Var1)
AND NOT
DB_PermaDefeatedOrOffstage(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_WYR_Circus_BeastCalmed(_Var2, "Blocked", _Var1, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_BeastCalmed(_Var2, "Pacified", _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var2, _Var3, _Var1, _Var1, _Var1)
AND
GetCombatGroupID(S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336, _Var4, _Var1, _Var1, _Var1)
THEN
DB_GLO_DefeatCounter(_Var2, "WYR_Circus_Absolutists");
SetCombatGroupAndEnterCombat(_Var2, _Var4, S_WYR_Circus_DoppelClown_21f541c1-e1bc-49a8-888f-d8a330c47336);

PROC
PROC_WYR_Circus_OnCageReleased((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_BeastCages(_Var1, _Var2, _Var3, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_BeastCalmed(_Var2, "Pacified", _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var2, _Var3, _Var1, _Var1, _Var1)
THEN
PROC_WYR_Circus_OnBeastReleased(_Var2);

PROC
PROC_WYR_Circus_OnBeastReleased(_, (CHARACTER)_, (CHARACTER)_, (CHARACTER)_, (CHARACTER)_)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_State_BeastReleased_5f59da8f-1d66-4f08-b07e-912dae9e2ebf);

PROC
PROC_WYR_Circus_OnBeastReleased((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_BeastReleasedFlags(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
SetFaction(_Var1, Act3_WYR_Circus_PacifiedBeast_379cb629-2a67-4844-9c77-d8f1bac8bd31);
PROC_GlobalSetFlagAndCache(_Var2);

PROC
PROC_WYR_Circus_OnBeastReleased((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
CrimeGetNewID(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CharacterRegisterCrime(_Var1, "DangerousMonsterReaction", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000, _Var2);
DB_WYR_Circus_BeastReleasedCrimeID(_Var2);

IF
OnCrimeConfrontationDone((INTEGER)_Var1, (CHARACTER)_Var2, _, _, _, _, _, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_Circus_BeastReleasedCrimeID(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetEntityEvent(_Var2, "ClearCrimeReturn", 1);

PROC
PROC_WYR_Circus_OnBeastReleased((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_WYR_Circus_BeastReleasedTimerOn(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_BeastReleasedTimerOn(1);
TimerLaunch("WYR_Circus_BeastReleased_Timer", 1000);

IF
TimerFinished("WYR_Circus_BeastReleased_Timer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_ShowPatrons_DisappearGroup("WYR_Circus_ScaredFamily_SceneDialogOnly", _Var1, _, _, _Var1)
THEN
PROC_WYR_Circus_GroupScene_ForceEndForCharacter(_Var1);

PROC
PROC_WYR_Circus_OnBeastReleased((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_RemoveDialog(_Var1);

IF
EntityEvent((CHARACTER)_Var1, "WYR_Circus_BeastReleasedDisappear", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_BeastCages(_, _Var1, _, _Var1, _Var1)
THEN
SetEntityEvent(S_WYR_Circus_Thug_01_e11b95c9-0e4a-4777-b935-1ebaa5166a45, "WYR_Circus_Thug_01_Event_BeastRunAwayReaction", 1);
PROC_NotifyWhenReadyToMoveOn(_Var1, "WYR_Circus_BeastReleasedDisappear_Notify");

PROC
PROC_ReadyToMoveOn((CHARACTER)_Var1, "WYR_Circus_BeastReleasedDisappear_Notify", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_DisappearOutOfSightTo(_Var1, S_WYR_Circus_Beasts_DisappearPos_e90b2bbf-8fc8-4b23-bc10-f348cde23b3f, "Sprint", 1, "WYR_Circus_Event_BeastReleasedDisappeared");

IF
DB_WYR_Circus_WheelPrizes(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

IF
FlagSet(WYR_Circus_Event_WheelGivePrize_7dfd6548-fd05-42d0-a46b-521fd5fbfdcb, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
QRY_GetRandom("DB_WYR_Circus_WheelPrizes", 1, "DB_QRY_RTN_WYR_Circus_WheelPrizeWon", _Var1, _Var1)
AND
DB_QRY_RTN_WYR_Circus_WheelPrizeWon(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_WheelPrizes(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_WheelPrizes(_Var3);
PROC_SetOnStage(_Var3, 1);
ToInventory(_Var3, _Var1, 1, 1, 1);
ClearFlag(WYR_Circus_Event_WheelGivePrize_7dfd6548-fd05-42d0-a46b-521fd5fbfdcb, _Var1, _Var2);
PROC_WYR_Circus_CheckHasPrizes();

PROC
PROC_WYR_Circus_CheckHasPrizes()
AND
DB_GlobalFlag(WYR_Circus_State_WheelHasPrizes_dcea2493-c33f-7d42-d348-90530855995f, _, _, _, _)
AND NOT
DB_WYR_Circus_WheelPrizes(_, _, _, _, _)
THEN
PROC_GlobalClearFlagAndCache(WYR_Circus_State_WheelHasPrizes_dcea2493-c33f-7d42-d348-90530855995f);

IF
FlagSet(WYR_Circus_FortuneWheelWorker_Event_TransformPlayer_43cfbb38-02ef-1ef4-386d-a8bc6e67a761, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_WYR_Circus_WheelWorkerTransform(_Var1);

PROC
PROC_WYR_Circus_WheelWorkerTransform((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Defeated(S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f, _Var1, _Var1, _Var1, _Var1)
AND
GetDistanceTo(S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f, _Var1, _Var2, _Var1, _Var1)
AND
_Var2 < 30
THEN
UseSpell(S_WYR_Circus_FortuneWheelWorker_21aa8a76-40ac-4d3a-881f-d6871487df6f, "Target_WYR_PolymorhphCheese_Djinni", _Var1);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_FakePrizes(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_TryStartAD(WYR_Circus_PAD_ItemFake_ea77a9e2-0092-0be2-1b1f-22e9d9f1ac91, _Var1);
DB_CustomUseItemResponse(_Var1, _Var2, 0);

IF
AttackedBy((ITEM)_Var1, (GUIDSTRING)_Var2, _, _, _, _, _, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_WYR_Circus_FakePrizes(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_FakeItemPoofed(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
GetPosition(_Var1, _Var8, _Var9, _Var10, _Var1)
THEN
DB_WYR_Circus_FakeItemPoofed(_Var1);
PlayEffectAtPosition(VFX_Script_CONT_GEN_SecretChest_01_a164a018-22f3-a538-5acb-4aedf67358de, _Var8, _Var9, _Var10);
PROC_TryStartAD(WYR_Circus_PAD_ItemFake_ea77a9e2-0092-0be2-1b1f-22e9d9f1ac91, _Var2);
RealtimeObjectTimerLaunch(_Var1, "WYR_Circus_DestroyFakeItem_Timer", 100);

IF
ObjectTimerFinished((GUIDSTRING)_Var1, "WYR_Circus_DestroyFakeItem_Timer", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_BlockUseOfItem((CHARACTER)_Var1, S_WYR_Circus_FakeTreasurePile_000_8b340cd5-013d-49a0-888c-b1d3bb9495fb, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_TryStartAD(WYR_Circus_PAD_FakeTreasurePile_d0179aca-d190-9f10-9efa-4eb4a5b66c61, _Var1);
DB_CustomUseItemResponse(_Var1, S_WYR_Circus_FakeTreasurePile_000_8b340cd5-013d-49a0-888c-b1d3bb9495fb, 0);

IF
FlagSet(WYR_Circus_Event_LoveQuestionWrong_48899fa7-dc51-6e3b-db88-bf0a150921a5, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ShowError(_Var1, "WYR_Circus_LoveDryad dialog - only Avatars are supported");

IF
FlagSet(WYR_Circus_Event_LoveQuestionWrong_48899fa7-dc51-6e3b-db88-bf0a150921a5, (CHARACTER)_Var1, (INTEGER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Avatars(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(WYR_Circus_Event_LoveQuestionWrong_48899fa7-dc51-6e3b-db88-bf0a150921a5, _Var1, _Var2);
PROC_WYR_Circus_LoveQuestionWrong(_Var1);

PROC
PROC_WYR_Circus_LoveQuestionWrong((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_LoveGame_MistakesNow(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var2, 1, _Var3, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_LoveGame_MistakesNow(_Var2, _Var1);
DB_WYR_Circus_LoveGame_MistakesNow(_Var3, _Var1);

PROC
PROC_WYR_Circus_LoveQuestionWrong((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_WYR_Circus_LoveGame_MistakesNow(_, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_LoveGame_MistakesNow(1, _Var1);

IF
DB_WYR_Circus_LoveGame_MistakesNow(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_LoveGame_MistakeFlags(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
SetFlag(_Var3, _Var2, 0);

IF
DialogEnded(WYR_Circus_LoveDryad_d0c00951-4d09-d1a6-2ab3-6c6ba1932a25, _, _, _, _)
AND
DB_WYR_Circus_LoveGame_MistakesNow(_Var2, _Var3, _, _, _)
AND
DB_WYR_Circus_LoveGame_MistakeFlags(_Var2, _Var4, _, _, _)
THEN
NOT DB_WYR_Circus_LoveGame_MistakesNow(_Var2, _Var3);
ClearFlag(_Var4, _Var3, 0);

IF
DialogEnded(WYR_Circus_LoveDryad_d0c00951-4d09-d1a6-2ab3-6c6ba1932a25, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
AND
GetFlag(WYR_Circus_LoveDryad_Event_PassedLoveTest_10617f2f-11ff-1b2a-c694-d31b429e7735, _Var2, _Var1, _Var1, _Var1)
AND
DB_DialogPlayers(_Var1, _Var4, _, _Var1, _Var1)
AND
_Var4 != _Var2
AND
GetFlag(WYR_Circus_LoveDryad_Event_PickedCompanion_bb8086a2-b96d-3722-72c6-2bbab502fe53, _Var4, 1, _Var1, _Var1)
THEN
ApplyStatus(_Var2, "WYR_CIRCUS_LOVEDRYAD_BLESSING_AURA", -1, 1, S_WYR_Circus_LoveDryad_a8bce35d-17ee-46e3-8d56-1d0d29c4a01e);
ApplyStatus(_Var4, "WYR_CIRCUS_LOVEDRYAD_BLESSING_AURA", -1, 1, S_WYR_Circus_LoveDryad_a8bce35d-17ee-46e3-8d56-1d0d29c4a01e);

IF
DialogEnded(WYR_Circus_LoveDryad_d0c00951-4d09-d1a6-2ab3-6c6ba1932a25, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_DialogPlayers(_Var1, _Var2, _, _Var1, _Var1)
AND NOT
DB_Avatars(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(WYR_Circus_LoveDryad_Event_PickedCompanion_bb8086a2-b96d-3722-72c6-2bbab502fe53, _Var2, 1, _Var1, _Var1)
THEN
ClearFlag(WYR_Circus_LoveDryad_Event_PickedCompanion_bb8086a2-b96d-3722-72c6-2bbab502fe53, _Var2, _Var1);

PROC
PROC_FlagReactionAfterDialog((CHARACTER)_Var1, WYR_Circus_Event_OrderedStatue_9bd9aa22-d90e-6928-91df-2591988ceb24, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_WYR_Circus_CreateStatueCopy(_Var1);

PROC
PROC_WYR_Circus_CreateStatueCopy((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
Transform(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, _Var1, WYR_CircusStatue_502db098-3adb-4b82-afaa-60b042760de1);
CopyCharacterEquipment(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, _Var1);
SetOnStage(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, 1);
ApplyStatus(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, "WYR_CIRCUS_STATUE_PETRIFIED", -1);

PROC
PROC_WYR_Circus_CreateStatueCopy((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
NOT DB_WYR_Circus_Statue_NameSet(1);

PROC
PROC_WYR_Circus_CreateStatueCopy((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_StateNames(_Var2, _Var3, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_Statue_NameSet(1, _Var1, _Var1, _Var1, _Var1)
AND
IsTagged(_Var1, _Var2, 1, _Var1, _Var1)
THEN
DB_WYR_Circus_Statue_NameSet(1);
SetStoryDisplayName(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, _Var3);

PROC
PROC_WYR_Circus_CreateStatueCopy((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_WYR_Circus_Statue_NameSet(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_Statue_NameSet(1);
SetStoryDisplayName(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, "WYR_Circus_StatueName_Generic");

PROC
PROC_WYR_Circus_CreateStatueCopy((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_WYR_Circus_SendStatueToCamp(_Var1);

PROC
PROC_WYR_Circus_SendStatueToCamp((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_WYR_Circus_StatueSentToCamp(_Var1);

PROC
PROC_WYR_Circus_SendStatueToCamp((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_Statue_CampPosTriggers(_Var2, _Var3, _, _Var1, _Var1)
THEN
DB_ORI_OriginCampData(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, _Var2, _Var3);

PROC
PROC_WYR_Circus_SendStatueToCamp((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_ORI_SetupCamp(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, 1);

IF
DB_ActiveCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_StatueSentToCamp(_, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_Statue_CampPosTriggers(_Var1, _, _Var4, _Var1, _Var1)
AND NOT
DB_OffStage(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var4, 0);

IF
DB_ActiveCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_StatueSentToCamp(_, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_Statue_CampPosTriggers(_Var1, _, _Var4, _Var1, _Var1)
AND
DB_OffStage(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var4, 1);

PROC
PROC_LongRest()
AND
DB_WYR_Circus_StatueSentToCamp(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ApplyStatus(_Var1, "BLESS", -1, 0, S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309);

IF
DB_WYR_Circus_ClownPieces(_Var1, _Var2, _, _, _Var1)
THEN
DB_HasItemEvent(_Var1, _Var2);

IF
AddedTo((ITEM)_Var1, (CHARACTER)_Var2, _, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_WYR_Circus_ClownPieces(_Var1, _, _, _, _Var1)
AND NOT
DB_WYR_Circus_ClownPieces_PickedPieces(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd
THEN
DB_WYR_Circus_ClownPieces_PickedPieces(_Var1);
PROC_WYR_Circus_StartFoundClownCorpseVB(_Var2, _Var1);

IF
FlagSet(WYR_Circus_Merchant_State_AcquiredHand_90c6a782-e37d-4a9e-bd79-102636f749b2, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
DB_WYR_Circus_ClownPieces_PickedPieces(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd);

IF
FlagSet(WYR_Circus_Merchant_State_AcquiredHand_90c6a782-e37d-4a9e-bd79-102636f749b2, _, _, _, _)
AND
GetInventoryOwner(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, _Var3, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
THEN
PROC_WYR_Circus_StartFoundClownCorpseVB(_Var3, S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd);

IF
FlagSet((FLAG)_Var1, (CHARACTER)_Var2, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_Circus_ClownPieces(_, _Var1, _, _, _Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(WYR_Circus_State_BodyPartsHasAny_4fec1a52-6650-a377-983c-04e2c01d84cf, _Var2, 0, _Var1, _Var1)
THEN
SetFlag(WYR_Circus_State_ClownPiecesHasAny_4fec1a52-6650-a377-983c-04e2c01d84cf, _Var2, 0);

IF
FlagCleared((FLAG)_Var1, (CHARACTER)_Var2, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_Circus_ClownPieces(_, _Var1, _, _, _Var1)
AND
DB_PartyMembers(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(WYR_Circus_State_BodyPartsHasAny_4fec1a52-6650-a377-983c-04e2c01d84cf, _Var2, 1, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_HasAnyPieces(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(WYR_Circus_State_BodyPartsHasAny_4fec1a52-6650-a377-983c-04e2c01d84cf, _Var2, 0);

QRY
QRY_WYR_Circus_HasAnyPieces((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_ClownPieces(_, _Var3, _, _, _Var1)
AND
GetFlag(_Var3, _Var1, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
FlagSet((FLAG)_Var1, (CHARACTER)_Var2, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_Circus_ClownPieces(_, _Var1, _, _, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_HasPiecesToCollect(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(WYR_Circus_State_BodyPartsHasAll_73f56db8-afa1-4b5f-a7a6-611afddcf435, _Var2, 0);

IF
FlagCleared((FLAG)_Var1, (CHARACTER)_Var2, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_Circus_ClownPieces(_, _Var1, _, _, _Var1)
AND
DB_Players(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(WYR_Circus_State_BodyPartsHasAll_73f56db8-afa1-4b5f-a7a6-611afddcf435, _Var2, 1, _Var1, _Var1)
THEN
ClearFlag(WYR_Circus_State_BodyPartsHasAll_73f56db8-afa1-4b5f-a7a6-611afddcf435, _Var2, 0);

QRY
QRY_WYR_Circus_HasPiecesToCollect((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_Circus_ClownPieces(_, _Var3, _, _, _Var1)
AND
GetFlag(_Var3, _Var1, 0, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_WYR_Circus_HasPiecesToCollect((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetFlag(WYR_Circus_State_ClownPiecesHasHand_025d9d68-2786-9bb3-eeed-a89bf0f2ecc4, _Var1, 1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Merchant_State_AcquiredHand_90c6a782-e37d-4a9e-bd79-102636f749b2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
FlagSet(WYR_Circus_Merchant_State_AcquiredHand_90c6a782-e37d-4a9e-bd79-102636f749b2, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND NOT
QRY_WYR_Circus_HasPiecesToCollect(_Var3, _, _, _, _)
THEN
SetFlag(WYR_Circus_State_BodyPartsHasAll_73f56db8-afa1-4b5f-a7a6-611afddcf435, _Var3, 0);

IF
FlagSet(WYR_Circus_Event_BodyPartsGiveAll_6f4b86e3-fe42-aba9-f492-406acedebb64, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_WYR_Circus_ClownPieces(_Var3, _, _, _, _Var1)
THEN
ToInventory(_Var3, _Var1, 1);

IF
FlagSet(WYR_Circus_Event_BodyPartsGiveAll_6f4b86e3-fe42-aba9-f492-406acedebb64, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
ClearFlag(WYR_Circus_Event_BodyPartsGiveAll_6f4b86e3-fe42-aba9-f492-406acedebb64, _Var1, _Var2);

QRY
QRY_WYR_Circus_ClownPieces_LeftFindLessThan((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
SysCount("DB_WYR_Circus_ClownPieces_PickedPieces", 1, _Var2, _Var1, _Var1)
AND
SysCount("DB_WYR_Circus_ClownPieces", 4, _Var3, _Var1, _Var1)
AND
IntegerSubtract(_Var3, _Var2, _Var4, _Var1, _Var1)
AND
_Var4 < _Var1
THEN
DB_NOOP(1);

PROC
PROC_WYR_Circus_StartFoundClownCorpseVB((CHARACTER)_Var1, (ITEM)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_WYR_Circus_PrepareClownCorpseVBFlags(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_WYR_Circus_CanStartFoundClownCorpseVB()
THEN
StartVoiceBark(WYR_Circus_VB_FoundClownCorpse_77e43be7-4efc-e40e-5fd3-02cf42e48fc6, _Var1);

QRY
QRY_WYR_Circus_CanStartFoundClownCorpseVB()
AND
DB_GlobalFlag(WYR_Circus_State_MetDoppelgangerClown_c1d1c6ec-374b-bae1-6ad7-8289a1dfb346, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_WYR_Circus_CanStartFoundClownCorpseVB()
AND NOT
DB_GlobalFlag(WYR_Circus_State_MetDoppelgangerClown_c1d1c6ec-374b-bae1-6ad7-8289a1dfb346, _, _, _, _)
AND
DB_GlobalFlag(WYR_Circus_Event_ClownPiecesPickedHead_6f093bf5-5c08-d686-e7c3-2ede5a4f8a70, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_WYR_Circus_CanStartFoundClownCorpseVB()
AND NOT
DB_GlobalFlag(WYR_Circus_State_MetDoppelgangerClown_c1d1c6ec-374b-bae1-6ad7-8289a1dfb346, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_Event_ClownPiecesPickedHead_6f093bf5-5c08-d686-e7c3-2ede5a4f8a70, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_Event_ClownPiecesPickedHand_90794df8-03cc-c0bc-f9cb-2284586fe2c2, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_FoundCorpseSaidTableaux_7c8e0d00-b6ac-5316-70f7-057e5cd33a4d, _, _, _, _)
THEN
DB_NOOP(1);

QRY
QRY_WYR_Circus_PrepareClownCorpseVBFlags((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_WYR_Circus_ClownPieces(_Var1, _, _Var3, _, _Var1)
THEN
DB_WYR_Circus_FoundClownCorpseVB_EventFlag(_Var3);

QRY
QRY_WYR_Circus_PrepareClownCorpseVBFlags((ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Event_ClownPiecesOneLeft_b058bb0e-e7f1-0c0f-8e69-7c7ace5cad4d, _Var1, _Var1, _Var1, _Var1)
AND
QRY_WYR_Circus_ClownPieces_LeftFindLessThan(2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_FoundClownCorpseVB_EventFlag(WYR_Circus_Event_ClownPiecesOneLeft_b058bb0e-e7f1-0c0f-8e69-7c7ace5cad4d);

IF
DB_WYR_Circus_FoundClownCorpseVB_EventFlag(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(_Var1);

IF
VoiceBarkFailed(WYR_Circus_VB_FoundClownCorpse_77e43be7-4efc-e40e-5fd3-02cf42e48fc6, (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_Circus_FoundClownCorpseVB_EventFlag(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_FoundClownCorpseVB_EventFlag(_Var1);
PROC_GlobalClearFlagAndCache(_Var1);

IF
VoiceBarkEnded(WYR_Circus_VB_FoundClownCorpse_77e43be7-4efc-e40e-5fd3-02cf42e48fc6, _, _, _, _)
AND
DB_WYR_Circus_FoundClownCorpseVB_EventFlag(_Var2, _, _, _, _)
THEN
NOT DB_WYR_Circus_FoundClownCorpseVB_EventFlag(_Var2);
PROC_GlobalClearFlagAndCache(_Var2);

IF
FlagCleared((FLAG)_Var1, _, _, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_Circus_FoundClownCorpseVB_EventFlag(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_FoundClownCorpseVB_EventFlag(_Var1);

IF
FlagSet(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
DB_ItemInRegionFlag(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, S_WYR_Circus_MerchantHandArea_70df12a0-bb26-4d9d-9f74-a2b492b1187f, WYR_Circus_State_BodyPartHandInPlace_e9f45d6c-2dac-46a8-8aee-9f457f546d04);

IF
FlagSet(WYR_Circus_Event_AcquireHand_376d9749-78cb-20de-817e-ed880990bea0, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
IsInInventory(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, 0, _Var1, _Var1, _Var1)
THEN
ToInventory(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, _Var1, 1, 1, 1);

IF
FlagSet(WYR_Circus_Event_AcquireHand_376d9749-78cb-20de-817e-ed880990bea0, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
IsInInventory(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, 1, _Var1, _Var1, _Var1)
AND
GetInventoryOwner(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, S_WYR_Circus_Merchant_60e4431d-dee5-4af4-a05e-65896ec64f2f, _Var1, _Var1, _Var1)
THEN
ToInventory(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, _Var1, 1, 1, 1);

IF
FlagSet(WYR_Circus_Event_AcquireHand_376d9749-78cb-20de-817e-ed880990bea0, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_State_AcquiredHand_90c6a782-e37d-4a9e-bd79-102636f749b2);

QRY
QRY_CRIME_BlockRegisterCrime((CHARACTER)_Var1, (STRING)_Var2, S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, S_WYR_Circus_Merchant_60e4431d-dee5-4af4-a05e-65896ec64f2f, (INTEGER)_Var3)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_WYR_Circus_IsHandStealingCrime(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
CrimeGetNewID(_Var4, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_HandStealCrime(_Var1, _Var4);
PROC_CharacterRegisterCrime(_Var1, "WYR_Circus_HandSteal", S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, S_WYR_Circus_Merchant_60e4431d-dee5-4af4-a05e-65896ec64f2f, _Var4);

QRY
QRY_WYR_Circus_IsHandStealingCrime((STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
DB_WYR_Circus_HandCrimesFamilies(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_CRIME_IsCrimeFamilyMember(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_CrimeGetCustomInterrogationDialog(_, (INTEGER)_Var2, S_WYR_Circus_Merchant_60e4431d-dee5-4af4-a05e-65896ec64f2f, (CHARACTER)_Var3, _, _, _, _, _, _)
AND NOT
DB_WYR_Circus_RemoveWarningFlag(_Var3, _Var2, _, _, _)
AND
CrimeGetType(_Var2, "WYR_Circus_HandSteal", _, _, _)
THEN
SetFlag(WYR_Circus_Event_StoleHand_1a13616d-911e-40e2-88fa-06f9b97d0cdf, _Var3, 0);
DB_WYR_Circus_RemoveWarningFlag(_Var3, _Var2);

QRY
QRY_CrimeGetCustomWarning(S_WYR_Circus_Merchant_60e4431d-dee5-4af4-a05e-65896ec64f2f, "WYR_Circus_HandSteal", WYR_Circus_Merchant_808018b3-ccb7-6a1b-e561-f75a1db21839, (INTEGER)_Var1, (INTEGER)_Var1)
AND
CrimeGetCriminals(_Var1, _Var2, _, _, _)
AND NOT
DB_WYR_Circus_RemoveWarningFlag(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(WYR_Circus_Event_StoleHand_1a13616d-911e-40e2-88fa-06f9b97d0cdf, _Var2, 0);
DB_WYR_Circus_RemoveWarningFlag(_Var2, _Var1);

PROC
PROC_CRIME_Finished((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_Circus_HandStealCrime(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_RemoveWarningFlag(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
ClearFlag(WYR_Circus_Event_StoleHand_1a13616d-911e-40e2-88fa-06f9b97d0cdf, _Var2, 0);
NOT DB_WYR_Circus_RemoveWarningFlag(_Var2, _Var1);

PROC
PROC_CRIME_Finished((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_Circus_HandStealCrime(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
GetFlag(WYR_Circus_State_ClownPiecesHasHand_025d9d68-2786-9bb3-eeed-a89bf0f2ecc4, _Var3, 1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_State_AcquiredHand_90c6a782-e37d-4a9e-bd79-102636f749b2);

PROC
PROC_CRIME_Finished((INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_Circus_HandStealCrime(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_Circus_HandStealCrime(_Var2, _Var1);

IF
FlagSet(WYR_Circus_Merchant_State_AcquiredHand_90c6a782-e37d-4a9e-bd79-102636f749b2, _, _, _, _)
AND
DB_WYR_Circus_HandStealCrime(_Var3, _Var4, _, _, _)
AND
DB_WYR_Circus_RemoveWarningFlag(_Var3, _Var4, _, _, _)
THEN
ClearFlag(WYR_Circus_Event_StoleHand_1a13616d-911e-40e2-88fa-06f9b97d0cdf, _Var3, 0);
NOT DB_WYR_Circus_RemoveWarningFlag(_Var3, _Var4);

IF
DB_PermaDefeated(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, _, _, _, _)
AND
DB_GlobalFlag(WYR_Circus_State_PostCombat_ee4b2f6e-9d52-4bc5-bde6-bc0e1c015de4, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_State_AboutToLeave_39876ea2-3a3a-441d-96be-f907b6226239, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_State_AboutToLeave_39876ea2-3a3a-441d-96be-f907b6226239);

IF
FlagSet(WYR_Circus_Ringmaster_State_Rewarded_7a42ebcf-255e-853b-bad6-30cf36746c10, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_State_AboutToLeave_39876ea2-3a3a-441d-96be-f907b6226239);

PROC
PROC_LongRest()
AND NOT
DB_GlobalFlag(WYR_Circus_State_Gone_151fd307-4cb8-44ba-8998-40e1d748b707, _, _, _, _)
AND
DB_GlobalFlag(WYR_Circus_State_AboutToLeave_39876ea2-3a3a-441d-96be-f907b6226239, _, _, _, _)
THEN
PROC_WYR_Circus_MakeCircusDisappear();

PROC
PROC_WYR_Circus_MakeCircusDisappear()
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_State_Gone_151fd307-4cb8-44ba-8998-40e1d748b707);

PROC
PROC_WYR_Circus_MakeCircusDisappear()
AND
DB_WYR_Circus_Workers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Circus_DoNotDisappearWithCircus(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_DeadOutsideCircus(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetOnStage(_Var1, 0);

PROC
PROC_WYR_Circus_MakeCircusDisappear()
AND
DB_WYR_Circus_ShowPatrons(_Var1, _, _, _Var1, _Var1)
AND NOT
DB_WYR_Circus_DoNotDisappearWithCircus(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_WYR_Circus_DeadOutsideCircus(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_CancelDisappearOutOfSight(_Var1);
SetOnStage(_Var1, 0);

PROC
PROC_WYR_Circus_MakeCircusDisappear()
AND
DB_WYR_Circus_BeastCages(_, _Var2, _, _, _)
AND NOT
DB_WYR_Circus_DoNotDisappearWithCircus(_Var2, _, _, _, _)
AND NOT
QRY_WYR_Circus_DeadOutsideCircus(_Var2, _, _, _, _)
THEN
SetOnStage(_Var2, 0);

QRY
QRY_WYR_Circus_DeadOutsideCircus((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var1, S_WYR_Circus_SUB_22d3f3ff-3cbb-4240-a3ab-051889832375, 0, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_WYR_Circus_MakeCircusDisappear()
AND
DB_WYR_Circus_DisappearTarget(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetOnStage(_Var1, 0);

PROC
PROC_WYR_Circus_MakeCircusDisappear()
AND
DB_WYR_Circus_DisappearTarget_CheckTaken(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
IsInTrigger(_Var1, _Var2, 1, _Var1, _Var1)
THEN
SetOnStage(_Var1, 0);

PROC
PROC_WYR_Circus_MakeCircusDisappear()
THEN
UnloadLevelTemplate(LT_PLT_BGO_Circus_A_000_35ea4c7d-20e3-4ece-8f66-0b91b92cae09);
LoadLevelTemplate(LT_PLT_BGO_CircusAftermath_A_000_a9981a88-0781-4770-879d-73b888950564);
MusicPlayGeneral("Circus_Music_empty");

PROC
PROC_WYR_Circus_MakeCircusDisappear()
THEN
DB_OneShot_VoiceBarkTrigger(S_WYR_Circus_SUB_22d3f3ff-3cbb-4240-a3ab-051889832375, WYR_Circus_VB_CircusDisappeared_957b67af-c5ae-3bcc-ad76-0f5a16e87be6);
DB_PartyProgress_Trigger(S_WYR_Circus_SUB_22d3f3ff-3cbb-4240-a3ab-051889832375, WYR_Circus_Knows_Disappeared_e664f3d2-8d76-4fb6-8761-6b145eede1ee);
GoalCompleted;

PROC
PROC_WYR_Circus_StartCombat()
AND
IsReposed(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, 1, _, _, _)
THEN
EndRepose(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e);

QRY
QRY_SelectCustomDialog_AfterGenerics(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsReposed(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, 1, _Var1, _Var1, _Var1)
THEN
DB_WYR_Circus_Sleeper_TalkWhenWakeUp(_Var1);
SetEntityEvent(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, "GLO_Sit_ManualInterrupt", 1);
EndRepose(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e);

IF
ReposeRemoved(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, _, _, _, _)
AND
DB_WYR_Circus_Sleeper_TalkWhenWakeUp(_Var2, _, _, _, _)
AND
QRY_SpeakerIsAvailableAndInDialogRange(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, _Var2, _, _, _)
AND
QRY_StartDialog(WYR_Circus_DressingRoomSleeper_212375f0-7d44-feb8-ba41-cfeb14fc136b, S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, _Var2, _, _)
THEN
DB_NOOP(1);

IF
ReposeRemoved(S_WYR_Circus_DressingRoomSleeper_29846481-7c1a-449d-8e66-0017cbcd484e, _, _, _, _)
AND
DB_WYR_Circus_Sleeper_TalkWhenWakeUp(_Var2, _, _, _, _)
THEN
NOT DB_WYR_Circus_Sleeper_TalkWhenWakeUp(_Var2);

PROC
PROC_StartDialog_AddExtraSpeakers(WYR_Circus_Ringmaster_fc57170e-3acf-541c-0879-ca7bf0303426, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_RingmasterSkeletons(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
QRY_SpeakerIsInDialogRange(S_WYR_Circus_Ringmaster_c95af77b-6fc3-4c73-ac7c-087124f4b1e4, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, _Var2);

IF
FlagSet(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_SceneOver("WYR_Circus_RingmasterSkeletons_SceneDialogOnly");

PROC
PROC_WYR_Circus_OnCombatStarted()
THEN
PROC_WYR_Circus_RemoveCrowd();

PROC
PROC_WYR_Circus_RemoveCrowd()
AND
DB_WYR_Circus_Crowd(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TriggerSetCrowdSpawningEnable(_Var1, 0);
TriggerSetCrowdBehaviour(_Var1, 0);

PROC
PROC_FlagReactionAfterDialog((CHARACTER)_Var1, WYR_Circus_Event_WheelSendToJungle_c542b674-dde9-f9c3-b3e7-c3e17d3d5cca, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_WYR_Circus_SendToJungle(_Var1);

PROC
PROC_WYR_Circus_SendToJungle((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
DB_WYR_Jungle_BlackScreenChar(_Var1);
ScreenFadeTo(_Var1, 1.5, 0, "WYR_Jungle_FadeToBlack");
PlayEffect(_Var1, VFX_Script_Djinni_Teleport_7c79ada5-e179-5d0b-0557-29fca6201742, "");
PROC_Helper_SafeTeleportTo(_Var1, S_WYR_Jungle_StartPoint_46183c94-820c-4f06-88c4-3e1726a581cb, "WYR_Curcus_Event_TeleportToJungle", 0);
ApplyStatus(_Var1, "SNEAKING", -1, 1);

IF
ScreenFadeDone((INTEGER)_Var1, "WYR_Jungle_FadeToBlack", (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_Jungle_BlackScreenChar(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_Jungle_BlackScreenChar(_Var2);
ClearScreenFade(_Var2, 1, "WYR_Jungle_FadeToBlack");
RealtimeObjectTimerLaunch(_Var2, "WYR_Jungle_PAD_Timer", 2000);

IF
ObjectTimerFinished((CHARACTER)_Var1, "WYR_Jungle_PAD_Timer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_TryStartAD(WYR_Circus_PAD_EnteredJungle_370ba0b1-ab79-0dc2-321e-7dac091286bc, _Var1);

IF
Died((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var1, S_WYR_Jungle_SUB_8bb03671-b130-4b2f-877b-bc7eb8cc4d49, _Var1, _Var1, _Var1)
THEN
RealtimeObjectTimerLaunch(_Var1, "WYR_Circus_DiedInJungle", 2000);

IF
ObjectTimerFinished((CHARACTER)_Var1, "WYR_Circus_DiedInJungle", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
ApplyStatus(_Var1, "DEAD_WILL_O_WISP", -1, 1, NULL_00000000-0000-0000-0000-000000000000);
PlayEffect(_Var1, VFX_Script_FairyRing_Teleport_01_4af1c68d-79ee-ced0-4484-8e2b3b1fc95c, "");
PROC_Helper_SafeTeleportTo(_Var1, S_WYR_Circus_FromJungleDeadTeleportPoint_f4860043-9640-4361-8dea-549de7aaef25, "", 0);

IF
EntityEvent(_, "WYR_Jungle_Alioramus_01_LeftIntroArea", (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
NOT DB_TriggerEvents_AllPlayersLeft(S_WYR_Jungle_StartingArea_d1887a22-bb9d-4041-86ab-5249fec34cf4, "WYR_Jungle_Alioramus_01_LeftIntroArea");
SetEntityEvent(S_WYR_Jungle_Alioramus_01_b2bdcb69-3a93-4200-b64e-154f44723b71, "WYR_Jungle_Alioramus_01_Event_FinishIntro", 1);

IF
EntityEvent(_, "WYR_Jungle_Alioramus_01_LeftRoutineAArea", (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
NOT DB_TriggerEvents_AllPlayersLeft(S_WYR_Jungle_Alioramus_01_RoutineAArea_98ea94ec-3951-4318-a3b9-79cb74516540, "WYR_Jungle_Alioramus_01_LeftRoutineAArea");
SetEntityEvent(S_WYR_Jungle_Alioramus_01_b2bdcb69-3a93-4200-b64e-154f44723b71, "WYR_Jungle_Alioramus_01_Event_LeftRoutineAArea", 1);

IF
EntityEvent(_, "WYR_Jungle_Alioramus_04_LeftIntroArea", (GUIDSTRING)_, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
NOT DB_TriggerEvents_AllPlayersLeft(S_WYR_Jungle_Alioramus_04_SkipIntroArea_a0e1ca0c-c23b-416b-80e1-b66d96ef5de7, "WYR_Jungle_Alioramus_04_LeftIntroArea");
SetEntityEvent(S_WYR_Jungle_Alioramus_04_76f78311-aa65-4108-84b6-61f5f033ac0d, "WYR_Jungle_Alioramus_04_Event_FinishIntro", 1);

IF
EnteredTrigger((CHARACTER)_Var1, S_WYR_Jungle_Alioramus_StartFeedingIntroArea_af4c7263-125b-468c-8d43-1450990c9b7e, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_TriggerUnregisterForPlayers(S_WYR_Jungle_Alioramus_StartFeedingIntroArea_af4c7263-125b-468c-8d43-1450990c9b7e);
PROC_GlobalSetFlagAndCache(WYR_Jungle_Event_StartFeedingIntro_e409feaa-398a-4c3a-b76b-59de927fb547);

IF
TurnStarted(S_WYR_Jungle_Alioramus_Female_60a49df8-b266-40b4-bc44-2ac1ec36a7cc, _, _, _, _)
AND NOT
DB_WYR_Jungle_DinoWokeup(S_WYR_Jungle_Alioramus_05_c6df7a48-97c7-4138-9ec4-a1e2a9dbad87, _, _, _, _)
AND NOT
DB_Defeated(S_WYR_Jungle_Alioramus_05_c6df7a48-97c7-4138-9ec4-a1e2a9dbad87, _, _, _, _)
AND
DB_Is_InCombat(S_WYR_Jungle_Alioramus_Female_60a49df8-b266-40b4-bc44-2ac1ec36a7cc, _Var1, _Var1, _Var1, _Var1)
AND
IsInTrigger(S_WYR_Jungle_Alioramus_Female_60a49df8-b266-40b4-bc44-2ac1ec36a7cc, S_WYR_Jungle_CaveArea_9f238ec0-6b58-4192-88cb-3e6e907d80ea, 1, _Var1, _Var1)
AND
IsInTrigger(S_WYR_Jungle_Alioramus_05_c6df7a48-97c7-4138-9ec4-a1e2a9dbad87, S_WYR_Jungle_CaveArea_9f238ec0-6b58-4192-88cb-3e6e907d80ea, 1, _Var1, _Var1)
AND
HasAppliedStatus(S_WYR_Jungle_Alioramus_Female_60a49df8-b266-40b4-bc44-2ac1ec36a7cc, "SILENCED", 0, _Var1, _Var1)
AND
HasAppliedStatus(S_WYR_Jungle_Alioramus_05_c6df7a48-97c7-4138-9ec4-a1e2a9dbad87, "SILENCED", 0, _Var1, _Var1)
AND
HasAppliedStatus(S_WYR_Jungle_Alioramus_05_c6df7a48-97c7-4138-9ec4-a1e2a9dbad87, "SLEEPING", 1, _Var1, _Var1)
THEN
DB_WYR_Jungle_DinoWokeup(S_WYR_Jungle_Alioramus_05_c6df7a48-97c7-4138-9ec4-a1e2a9dbad87);
RemoveStatus(S_WYR_Jungle_Alioramus_05_c6df7a48-97c7-4138-9ec4-a1e2a9dbad87, "SLEEPING");

IF
UseFinished((CHARACTER)_Var1, S_WYR_Jungle_Portal_21b6cd38-39b9-4369-9838-c0e4e5e7acce, 1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_OnlyOncePerUser(_Var1, "WYR_Circus_ReturnFromJungle_OnlyOnce", _Var1, _Var1, _Var1)
THEN
RealtimeObjectTimerLaunch(_Var1, "WYR_Circus_ReturnFromJungle_Timer", 1000);

IF
ObjectTimerFinished((CHARACTER)_Var1, "WYR_Circus_ReturnFromJungle_Timer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_TryStartAD(WYR_Circus_PAD_ReturnedFromJungle_ac5d699c-8e49-26b5-65ea-3f396c37730e, _Var1);

IF
DB_Is_InCombat(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_WYR_Jungle_Dinos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_Players(_Var3, _Var1, _Var1, _Var1, _Var1)
AND
DB_Is_InCombat(_Var3, _Var2, _Var1, _Var1, _Var1)
THEN
DB_WYR_Jungle_NoticedByDinos(_Var3);

IF
UseFinished((CHARACTER)_Var1, S_WYR_Jungle_Portal_21b6cd38-39b9-4369-9838-c0e4e5e7acce, 1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_Jungle_NoticedByDinos(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Jungle_Dinos(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_PeacefulResolve(_Var2);

IF
TextEvent("WYR_Circus_RemoveCrowd", _, _, _, _)
THEN
PROC_WYR_Circus_RemoveCrowd();

IF
TextEvent("WYR_Circus_TestStatue", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
RemoveTransforms(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309);
RealtimeObjectTimerLaunch(_Var1, "WYR_Circus_TestStatue_Timer", 1000);

IF
ObjectTimerFinished((CHARACTER)_Var1, "WYR_Circus_TestStatue_Timer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_WYR_Circus_CreateStatueCopy(_Var1);
TeleportTo(S_WYR_Circus_StatueDummy_c2ef6bde-3dbe-4ff5-99ca-8120445a8309, S_WYR_Circus_StatuePos_bb49d2b2-a8fa-4b75-9764-0f3823eb0dd7, "", 0, 0, 0, 1, 1);

IF
TextEvent("WYR_Circus_GetQuest", _, _, _, _)
THEN
PROC_GlobalClearFlagAndCache(Debug_WYR_Circus_GetDribblesQuest_16042831-9eae-2ca4-7340-ac5d7f2a1e03);

IF
TextEvent("WYR_Circus_GetClownPieces", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFlag(Debug_WYR_Circus_GetAllDribblesParts_4a29bfbc-a0d3-d2fb-4807-85d5623aab9c, _Var1, 0);

IF
TextEvent("WYR_Circus_TestCheese", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_Circus_WheelWorkerTransform(_Var1);

IF
TextEvent("WYR_Circus_TestJungle", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_FortuneWheelWorker_State_WonGrandPrize_70949ccb-0be4-d4a0-86b3-421939e1b17e);
SetFlag(WYR_Circus_Event_WheelSendToJungle_c542b674-dde9-f9c3-b3e7-c3e17d3d5cca, _Var1, 0);
PROC_WYR_Circus_SendToJungle(_Var1);

IF
TextEvent("WYR_Circus_TestDisappear", _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45);
PROC_GlobalSetFlagAndCache(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87);
PROC_WYR_Circus_KillAllAbsolutists();
PROC_WYR_Circus_BorrowClown();
PROC_WYR_Circus_MakeCircusDisappear();

IF
TextEvent("WYR_Circus_TestFlamingFists", _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45);
PROC_GlobalSetFlagAndCache(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87);
PROC_WYR_Circus_LeftCombat_AbsolutistsWon();

IF
FlagSet(Debug_WYR_Circus_GetDribblesQuest_16042831-9eae-2ca4-7340-ac5d7f2a1e03, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_WYR_Circus_KillAllAbsolutists();
PROC_GlobalSetFlagAndCache(WYR_Circus_Clown_State_Hostile_59c1f674-0985-4d4d-9679-b8a1e4982f45);
PROC_GlobalSetFlagAndCache(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87);
PROC_GlobalClearFlagAndCache(Debug_WYR_Circus_GetDribblesQuest_16042831-9eae-2ca4-7340-ac5d7f2a1e03);

IF
FlagSet(Debug_WYR_Circus_GetAllDribblesParts_4a29bfbc-a0d3-d2fb-4807-85d5623aab9c, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_WYR_Circus_Debug_GetAllCTYParts();
PROC_WYR_Circus_Debug_GetAllWYRParts();

PROC
PROC_WYR_Circus_Debug_GetAllCTYParts()
AND
DB_CurrentLevel("CTY_Main_A", _, _, _, _)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_ClownPieces(_Var2, _, _, _, _Var1)
AND
_Var2 != S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd
AND
_Var2 != S_WYR_Circus_DribblesBodyPart_Torso_ffb44db4-4573-4ddd-89f9-24b790e0c838
THEN
ToInventory(_Var2, _Var1, 1, 1, 1);

PROC
PROC_WYR_Circus_Debug_GetAllWYRParts()
AND
DB_CurrentLevel("BGO_Main_A", _, _, _, _)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ToInventory(S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd, _Var1, 1, 1, 1);
ToInventory(S_WYR_Circus_DribblesBodyPart_Torso_ffb44db4-4573-4ddd-89f9-24b790e0c838, _Var1, 1, 1, 1);
PROC_GlobalSetFlagAndCache(WYR_Circus_State_AcquiredHand_90c6a782-e37d-4a9e-bd79-102636f749b2);

IF
FlagSet(Debug_WYR_Circus_GetAllDribblesParts_4a29bfbc-a0d3-d2fb-4807-85d5623aab9c, (GUIDSTRING)_Var1, (INTEGER)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
ClearFlag(Debug_WYR_Circus_GetAllDribblesParts_4a29bfbc-a0d3-d2fb-4807-85d5623aab9c, _Var1, _Var2);

IF
TextEvent("WYR_Circus_LoveDryadTestBlessing", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
ApplyStatus(_Var1, "WYR_CIRCUS_LOVEDRYAD_BLESSING_AURA", -1, 1, S_WYR_Circus_LoveDryad_a8bce35d-17ee-46e3-8d56-1d0d29c4a01e);

IF
FlagSet(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_Knows_ClownDead_b0651ffa-2c1d-41b9-b4e8-1af9677db7e0, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_Knows_RingmasterDoesntCareClownDead_b11102de-d799-518f-aa4d-c3663074b3d1, _, _, _, _)
THEN
QuestUpdate("WYR_Clown", "GotQuest_DoesntKnow");

IF
FlagSet(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_Circus_Knows_ClownDead_b0651ffa-2c1d-41b9-b4e8-1af9677db7e0, _, _, _, _)
AND
DB_GlobalFlag(WYR_Circus_Knows_RingmasterDoesntCareClownDead_b11102de-d799-518f-aa4d-c3663074b3d1, _, _, _, _)
THEN
QuestUpdate("WYR_Clown", "GotQuest_DoesntKnow_SuggestedDead");

IF
FlagSet(WYR_Circus_Knows_DoppelgangerKilledDribbles_a1c76c3e-b21e-7a81-c594-5a34a0f44473, _, _, _, _)
AND
DB_GlobalFlag(WYR_Circus_State_GotDribblesQuest_780f6847-84a7-ff3e-f8bb-670d625c1a87, _, _, _, _)
AND
DB_Players(_Var3, _, _, _, _)
AND
QRY_QuestUpdateIsUnlockedForAny("WYR_Clown", "GotQuest_DoesntKnow", _, _, _)
THEN
QuestUpdate("WYR_Clown", "LearnedDead_SwD");

IF
DB_WYR_Circus_ClownPieces_PickedPieces(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_Circus_ClownPieces(_Var1, _, _, _Var4, _Var1)
THEN
QuestUpdate("WYR_Clown", _Var4);

IF
DB_WYR_Circus_ClownPieces_PickedPieces(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != S_WYR_Circus_DribblesBodyPart_Hand_dedf021f-478c-4a06-9150-f442e1cd2ecd
THEN
QuestUpdate("WYR_Clown", "LearnedSplit");

IF
DB_WYR_Circus_ClownPieces_PickedPieces(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_State_ClownPiecesHasAll_73f56db8-afa1-4b5f-a7a6-611afddcf435, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_Circus_Event_ClownPiecesOneLeft_b058bb0e-e7f1-0c0f-8e69-7c7ace5cad4d, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_QuestUpdateIsUnlockedForAny("WYR_Clown", "FoundHalf", _Var1, _Var1, _Var1)
AND
QRY_WYR_Circus_ClownPieces_LeftFindLessThan(4, _Var1, _Var1, _Var1, _Var1)
THEN
QuestUpdate("WYR_Clown", "FoundHalf");


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act3"
