Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_GLO_ExclusiveFlag("WYR_GortashState", WYR_KillDirectorGortash_State_BeforeCeremony_23a195be-a8d7-4678-94af-743dea65fd95);
DB_GLO_ExclusiveFlag("WYR_GortashState", WYR_KillDirectorGortash_State_ConductingCeremony_9c978077-c7a4-46bf-9528-a5133f61c875);
DB_GLO_ExclusiveFlag("WYR_GortashState", WYR_KillDirectorGortash_State_AfterCeremony_a05a6945-21ad-400d-80bc-7b4934571c57);
DB_GLO_ExclusiveFlag("WYR_GortashState", WYR_KillDirectorGortash_State_InOffice_12233623-2dc3-4dbe-b493-b491fdf6321d);
SetFlag(WYR_KillDirectorGortash_State_BeforeCeremony_23a195be-a8d7-4678-94af-743dea65fd95, NULL_00000000-0000-0000-0000-000000000000);
DB_WYR_KillDirectorGortash_MainDialogs(WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112, S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8);
DB_WYR_KillDirectorGortash_MainDialogs(WYR_KillDirectorGortash_GortashInOffice_b032707c-5cf3-be12-b590-d35f59019fd7, S_WYR_KillDirectorGortash_OfficeMainRoom_34997f3f-f6a9-4a86-bd6d-6867360539a4);
DB_CustomDialogRange(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, 50);
DB_DefeatedEvent(S_WYR_AudienceHall_SteelWatcher_003_6622cf7f-a119-4c42-9a1e-b7cc4543dd19, WYR_KillDirectorGortash_State_SteelWatcherDefeated_ccd2193e-9852-46be-8a93-f07548d6a51e);
DB_PartyProgress_Trigger(S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, WYR_KillDirectorGortash_State_VisitedAudienceHall_8984a8f4-c0fa-4797-967b-b8024a7db9b7);
TriggerRegisterForCharacter(S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, WYR_KillDirectorGortash_AfterCeremony_bd68e69e-3339-1c5f-b173-2591a0319985, NULL_00000000-0000-0000-0000-000000000000, 0, NULL_00000000-0000-0000-0000-000000000000);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, WYR_KillDirectorGortash_Ravengard_13f29ef9-ffeb-2bf4-af5e-af7f4a003fa6, NULL_00000000-0000-0000-0000-000000000000, 0, NULL_00000000-0000-0000-0000-000000000000);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_001_36105366-a525-4e6f-8e25-db6da2682978, WYR_KillDirectorGortash_Patriar_001_213b1cb3-45d1-7fde-a2e3-b57c25954608, S_WYR_KillDirectorGortash_Bench_001_fdcfff0e-f082-4461-bba0-f6f1451998f7, 1, S_WYR_KillDirectorGortash_Patriar_001_DeathPos_8d984605-1c81-4850-885f-4a163af799af);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_002_e03365dc-cb4b-4e80-b2fd-311b09e6986d, WYR_KillDirectorGortash_Patriar_002_d3508c21-6182-e7df-08cb-be2fd7d17a57, S_WYR_KillDirectorGortash_Bench_001_fdcfff0e-f082-4461-bba0-f6f1451998f7, 1, S_WYR_KillDirectorGortash_Patriar_002_DeathPos_c0a20081-92be-40d5-9fd6-925e1920786d);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_003_059d0242-62c5-436f-93d7-fa2db6135a3a, WYR_KillDirectorGortash_Patriar_003_e850ecea-9e64-c435-80bf-e9cffc142a01, S_WYR_KillDirectorGortash_Bench_002_37ddc8aa-8dac-4082-8761-486b109ebd53, 1, S_WYR_KillDirectorGortash_Patriar_003_DeathPos_8579af06-a982-4739-82ed-53494f614430);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_004_83c28f0d-bf63-45e9-af28-6d85c1a4037b, WYR_KillDirectorGortash_Patriar_004_3d79a0c2-46c6-ca28-a5a1-c6171c4dd1eb, S_WYR_KillDirectorGortash_Bench_002_37ddc8aa-8dac-4082-8761-486b109ebd53, 1, S_WYR_KillDirectorGortash_Patriar_004_DeathPos_4bfc3a2d-4a26-4315-a213-e5d9872299b5);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_005_2d1c22c9-8d45-4d43-8e81-0ba7fd3a2171, WYR_KillDirectorGortash_Patriar_005_23ee8b05-7c6b-ae7d-9f75-66b0ca99fb87, S_WYR_KillDirectorGortash_Bench_003_f82489c9-53a8-4035-a0f9-56c31d60b04a, 1, S_WYR_KillDirectorGortash_Patriar_005_DeathPos_fddb2ed7-0f89-45ed-bcd7-7739ad72449d);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_006_9341d924-9124-45b2-b6c4-029960b5d101, WYR_KillDirectorGortash_Patriar_006_199b994c-8064-50fa-e227-ee42865e61f0, S_WYR_KillDirectorGortash_Bench_003_f82489c9-53a8-4035-a0f9-56c31d60b04a, 1, S_WYR_KillDirectorGortash_Patriar_006_DeathPos_c7a54ccc-fc69-4676-8baa-263335c7d1c2);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_007_1f626306-2d28-4a64-93a8-67a35a03416e, WYR_KillDirectorGortash_Patriar_007_017c001c-4620-3d40-25e1-f42e1c627b1e, S_WYR_KillDirectorGortash_Bench_003_f82489c9-53a8-4035-a0f9-56c31d60b04a, 1, S_WYR_KillDirectorGortash_Patriar_007_DeathPos_05de0a14-2b4a-4c6a-afb9-ad16f03e39c0);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_008_b3150f21-fe73-4827-af23-1e0a74555a2a, WYR_KillDirectorGortash_Patriar_008_89cc0810-bdc4-8d19-b54c-bb40a9144f7f, S_WYR_KillDirectorGortash_Bench_003_f82489c9-53a8-4035-a0f9-56c31d60b04a, 1, S_WYR_KillDirectorGortash_Patriar_008_DeathPos_808e4ab6-e6d9-4c03-b64f-e7ab05894e09);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_009_0239c83f-230a-40e7-8876-9c8d0af0e2cd, WYR_KillDirectorGortash_Patriar_009_9d2f9093-3cae-9fa1-e84c-f1e728b351bc, S_WYR_KillDirectorGortash_Bench_004_71cd64c4-3c83-4721-b4df-c5a013533c15, 1, S_WYR_KillDirectorGortash_Patriar_009_DeathPos_4f50dbca-5bf8-463b-9de7-eb847d22a01a);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_010_da3508f0-91ce-48c1-ab58-f3b359cd3315, WYR_KillDirectorGortash_Patriar_010_31d09ee1-0790-bcef-b630-b6df240ed2b8, S_WYR_KillDirectorGortash_Bench_004_71cd64c4-3c83-4721-b4df-c5a013533c15, 1, S_WYR_KillDirectorGortash_Patriar_010_DeathPos_50093956-5944-4473-892d-95abf3f6e5ad);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_011_506afd91-bbc2-40f6-8e19-a27ade5a3356, WYR_KillDirectorGortash_Patriar_011_d8020b1b-31c5-8cc1-8cfe-ed36a75fc210, S_WYR_KillDirectorGortash_Bench_004_71cd64c4-3c83-4721-b4df-c5a013533c15, 1, S_WYR_KillDirectorGortash_Patriar_011_DeathPos_71decef4-d576-4ffe-a62a-9928d60f03d4);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_KillDirectorGortash_Patriar_012_4ae37244-c9eb-41b3-82fb-c302abd01f1e, WYR_KillDirectorGortash_Portyr_e74f958a-9c17-2da6-b5c1-818fad42ff21, S_WYR_KillDirectorGortash_Bench_004_71cd64c4-3c83-4721-b4df-c5a013533c15, 1, S_WYR_KillDirectorGortash_Patriar_012_DeathPos_7dccaeaf-a32b-4a59-84e8-7a4686a92d09);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_CeremonyRoom_Patriar_001_8363e570-a4b9-4e98-99c8-380a68caeb7f, WYR_CeremonyRoom_Patriar_001_5cd4f34a-0260-540d-e569-c2dfa8dfd301, S_WYR_CeremonyRoom_Bench_001_b4458943-2c11-4472-b989-50a7da89c733, 1, S_WYR_CeremonyRoom_Patriar_001_DeathPos_13f07d8d-62e1-4fc7-8792-74a1879041c9);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_CeremonyRoom_Patriar_002_5b5795b8-2bcb-4121-b978-65a1c244af00, WYR_CeremonyRoom_Patriar_002_391c7684-50c4-5b11-5b0b-8317ef5031c5, S_WYR_CeremonyRoom_Bench_002_a8c3a054-5b6c-4b81-accc-23d175db3cce, 1, S_WYR_CeremonyRoom_Patriar_002_DeathPos_85c8ad1b-b044-465e-a8a9-5a8e44adea57);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_CeremonyRoom_Patriar_003_3b7c5f23-a704-47bb-b064-5215ed4d531a, WYR_CeremonyRoom_Patriar_003_6df40d3c-7712-3dc9-40ba-507c49a41947, S_WYR_CeremonyRoom_Bench_002_a8c3a054-5b6c-4b81-accc-23d175db3cce, 1, S_WYR_CeremonyRoom_Patriar_003_DeathPos_ca9d21b0-607c-4a42-9aea-cd7e3ee9e753);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_CeremonyRoom_Patriar_004_2836a3ec-2b08-4be8-be50-72dea1ebce26, WYR_CeremonyRoom_Patriar_004_74083589-5734-1e4b-34c8-b3d9a6621c7e, S_WYR_CeremonyRoom_Bench_004_599ed37a-5cf9-44fe-a346-877dbc739b16, 1, S_WYR_CeremonyRoom_Patriar_004_DeathPos_376f888a-25a5-44b8-924d-196a76bca130);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_CeremonyRoom_Patriar_005_97631bfb-69f6-41ff-9f12-a76a0b6da398, WYR_CeremonyRoom_Patriar_005_5b5fe471-494b-0b92-ac96-648364ecf227, S_WYR_CeremonyRoom_Bench_004_599ed37a-5cf9-44fe-a346-877dbc739b16, 1, S_WYR_CeremonyRoom_Patriar_005_DeathPos_31a5caed-ab63-40b0-8f7f-cb9341fc83c3);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_CeremonyRoom_Patriar_006_8bbaa981-9b92-4f19-bc4a-b2b5cb63b8e5, WYR_CeremonyRoom_Patriar_006_4a83405d-8893-c59e-29de-8520989bd0fa, S_WYR_CeremonyRoom_Bench_002_a8c3a054-5b6c-4b81-accc-23d175db3cce, 1, S_WYR_CeremonyRoom_Patriar_006_DeathPos_8c418eab-e2bf-4c67-aee8-4f6c0bfdbd99);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_CeremonyRoom_Patriar_007_cc7ec874-9dc0-4750-8346-3c14797e2174, WYR_CeremonyRoom_Patriar_007_bcfa60ca-0e6d-08b0-3bb8-b1272958b811, S_WYR_CeremonyRoom_Bench_003_18bc8648-6e3f-42b8-a3e9-d873af2ed0ed, 1, S_WYR_CeremonyRoom_Patriar_007_DeathPos_9b5a40ca-8b9a-403f-972a-fc679270432a);
DB_WYR_KillDirectorGortash_AudienceHallNPCs(S_WYR_CeremonyRoom_Patriar_008_bd73107e-0af0-427f-a00e-46a937db8c30, WYR_CeremonyRoom_Patriar_008_468c6abe-73fc-d1a2-d616-9fa19c897c68, S_WYR_CeremonyRoom_Bench_003_18bc8648-6e3f-42b8-a3e9-d873af2ed0ed, 1, S_WYR_CeremonyRoom_Patriar_008_DeathPos_d7f3accb-c71f-46d8-bd4b-8b83788d8afd);
DB_WYR_KillDirectorGortash_CustomDeathTypes(S_WYR_CeremonyRoom_Patriar_002_5b5795b8-2bcb-4121-b978-65a1c244af00, 0);
DB_WYR_KillDirectorGortash_CustomDeathTypes(S_WYR_KillDirectorGortash_Patriar_005_2d1c22c9-8d45-4d43-8e81-0ba7fd3a2171, 0);
DB_WYR_KillDirectorGortash_CustomDeathTypes(S_WYR_KillDirectorGortash_Patriar_011_506afd91-bbc2-40f6-8e19-a27ade5a3356, 0);
DB_WYR_KillDirectorGortash_CustomDeathTypes(S_WYR_WyrmRock_MessHallBodyguard_001_2c553951-81ba-472e-98e3-7e688116c8c0, 0);
DB_WYR_KillDirectorGortash_CustomDeathTypes(S_WYR_WyrmRock_MessHallBodyguard_002_214fd102-81e0-4492-8bef-389c66dcd7dc, 0);
DB_WYR_KillDirectorGortash_CustomDeathTypes(S_WYR_WyrmRock_MessHallBodyguard_004_80511a28-308f-486c-ac56-2c84e1c36f91, 0);
DB_WYR_KillDirectorGortash_AudienceHallBanites(S_WYR_KillDirectorGortash_AudienceHallBanite_001_42dbfa85-8b0a-4a8b-8908-56f9f2948e00, WYR_KillDirectorGortash_AudienceHallBanite_001_4d66d85c-fb77-c7bf-9de0-8f270ea98965);
DB_WYR_KillDirectorGortash_AudienceHallBanites(S_WYR_KillDirectorGortash_AudienceHallBanite_002_e2d07af4-91b5-4c7f-846d-0f6b307a5051, WYR_KillDirectorGortash_AudienceHallBanite_002_33891947-9f54-71b5-cf6d-8d781c0a798b);
DB_WYR_KillDirectorGortash_AudienceHallBanites(S_WYR_KillDirectorGortash_AudienceHallBanite_003_3ac130c7-7b9e-4b3e-b061-1880ce5d9104, WYR_KillDirectorGortash_AudienceHallBanite_003_cdd0283b-184d-7cab-d77d-b97eec4c608f);
DB_WYR_KillDirectorGortash_AudienceHallBanites(S_WYR_KillDirectorGortash_AudienceHallBanite_004_3b9603ec-83e6-48e7-becf-379b2799196b, WYR_KillDirectorGortash_AudienceHallBanite_004_43616566-7f77-b222-673b-a6f5734316f7);
DB_WYR_KillDirectorGortash_AudienceHallBanites(S_WYR_KillDirectorGortash_AudienceHallBanite_005_9a735337-002d-4abd-9416-d620c70058ac, WYR_KillDirectorGortash_AudienceHallBanite_005_799a8e14-2946-38e7-9d69-4bd9369535d0);
DB_WYR_KillDirectorGortash_AudienceHallBanites(S_WYR_KillDirectorGortash_AudienceHallBanite_006_fea7408c-01ad-4395-8b21-0f19d71c4b83, WYR_KillDirectorGortash_AudienceHallBanite_006_f4d6239e-8eca-8734-b269-d1247cf99424);
DB_WYR_KillDirectorGortash_AudienceHallServants(S_WYR_KillDirectorGortash_Servant_001_d49569a2-eff7-4f88-9398-13952ec9cc57, WYR_KillDirectorGortash_Servant_001_33cab501-c179-eb84-0286-8fcff5da45a5);
DB_WYR_KillDirectorGortash_AudienceHallServants(S_WYR_KillDirectorGortash_Servant_002_9b38d803-fe7b-4e46-af82-767baf24fd79, WYR_KillDirectorGortash_Servant_002_6601fc40-5ebc-4c3b-f8d4-852e150ed653);
DB_WYR_KillDirectorGortash_AudienceHallServants(S_WYR_KillDirectorGortash_Servant_003_74757625-8bdf-48e7-afa6-94e461a11288, WYR_KillDirectorGortash_Servant_003_eab405fc-73fb-be5b-c98e-dd0063201f18);
DB_WYR_KillDirectorGortash_AudienceHallServants(S_WYR_KillDirectorGortash_Servant_004_0008fbb4-88e7-44b5-b58e-6c6fe9a4a49e, WYR_KillDirectorGortash_Servant_004_4c87b7f3-1ce0-37c0-18d3-42c0c9e92c21);
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(S_WYR_AudienceHall_SteelWatcher_000_a8544d37-571c-4bcb-8b4c-c499dbe9c421);
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(S_WYR_AudienceHall_SteelWatcher_001_499e5f36-5640-425f-9ff6-13cb646a0bf8);
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(S_WYR_AudienceHall_SteelWatcher_002_6cb28cb2-905a-4a45-8040-c14dba941b26);
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(S_WYR_AudienceHall_SteelWatcher_003_6622cf7f-a119-4c42-9a1e-b7cc4543dd19);
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(S_WYR_AudienceHall_SteelWatcher_004_fc380f9b-a440-4356-aaa1-7e74311f17e7);
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(S_WYR_AudienceHall_SteelWatcher_005_12f4bdd7-aaf9-49c1-acb2-8c2e6c13c0c6);
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(S_WYR_AudienceHall_SteelWatcher_006_23dfde6d-09f4-4e9b-9ebf-99094f1a269e);
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(S_WYR_AudienceHall_SteelWatcher_007_3184594a-cd9a-4faf-921b-a60ff2c71727);
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(S_WYR_AudienceHall_SteelWatcher_009_12adabf6-7d53-4e9e-a3e9-17637666b14d);
DB_GlobalFlagReactionAfterDialog(WYR_KillDirectorGortash_Event_MoveGortashToHisOffice_b73e0d24-c6ba-43a1-b848-18f1a5333c1c, WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112);
DB_GlobalFlagReactionAfterDialog(WYR_KillDirectorGortash_Event_MoveGortashToHisOffice_b73e0d24-c6ba-43a1-b848-18f1a5333c1c, WYR_KillDirectorGortash_AfterCeremony_bd68e69e-3339-1c5f-b173-2591a0319985);
DB_DoNotRemoveKnockedOutCharacterOnLongRest(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac);
DB_PermaDefeatedEvent(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, GLO_Gortash_State_PermaDefeated_74dd56ff-7e00-42a6-a0f3-0d122f364769);
DB_GLO_CharacterCorpseDialog(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, WYR_KillDirectorGortash_Gortash_Dead_2bfcfcc8-b2a9-9e62-ad2b-a1d2fdea094a);
DB_GLO_CharacterCorpseDialog(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, WYR_KillDirectorGortash_Ravengard_Dead_d51302f7-cabe-3f93-f178-93bf2c16f4a8);
DB_SceneNoHostileContinuousDisturbance("WYR_KillDirectorGortash_Ceremony");
DB_WYR_KillDirectorGortash_MessHallBodyguards(S_WYR_WyrmRock_MessHallBodyguard_001_2c553951-81ba-472e-98e3-7e688116c8c0, S_WYR_WyrmRock_MessHallBodyguard_001_BackupPosition_12561e8e-a30d-43e2-ab9e-03f151a981fa);
DB_WYR_KillDirectorGortash_MessHallBodyguards(S_WYR_WyrmRock_MessHallBodyguard_002_214fd102-81e0-4492-8bef-389c66dcd7dc, S_WYR_WyrmRock_MessHallBodyguard_002_BackupPosition_7a7d71a3-1a4c-43c9-bf6d-aaceccf1a0bc);
DB_WYR_KillDirectorGortash_MessHallBodyguards(S_WYR_WyrmRock_MessHallBodyguard_003_36078682-fde3-40cc-8f26-c238cb10c75e, S_WYR_WyrmRock_MessHallBodyguard_003_BackupPosition_2ecd663b-90ee-4bb3-be8e-4aa28bd29e8c);
DB_WYR_KillDirectorGortash_MessHallBodyguards(S_WYR_WyrmRock_MessHallBodyguard_004_80511a28-308f-486c-ac56-2c84e1c36f91, S_WYR_WyrmRock_MessHallBodyguard_004_BackupPosition_1849198b-d1e1-46db-ad0d-b92a0029674a);
DB_WYR_KillDirectorGortash_MessHallBodyguards(S_WYR_WyrmRock_MessHallBodyguard_005_ed5b7cbe-b4e3-4687-a4e5-d2b120720b97, S_WYR_WyrmRock_MessHallBodyguard_005_BackupPosition_236487db-d443-437a-a0c5-88d6b6d3615d);
DB_WYR_KillDirectorGortash_MessHallBodyguards(S_WYR_WyrmRock_MessHallBodyguard_006_6e383e38-7cde-4180-8eeb-b406ea90e365, S_WYR_WyrmRock_MessHallBodyguard_006_BackupPosition_c93a6d73-f662-4c86-8314-08f78526378b);
DB_WYR_KillDirectorGortash_MessHallBodyguards(S_WYR_WyrmRock_MessHallBodyguard_007_362acbc1-e8ce-44f7-8086-f01b7175070b, S_WYR_WyrmRock_MessHallBodyguard_007_BackupPosition_81d45b34-a7b4-493d-aec9-adedfc241ba3);
DB_WYR_KillDirectorGortash_MessHallBodyguards(S_WYR_WyrmRock_MessHallBodyguard_008_c183baeb-2677-4340-8896-eccfb3ff2952, S_WYR_WyrmRock_MessHallBodyguard_008_BackupPosition_5e723858-38af-4efb-8c0b-a104f0fdc246);
DB_WYR_KillDirectorGortash_MessHallBodyguards(S_WYR_WyrmRock_MessHallBodyguard_009_ef4022b9-6a19-469a-a822-8fbea29bf727, S_WYR_WyrmRock_MessHallBodyguard_009_BackupPosition_e6c93269-9e6c-4315-96e8-0346acdd567c);
DB_CustomForbiddenItemCrimes(S_WYR_WyrmRock_DoorToRoof_99cede9e-36e3-49cc-97c0-b6799d498e91, "WYR_WyrmRock_DoorToRoofUsed", "WYR_WyrmRock_DoorToRoofUsed");
DB_CustomForbiddenItemCrimes(S_Teleport_InvisibleDoor_A_WyrmRockBottomSpiral_dc367158-c538-4637-8316-3c1b6a2d196c, "WYR_WyrmRock_DoorToRoofUsed", "WYR_WyrmRock_DoorToRoofUsed");
DB_DropMutingStatussesDialog(WYR_WyrmRock_RoofAccess_89d0563f-5e34-c3a8-631c-896f98e5563e);
DB_ItemOwnerShipTriggers("BGO_Main_A", S_WYR_KillDirectorGortash_OfficeOwnershipArea_fe965400-0534-43f3-8065-e10aa4ba9175, S_WYR_KillDirectorGortash_GortashsBodyguard_001_8b142ad1-8ca5-487c-9ecd-93fb4172ea25);
DB_ItemOwnerShipTriggersFallback(S_WYR_KillDirectorGortash_OfficeOwnershipArea_fe965400-0534-43f3-8065-e10aa4ba9175, S_WYR_KillDirectorGortash_GortashsBodyguard_004_dbbe5f44-5a5b-457e-b76a-809de2dff5bc);
PROC_TriggerRegisterForPlayers(S_WYR_WyrmRock_GroundFloor_f470521a-d53c-4239-ad06-5f6ef55bd611);
PROC_TriggerRegisterForPlayers(S_WYR_GortashsOfficeArea_d3c1c480-47bd-48cf-95c2-1ba9ed5a4bd0);
PROC_TriggerRegisterForPlayers(S_WYR_WyrmRock_RoofArea_6f590602-360a-4b7f-b936-f04f44a33dee);
TriggerRegisterForCharacter(S_WYR_WyrmRock_RoofArea_6f590602-360a-4b7f-b936-f04f44a33dee, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac);
TriggerRegisterForCharacter(S_WYR_GortashsOfficeArea_d3c1c480-47bd-48cf-95c2-1ba9ed5a4bd0, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac);
DB_WYR_KillDirectorGortash_Banites(S_WYR_KillDirectorGortash_GortashsBodyguard_001_8b142ad1-8ca5-487c-9ecd-93fb4172ea25, S_WYR_KillDirectorGortash_GortashsBodyguard_004_28024c2c-59f2-4a36-aa41-dd16e6dc1820);
DB_WYR_KillDirectorGortash_Banites(S_WYR_KillDirectorGortash_GortashsBodyguard_002_56627fa7-4dd5-4651-8de7-7419e74a314b, S_WYR_KillDirectorGortash_GortashsBodyguard_005_6833bb9a-c1a5-458c-99c5-4104042ffaa0);
DB_WYR_KillDirectorGortash_Banites(S_WYR_KillDirectorGortash_GortashsBodyguard_003_cc8cc22b-d9d0-4a82-bfa1-c90d6d216406, S_WYR_KillDirectorGortash_GortashsBodyguard_006_dbbe5f44-5a5b-457e-b76a-809de2dff5bc);
DB_GLO_DefeatCounter_AllDefeatedGlobalFlag("WYR_KillDirectorGortash_MainBodyguards", WYR_KillDirectorGortash_State_MainBodyguardsDefeated_fbbfcae5-a621-444c-a437-a46010d80ce9);
DB_Dialogs(S_WYR_KillDirectorGortash_GortashsBodyguard_001_8b142ad1-8ca5-487c-9ecd-93fb4172ea25, WYR_GortashsBodyguard_001_3c47d50c-fe98-8ee0-cfee-ce43b6977d72);
DB_Dialogs(S_WYR_KillDirectorGortash_GortashsBodyguard_002_56627fa7-4dd5-4651-8de7-7419e74a314b, WYR_GortashsBodyguard_002_e29b73e7-75c3-b460-b2e5-04a60a5883c4);
DB_Dialogs(S_WYR_KillDirectorGortash_GortashsBodyguard_003_cc8cc22b-d9d0-4a82-bfa1-c90d6d216406, WYR_GortashsBodyguard_003_5b07c18b-ee8f-128a-62f5-d60fd500ae03);
DB_Dialogs(S_WYR_KillDirectorGortash_GortashsBodyguard_004_dbbe5f44-5a5b-457e-b76a-809de2dff5bc, WYR_GortashsBodyguard_004_22c6732d-0f9a-2d45-f82f-af9ef6aecccc);
DB_Dialogs(S_WYR_KillDirectorGortash_GortashsBodyguard_005_6833bb9a-c1a5-458c-99c5-4104042ffaa0, WYR_GortashsBodyguard_005_174e2912-c08c-d12d-4951-b3e94a041e67);
DB_Dialogs(S_WYR_KillDirectorGortash_GortashsBodyguard_006_28024c2c-59f2-4a36-aa41-dd16e6dc1820, WYR_GortashsBodyguard_006_f6ff6e80-c607-c34e-fa70-c6f80c3e7d89);
DB_WYR_KillDirectorGortash_RoofSteelWatchers(S_WYR_Roof_SteelWatcher_001_bd69f993-6c54-4571-820d-1ad6b11dbcfe, 1);
DB_WYR_KillDirectorGortash_RoofSteelWatchers(S_WYR_Roof_SteelWatcher_002_50341882-155e-4fe1-8e10-fc432a4de5db, 1);
DB_WYR_KillDirectorGortash_RoofSteelWatchers(S_WYR_Roof_SteelWatcher_003_73bc5c98-5eb8-499d-b935-00a71280ae5a, 1);
DB_WYR_KillDirectorGortash_RoofSteelWatchers(S_WYR_WyrmRock_Roof_SniperSteelWatcher_61013091-60c9-4d36-bbb3-7c866fb47feb, 0);
DB_WYR_KillDirectorGortash_ActiveSteelWatcher(S_WYR_GortashsOffice_SteelWatcher_5967b1c5-8e3c-4064-83e3-5219aa204c3d);
DB_WYR_KillDirectorGortash_SteelWatcherReplacement(S_WYR_Roof_SteelWatcher_001_bd69f993-6c54-4571-820d-1ad6b11dbcfe);
DB_WYR_KillDirectorGortash_SteelWatcherReplacement(S_WYR_Roof_SteelWatcher_002_50341882-155e-4fe1-8e10-fc432a4de5db);
DB_WYR_KillDirectorGortash_SteelWatcherReplacement(S_WYR_Roof_SteelWatcher_003_73bc5c98-5eb8-499d-b935-00a71280ae5a);
DB_PermaDefeatedEvent(S_GLO_Orin_bf24e0ec-a3a6-4905-bd2d-45dc8edf8101, GLO_Orin_State_PermaDefeated_c716e4d9-e6ed-445c-a710-ee4d91c67298);
DB_DropMutingStatussesDialog(WYR_KillDirectorGortash_NetherbrainMindmeld_673f3fd9-0e41-8d53-153b-72af69991378);
DB_GlobalFlagReactionAfterDialog(WYR_KillDirectorGortash_State_GortashTurnedHostile_c003c217-b263-4473-9e4f-9a90aaf43cc9, WYR_KillDirectorGortash_GortashInOffice_b032707c-5cf3-be12-b590-d35f59019fd7);
DB_WYR_KillDirectorGortash_DefaultBodyguards(S_WYR_KillDirectorGortash_GortashsBodyguard_001_8b142ad1-8ca5-487c-9ecd-93fb4172ea25);
DB_WYR_KillDirectorGortash_DefaultBodyguards(S_WYR_KillDirectorGortash_GortashsBodyguard_002_56627fa7-4dd5-4651-8de7-7419e74a314b);
DB_WYR_KillDirectorGortash_DefaultBodyguards(S_WYR_KillDirectorGortash_GortashsBodyguard_003_cc8cc22b-d9d0-4a82-bfa1-c90d6d216406);
DB_WYR_KillDirectorGortash_DefaultBodyguards(S_WYR_KillDirectorGortash_SteelWatcher_5967b1c5-8e3c-4064-83e3-5219aa204c3d);
DB_WYR_KillDirectorGortash_CeremonyInfoObjectTemplates(WYR_Posthouse_GortashCoronationPoster_9dc895b8-4247-44e3-a343-60622843ff09);
DB_WYR_KillDirectorGortash_CeremonyInfoObjectTemplates(UNI_WYR_CoronationAccessPass_77cd8eaa-2cde-4a53-bc76-71fb48624406);
DB_TrespassTrigger(S_WYR_WyrmRock_RoofTrespass_000_0327c2c9-798d-48ed-a7a8-c8952d80d635, NULL_00000000-0000-0000-0000-000000000000, "WYR_WyrmRock_RoofTrespass");
DB_TrespassTrigger(S_WYR_WyrmRock_RoofTrespass_001_179fbca9-41c7-4ba6-9f1d-297e93473b0c, NULL_00000000-0000-0000-0000-000000000000, "WYR_WyrmRock_RoofTrespass");
DB_TrespassTrigger(S_WYR_WyrmRock_RoofTrespass_002_190e61db-cad8-4f88-addc-8ef63bec3049, S_WYR_WyrmRock_TrespassOutTrigger_fc0ab1fd-2186-46c5-adea-0fa59cd33f87);
DB_WYR_KillDirectorGortash_CeremonyAutoCompletionConditions(GLO_Gortash_HasMet_74cffb8f-fc93-4c67-a12e-aa2cc8890291);
DB_WYR_KillDirectorGortash_CeremonyAutoCompletionConditions(IRN_IronThrone_State_Destroyed_91795368-af06-4b56-9ac1-b78995aa9ea9);
DB_WYR_KillDirectorGortash_CeremonyAutoCompletionConditions(GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b);
DB_WYR_KillDirectorGortash_CeremonyAutoCompletionConditions(WYR_WyrmRock_State_AlertState_3d238a15-bb39-411a-8023-23385c98f2b8);
DB_WYR_KillDirectorGortash_ForbiddenCrimes("Steal");
DB_WYR_KillDirectorGortash_ForbiddenCrimes("Vandalise");
DB_WYR_KillDirectorGortash_ForbiddenCrimes("MoveForbiddenItem");
DB_WYR_KillDirectorGortash_ForbiddenCrimes("UseForbiddenItem");
PROC_TriggerRegisterForPlayers(S_WYR_KillDirectorGortash_RavengardRemovalArea_244e4e54-52bd-4812-bac7-6206166e5195);
DB_DoNotFaceDialog(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, WYR_KillDirectorGortash_AD_BeforeCeremony_0d95b9b2-fd21-63d4-a86c-7a6073203476);
DB_DoNotFaceDialog(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, WYR_KillDirectorGortash_AD_BeforeCeremony_0d95b9b2-fd21-63d4-a86c-7a6073203476);
DB_DoNotFaceDialog(S_WYR_DillardPortyr_4ae37244-c9eb-41b3-82fb-c302abd01f1e, WYR_KillDirectorGortash_AD_BeforeCeremony_0d95b9b2-fd21-63d4-a86c-7a6073203476);
DB_DoNotFaceDialog(S_WYR_Patriar_001_36105366-a525-4e6f-8e25-db6da2682978, WYR_KillDirectorGortash_AD_BeforeCeremony_0d95b9b2-fd21-63d4-a86c-7a6073203476);
DB_DoNotFaceDialog(S_WYR_Patriar_002_e03365dc-cb4b-4e80-b2fd-311b09e6986d, WYR_KillDirectorGortash_AD_BeforeCeremony_0d95b9b2-fd21-63d4-a86c-7a6073203476);
DB_DoNotFaceDialog(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, WYR_KillDirectorGortash_AD_AfterCeremony_bc07218f-1a0b-70ad-934b-c7c110f6d648);
DB_DoNotFaceDialog(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, WYR_KillDirectorGortash_AD_AfterCeremony_bc07218f-1a0b-70ad-934b-c7c110f6d648);
DB_DoNotFaceDialog(S_WYR_DillardPortyr_4ae37244-c9eb-41b3-82fb-c302abd01f1e, WYR_KillDirectorGortash_AD_AfterCeremony_bc07218f-1a0b-70ad-934b-c7c110f6d648);
DB_DoNotFaceDialog(S_WYR_Patriar_001_36105366-a525-4e6f-8e25-db6da2682978, WYR_KillDirectorGortash_AD_AfterCeremony_bc07218f-1a0b-70ad-934b-c7c110f6d648);
DB_DoNotFaceDialog(S_WYR_Patriar_002_e03365dc-cb4b-4e80-b2fd-311b09e6986d, WYR_KillDirectorGortash_AD_AfterCeremony_bc07218f-1a0b-70ad-934b-c7c110f6d648);
DB_WYR_KillDirectorGortash_FakePatriars(S_WYR_CoronationHallWitness_01_b3048943-8bf0-4819-b13a-90a9aa9d44eb, S_WYR_CoronationHallWitness_01_DeathPos_22dcdc4d-4283-4c36-ac6b-017d9823392a);
DB_WYR_KillDirectorGortash_FakePatriars(S_WYR_CoronationHallWitness_02_44646c53-a11f-4430-9bd3-57b154ebe40d, S_WYR_CoronationHallWitness_02_DeathPos_41812c13-d98c-4e14-b1da-d8ab5b627cd7);
DB_WYR_KillDirectorGortash_FakePatriars(S_WYR_CoronationHallWitness_03_e30086c1-9717-4f9d-9752-4b9d69505ed3, S_WYR_CoronationHallWitness_03_DeathPos_9fcaa155-9e8c-4269-b2c9-f7bbf4040969);
DB_WYR_KillDirectorGortash_FakePatriars(S_WYR_CoronationHallWitness_04_f6903d56-6f4b-4574-a9d6-4c07c87e0924, S_WYR_CoronationHallWitness_04_DeathPos_1c4ed1be-dcc2-447d-abaf-89e777a0256f);
DB_WYR_KillDirectorGortash_FakePatriars(S_WYR_CoronationHallWitness_05_9d4dcc39-79c0-4451-8445-6e55d2ca6e02, S_WYR_CoronationHallWitness_05_DeathPos_b218cc2c-80ee-45c7-a10e-771280c3f12f);
DB_WYR_KillDirectorGortash_FakePatriars(S_WYR_CoronationHallWitness_06_2df6edc3-6a62-43d7-bf18-4041f7507175, S_WYR_CoronationHallWitness_06_DeathPos_f4c4bdb2-2440-42d0-b2df-194472f5aa0a);
DB_WYR_KillDirectorGortash_FakePatriars(S_WYR_CoronationHallWitness_07_254b0dba-2d9c-4a2b-8296-e1464be21fef, S_WYR_CoronationHallWitness_07_DeathPos_167433a3-df5a-4005-bac6-383200223b5e);
DB_WYR_KillDirectorGortash_FakePatriars(S_WYR_CoronationHallWitness_08_e944f197-5db8-42ca-a506-66ec0db0607e, S_WYR_CoronationHallWitness_08_DeathPos_d74f5740-16df-408c-911a-d87ffb0d423c);
DB_WYR_KillDirectorGortash_FakePatriars(S_WYR_CoronationHallWitness_09_b12eff34-7557-4eed-9279-5c143ce46b71, S_WYR_CoronationHallWitness_09_DeathPos_14e87cb7-6d76-4c06-83d4-5b4502411b98);
DB_WYR_KillDirectorGortash_CrowdsAtEntrance(CCT_BsG_RFG_TalkREAC_054_f5874485-88ee-4aac-a830-38ba70e4abd3);
DB_WYR_KillDirectorGortash_CrowdsAtEntrance(CCT_BsG_RFG_Talk_055_a7060238-6fdf-4d64-8458-8af82a03ea9f);

KBSECTION
IF
DB_WYR_KillDirectorGortash_AudienceHallNPCs(_Var1, _Var2, _, _, _)
THEN
DB_DoNotFaceDialog(_Var1, WYR_KillDirectorGortash_AD_AudienceHallGroupDialog_0d95b9b2-fd21-63d4-a86c-7a6073203476);
DB_SceneManager(_Var1, "WYR_KillDirectorGortash_Ceremony");
DB_SpotPlayers(_Var1, "WYR_KillDirectorGortash_Ceremony", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_SpotPlayers_IncludeWildshapedPlayers(_Var1, "WYR_KillDirectorGortash_Ceremony");
DB_SpotPlayers_SpotTrigger(_Var1, "WYR_KillDirectorGortash_Ceremony", S_WYR_KillDirectorGortash_CeremonySpotArea_100d8f61-8c18-477a-b0d1-d400f7740e81);
DB_Dialogs(_Var1, _Var2);

IF
DB_WYR_KillDirectorGortash_AudienceHallNPCs(_Var1, _, _Var3, _, _)
AND
_Var3 != NULL_00000000-0000-0000-0000-000000000000
THEN
Use(_Var1, _Var3, "");

IF
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
_Var1 != S_WYR_AudienceHall_SteelWatcher_004_fc380f9b-a440-4356-aaa1-7e74311f17e7
THEN
DB_SceneManager(_Var1, "WYR_KillDirectorGortash_Ceremony");

IF
DB_WYR_KillDirectorGortash_Banites(_, _Var2, _, _, _)
THEN
PROC_SetOnStage(_Var2, 0);

IF
DB_WYR_KillDirectorGortash_AudienceHallBanites(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_Dialogs(_Var1, _Var2);
PROC_SetOnStage(_Var1, 0);

IF
DB_WYR_KillDirectorGortash_AudienceHallServants(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_Dialogs(_Var1, _Var2);

IF
DB_WYR_KillDirectorGortash_MainDialogs(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_DropMutingStatussesDialog(_Var1);
PROC_TriggerRegisterForParty(_Var2);

IF
DB_DialogName(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_DialogEnding(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_WYR_KillDirectorGortash_MainDialogs(_Var1, _Var3, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var4, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(_Var4, _Var3, _Var1, _Var1, _Var1)
AND NOT
DB_HiddenCharacters(_Var4, _, _Var1, _Var1, _Var1)
AND NOT
DB_DialogPlayers(_, _Var4, _, _Var1, _Var1)
THEN
PROC_DialogAddListeningActor(_Var2, _Var4);

QRY
QRY_SelectCustomDialog_AfterGenerics((CHARACTER)_Var1, (CHARACTER)_Var2, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_KillDirectorGortash_AudienceHallNPCs(_Var1, _, _, _, _)
AND
DB_GlobalFlag(WYR_KillDirectorGortash_State_BeforeCeremony_23a195be-a8d7-4678-94af-743dea65fd95, _Var1, _Var1, _Var1, _Var1)
AND
QRY_WYR_KillDirectorGortash_StartCeremonyDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_SpotPlayers_Spotted((GUIDSTRING)_Var1, "WYR_KillDirectorGortash_Ceremony", (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_WYR_KillDirectorGortash_AudienceHallNPCs(_Var1, _, _, _, _)
AND
DB_GlobalFlag(WYR_KillDirectorGortash_State_BeforeCeremony_23a195be-a8d7-4678-94af-743dea65fd95, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_KillDirectorGortash_StartCeremonyDialogPassed(1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_WYR_KillDirectorGortash_StartCeremonyDialog(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_KillDirectorGortash_StartCeremonyDialogPassed(1);

QRY
QRY_WYR_KillDirectorGortash_StartCeremonyDialog((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
QRY_WYR_KillDirectorGortash_CeremonyOrOMFailed(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_WYR_KillDirectorGortash_CeremonyOrOMFailed((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
QRY_StartDialog(WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1, _Var1, _Var1)
AND NOT
DB_QRYRTN_StartDialog_FailReason("OriginMomentOverride", _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DialogStarted(WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
SetFlag(WYR_KillDirectorGortash_State_ConductingCeremony_9c978077-c7a4-46bf-9528-a5133f61c875);

IF
FlagSet(WYR_KillDirectorGortash_Event_SyncGortashAndRavengardPositions_45f954b5-2d4f-4705-a374-5e1bf723e6c2, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_CharacterMoveTo(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_WYR_KillDirectorGortash_GortashAfterCeremonyPos_dd449a60-f892-4170-bdef-26f24a5afd84, "Walk", "");
PROC_CharacterMoveTo(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, S_WYR_KillDirectorGortash_RavengardAfterCeremonyPos_4077a027-c2f9-410e-889a-63da89f9948e, "Walk", "");

IF
DialogEnded(WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112, _, (INTEGER)_, (INTEGER)_, (INTEGER)_)
THEN
SetFlag(WYR_KillDirectorGortash_State_AfterCeremony_a05a6945-21ad-400d-80bc-7b4934571c57);

IF
FlagSet(WYR_KillDirectorGortash_State_AfterCeremony_a05a6945-21ad-400d-80bc-7b4934571c57, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
NOT DB_CustomDialogRange(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, 50);
SetFlag(GLO_Gortash_HasMet_74cffb8f-fc93-4c67-a12e-aa2cc8890291);
SetFlag(WYR_KillDirectorGortash_State_GortashBecameArchduke_b91a5012-d49b-429d-9b86-b75686fa7582);
ObjectSetTitle(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_GortashAfterCeremony");

PROC
PROC_GlobalFlagReactionAfterDialog(WYR_KillDirectorGortash_Event_MoveGortashToHisOffice_b73e0d24-c6ba-43a1-b848-18f1a5333c1c, _, _, _, _)
THEN
PROC_NotifyWhenReadyToMoveOn(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_GortashIsReadyToMoveToHisOffice");

PROC
PROC_ReadyToMoveOn(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_GortashIsReadyToMoveToHisOffice", _, _, _)
THEN
PROC_WYR_KillDirectorGortash_MoveGortashToHisOffice();

PROC
PROC_WYR_KillDirectorGortash_MoveGortashToHisOffice()
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_State_HasRoofAccess_7582278e-27b8-4788-a511-2ff3d3af42bf);
TriggerRegisterForCharacter(S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac);
PROC_CharacterMoveTo(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_WYR_GortashsPositionInOffice_fff3874c-e03b-4802-b0ba-e3584b8ca5ee, "Walk", "WYR_KillDirectorGortash_ArrivedAtOffice");
PROC_WYR_KillDirectorGortash_UpdateRoofSteelWatchersFaction();

IF
LeftTrigger(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, _, _, _)
AND
DB_GlobalFlag(WYR_KillDirectorGortash_State_AfterCeremony_a05a6945-21ad-400d-80bc-7b4934571c57, _, _, _, _)
THEN
PROC_SceneManager_RemoveFromScene(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_Ceremony");
TriggerUnregisterForCharacter(S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac);
SetCombatGroupID(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "");

PROC
PROC_WYR_KillDirectorGortash_UpdateRoofSteelWatchersFaction()
AND
DB_WYR_KillDirectorGortash_RoofSteelWatchers(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_SetRelationToPlayers(ACT3_WYR_WyrmRock_RoofSteelWatchers_523adbc8-5a94-4b33-aaac-1d1941fb1ac8, 50);

PROC
PROC_LevelUnloading("BGO_Main_A", (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1, (FLAG)_Var1)
AND
DB_WYR_KillDirectorGortash_CeremonyAutoCompletionConditions(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_OnlyOnce("WYR_KillDirectorGortash_CeremonyAftermath", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_KillDirectorGortash_CeremonyAftermath();

PROC
PROC_WYR_KillDirectorGortash_CeremonyAftermath()
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_CeremonyAftermath", _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_EndCeremony();

PROC
PROC_WYR_KillDirectorGortash_EndCeremony()
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_State_CeremonyEnded_9aeab401-c087-4f2e-9894-859df23680dc);

PROC
PROC_WYR_KillDirectorGortash_EndCeremony()
THEN
PROC_WYR_KillDirectorGortash_RemoveServantsFromAudienceHall();
PROC_WYR_KillDirectorGortash_RemovePatriarsFromAudienceHall();
PROC_WYR_KillDirectorGortash_ReplaceFlamingFistsInAudienceHall();
PROC_WYR_KillDirectorGortash_RemoveRavengardFromAudienceHall();
PROC_WYR_KillDirectorGortash_ReplaceBodyguardsInOffice();
PROC_WYR_KillDirectorGortash_TeleportGortashToOffice();

PROC
PROC_WYR_KillDirectorGortash_RemovePatriarsFromAudienceHall()
AND
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_SendPatriarsHome();

PROC
PROC_WYR_KillDirectorGortash_RemovePatriarsFromAudienceHall()
AND NOT
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_KillPatriars();

PROC
PROC_WYR_KillDirectorGortash_SendPatriarsHome()
AND
DB_WYR_KillDirectorGortash_AudienceHallNPCs(_Var1, _, _, 1, _)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_WYR_KillDirectorGortash_SendPatriarsHome()
AND
DB_WYR_KillDirectorGortash_FakePatriars(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_WYR_KillDirectorGortash_SendPatriarsHome()
AND
DB_WYR_WyrmRock_MessHallBodyguards(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_WYR_KillDirectorGortash_KillPatriars()
AND
DB_WYR_KillDirectorGortash_AudienceHallNPCs(_Var1, _, _, 1, _Var4)
THEN
TeleportTo(_Var1, _Var4, "WYR_KillDirectorGortash_CharacterTeleportedToPostCeremonyDeath");

PROC
PROC_WYR_KillDirectorGortash_KillPatriars()
AND
DB_WYR_KillDirectorGortash_FakePatriars(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, _Var2, "WYR_KillDirectorGortash_CharacterTeleportedToPostCeremonyDeath");

PROC
PROC_WYR_KillDirectorGortash_KillPatriars()
AND
DB_WYR_WyrmRock_MessHallBodyguards(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, _Var2, "WYR_KillDirectorGortash_CharacterTeleportedToPostCeremonyDeath");

IF
EntityEvent((GUIDSTRING)_Var1, "WYR_KillDirectorGortash_CharacterTeleportedToPostCeremonyDeath", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND NOT
DB_WYR_KillDirectorGortash_CustomDeathTypes(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_CorpseCleanup_Ignore(_Var1);
Die(_Var1, 0, NULL_00000000-0000-0000-0000-000000000000, 1, 1, 1);
DB_WYR_KillDirectorGortash_SpawnBlood(_Var1);

IF
EntityEvent((GUIDSTRING)_Var1, "WYR_KillDirectorGortash_CharacterTeleportedToPostCeremonyDeath", (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_WYR_KillDirectorGortash_CustomDeathTypes(_Var1, _Var2, _Var1, _Var1, _Var1)
THEN
DB_CorpseCleanup_Ignore(_Var1);
Die(_Var1, _Var2, NULL_00000000-0000-0000-0000-000000000000, 1, 1, 1);

PROC
PROC_WYR_KillDirectorGortash_KillPatriars()
THEN
DB_WYR_KillDirectorGortash_PatriarsKilled(1);

QRY
QRY_CorpseLooting_BlockMakeOwned((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_KillDirectorGortash_PatriarsKilled(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_KillDirectorGortash_AudienceHallNPCs(_Var1, _, _, 1, _)
THEN
DB_NOOP(1);

QRY
QRY_CorpseLooting_BlockMakeOwned((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_KillDirectorGortash_PatriarsKilled(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_KillDirectorGortash_FakePatriars(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_CorpseLooting_BlockMakeOwned((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_KillDirectorGortash_PatriarsKilled(1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_KillDirectorGortash_MessHallBodyguards(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
FlagSet(CURRENTREGION_BGO_Main_A_11239767-48ad-4879-8312-b9164b6e4978, _, _, _, _)
AND
DB_OnlyOnce("WYR_KillDirectorGortash_CeremonyAftermath", _, _, _, _)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_CeremonyAftermath_DelayedActions", _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_SpawnBlood();
PROC_WYR_KillDirectorGortash_RemovePatriarCrowds();

PROC
PROC_WYR_KillDirectorGortash_SpawnBlood()
AND
DB_WYR_KillDirectorGortash_SpawnBlood(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
CreatePuddle(_Var1, "SurfaceBlood", 3, 15, 12, 12, 1);

PROC
PROC_WYR_KillDirectorGortash_SpawnBlood()
THEN
CreatePuddle(S_WYR_KillDirectorGortash_BloodSplatter_dce43aa1-eec5-44d5-b296-47c889264f75, "SurfaceBlood", 3, 15, 12, 12, 1);

PROC
PROC_WYR_KillDirectorGortash_RemovePatriarCrowds()
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_RemoveCrowdsFromAudienceHall", _, _, _, _)
AND
DB_WYR_WyrmRock_Crowds(_Var1, "WYR_WyrmRock_AudienceHall", _Var1, _Var1, _Var1)
THEN
TriggerSetCrowdSpawningEnable(_Var1, 0);
TriggerDespawnCrowd(_Var1);

PROC
PROC_WYR_KillDirectorGortash_RemovePatriarCrowds()
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_RemoveCrowdsFromMessHall", _, _, _, _)
AND
DB_WYR_WyrmRock_Crowds(_Var1, "WYR_WyrmRock_MessHall", _Var1, _Var1, _Var1)
THEN
TriggerSetCrowdSpawningEnable(_Var1, 0);
TriggerDespawnCrowd(_Var1);

PROC
PROC_WYR_KillDirectorGortash_ReplaceFlamingFistsInAudienceHall()
AND NOT
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
AND
DB_WYR_WyrmRock_AudienceHallGuards(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_WYR_KillDirectorGortash_ReplaceFlamingFistsInAudienceHall()
AND NOT
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
THEN
PROC_SetOnStage(S_WYR_WyrmRock_RoofGuard_001_2de31d40-ad10-4051-8901-4ad9609bcf6c, 0);

PROC
PROC_WYR_KillDirectorGortash_ReplaceFlamingFistsInAudienceHall()
AND NOT
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
AND
DB_WYR_KillDirectorGortash_AudienceHallBanites(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 1);

PROC
PROC_WYR_KillDirectorGortash_ReplaceFlamingFistsInAudienceHall()
THEN
NOT DB_ItemOwnerShipTriggersFallback(S_WYR_WyrmsRock_AudienceHall_Ownership_a6ea8c9d-a3c6-4525-b20f-716b6cbfecbe, S_WYR_WyrmRock_AudienceHallGuard_001_d3dea7b0-3c9d-431b-9671-e6a00b726a9c);
NOT DB_ItemOwnerShipTriggersFallback(S_WYR_WyrmsRock_AudienceHall_Ownership_a6ea8c9d-a3c6-4525-b20f-716b6cbfecbe, S_WYR_KillDirectorGortash_AudienceHallBanite_001_42dbfa85-8b0a-4a8b-8908-56f9f2948e00);

PROC
PROC_WYR_KillDirectorGortash_RemoveServantsFromAudienceHall()
AND
DB_WYR_KillDirectorGortash_AudienceHallServants(_Var1, _, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

PROC
PROC_WYR_KillDirectorGortash_RemoveRavengardFromAudienceHall()
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_RemoveRavengardFromAudienceHall", _, _, _, _)
THEN
PROC_SetOnStage(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 0);
SetCanFight(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 1);
SetCanJoinCombat(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 1);
PROC_WYR_KillDirectorGortash_RemoveRavengardFromAudienceHall_Intern();

PROC
PROC_WYR_KillDirectorGortash_RemoveRavengardFromAudienceHall_Intern()
AND
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, _, _, _, _)
THEN
SetFlag(GLO_Ravengard_State_KilledOffScreenAfterCeremony_940499e9-dd0d-4b5b-9e45-e8675f61abbf);
Die(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 1);

PROC
PROC_WYR_KillDirectorGortash_RemoveRavengardFromAudienceHall_Intern()
AND NOT
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, _, _, _, _)
AND
DB_GlobalFlag(IRN_IronThrone_State_Destroyed_91795368-af06-4b56-9ac1-b78995aa9ea9, _, _, _, _)
THEN
SetFlag(GLO_Ravengard_State_KilledOffScreenAfterCeremony_940499e9-dd0d-4b5b-9e45-e8675f61abbf);
Die(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 0, NULL_00000000-0000-0000-0000-000000000000, 0, 1, 1);

PROC
PROC_WYR_KillDirectorGortash_RemoveRavengardFromAudienceHall_Intern()
AND NOT
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
AND NOT
DB_PermaDefeated(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, _, _, _, _)
AND NOT
DB_GlobalFlag(IRN_IronThrone_State_Destroyed_91795368-af06-4b56-9ac1-b78995aa9ea9, _, _, _, _)
THEN
SetEntityEvent(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, "WYR_KillDirectorGortash_RavengardSentToIronThrone");

IF
EntityEvent(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, "WYR_KillDirectorGortash_RavengardSentToIronThrone", _, _, _)
THEN
TeleportTo(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, S_IRN_Ravengard_Pos_3d27f038-b773-4abd-bf3f-f569e0d93d28, "", 0, 0, 0, 0, 1);
SetFlag(IRN_IronThrone_State_RavengardPresent_2e102a34-500a-4cd2-ba93-51d1a8b96496);

PROC
PROC_WYR_KillDirectorGortash_ReplaceBodyguardsInOffice()
AND
DB_WYR_KillDirectorGortash_Banites(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);
RemoveSurfaceLayer(_Var1, "Ground", 8);
PROC_SetOnStage(_Var2, 1);
SetFaction(_Var2, ACT3_WYR_WyrmRock_Gortash_bfc76c31-9f16-4f27-af3f-c6b6747230dc);

PROC
PROC_WYR_KillDirectorGortash_ReplaceBodyguardsInOffice()
AND
DB_Defeated(S_WYR_GortashsOffice_SteelWatcher_5967b1c5-8e3c-4064-83e3-5219aa204c3d, _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_ReplaceSteelWatcher();

PROC
PROC_WYR_KillDirectorGortash_ReplaceSteelWatcher()
AND
DB_WYR_KillDirectorGortash_SteelWatcherReplacement(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_KillDirectorGortash_SteelWatcherReplacement_Temp(_Var1);

PROC
PROC_WYR_KillDirectorGortash_ReplaceSteelWatcher()
AND
QRY_GetRandom("DB_WYR_KillDirectorGortash_SteelWatcherReplacement_Temp", 1, "DB_WYR_KillDirectorGortash_SteelWatcherReplacement_Choosen", _, _)
AND
DB_WYR_KillDirectorGortash_SteelWatcherReplacement_Choosen(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(S_WYR_GortashsOffice_SteelWatcher_5967b1c5-8e3c-4064-83e3-5219aa204c3d, 0);
RemoveSurfaceLayer(S_WYR_GortashsOffice_SteelWatcher_5967b1c5-8e3c-4064-83e3-5219aa204c3d, "Ground", 8);
TeleportTo(_Var1, S_WYR_SteelWatcherReplacementPos_7ff8e450-5881-4671-bb33-7e21eff3b0d7);
SetFaction(_Var1, ACT3_WYR_WyrmRock_Gortash_bfc76c31-9f16-4f27-af3f-c6b6747230dc);
NOT DB_WYR_KillDirectorGortash_ActiveSteelWatcher(S_WYR_GortashsOffice_SteelWatcher_5967b1c5-8e3c-4064-83e3-5219aa204c3d);
DB_WYR_KillDirectorGortash_ActiveSteelWatcher(_Var1);

PROC
PROC_WYR_KillDirectorGortash_TeleportGortashToOffice()
AND NOT
DB_GlobalFlag(WYR_KillDirectorGortash_State_InOffice_12233623-2dc3-4dbe-b493-b491fdf6321d, _, _, _, _)
THEN
TeleportTo(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_WYR_GortashsPositionInOffice_fff3874c-e03b-4802-b0ba-e3584b8ca5ee, "WYR_KillDirectorGortash_ArrivedAtOffice");

IF
EntityEvent(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_ArrivedAtOffice", _, _, _)
THEN
SetFlag(WYR_KillDirectorGortash_State_InOffice_12233623-2dc3-4dbe-b493-b491fdf6321d);
PROC_RemoveDialog(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac);
DB_Dialogs(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, WYR_KillDirectorGortash_GortashInOffice_b032707c-5cf3-be12-b590-d35f59019fd7);
LookFromTrigger(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_WYR_GortashsPositionInOffice_fff3874c-e03b-4802-b0ba-e3584b8ca5ee, 0);
PROC_SceneOver("WYR_KillDirectorGortash_Ceremony");
PROC_SpotPlayers_StopSpotting(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_Ceremony");
DB_SpotPlayers_IncludeWildshapedPlayers(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_SpottingInOffice");
DB_SpotPlayers(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_SpottingInOffice", NULL_00000000-0000-0000-0000-000000000000, NULL_00000000-0000-0000-0000-000000000000);
DB_SpotPlayers_CustomRadius(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_SpottingInOffice", 15);
PROC_KillDirectorGortash_SetUpSceneManagerInOffice();

IF
EntityEvent(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_ArrivedAtOffice", (STRING)_Var1, (STRING)_Var1, (STRING)_Var1)
AND
GetCombatGroupID(S_WYR_KillDirectorGortash_GortashsBodyguard_001_8b142ad1-8ca5-487c-9ecd-93fb4172ea25, _Var1, _Var1, _Var1, _Var1)
THEN
SetCombatGroupID(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1);

PROC
PROC_KillDirectorGortash_SetUpSceneManagerInOffice()
THEN
DB_SceneManager(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_SceneInOffice");

PROC
PROC_KillDirectorGortash_SetUpSceneManagerInOffice()
AND
DB_WYR_KillDirectorGortash_Banites(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SceneManager(_Var1, "WYR_KillDirectorGortash_SceneInOffice");

PROC
PROC_KillDirectorGortash_SetUpSceneManagerInOffice()
AND
DB_WYR_KillDirectorGortash_Banites(_, _Var2, _, _, _)
AND NOT
DB_OffStage(_Var2, _, _, _, _)
AND NOT
DB_Defeated(_Var2, _, _, _, _)
THEN
DB_SceneManager(_Var2, "WYR_KillDirectorGortash_SceneInOffice");

PROC
PROC_KillDirectorGortash_SetUpSceneManagerInOffice()
AND
DB_WYR_KillDirectorGortash_ActiveSteelWatcher(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b, _Var1, _Var1, _Var1, _Var1)
THEN
DB_SceneManager(_Var1, "WYR_KillDirectorGortash_SceneInOffice");

IF
FlagSet(GLO_Foundry_State_ControlCentreDestroyed_456906c5-40a6-429e-8e1c-7120a2ef631b, _, _, _, _)
AND
DB_WYR_KillDirectorGortash_ActiveSteelWatcher(_Var3, _, _, _, _)
THEN
PROC_SceneManager_RemoveFromScene(_Var3, "WYR_KillDirectorGortash_SceneInOffice");

IF
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_KillDirectorGortash_State_InOffice_12233623-2dc3-4dbe-b493-b491fdf6321d, _, _, _, _)
THEN
SetFlag(WYR_KillDirectorGortash_State_GortashPermaDefeatedDuringCeremony_11e3ccc3-8a61-4ed5-9ec2-0a0e1fd4a8d7);

IF
KilledBy(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, (CHARACTER)_Var1, _, _, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_OnlyOnce("WYR_KillDirectorGortash_RemoveRavengardFromAudienceHall", _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_KillDirectorGortash_State_RavengardKilledDuringCeremony_40b81270-9d42-4e46-bd96-6295c8b2b7e2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_KillDirectorGortash_RavengardKilledDuringCeremony(_Var1);

PROC
PROC_WYR_KillDirectorGortash_RavengardKilledDuringCeremony((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_State_RavengardKilledDuringCeremony_40b81270-9d42-4e46-bd96-6295c8b2b7e2);

PROC
PROC_WYR_KillDirectorGortash_RavengardKilledDuringCeremony((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Is_InCombat(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, _Var2, _Var1, _Var1, _Var1)
AND
DB_Is_InCombat(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_State_WyllKilledRavengard_80e08ace-1e47-47b2-9f32-1587957eeacf);

PROC
PROC_WYR_KillDirectorGortash_RavengardKilledDuringCeremony((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
IsInTrigger(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, 1, _Var1, _Var1)
AND
IsInTrigger(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, 1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_State_WyllKilledRavengard_80e08ace-1e47-47b2-9f32-1587957eeacf);

PROC
PROC_WYR_KillDirectorGortash_RavengardKilledDuringCeremony((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartOfTheTeam(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Avatars(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(WYR_KillDirectorGortash_State_WyllKilledRavengard_80e08ace-1e47-47b2-9f32-1587957eeacf, _Var1, _Var1, _Var1, _Var1)
AND
QRY_ORI_Wyll_RavengardKilled_AD(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
FlagSet(WYR_KillDirectorGortash_Event_StartFight_8a332662-5a53-4b4c-a788-1341a9718b10, _, (INTEGER)_Var2, _, _)
AND
DB_DialogName(_Var3, _Var2, _, _, _)
THEN
DB_WYR_KillDirectorGortash_StartFightAfterDialog(_Var2);

IF
DialogEnded(_, (INTEGER)_Var2, _, _, _)
AND
DB_WYR_KillDirectorGortash_StartFightAfterDialog(_Var2, _, _, _, _)
THEN
NOT DB_WYR_KillDirectorGortash_StartFightAfterDialog(_Var2);
PROC_WYR_WyrmRock_GoToAlertState("GortashAttacked");

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "WYR_KillDirectorGortash_Ceremony", (STRING)_Var3, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
THEN
PROC_ForceStopDialog(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac);
PROC_SceneOver("WYR_KillDirectorGortash_Ceremony");
PROC_WYR_WyrmRock_GoToAlertState("GortashAttacked");

QRY
QRY_DialogAttackRequested_CustomResponse(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DialogPlayers(_Var2, _Var1, _, _Var1, _Var1)
AND
DB_DialogName(WYR_KillDirectorGortash_Ceremony_5149a422-854a-9e05-433a-0520d87eb112, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_TryStopDialogFor(_Var1);
PROC_SceneOver("WYR_KillDirectorGortash_Ceremony");
PROC_WYR_WyrmRock_GoToAlertState("GortashAttacked");

IF
DB_Is_InCombat(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_WYR_WyrmRock_AudienceHallGuards(_Var3, _Var4, _Var1, _Var1, _Var1)
AND NOT
DB_Defeated(_Var3, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_WYR_WyrmRock_AudienceHallGuards_JoinedCombat(_Var3, _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_WyrmRock_AudienceHallGuards_JoinedCombat(_Var3);
PROC_EnterCombat(_Var3, _Var1);

IF
LeftCombat((GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_WYR_WyrmRock_AudienceHallGuards_JoinedCombat(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_WyrmRock_AudienceHallGuards_JoinedCombat(_Var1);

IF
FlagSet(GLO_Gortash_State_PermaDefeated_74dd56ff-7e00-42a6-a0f3-0d122f364769, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_KillDirectorGortash_State_CeremonyEnded_9aeab401-c087-4f2e-9894-859df23680dc, _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_SendPatriarsAway();
PROC_WYR_KillDirectorGortash_SendServantsAway();

IF
DB_WYR_KillDirectorGortash_AudienceHallCombatID(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_WYR_KillDirectorGortash_SendPatriarsAway();
PROC_WYR_KillDirectorGortash_SendServantsAway();

PROC
PROC_WYR_KillDirectorGortash_SendPatriarsAway()
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_SendFakePatriarsAway", _, _, _, _)
AND
DB_WYR_KillDirectorGortash_FakePatriars(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_CantMove(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetCanFight(_Var1, 0);
SetCanJoinCombat(_Var1, 0);
PROC_DisappearOutOfSightTo(_Var1, S_WYR_KillDirectorGortash_EscapePoint_c986d44f-ee55-4ad2-8c18-41f6a1644de0, "Run", 0, "");

PROC
PROC_WYR_KillDirectorGortash_SendPatriarsAway()
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_SendPatriarsAway", _, _, _, _)
AND
DB_WYR_KillDirectorGortash_AudienceHallNPCs(_Var1, _, _, 1, _)
AND NOT
DB_CantMove(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetCanFight(_Var1, 0);
SetCanJoinCombat(_Var1, 0);
PROC_DisappearOutOfSightTo(_Var1, S_WYR_KillDirectorGortash_EscapePoint_c986d44f-ee55-4ad2-8c18-41f6a1644de0, "Run", 0, "");

PROC
PROC_WYR_KillDirectorGortash_SendServantsAway()
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_SendServantsAway", _, _, _, _)
AND
DB_WYR_KillDirectorGortash_AudienceHallServants(_Var1, _, _Var1, _Var1, _Var1)
AND NOT
DB_CantMove(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetCanFight(_Var1, 0);
SetCanJoinCombat(_Var1, 0);
PROC_DisappearOutOfSightTo(_Var1, S_WYR_KillDirectorGortash_EscapePoint_c986d44f-ee55-4ad2-8c18-41f6a1644de0, "Run", 0, "");

IF
DB_WYR_KillDirectorGortash_Banites(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_GLO_DefeatCounter(_Var1, "WYR_KillDirectorGortash_MainBodyguards");

IF
LeftTrigger(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, _, _, _)
THEN
SetCombatGroupID(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "");

IF
LeftTrigger(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, S_WYR_WyrmRock_AudienceHallArea_a078f420-9f5e-452b-9391-e96e754b61c8, _, _, _)
THEN
SetCombatGroupID(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, "");

IF
EnteredTrigger(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_WYR_WyrmRock_RoofArea_6f590602-360a-4b7f-b936-f04f44a33dee, _, _, _)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_UpdateFactionsInGortashsOffice", _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_UpdateFactionsInGortashsOffice();

PROC
PROC_WYR_KillDirectorGortash_UpdateFactionsInGortashsOffice()
AND
DB_WYR_KillDirectorGortash_Banites(_Var1, _Var2, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
SetFaction(_Var1, ACT3_WYR_WyrmRock_Gortash_bfc76c31-9f16-4f27-af3f-c6b6747230dc);

PROC
PROC_WYR_KillDirectorGortash_UpdateFactionsInGortashsOffice()
AND NOT
DB_PermaDefeated(S_WYR_GortashsOffice_SteelWatcher_5967b1c5-8e3c-4064-83e3-5219aa204c3d, _, _, _, _)
THEN
SetFaction(S_WYR_GortashsOffice_SteelWatcher_5967b1c5-8e3c-4064-83e3-5219aa204c3d, ACT3_WYR_WyrmRock_Gortash_bfc76c31-9f16-4f27-af3f-c6b6747230dc);

PROC
PROC_SpotPlayers_Spotted(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_SpottingInOffice", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_StartDialog(WYR_KillDirectorGortash_GortashInOffice_b032707c-5cf3-be12-b590-d35f59019fd7, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

PROC
PROC_StartDialog_AddExtraSpeakers(WYR_KillDirectorGortash_GortashInOffice_b032707c-5cf3-be12-b590-d35f59019fd7, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1, (INTEGER)_Var1)
AND
DB_WYR_KillDirectorGortash_DefaultBodyguards(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(_Var2, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_DialogAddSpeakingActor(_Var1, _Var2, 0, 1);

IF
DB_Is_InCombat(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1, _Var1, _Var1, _Var1)
AND
DB_InRegion(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_WYR_WyrmRock_RoofArea_6f590602-360a-4b7f-b936-f04f44a33dee, _Var1, _Var1, _Var1)
AND
DB_WYR_KillDirectorGortash_RoofSteelWatchers(_Var2, 1, _Var1, _Var1, _Var1)
AND NOT
DB_CantMove(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_Is_InCombat(_Var2, _, _Var1, _Var1, _Var1)
THEN
PROC_ForceStopDialog(_Var2);
PROC_SetRelationToPlayers(ACT3_WYR_WyrmRock_RoofSteelWatchers_523adbc8-5a94-4b33-aaac-1d1941fb1ac8, 0);
PROC_NotifyWhenReadyToMoveOn(_Var2, "WYR_KillDirectorGoratsh_MoveToGortash");

PROC
PROC_ReadyToMoveOn((CHARACTER)_Var1, "WYR_KillDirectorGoratsh_MoveToGortash", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
THEN
PROC_CharacterMoveTo(_Var1, S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "Run", "");

PROC
PROC_GlobalFlagReactionAfterDialog(WYR_KillDirectorGortash_State_GortashTurnedHostile_c003c217-b263-4473-9e4f-9a90aaf43cc9, (FACTION)_Var1, (FACTION)_Var1, (FACTION)_Var1, (FACTION)_Var1)
AND
GetFaction(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetRelationToPlayers(_Var1, 0);

PROC
PROC_SceneInterrupted(_, _, "WYR_KillDirectorGortash_SceneInOffice", (STRING)_Var3, _)
AND
DB_GLO_GenericSceneManager_ViolenceReason(_Var3, _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_MakeOfficeHostile();

PROC
PROC_SceneInterrupted(_, (CHARACTER)_Var2, "WYR_KillDirectorGortash_SceneInOffice", "DisturbanceRegistering", _)
AND
DB_SceneManager_DisturbanceRegistering(_Var2, _Var3, _, _, _, _, _, _, _, _)
AND
DB_WYR_KillDirectorGortash_ForbiddenCrimes(_Var8, _, _, _, _)
AND
QRY_CRIME_IsCrimeFamilyMember(_Var3, _Var8, _, _, _)
AND
IsInTrigger(_Var2, S_WYR_GortashsOfficeArea_d3c1c480-47bd-48cf-95c2-1ba9ed5a4bd0, 1, _, _)
THEN
PROC_WYR_KillDirectorGortash_MakeOfficeHostile();

QRY
QRY_DialogAttackRequested_CustomResponse(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_DialogPlayers(_Var2, _Var1, _, _Var1, _Var1)
AND
DB_DialogName(WYR_KillDirectorGortash_GortashInOffice_b032707c-5cf3-be12-b590-d35f59019fd7, _Var2, _Var1, _Var1, _Var1)
THEN
PROC_TryStopDialogFor(_Var1);
PROC_WYR_WyrmRock_GoToAlertState("GortashAttacked");

PROC
PROC_WYR_KillDirectorGortash_MakeOfficeHostile()
AND
GetFaction(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SpotPlayers_StopSpotting(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_SpottingInOffice");
PROC_SceneOver("WYR_KillDirectorGortash_SceneInOffice");
PROC_ForceStopDialog(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac);
PROC_SetRelationToPlayers(_Var1, 0);

PROC
PROC_WYR_KillDirectorGortash_MakeOfficeHostile()
AND
DB_WYR_KillDirectorGortash_AudienceHallBanites(_Var1, _, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_MakeAudienceHallBanitesHostile", _Var1, _Var1, _Var1, _Var1)
AND
GetFaction(_Var1, _Var3, _Var1, _Var1, _Var1)
THEN
PROC_SetRelationToPlayers(_Var3, 0);

IF
EnteredTrigger((CHARACTER)_Var1, S_WYR_WyrmRock_GroundFloor_f470521a-d53c-4239-ad06-5f6ef55bd611, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetFlag(LOW_BhaalTemple_State_HasNetherstone_818fd00e-6780-4712-980e-5c7c25ba9987, _Var1, 1, _Var1, _Var1)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_GroundBrainquake", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_Brainquakes_StartForcedEvent(_Var1, "WYR_KillDirectorGortash_GroundFloorBrainquakeEnded");

IF
EnteredTrigger((CHARACTER)_Var1, S_WYR_GortashsOfficeArea_d3c1c480-47bd-48cf-95c2-1ba9ed5a4bd0, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetFlag(LOW_BhaalTemple_State_HasNetherstone_818fd00e-6780-4712-980e-5c7c25ba9987, _Var1, 1, _Var1, _Var1)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_RoofBrainquake", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GLO_Brainquakes_StartForcedEvent(_Var1, "WYR_KillDirectorGortash_RoofBrainquakeEnded");

IF
DB_GlobalFlag(WYR_KillDirectorGortash_State_InOffice_12233623-2dc3-4dbe-b493-b491fdf6321d, _, _, _, _)
AND
DB_GlobalFlag(GLO_Orin_State_PermaDefeated_c716e4d9-e6ed-445c-a710-ee4d91c67298, _, _, _, _)
AND
DB_GlobalFlag(CURRENTREGION_BGO_Main_A_11239767-48ad-4879-8312-b9164b6e4978, _, _, _, _)
AND NOT
DB_GlobalFlag(WYR_KillDirectorGortash_State_HasRoofAccess_7582278e-27b8-4788-a511-2ff3d3af42bf, _, _, _, _)
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_State_HasRoofAccess_7582278e-27b8-4788-a511-2ff3d3af42bf);

IF
FlagSet(WYR_KillDirectorGortash_State_HasRoofAccess_7582278e-27b8-4788-a511-2ff3d3af42bf, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
ClearOwnership(S_WYR_WyrmRock_DoorToRoof_99cede9e-36e3-49cc-97c0-b6799d498e91);
ClearOwnership(S_Teleport_InvisibleDoor_A_WyrmRockBottomSpiral_dc367158-c538-4637-8316-3c1b6a2d196c);
PROC_WYR_WyrmRock_GiveAccessToRoof();

IF
DB_CurrentLevel("BGO_Main_A", _, _, _, _)
AND
DB_GlobalFlag(IRN_IronThrone_State_Destroyed_91795368-af06-4b56-9ac1-b78995aa9ea9, _, _, _, _)
AND
QRY_OnlyOnce("WYR_WyrmRock_MakeSteelWatchersHostile", _, _, _, _)
THEN
PROC_SetRelationToPlayers(ACT3_WYR_WyrmRock_RoofSteelWatchers_523adbc8-5a94-4b33-aaac-1d1941fb1ac8, 0);

IF
DB_CurrentLevel("BGO_Main_A", _, _, _, _)
AND
DB_GlobalFlag(GLO_Orin_State_PermaDefeated_c716e4d9-e6ed-445c-a710-ee4d91c67298, _, _, _, _)
AND NOT
DB_GlobalFlag(IRN_IronThrone_State_Destroyed_91795368-af06-4b56-9ac1-b78995aa9ea9, _, _, _, _)
AND
GetRelation(ACT3_WYR_WyrmRock_Gortash_bfc76c31-9f16-4f27-af3f-c6b6747230dc, Hero_a1542c81-6895-929e-4522-10ce218bb360, _Var1, _Var1, _Var1)
AND
_Var1 > 0
AND
QRY_OnlyOnce("WYR_WyrmRock_UpdateRoofSteelWatchersFaction", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetRelationMutual(ACT3_WYR_WyrmRock_RoofSteelWatchers_523adbc8-5a94-4b33-aaac-1d1941fb1ac8, Hero_a1542c81-6895-929e-4522-10ce218bb360, 50);

IF
LeftTrigger((CHARACTER)_Var1, S_WYR_Fortress_SUB_94ca5a54-0813-48b4-9f55-4cb039a63c82, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(WYR_KillDirectorGortash_State_AgreedToMeetInUndercity_1375d542-cf0a-49fd-927b-5c6bbce13ce4, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_PermaDefeated(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_TriggerEvents_AnyPartyMemberInTrigger(S_WYR_Fortress_SUB_94ca5a54-0813-48b4-9f55-4cb039a63c82, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_MoveToUndercity", _Var1, _Var1, _Var1, _Var1)
THEN
PROC_NotifyWhenReadyToMoveOn(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_MoveToUndercity");

PROC
PROC_ReadyToMoveOn(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_MoveToUndercity", _, _, _)
THEN
PROC_SpotPlayers_StopSpotting(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_SpottingInOffice");
PROC_SceneOver("WYR_KillDirectorGortash_SceneInOffice");
TeleportTo(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_END_MorphicGortashPoint_6bf2ed03-4bc6-4383-b17a-1b8fc71c8082, "WYR_KillDirectorGortash_TeleportedToUndercity");

IF
EntityEvent(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, "WYR_KillDirectorGortash_TeleportedToUndercity", _, _, _)
THEN
SetFlag(WYR_KillDirectorGortash_Event_TeleportedToUndercity_9914f986-f994-4001-9493-d943cb67e35a);

IF
AddedTo(S_WYR_CrownController_Gortash_383be300-d328-4152-86df-4927482d1fd7, (CHARACTER)_Var1, _, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_Players(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_GLO_EmperorPrelude_NotLastNetherstone(S_WYR_CrownController_Gortash_383be300-d328-4152-86df-4927482d1fd7, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(GLO_Orin_State_PermaDefeated_c716e4d9-e6ed-445c-a710-ee4d91c67298, _Var1, _Var1, _Var1, _Var1)
AND
QRY_OnlyOnce("WYR_KillDirectorGortash_NetherbrainMindmeld", _Var1, _Var1, _Var1, _Var1)
THEN
DB_WYR_KillDirectorGortash_MindmeldDialogPlayer(_Var1);

IF
DB_WYR_KillDirectorGortash_MindmeldDialogPlayer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_CantTalk(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_WYR_KillDirectorGortash_MindmeldDialogPlayer(_Var1);
PROC_WYR_KillDirectorGortash_LaunchMindmeldDialog(_Var1);

PROC
PROC_WYR_KillDirectorGortash_LaunchMindmeldDialog((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
QRY_StartDialog(WYR_KillDirectorGortash_NetherbrainMindmeld_673f3fd9-0e41-8d53-153b-72af69991378, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
TemplateUseFinished((CHARACTER)_Var1, (ITEMROOT)_Var2, _, 1, (CHARACTER)_Var1)
AND
DB_WYR_KillDirectorGortash_CeremonyInfoObjectTemplates(_Var2, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_KillDirectorGortash_Knows_CeremonyLocationAndGortashName_5eb9384c-4108-4a68-85eb-ba72931a7bc9, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_Knows_CeremonyLocationAndGortashName_5eb9384c-4108-4a68-85eb-ba72931a7bc9);
PROC_TryStartAD(WYR_KillDirectorGortash_PAD_LearnedCeremony_296b127a-8e00-38f1-7759-538714bc9938, _Var1);

IF
FlagSet(Debug_WYR_KillDirectorGortash_Event_MeetGortashInHisOffice_ca4a33a9-db24-4e97-bf3a-0dab4b808e89, (GUIDSTRING)_Var1, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
THEN
PROC_Debug_WYR_KillDirectorGortash_SendGortashToHisOffice();
PROC_TeleportPartiesTo(S_Debug_Teleport_WYR_GortashsOffice_4734d350-a015-47ad-a97c-749c9c0bb477, "");

IF
TextEvent("gortash_send_to_office", _, _, _, _)
THEN
PROC_Debug_WYR_KillDirectorGortash_SendGortashToHisOffice();

PROC
PROC_Debug_WYR_KillDirectorGortash_SendGortashToHisOffice()
THEN
SetFlag(WYR_KillDirectorGortash_State_AfterCeremony_a05a6945-21ad-400d-80bc-7b4934571c57);
TeleportTo(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_WYR_GortashsPositionInOffice_fff3874c-e03b-4802-b0ba-e3584b8ca5ee, "WYR_KillDirectorGortash_ArrivedAtOffice");
PROC_WYR_KillDirectorGortash_ReplaceBodyguardsInOffice();
PROC_WYR_KillDirectorGortash_UpdateRoofSteelWatchersFaction();

IF
TextEvent("gortash_killbodyguards", _, _, _, _)
THEN
Die(S_WYR_GortashsOffice_SteelWatcher_5967b1c5-8e3c-4064-83e3-5219aa204c3d, 0, 1);

IF
TextEvent("gortash_killbodyguards", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_KillDirectorGortash_Banites(_Var1, _, _Var1, _Var1, _Var1)
THEN
Die(_Var1, 0, 1);

IF
TextEvent("kdg_hideswah", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_WYR_KillDirectorGortash_CeremonySteelWatchers(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_SetOnStage(_Var1, 0);

IF
TextEvent("kdg_ceremonyaftermath", _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_CeremonyAftermath();

IF
EnteredTrigger((GUIDSTRING)_Var1, S_WYR_KillDirectorGortash_RavengardRemovalArea_244e4e54-52bd-4812-bac7-6206166e5195, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_PartOfTheTeam(S_Player_Wyll_c774d764-4a17-48dc-b470-32ace9ce447d, _Var1, _Var1, _Var1, _Var1)
AND
DB_GlobalFlag(WYR_KillDirectorGortash_State_AfterCeremony_a05a6945-21ad-400d-80bc-7b4934571c57, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_GlobalFlag(WYR_KillDirectorGortash_State_RavengardForceRemoval_cda5ec5a-5614-45d5-aa60-f99e210dab5d, _Var1, _Var1, _Var1, _Var1)
THEN
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_State_RavengardForceRemoval_cda5ec5a-5614-45d5-aa60-f99e210dab5d);

IF
FlagSet(WYR_KillDirectorGortash_State_RavengardForceRemoval_cda5ec5a-5614-45d5-aa60-f99e210dab5d, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
PROC_TriggerUnregisterForPlayers(S_WYR_KillDirectorGortash_RavengardRemovalArea_244e4e54-52bd-4812-bac7-6206166e5195);
PROC_GlobalSetFlagAndCache(WYR_KillDirectorGortash_State_RavengardForceRemoval_cda5ec5a-5614-45d5-aa60-f99e210dab5d);
PROC_ForceStopDialog(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);
PROC_RemoveDialog(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);
SetCanFight(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 0);
SetCanJoinCombat(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, 0);
LeaveCombat(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03);
PROC_CharacterMoveTo(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, S_WYR_WyrmRock_DoorToRoof_99cede9e-36e3-49cc-97c0-b6799d498e91, "Run", "WYR_KillDirectorGortash_RavengardReadyToDisappear");

IF
EntityEvent(S_GLO_Ravengard_f6620372-ebd0-4511-a39d-8c2d4ad03f03, "WYR_KillDirectorGortash_RavengardReadyToDisappear", _, _, _)
THEN
PROC_WYR_KillDirectorGortash_RemoveRavengardFromAudienceHall();

IF
DB_WYR_WyrmRock_AudienceHallGuards(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_CrimeEluding_CantBeEludedUsing(_Var1, "Bribe");

IF
TextEvent("gortashtochasm", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TeleportTo(_Var1, S_Debug_WYR_KillDirectorGortash_WatchPos_b04f63c3-1ff7-4e28-a036-81ec9688a429);
TeleportTo(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_Debug_WYR_KillDirectorGortash_WatchPos_b04f63c3-1ff7-4e28-a036-81ec9688a429, "");

IF
TextEvent("gortashinchasm", _, _, _, _)
THEN
TeleportTo(S_GLO_Gortash_b878a854-f790-4999-95c4-3f20f00f65ac, S_Debug_WYR_KillDirectorGortash_DeathPos_18e9c1d4-ed6f-42e7-a296-efaecb2fe092);

IF
TextEvent("removepatriarcrowds", _, _, _, _)
THEN
PROC_WYR_KillDirectorGortash_RemovePatriarCrowds();

IF
FlagSet(WYR_KillDirectorGortash_State_GortashBecameArchduke_b91a5012-d49b-429d-9b86-b75686fa7582, _, _, _, _)
AND
DB_WYR_KillDirectorGortash_CrowdsAtEntrance(_Var3, _, _, _, _)
THEN
TriggerSetCrowdSpawningEnable(_Var3, 0);
TriggerSetCrowdBehaviour(_Var3, 0);

IF
FlagSet(WYR_KillDirectorGortash_State_GortashBecameArchduke_b91a5012-d49b-429d-9b86-b75686fa7582, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
TimerLaunch("WYR_KillDirectorGortash_ForceRemoveEntranceCrowds", 6000);

IF
TimerFinished("WYR_KillDirectorGortash_ForceRemoveEntranceCrowds", (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1, (TRIGGER)_Var1)
AND
DB_WYR_KillDirectorGortash_CrowdsAtEntrance(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
TriggerDespawnCrowd(_Var1);

IF
FlagSet(END_General_State_Started_a0fd5f91-e4b3-4d01-84d3-9ff484139e99, _, _, (GUIDSTRING)_, (GUIDSTRING)_)
THEN
GoalCompleted;


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act3"
