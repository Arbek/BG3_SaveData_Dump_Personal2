Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_Subregion(S_SCL_RuinedBattlefield_SUB_864e42a3-80f1-4d5c-a134-8073c0a59840, "SCL_RuinedBattlefield_SUB", 0, 1);
DB_Subregion(S_MOO_MoonriseTower_SUB_14187ad9-cf83-44f9-81bf-bb46cb4cd8e6, "MOO_MoonriseTower_SUB", 0, 1);
DB_Subregion(S_MOO_Docks_SUB_b4608370-46b8-4ba3-a3e7-192a6aa509ee, "MOO_Docks_SUB", 0, 2);
DB_Subregion(S_MOO_Roof_SUB_77c94e75-2924-4ca3-b7bd-d631b18d6c73, "MOO_Roof_SUB", 0, 2);
DB_Subregion(S_MOO_MainFloorInterior_SUB_429a55cc-58d2-4469-9577-852131e1fff3, "MOO_MainFloorInterior_SUB", 0, 2);
DB_Subregion(S_MOO_UpperFloorInterior_SUB_93c522d3-04c4-4f71-a1dc-043478c51301, "MOO_UpperFloorInterior_SUB", 0, 2);
DB_Subregion(S_MOO_Kitchen_SUB_b50b8553-0064-41d0-8595-266f69e35c33, "MOO_Kitchen_SUB", 0, 3);
DB_Subregion(S_MOO_Prison_SUB_b262cbea-f40c-47da-9f34-ba8ce5bf782b, "MOO_Prison_SUB", 0, 1);
DB_Subregion(S_SHA_Temple_SUB_348b76ee-33d8-471b-a95d-7ded0d6cdfd5, "SHA_Temple_SUB", 0, 1);
DB_Subregion(S_SHA_NightsongPrison_SUB_0a302268-dd92-4462-99e5-ca7491815ec0, "SHA_Temple_SUB_NightsongPrison", 0, 1);
DB_Subregion(S_SHA_ClonesTrial_SUB_e98be6ee-5dae-469c-b92c-6b3e8577c1fe, "SHA_Temple_SUB_ClonesTrial", 0, 2);
DB_Subregion(S_SHA_SneakTrial_SUB_c6fba1bf-4f07-480b-92a0-c3dda67631e2, "SHA_Temple_SUB_SneakTrial", 0, 2);
DB_Subregion(S_SHA_PlatformsTrial_SUB_86562f59-7647-4720-a1d3-85ab04b30f1a, "SHA_Temple_SUB_PlatformsTrial", 0, 2);
DB_Subregion(S_SHA_SilentLibrary_SUB_961f86d2-b05c-40c5-b2e4-bf40c089f481, "SHA_Temple_SUB_Library", 0, 2);
DB_Subregion(S_HAV_Haven_SUB_6ac001f4-9c56-4a1b-963d-a509e158ffab, "HAV_Haven_SUB", 0, 1);
DB_Subregion(S_HAV_IsobelRoom_SUB_4310edec-0ce2-4ac0-adbd-c02d60b92c3d, "HAV_IsobelRoom_SUB", 0, 2);
DB_Subregion(S_HAV_Haven_SUB_Cellar_eee18cb6-443a-4b8f-ad19-58dff3d731d8, "HAV_Haven_SUB_Cellar", 1, 1);
DB_HAV_HavenAreas(S_HAV_Haven_SUB_6ac001f4-9c56-4a1b-963d-a509e158ffab);
DB_HAV_HavenAreas(S_HAV_Haven_SUB_Cellar_eee18cb6-443a-4b8f-ad19-58dff3d731d8);
DB_Subregion(S_TWN_Tollhouse_SUB_50e2410a-7d5e-48c3-abba-2b64c0c0d325, "TWN_Tollhouse_SUB", 1, 1);
DB_Subregion(S_TWN_Distillery_SUB_7e2fdbcd-538e-4287-9f7c-477026bf81e5, "TWN_Distillery_SUB", 1, 1);
DB_Subregion(S_TWN_MasonsGuild_SUB_6a7702c0-e417-4d84-a10b-0b582c0fbd44, "TWN_MasonsGuild_SUB", 1, 1);
DB_Subregion(S_TWN_Hospital_SUB_2ec2cc09-94ab-4479-bacd-cd5ca6911833, "TWN_Hospital_SUB", 1, 1);
DB_Subregion(S_TWN_CentralSquare_SecretRoom_SUB_b9d720fe-bac9-45fe-8f71-b2bd8e382b81, "TWN_CentralSquare_SecretRoom_SUB", 0, 1);
DB_Subregion(S_TWN_Hospital_Morgue_SUB_e826c097-ebe8-4532-9b6f-aae2f3eec294, "TWN_Hospital_Morgue_SUB", 0, 1);
DB_Subregion(S_COL_Colony_SUB_c72269e5-0719-4379-a8ea-ca2ca199d0a3, "COL_Colony_SUB", 0, 1);
DB_Subregion(S_MOO_Oubliette_SUB_c6f54de0-1c8f-4cf8-bcf9-b13c8f53b05b, "COL_Oubliette_SUB", 0, 2);
DB_Subregion(S_COL_Morgue_SUB_884ab063-7c18-4887-a725-e8b9c6b0100c, "COL_Morgue_SUB", 0, 2);
DB_Subregion(S_COL_NecroLab_SUB_d4ed37da-ab88-415d-8131-917f954e4926, "COL_NecroLab_SUB", 0, 3);
DB_Subregion(S_COL_TadpolingCentre_SUB_89b29154-b146-456f-8be9-3e10bf466844, "COL_TadpolingCentre_SUB", 0, 2);
DB_Subregion(S_COL_Barracks_SUB_2e97382e-959c-4f45-9f69-56952bda7851, "COL_Barracks_SUB", 0, 2);
DB_Subregion(S_CAMP_SCLMAIN_Area_32e38308-f42c-49c9-8d62-0a0617395465, "CAMP_SUB", 0, 1);
DB_Subregion(S_CAMP_SHARTEMPLE_Area_000_5e748dd0-ac68-4b58-bb05-5460fb9034ff, "CAMP_SUB", 0, 1);
DB_Subregion(S_CAMP_MINDFLAYERCOL_Area_000_7dfff687-4ced-4dc6-8d9e-1e07cb43c3e3, "CAMP_SUB", 0, 1);
DB_Subregion(S_CAMP_HAVEN_Area_001_17e7cf27-0b17-4629-8b67-1d7c40fbe53f, "CAMP_SUB", 0, 1);
DB_Subregion(S_CAMP_MOONRISE_Area_000_166fae21-95f4-4764-b740-a33faefb3d75, "CAMP_SUB", 0, 1);

KBSECTION
QRY
QRY_HAV_IsInHaven((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
IsInTrigger(_Var1, S_HAV_Haven_SUB_6ac001f4-9c56-4a1b-963d-a509e158ffab, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_HAV_IsInHaven((GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
IsInTrigger(_Var1, S_HAV_Haven_SUB_Cellar_eee18cb6-443a-4b8f-ad19-58dff3d731d8, 1, _Var1, _Var1)
THEN
DB_NOOP(1);

QRY
QRY_HAV_AnyPartyMemberInHaven()
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
QRY_HAV_IsInHaven(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_NOOP(1);

IF
DB_InRegion(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
DB_HAV_HavenAreas(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND NOT
DB_HAV_AnyPartyMemberInHaven(1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_HAV_AnyPartyMemberInHaven(1);

IF
LeftTrigger((GUIDSTRING)_Var1, (GUIDSTRING)_Var2, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_HAV_HavenAreas(_Var2, _Var1, _Var1, _Var1, _Var1)
AND
DB_PartyMembers(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_HAV_AnyPartyMemberInHaven(1, _Var1, _Var1, _Var1, _Var1)
AND NOT
QRY_HAV_AnyPartyMemberInHaven()
THEN
NOT DB_HAV_AnyPartyMemberInHaven(1);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "Act2"
