Version 1
SubGoalCombiner SGC_AND

INITSECTION
DB_ItemTemplateDialog(DEC_GEN_DjinnLamp_A_099ef425-5894-46a7-aa85-729c385dfcb8, GLO_PAD_DjinnLamp_c808c0d1-35e3-d36b-27a4-55a67581befe, 0);
DB_ItemTemplateDialog(DEC_GEN_DjinnLamp_B_066023fe-832e-4619-84cd-fad31edc386b, GLO_PAD_DjinnLamp_c808c0d1-35e3-d36b-27a4-55a67581befe, 0);
DB_ItemTemplateDialog(DEC_GEN_DjinnLamp_A_Activated_9fc2c59a-e53d-44dc-9270-63a0bf5418bf, GLO_PAD_DjinnLamp_c808c0d1-35e3-d36b-27a4-55a67581befe, 0);
DB_ItemTemplateDialog(DEC_GEN_Crate_Wood_Open_A_3815452b-af92-4a4b-a77d-15eb3b5a7263, GLO_PAD_Crate_Wood_Open_Interact_8f1099dc-16ec-1f96-6959-7666c804aa8f, 0);
DB_ItemTemplateDialog(DEC_GEN_Crate_Wood_Open_A_3815452b-af92-4a4b-a77d-15eb3b5a7263, GLO_PAD_Crate_Wood_Open_Interact_8f1099dc-16ec-1f96-6959-7666c804aa8f, 0);
DB_ItemTemplateDialog(DEC_GEN_WorldGlobe_B_94eec216-13d6-46b3-8065-1a21b05600f5, GLO_WorldGlobe_B_PAD_b225e148-3102-affe-7983-5fafa7b80a51, 0);
DB_ItemTemplateDialog(CONT_GEN_Globe_Rich_A_a05b9f7d-950a-4e73-9ce4-74ff71425362, GLO_Globe_Rich_A_PAD_b0dc959c-2168-925c-8039-5ee8412665e9, 0);
DB_ItemTemplateDialog(TOOL_GEN_Telescope_A_7dc63d8d-c4b7-49a1-906d-9dff56e805f8, GLO_Telescope_PAD_54d193f6-92c6-cc15-637d-2819ac6405f2, 0);
DB_ItemTemplateDialog(DEC_HAG_Cauldron_Gruel_A_e806bbdd-5f48-4c2d-a70d-8bb1f6131650, GLO_PAD_HagGruel_9610f441-7e00-5d3a-1eb7-1459e6da5501, 0);
DB_ItemTemplateDialog(DEC_HAG_Cauldron_Gruel_A_Boiling_A_e798fc3b-5856-47eb-bd46-1fa9dc5bebb6, GLO_PAD_HagGruel_9610f441-7e00-5d3a-1eb7-1459e6da5501, 0);
DB_ItemTemplateDialog(DEC_GEN_Circus_Poster_Large_A_11d9b6b9-fa1f-4fb1-8845-b7b880781d05, WYR_Circus_AD_Poster_830103fe-d684-84dc-b4fe-5b7859aff02d, 1);
DB_ItemTemplateDialog(DEC_HAR_Fish_Rack_Big_Fish_A_042be340-dc9c-4d35-9b14-c42118e24a7f, LOW_DocksFish_Narrator_AD_Fishes_524b14de-c8bc-311b-a2ad-753cc95f0210, 1);
DB_ItemTemplateDialog(DEC_HAR_Fish_Rack_Shark_A_f16e0845-19c4-4e8f-b6c6-da934c003d2b, LOW_DocksFish_Narrator_AD_Shark_517182e5-03f5-b437-f02d-d107a23d3fd9, 1);
DB_ItemTemplateDialog(DEC_HAR_Fish_Rack_Shark_B_85734327-aad0-4645-a05c-0215c349559b, LOW_DocksFish_Narrator_AD_Shark_517182e5-03f5-b437-f02d-d107a23d3fd9, 1);
DB_ItemTemplateDialog(BOOK_GEN_Paper_Gortash_Poster_A_9a5a9588-27c4-4e44-b8a2-0eeb0e932967, GLO_AD_GortashPoster_da403c4a-5532-4d12-464d-ced365e5ab2e, 1);
DB_ItemTemplateDialog(FUR_GEN_Mirror_Wood_A_4569b706-fe5f-4453-a62e-99d2f2506508, GEN_PAD_Mirror_57a87d95-5303-e7d9-2ec2-b40ec8f90f72, 0);
DB_ItemTemplateDialog(FUR_GEN_Mirror_Wood_A_Painted_052b7bba-fbbe-4d56-ab5b-b47cdfb82388, GEN_PAD_Mirror_57a87d95-5303-e7d9-2ec2-b40ec8f90f72, 0);
DB_ItemTemplateDialog(FUR_GEN_Mirror_Wood_Standing_A_5a5d9d08-4ad4-4651-b119-57c55252bbf8, GEN_PAD_Mirror_57a87d95-5303-e7d9-2ec2-b40ec8f90f72, 0);
DB_ItemTemplateDialog(FUR_GEN_Mirror_Wood_Standing_A_Painted_f0a8bf41-f21e-4289-8eb9-b034215f5a63, GEN_PAD_Mirror_57a87d95-5303-e7d9-2ec2-b40ec8f90f72, 0);
DB_ItemTemplateDialog(FUR_GEN_Mirror_Wood_Round_A_6b5eabad-12d4-48e1-8a9b-a9ac3edcabf1, GEN_PAD_Mirror_57a87d95-5303-e7d9-2ec2-b40ec8f90f72, 0);
DB_ItemTemplateDialog(FUR_GEN_Mirror_Wood_Round_A_Painted_98d4cb31-b160-41e8-97c3-8a96afb461a3, GEN_PAD_Mirror_57a87d95-5303-e7d9-2ec2-b40ec8f90f72, 0);
DB_ItemTemplateDialog(FUR_GEN_Mirror_Wood_Squared_A_0ea687eb-0fbf-4cde-8531-a99d1e0291f7, GEN_PAD_Mirror_57a87d95-5303-e7d9-2ec2-b40ec8f90f72, 0);
DB_ItemTemplateDialog(FUR_GEN_Mirror_Wood_Squared_A_Painted_1d15c7c5-bbce-4c41-8d13-d5a9a9677b0c, GEN_PAD_Mirror_57a87d95-5303-e7d9-2ec2-b40ec8f90f72, 0);
DB_GLO_GlobalItems_PitcherEffects(0, "DRINK_ALCOHOL", 10);
DB_GLO_GlobalItems_PitcherEffects(1, "CAUSTIC_BRINE", 1);
DB_GLO_GlobalItems_TeleportBoots_EquippedItemSlots("Helmet");
DB_GLO_GlobalItems_TeleportBoots_EquippedItemSlots("Breast");
DB_GLO_GlobalItems_TeleportBoots_EquippedItemSlots("Cloak");
DB_GLO_GlobalItems_TeleportBoots_EquippedItemSlots("Gloves");
DB_GLO_GlobalItems_TeleportBoots_EquippedItemSlots("VanityBody");
DB_GLO_GlobalItems_ThiefGloves_Coal(0, LOOT_GEN_Charcoal_A_99cc464d-8d7e-493a-bc63-fdfd365e813d);
DB_GLO_GlobalItems_ThiefGloves_Coal(1, LOOT_GEN_Charcoal_B_ee1edb85-6c14-4f26-9ccc-0443a3f37324);
DB_GLO_GlobalItems_ThiefGloves_Coal(2, LOOT_GEN_Charcoal_C_4c95f360-eda0-4cf8-87f4-12147a5b9d67);
DB_GLO_GlobalItems_ThiefGloves_Coal(3, LOOT_GEN_Charcoal_D_84630063-62f4-4e9a-a578-0b5808e90e3f);
DB_GLO_GlobalItems_ThiefGloves_Coal(4, LOOT_GEN_Charcoal_E_e409b155-a938-46b5-aaf9-5b493f90e6fd);

KBSECTION
IF
StatusApplied((GUIDSTRING)_Var1, "WYR_FACEPAINT_CLOWN", _, _, (GUIDSTRING)_Var1)
AND NOT
DB_GLO_GlobalItems_FacePaintApplied(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
DB_GLO_GlobalItems_FacePaintApplied(_Var1);
AddCustomMaterialOverride(_Var1, "84be66ac-53ae-4243-9436-aca6c8d8de32");

IF
StatusRemoved((GUIDSTRING)_Var1, "WYR_FACEPAINT_CLOWN", _, _, (GUIDSTRING)_Var1)
AND
DB_GLO_GlobalItems_FacePaintApplied(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_GlobalItems_FacePaintApplied(_Var1);
RemoveCustomMaterialOverride(_Var1, "84be66ac-53ae-4243-9436-aca6c8d8de32");

IF
TextEvent("testFacePaint", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
AddCustomMaterialOverride(_Var1, "84be66ac-53ae-4243-9436-aca6c8d8de32");

IF
TextEvent("removeFacePaint", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
GetHostCharacter(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
RemoveCustomMaterialOverride(_Var1, "84be66ac-53ae-4243-9436-aca6c8d8de32");

IF
OnThrown((GUIDSTRING)_Var1, UNI_WYR_Circus_HandaxeReturning_82999790-f80d-47f7-9383-9bb6cf57a10b, (GUIDSTRING)_Var2, _, _, _, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
_Var2 != NULL_00000000-0000-0000-0000-000000000000
AND NOT
DB_GLO_GlobalItems_ReturningThrower(_Var1, _, _Var1, _Var1, _Var1)
AND
IsCharacter(_Var2, 1, _Var1, _Var1, _Var1)
THEN
DB_GLO_GlobalItems_ReturningThrower(_Var1, _Var2);
UseSpell(NULL_00000000-0000-0000-0000-000000000000, "Throw_WYR_Circus_AxeThrow", _Var2, _Var1);

IF
OnThrown((GUIDSTRING)_Var1, UNI_WYR_Circus_HandaxeReturning_82999790-f80d-47f7-9383-9bb6cf57a10b, NULL_00000000-0000-0000-0000-000000000000, _, _, _, _, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1, (GUIDSTRING)_Var1)
AND
DB_GLO_GlobalItems_ReturningThrower(_Var1, _Var6, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_GlobalItems_ReturningThrower(_Var1, _Var6);
ToInventory(_Var1, _Var6, 1, 1, 1);

IF
CastSpellFailed((GUIDSTRING)_Var1, "Throw_WYR_Circus_AxeThrow", _, _, _)
AND
DB_GLO_GlobalItems_ReturningThrower(_Var1, _Var5, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_GlobalItems_ReturningThrower(_Var1, _Var5);

IF
TemplateUseFinished((CHARACTER)_Var1, UNI_WYR_Circus_Pitcher_9ee5433b-ce71-4de4-871d-04f918c318ae, (ITEM)_Var2, _, (CHARACTER)_Var1)
AND NOT
DB_GLO_GlobalItems_Pitchers(_Var2, _, _Var1, _Var1, _Var1)
AND
DB_GLO_GlobalItems_PitcherEffects(1, _Var5, _, _Var1, _Var1)
THEN
DB_GLO_GlobalItems_Pitchers(_Var2, _Var5);

IF
TemplateUseFinished((CHARACTER)_Var1, UNI_WYR_Circus_Pitcher_9ee5433b-ce71-4de4-871d-04f918c318ae, (ITEM)_Var2, _, (CHARACTER)_Var1)
AND
DB_GLO_GlobalItems_Pitchers(_Var2, _Var4, _Var1, _Var1, _Var1)
AND
DB_GLO_GlobalItems_PitcherEffects(_, _Var4, _Var6, _Var1, _Var1)
THEN
ApplyStatus(_Var1, _Var4, _Var6);

PROC
PROC_LongRest()
AND
DB_GLO_GlobalItems_Pitchers(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
Random(2, _Var3, _Var1, _Var1, _Var1)
AND
DB_GLO_GlobalItems_PitcherEffects(_Var3, _Var4, _, _Var1, _Var1)
THEN
NOT DB_GLO_GlobalItems_Pitchers(_Var1, _Var2);
DB_GLO_GlobalItems_Pitchers(_Var1, _Var4);

IF
UsingSpell((CHARACTER)_Var1, "Target_WYR_Circus_TeleportBoots_MistyStep", _, _, _)
AND
DB_GLO_GlobalItems_TeleportBoots_WaitsForTheTimer(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_GlobalItems_TeleportBoots_WaitsForTheTimer(_Var1);
RealtimeObjectTimerCancel(_Var1, "GLO_GlobalItems_TeleportBoots_Timer");

IF
UsingSpell((CHARACTER)_Var1, "Target_WYR_Circus_TeleportBoots_MistyStep", _, _, _)
AND
DB_GLO_GlobalItems_TeleportBoots_WaitsToBeUnequipped(_Var1, _Var5, _Var6, _Var7, _Var8)
THEN
NOT DB_GLO_GlobalItems_TeleportBoots_WaitsToBeUnequipped(_Var1, _Var5, _Var6, _Var7, _Var8);

IF
UsingSpell((CHARACTER)_Var1, "Target_WYR_Circus_TeleportBoots_MistyStep", _, _, _)
AND
GetPosition(_Var1, _Var5, _Var6, _Var7, _Var1)
AND
DB_GLO_GlobalItems_TeleportBoots_EquippedItemSlots(_Var8, _Var1, _Var1, _Var1, _Var1)
AND
GetEquippedItem(_Var1, _Var8, _Var9, _Var1, _Var1)
THEN
DB_GLO_GlobalItems_TeleportBoots_WaitsToBeUnequipped(_Var1, _Var9, _Var5, _Var6, _Var7);
DB_GLO_GlobalItems_TeleportBoots_WaitsForTheTimer(_Var1);
RealtimeObjectTimerLaunch(_Var1, "GLO_GlobalItems_TeleportBoots_Timer", 500);

IF
ObjectTimerFinished((CHARACTER)_Var1, "GLO_GlobalItems_TeleportBoots_Timer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GLO_GlobalItems_TeleportBoots_WaitsForTheTimer(_Var1, _Var1, _Var1, _Var1, _Var1)
AND
DB_GLO_GlobalItems_TeleportBoots_WaitsToBeUnequipped(_Var1, _Var2, _Var3, _Var4, _Var5)
THEN
Unequip(_Var1, _Var2);

IF
ObjectTimerFinished((CHARACTER)_Var1, "GLO_GlobalItems_TeleportBoots_Timer", (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GLO_GlobalItems_TeleportBoots_WaitsForTheTimer(_Var1, _Var1, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_GlobalItems_TeleportBoots_WaitsForTheTimer(_Var1);

IF
Unequipped((ITEM)_Var1, (CHARACTER)_Var2, (ITEM)_Var1, (ITEM)_Var1, (ITEM)_Var1)
AND
DB_GLO_GlobalItems_TeleportBoots_WaitsToBeUnequipped(_Var2, _Var1, _Var3, _Var4, _Var5)
THEN
NOT DB_GLO_GlobalItems_TeleportBoots_WaitsToBeUnequipped(_Var2, _Var1, _Var3, _Var4, _Var5);
ScatterAt(_Var1, _Var3, _Var4, _Var5);

IF
CharacterStoleItem((CHARACTER)_Var1, _, _, _, _, _, _, _, (INTEGER)_Var9, _)
AND
_Var9 > 0
AND
IsTagged(_Var1, ACT3_WYR_CIRCUS_THIEFGLOVES_3777b973-c1d2-45db-9c3b-f055cfc4dc6f, 1, _Var1, _Var1)
THEN
PROC_GLO_GlobalItems_GiveCoal(_Var1);

IF
CharacterPickpocketSuccess((CHARACTER)_Var1, _, _, _, (INTEGER)_Var5, _, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
_Var5 > 0
AND
IsTagged(_Var1, ACT3_WYR_CIRCUS_THIEFGLOVES_3777b973-c1d2-45db-9c3b-f055cfc4dc6f, 1, _Var1, _Var1)
THEN
PROC_GLO_GlobalItems_GiveCoal(_Var1);

PROC
PROC_GLO_GlobalItems_GiveCoal((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND NOT
DB_GLO_GlobalItems_ThiefGloves_CoalsTotal(_Var1, _, _Var1, _Var1, _Var1)
THEN
DB_GLO_GlobalItems_ThiefGloves_CoalsTotal(_Var1, 0);

PROC
PROC_GLO_GlobalItems_GiveCoal((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GLO_GlobalItems_ThiefGloves_CoalsTotal(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
_Var2 >= 20
AND
CreateAtObject(LOOT_Bathroom_Bucket_Coals_A_d9aa2e72-03c0-4b77-aca0-638ce2ba948a, _Var1, 0, 0, "", 0, _Var3, _Var1, _Var1, _Var1)
THEN
NOT DB_GLO_GlobalItems_ThiefGloves_CoalsTotal(_Var1, _Var2);
ToInventory(_Var3, _Var1, 1, 1, 1);
ApplyStatus(_Var1, "BURNING", 6, 0, NULL_00000000-0000-0000-0000-000000000000);

PROC
PROC_GLO_GlobalItems_GiveCoal((CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1, (CHARACTER)_Var1)
AND
DB_GLO_GlobalItems_ThiefGloves_CoalsTotal(_Var1, _Var2, _Var1, _Var1, _Var1)
AND
_Var2 < 20
AND
Random(5, _Var3, _Var1, _Var1, _Var1)
AND
DB_GLO_GlobalItems_ThiefGloves_Coal(_Var3, _Var4, _Var1, _Var1, _Var1)
AND
CreateAtObject(_Var4, _Var1, 0, 0, "", 0, _Var5, _Var1, _Var1, _Var1)
AND
IntegerSum(_Var2, 1, _Var6, _Var1, _Var1)
THEN
ToInventory(_Var5, _Var1, 1, 1, 1);
NOT DB_GLO_GlobalItems_ThiefGloves_CoalsTotal(_Var1, _Var2);
DB_GLO_GlobalItems_ThiefGloves_CoalsTotal(_Var1, _Var6);


EXITSECTION
ENDEXITSECTION

ParentTargetEdge "ModWrapper_Gustav"
